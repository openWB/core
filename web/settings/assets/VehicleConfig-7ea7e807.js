import{l as x,a6 as ae,a7 as ie,F as O,_ as R,S as I,E as H,G as j,an as J,am as G,ap as re,aq as ue,ah as $,al as Q,aa as X,d as de,a0 as oe,ao as se,R as me,M as ge}from"./vendor-fortawesome-855c7d62.js";import{_ as w,C as Y}from"./index-82d2b997.js";import{_ as pe}from"./dynamic-import-helper-be004503.js";import{_ as q,u as b,l as o,m as h,x as f,E as a,B as i,F as k,G as l,A as p,a2 as he,a3 as ce,N as L,q as ee,y as B,z as s,M as T,D as Z}from"./vendor-cc4615be.js";import{V as be}from"./VehicleIdWikiHint-9bf87407.js";const fe={props:{vehicleId:{required:!0,type:Number},vehicle:{required:!0,type:Object}},emits:["update:configuration"],methods:{updateConfiguration(n,e=void 0){this.$emit("update:configuration",{value:n,object:e})}}},ve=q(fe,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/VehicleConfigMixin.vue"]]),_e={name:"VehicleConfigFallback",mixins:[ve]},Ve={class:"vehicle-fallback"},we={key:1};function ke(n,e,v,E,S,t){const y=b("openwb-base-alert"),c=b("openwb-base-textarea");return o(),h("div",Ve,[Object.keys(n.vehicle.configuration).length==0?(o(),f(y,{key:0,subtype:"info"},{default:a(()=>[i(' Der Fahrzeug-Typ "'+k(n.vehicle.type)+'" bietet keine Einstellungen. ',1)]),_:1})):(o(),h("div",we,[l(y,{subtype:"warning"},{default:a(()=>[i(' Es wurde keine Konfigurationsseite für den Fahrzeug-Typ "'+k(n.vehicle.type)+'" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ',1)]),_:1}),l(c,{title:"Konfiguration",subtype:"json","model-value":n.vehicle.configuration,"onUpdate:modelValue":e[0]||(e[0]=z=>n.updateConfiguration(z,"configuration"))},{help:a(()=>e[1]||(e[1]=[i(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ",-1)])),_:1},8,["model-value"]),l(y,{subtype:"info"},{default:a(()=>[p("pre",null,k(JSON.stringify(n.vehicle.configuration,void 0,2)),1)]),_:1})]))])}const ze=q(_e,[["render",ke],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/OpenwbVehicleConfigFallback.vue"]]);x.add(ae,ie);const Ce={name:"OpenwbVehicleProxy",components:{FontAwesomeIcon:O},props:{vehicleId:{type:Number,required:!0},vehicle:{type:Object,required:!0}},emits:["update:configuration"],methods:{getVehicleComponent(){return console.debug(`loading vehicle: ${this.vehicle.type}`),he({loader:()=>pe(Object.assign({"./aiways/vehicle.vue":()=>w(()=>import("./vehicle-b6c502e6.js"),["assets/vehicle-b6c502e6.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./bmwbc/vehicle.vue":()=>w(()=>import("./vehicle-36c32dc7.js"),["assets/vehicle-36c32dc7.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./cupra/vehicle.vue":()=>w(()=>import("./vehicle-05aa95e7.js"),["assets/vehicle-05aa95e7.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./evcc/vehicle.vue":()=>w(()=>import("./vehicle-65b8b766.js"),["assets/vehicle-65b8b766.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./evnotify/vehicle.vue":()=>w(()=>import("./vehicle-5b54c56b.js"),["assets/vehicle-5b54c56b.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./http/vehicle.vue":()=>w(()=>import("./vehicle-4d2386a6.js"),["assets/vehicle-4d2386a6.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./json/vehicle.vue":()=>w(()=>import("./vehicle-50de9af0.js"),["assets/vehicle-50de9af0.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./kia/vehicle.vue":()=>w(()=>import("./vehicle-4f0d257b.js"),["assets/vehicle-4f0d257b.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./leaf/vehicle.vue":()=>w(()=>import("./vehicle-a0f1f598.js"),["assets/vehicle-a0f1f598.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./manual/vehicle.vue":()=>w(()=>import("./vehicle-9dc09b0d.js"),["assets/vehicle-9dc09b0d.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./mercedeseq/vehicle.vue":()=>w(()=>import("./vehicle-12853e24.js"),["assets/vehicle-12853e24.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./mqtt/vehicle.vue":()=>w(()=>import("./vehicle-8983e012.js"),["assets/vehicle-8983e012.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./ovms/vehicle.vue":()=>w(()=>import("./vehicle-62bc42dd.js"),["assets/vehicle-62bc42dd.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./psa/vehicle.vue":()=>w(()=>import("./vehicle-8eb41a7b.js"),["assets/vehicle-8eb41a7b.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./psacc/vehicle.vue":()=>w(()=>import("./vehicle-bb28ab8a.js"),["assets/vehicle-bb28ab8a.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./renault/vehicle.vue":()=>w(()=>import("./vehicle-c74fa86b.js"),["assets/vehicle-c74fa86b.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./skoda/vehicle.vue":()=>w(()=>import("./vehicle-b345ac7b.js"),["assets/vehicle-b345ac7b.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./smarthello/vehicle.vue":()=>w(()=>import("./vehicle-bba9b5b2.js"),["assets/vehicle-bba9b5b2.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./tesla/vehicle.vue":()=>w(()=>import("./vehicle-1cbf74fd.js"),["assets/vehicle-1cbf74fd.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-axios-3dcaeec5.js","assets/index-82d2b997.js","assets/vendor-fortawesome-855c7d62.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./tronity/vehicle.vue":()=>w(()=>import("./vehicle-32af9cd1.js"),["assets/vehicle-32af9cd1.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./vwid/vehicle.vue":()=>w(()=>import("./vehicle-c78edd22.js"),["assets/vehicle-c78edd22.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-855c7d62.js","assets/index-82d2b997.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"])}),`./${this.vehicle.type}/vehicle.vue`),errorComponent:ze})},updateConfiguration(n){this.$emit("update:configuration",n)}}};function Se(n,e,v,E,S,t){const y=b("font-awesome-icon"),c=b("openwb-base-alert"),z=b("openwb-base-heading");return o(),h(L,null,[v.vehicle.official?(o(),f(c,{key:0,subtype:"info"},{default:a(()=>[l(y,{icon:["fas","certificate"]}),i(' Das ausgewählte Fahrzeug-Modul "'+k(v.vehicle.name)+'" wird von openWB gepflegt. ',1)]),_:1})):(o(),f(c,{key:1,subtype:"info"},{default:a(()=>[l(y,{icon:["fas","people-group"]}),i(' Das ausgewählte Fahrzeug-Modul "'+k(v.vehicle.name)+'" wird in unserer Community gepflegt. Rückfragen oder Probleme bitte im Forum diskutieren. ',1)]),_:1})),l(z,null,{default:a(()=>[i(' Einstellungen für SoC-Modul "'+k(v.vehicle.name)+'" ',1)]),_:1}),(o(),f(ce(t.getVehicleComponent()),{"vehicle-id":v.vehicleId,vehicle:v.vehicle,"onUpdate:configuration":e[0]||(e[0]=V=>t.updateConfiguration(V))},null,40,["vehicle-id","vehicle"]))],64)}const ye=q(Ce,[["render",Se],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/OpenwbVehicleProxy.vue"]]);x.add(R,I,H,j,J,G,re,ue,$,Q,X);const Ue={name:"VehicleScheduledChargingPlan",components:{FontAwesomeIcon:O},mixins:[Y],props:{modelValue:{type:Object,required:!0},templateId:{type:Number,required:!0},dcChargingEnabled:{type:Boolean,default:!1}},emits:["update:modelValue","sendCommand"],data(){return{mqttTopicsToSubscribe:["openWB/optional/et/provider"],showRemoveModal:!1}},computed:{plan(){return this.modelValue}},watch:{plan:{handler(n){this.$emit("update:modelValue",n)},deep:!0}},methods:{copyPlan(){this.$emit("sendCommand",{command:"addChargeTemplateSchedulePlan",data:{template:this.templateId,copy:this.modelValue.id}})},removePlanModal(){this.showRemoveModal=!0},removePlan(n){this.showRemoveModal=!1,n=="confirm"&&this.$emit("sendCommand",{command:"removeChargeTemplateSchedulePlan",data:{template:this.templateId,plan:this.modelValue.id}})}}},Ee={key:0},Pe={key:1},Ae={key:2},Le={key:3},We={key:4},Be={key:5},Fe={key:1},Me={key:4},Te={key:7};function De(n,e,v,E,S,t){const y=b("openwb-base-modal-dialog"),c=b("font-awesome-icon"),z=b("openwb-base-avatar"),V=b("openwb-base-text-input"),C=b("openwb-base-button-group-input"),W=b("openwb-base-range-input"),F=b("openwb-base-number-input"),D=b("openwb-base-alert"),g=b("openwb-base-card");return o(),h(L,null,[l(y,{show:S.showRemoveModal,title:"Zielladen Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:t.removePlan},{default:a(()=>[i(' Wollen Sie den Zielladen Zeitplan "'+k(t.plan.name)+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show","onModalResult"]),l(g,{title:t.plan.name,collapsible:!0,collapsed:!0},{actions:a(m=>[m.collapsed==!0?(o(),h("span",{key:0,class:ee(["pill clickable",t.plan.active?"bg-success":"bg-danger"]),onClick:e[0]||(e[0]=B(_=>t.plan.active=!t.plan.active,["stop"]))},[t.plan.limit.selected=="soc"?(o(),h("span",Ee,[l(c,{icon:["fas","car-battery"]}),i(" "+k(t.plan.limit.soc_scheduled)+"% ",1),l(c,{icon:["fas",t.plan.bidi?"right-left":"right-long"]},null,8,["icon"]),i(" "+k(t.plan.limit.soc_limit)+"% ",1)])):s("",!0),t.plan.limit.selected=="amount"?(o(),h("span",Pe,[l(c,{icon:["fas","bolt"]}),i(" "+k(t.plan.limit.amount/1e3)+"kWh ",1)])):s("",!0),l(c,{icon:["fas","clock"]}),i(" "+k(t.plan.time)+" ",1),t.plan.frequency.selected=="once"?(o(),h("span",Ae,[l(c,{icon:["fas","calendar-day"]}),i(" "+k(n.formatDate(t.plan.frequency.once)),1)])):s("",!0),t.plan.frequency.selected=="daily"?(o(),h("span",Le,[l(c,{icon:["fas","calendar-week"]})])):s("",!0),t.plan.frequency.selected=="weekly"?(o(),h("span",We,[l(c,{icon:["fas","calendar-alt"]})])):s("",!0),t.plan.et_active?(o(),h("span",Be,[l(c,{icon:["fas","coins"]})])):s("",!0)],2)):s("",!0),m.collapsed==!1?(o(),h("span",Fe,[l(z,{class:"bg-success clickable ml-1",title:"Zielladen-Plan duplizieren",onClick:e[1]||(e[1]=B(_=>t.copyPlan(),["stop"]))},{default:a(()=>[l(c,{icon:["fas","copy"]})]),_:1}),l(z,{class:"bg-danger clickable ml-1",title:"Zielladen-Plan löschen",onClick:e[2]||(e[2]=B(_=>t.removePlanModal(),["stop"]))},{default:a(()=>[l(c,{icon:["fas","trash"]})]),_:1})])):s("",!0)]),default:a(()=>[l(V,{modelValue:t.plan.name,"onUpdate:modelValue":e[3]||(e[3]=m=>t.plan.name=m),title:"Bezeichnung"},null,8,["modelValue"]),l(C,{modelValue:t.plan.active,"onUpdate:modelValue":e[4]||(e[4]=m=>t.plan.active=m),title:"Zeitpunkt aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},null,8,["modelValue"]),l(V,{modelValue:t.plan.time,"onUpdate:modelValue":e[5]||(e[5]=m=>t.plan.time=m),title:"Ziel-Uhrzeit",subtype:"time"},{help:a(()=>e[19]||(e[19]=[i(" Hier ist die gewünschte Uhrzeit einzustellen, zu welcher das Fahrzeug den gewünschten SoC bzw. die zu ladende Energiemenge BEREITS ERREICHT haben soll. ",-1)])),_:1},8,["modelValue"]),l(C,{modelValue:t.plan.limit.selected,"onUpdate:modelValue":e[6]||(e[6]=m=>t.plan.limit.selected=m),title:"Ziel",buttons:[{buttonValue:"soc",text:"Fahrzeug-SoC"},{buttonValue:"amount",text:"Energie"}]},{help:a(()=>e[20]||(e[20]=[i(" Bestimmt die Art der Grenze für den Ladevorgang. ",-1)])),_:1},8,["modelValue"]),t.plan.limit.selected=="soc"?(o(),f(W,{key:0,modelValue:t.plan.limit.soc_scheduled,"onUpdate:modelValue":e[7]||(e[7]=m=>t.plan.limit.soc_scheduled=m),title:"Fahrzeug-SoC zum Zielzeitpunkt",min:5,max:100,step:5,unit:"%"},{help:a(()=>e[21]||(e[21]=[i(" SoC, der zum angegebenen Zeitpunkt erreicht werden soll (Ziel-SoC). ",-1)])),_:1},8,["modelValue"])):s("",!0),t.plan.limit.selected=="soc"?(o(),f(W,{key:1,modelValue:t.plan.limit.soc_limit,"onUpdate:modelValue":e[8]||(e[8]=m=>t.plan.limit.soc_limit=m),title:"Fahrzeug-SoC mit Überschuss",min:5,max:100,step:5,unit:"%"},{help:a(()=>e[22]||(e[22]=[i(" Nach Erreichen des Ziel-SoCs wird mit Überschuss weiter geladen, bis das SoC-Limit erreicht wird. Sobald das SoC-Limit erreicht wurde, findet keine Ladung mehr mit Überschuss statt! ",-1)])),_:1},8,["modelValue"])):s("",!0),t.plan.limit.selected=="amount"?(o(),f(F,{key:2,title:"Ziel-Energie",unit:"kWh",min:1,step:.5,"model-value":t.plan.limit.amount/1e3,"onUpdate:modelValue":e[9]||(e[9]=m=>t.plan.limit.amount=m*1e3)},{help:a(()=>e[23]||(e[23]=[i(" Die geladene Energiemenge wird beim Wechsel des Lademodus, Wechsel des Plans oder nach dem Anstecken, wenn Zielladen schon ausgewählt ist, neu gezählt. ",-1)])),_:1},8,["model-value"])):s("",!0),e[31]||(e[31]=p("hr",null,null,-1)),l(C,{modelValue:t.plan.frequency.selected,"onUpdate:modelValue":e[10]||(e[10]=m=>t.plan.frequency.selected=m),title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}]},null,8,["modelValue"]),t.plan.frequency.selected=="once"?(o(),f(V,{key:3,modelValue:t.plan.frequency.once,"onUpdate:modelValue":e[11]||(e[11]=m=>t.plan.frequency.once=m),title:"Datum",subtype:"date"},null,8,["modelValue"])):s("",!0),t.plan.frequency.selected=="weekly"?(o(),h("div",Me,[(o(!0),h(L,null,T(n.weekdays,(m,_)=>(o(),f(C,{key:_,modelValue:t.plan.frequency.weekly[_],"onUpdate:modelValue":N=>t.plan.frequency.weekly[_]=N,title:m,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}]},null,8,["modelValue","onUpdate:modelValue","title"]))),128))])):s("",!0),e[32]||(e[32]=p("hr",null,null,-1)),l(C,{modelValue:t.plan.et_active,"onUpdate:modelValue":e[12]||(e[12]=m=>t.plan.et_active=m),title:"Strompreisbasiert Laden",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},null,8,["modelValue"]),t.plan.et_active==!0&&(!n.$store.state.mqtt["openWB/optional/et/provider"]||!n.$store.state.mqtt["openWB/optional/et/provider"].type)?(o(),f(D,{key:5,subtype:"danger"},{default:a(()=>e[24]||(e[24]=[i(" Bitte in den übergreifenden Ladeeinstellungen einen Strompreis-Anbieter konfigurieren. ",-1)])),_:1,__:[24]})):s("",!0),l(C,{modelValue:t.plan.phases_to_use,"onUpdate:modelValue":e[13]||(e[13]=m=>t.plan.phases_to_use=m),title:"Anzahl Phasen Zielladen",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"},{buttonValue:0,text:"Automatik"}]},{help:a(()=>e[25]||(e[25]=[i(' Hier kann eingestellt werden, ob Ladevorgänge im Modus "Zielladen" mit nur einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Im Modus "Automatik" entscheidet die Regelung, welche Einstellung genutzt wird, um das Ziel zu erreichen. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen 1- und 3-phasig (sog. 1p3p). ',-1)])),_:1},8,["modelValue"]),l(C,{modelValue:t.plan.phases_to_use_pv,"onUpdate:modelValue":e[14]||(e[14]=m=>t.plan.phases_to_use_pv=m),title:"Anzahl Phasen bei PV-Überschuss",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"},{buttonValue:0,text:"Automatik"}]},{help:a(()=>e[26]||(e[26]=[i(' Hier kann eingestellt werden, ob Ladevorgänge im Modus "Zielladen" bei Laden mit PV-Überschuss mit nur einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Im Modus "Automatik" entscheidet die Regelung, welche Einstellung genutzt wird, um das Ziel zu erreichen. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen 1- und 3-phasig (sog. 1p3p). ',-1)])),_:1},8,["modelValue"]),l(W,{modelValue:t.plan.current,"onUpdate:modelValue":e[15]||(e[15]=m=>t.plan.current=m),title:`Ladestrom${v.dcChargingEnabled?" (AC)":""}`,min:6,max:32,step:1,unit:"A"},{help:a(()=>e[27]||(e[27]=[i(" Mit dieser Stromstärke wird der Zeitpunkt berechnet, wann die Ladung mit Netzbezug gestartet werden muss. Wird der Ziel-SoC nicht zum angegebenen Termin erreicht, weil z.B. das Auto erst später angesteckt wurde, wird auch mit einer höheren Stromstärke geladen. Um etwas Puffer zu haben, empfiehlt es sich, etwas weniger als die Maximalstromstärke des Fahrzeugs zu wählen. ",-1)])),_:1},8,["modelValue","title"]),v.dcChargingEnabled===!0?(o(),f(F,{key:6,title:"Ladeleistung (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(t.plan.dc_current),"onUpdate:modelValue":e[16]||(e[16]=m=>t.plan.dc_current=n.dc_power2ac_current(m))},null,8,["model-value"])):s("",!0),t.plan.limit.selected=="soc"?(o(),h("div",Te,[e[30]||(e[30]=p("hr",null,null,-1)),l(C,{modelValue:t.plan.bidi_charging_enabled,"onUpdate:modelValue":e[17]||(e[17]=m=>t.plan.bidi_charging_enabled=m),title:"Bidirektionales Überschussladen bei kompatiblem Ladepunkt&Fahrzeug",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},{help:a(()=>e[28]||(e[28]=[i(" Wenn Ladepunkt und Fahrzeug bidirektionales Laden unterstützen, wird bis zum Fahrzug-SoC zum Zielzeitpunkt wie gewohnt mit Zielladen geladen. Ist der eingestellte SoC erreicht, wird eine Nullpunktausregelung gemacht, dh das Auto wird so ge- und entladen, dass möglichst weder Bezug noch Einspeisung entsteht. Der SoC wird dabei immer zwischen Fahrzeug-SoC zum Zielzeitpunkt und Fahrzeug-SoC mit Überschuss gehalten. ",-1),p("br",null,null,-1),i(" Unterstützen das Fahrzeug und/oder der Ladepunkt kein bidirektionales Laden, hat diese Einstellung keine Auswirkung. ",-1)])),_:1},8,["modelValue"]),t.plan.bidi_charging_enabled===!0?(o(),f(D,{key:0,subtype:"info"},{default:a(()=>e[29]||(e[29]=[i(" Die Norm IEC 61851-1 und ISO 15118 benötigen als Parameter eine Stromstärke und die Phasenzahl. Die Norm ISO 15118-20, die das bidirektionale Laden definiert, benötigt als Parameter eine Ladeleistung. Die Phasenzahl legt das Fahrzeug fest. Wenn Fahrzeug und Ladepunkt bidirektionales Laden nach ISO 15118-20 unterstützen, wird die eingestellte Ladeleistung verwendet. Unterstützen das Fahrzeug und/oder der Ladepunkt die Norm nicht, wird der Ladestrom und die vorgegebene Phasenzahl angewendet. ",-1)])),_:1,__:[29]})):s("",!0),t.plan.bidi_charging_enabled===!0?(o(),f(F,{key:1,title:"Ladeleistung",min:1,max:22,step:.5,unit:"kW","model-value":t.plan.bidi_power/1e3,"onUpdate:modelValue":e[18]||(e[18]=m=>n.updateState(n.templateKey,m*1e3,"plan.bidi_power"))},null,8,["model-value"])):s("",!0)])):s("",!0)]),_:1,__:[31,32]},8,["title"])],64)}const qe=q(Ue,[["render",De],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/ChargeTemplateScheduledChargingPlan.vue"]]);x.add(R,I,H,j,J,G,Q,X);const Ze={name:"ChargeTemplateTimeChargingPlan",components:{FontAwesomeIcon:O},mixins:[Y],props:{modelValue:{type:Object,required:!0},templateId:{type:Number,required:!0},dcChargingEnabled:{type:Boolean,default:!1}},emits:["update:modelValue","sendCommand"],data(){return{mqttTopicsToSubscribe:["openWB/optional/dc_charging"],showRemoveModal:!1}},computed:{plan(){return this.modelValue}},watch:{plan:{handler(n){this.$emit("update:modelValue",n)},deep:!0}},methods:{copyPlan(){this.$emit("sendCommand",{command:"addChargeTemplateTimeChargingPlan",data:{template:this.templateId,copy:this.modelValue.id}})},removePlanModal(){this.showRemoveModal=!0},removePlan(n){this.showRemoveModal=!1,n=="confirm"&&this.$emit("sendCommand",{command:"removeChargeTemplateTimeChargingPlan",data:{template:this.templateId,plan:this.modelValue.id}})}}},xe={key:0},Oe={key:1},Ne={key:2},Re={key:3},Ie={key:4},He={key:1},je={key:3};function Je(n,e,v,E,S,t){const y=b("openwb-base-modal-dialog"),c=b("font-awesome-icon"),z=b("openwb-base-avatar"),V=b("openwb-base-text-input"),C=b("openwb-base-button-group-input"),W=b("openwb-base-range-input"),F=b("openwb-base-number-input"),D=b("openwb-base-card");return o(),h(L,null,[l(y,{show:S.showRemoveModal,title:"Zeitladen Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:t.removePlan},{default:a(()=>[i(' Wollen Sie den Zeitladen Zeitplan "'+k(t.plan.name)+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show","onModalResult"]),l(D,{title:t.plan.name,collapsible:!0,collapsed:!0},{actions:a(g=>[g.collapsed==!0?(o(),h("span",{key:0,class:ee(["pill clickable",t.plan.active?"bg-success":"bg-danger"]),onClick:e[0]||(e[0]=B(m=>t.plan.active=!t.plan.active,["stop"]))},[t.plan.limit.selected=="soc"?(o(),h("span",xe,[l(c,{icon:["fas","car-battery"]}),i(" "+k(t.plan.limit.soc)+"% ",1)])):s("",!0),t.plan.limit.selected=="amount"?(o(),h("span",Oe,[l(c,{icon:["fas","bolt"]}),i(" "+k(t.plan.limit.amount/1e3)+"kWh ",1)])):s("",!0),l(c,{icon:["fas","clock"]}),i(" "+k(t.plan.time[0])+" - "+k(t.plan.time[1])+" ",1),t.plan.frequency.selected=="once"?(o(),h("span",Ne,[l(c,{icon:["fas","calendar-day"]}),i(" "+k(n.formatDate(t.plan.frequency.once[0])==n.formatDate(t.plan.frequency.once[1])?n.formatDate(t.plan.frequency.once[0]):n.formatDate(t.plan.frequency.once[0])+" - "+n.formatDate(t.plan.frequency.once[1])),1)])):s("",!0),t.plan.frequency.selected=="daily"?(o(),h("span",Re,[l(c,{icon:["fas","calendar-week"]})])):s("",!0),t.plan.frequency.selected=="weekly"?(o(),h("span",Ie,[l(c,{icon:["fas","calendar-alt"]})])):s("",!0)],2)):s("",!0),g.collapsed==!1?(o(),h("span",He,[l(z,{class:"bg-success clickable",title:"Zeitladen-Plan duplizieren",onClick:e[1]||(e[1]=B(m=>t.copyPlan(),["stop"]))},{default:a(()=>[l(c,{icon:["fas","copy"]})]),_:1}),l(z,{class:"bg-danger clickable ml-1",title:"Zeitladen-Plan löschen",onClick:e[2]||(e[2]=B(m=>t.removePlanModal(),["stop"]))},{default:a(()=>[l(c,{icon:["fas","trash"]})]),_:1})])):s("",!0)]),default:a(()=>[l(V,{modelValue:t.plan.name,"onUpdate:modelValue":e[3]||(e[3]=g=>t.plan.name=g),title:"Bezeichnung"},null,8,["modelValue"]),l(C,{modelValue:t.plan.active,"onUpdate:modelValue":e[4]||(e[4]=g=>t.plan.active=g),title:"Zeitplan aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},null,8,["modelValue"]),l(W,{modelValue:t.plan.current,"onUpdate:modelValue":e[5]||(e[5]=g=>t.plan.current=g),title:`Ladestrom${v.dcChargingEnabled?" (AC)":""}`,min:6,max:32,step:1,unit:"A"},null,8,["modelValue","title"]),v.dcChargingEnabled===!0?(o(),f(F,{key:0,title:"Ladeleistung (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(t.plan.dc_current),"onUpdate:modelValue":e[6]||(e[6]=g=>t.plan.dc_current=n.dc_power2ac_current(g))},null,8,["model-value"])):s("",!0),l(C,{modelValue:t.plan.limit.selected,"onUpdate:modelValue":e[7]||(e[7]=g=>t.plan.limit.selected=g),title:"Begrenzung",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"Fahrzeug-SoC"},{buttonValue:"amount",text:"Energie"}]},{help:a(()=>e[16]||(e[16]=[i(" Bestimmt die Art der Grenze für den Ladevorgang. ",-1)])),_:1},8,["modelValue"]),l(W,{modelValue:t.plan.limit.soc,"onUpdate:modelValue":e[8]||(e[8]=g=>t.plan.limit.soc=g),title:"Ziel-SoC für das Fahrzeug",min:5,max:100,step:5,unit:"%"},{help:a(()=>e[17]||(e[17]=[i(" Ladestand des Akku (State of Charge, SoC), bis zu welchem maximal geladen werden soll. ",-1)])),_:1},8,["modelValue"]),l(F,{title:"Ziel-Energie",unit:"kWh",min:1,step:.5,"model-value":t.plan.limit.amount/1e3,"onUpdate:modelValue":e[9]||(e[9]=g=>t.plan.limit.amount=g*1e3)},{help:a(()=>e[18]||(e[18]=[i(" Maximal zu ladende Energie innerhalb des Zeitfensters. Eignet sich immer dann wenn kein SoC zur Verfügung steht. Die geladene Energiemenge wird beim Wechsel des Lademodus, Wechsel des Plans oder nach dem Anstecken, wenn Zeitladen schon aktiv ist, neu gezählt. ",-1)])),_:1},8,["model-value"]),e[20]||(e[20]=p("hr",null,null,-1)),l(V,{modelValue:t.plan.time[0],"onUpdate:modelValue":e[10]||(e[10]=g=>t.plan.time[0]=g),title:"Zeitpunkt des Ladebeginns",subtype:"time"},null,8,["modelValue"]),l(V,{modelValue:t.plan.time[1],"onUpdate:modelValue":e[11]||(e[11]=g=>t.plan.time[1]=g),title:"Zeitpunkt des Ladeendes",subtype:"time"},null,8,["modelValue"]),l(C,{modelValue:t.plan.frequency.selected,"onUpdate:modelValue":e[12]||(e[12]=g=>t.plan.frequency.selected=g),title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}]},null,8,["modelValue"]),t.plan.frequency.selected=="once"?(o(),f(V,{key:1,modelValue:t.plan.frequency.once[0],"onUpdate:modelValue":e[13]||(e[13]=g=>t.plan.frequency.once[0]=g),title:"Gültig ab",subtype:"date"},null,8,["modelValue"])):s("",!0),t.plan.frequency.selected=="once"?(o(),f(V,{key:2,modelValue:t.plan.frequency.once[1],"onUpdate:modelValue":e[14]||(e[14]=g=>t.plan.frequency.once[1]=g),title:"Gültig bis",subtype:"date",min:t.plan.frequency.once[0]},null,8,["modelValue","min"])):s("",!0),t.plan.frequency.selected=="weekly"?(o(),h("div",je,[(o(!0),h(L,null,T(n.weekdays,(g,m)=>(o(),f(C,{key:m,modelValue:t.plan.frequency.weekly[m],"onUpdate:modelValue":_=>t.plan.frequency.weekly[m]=_,title:g,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}]},null,8,["modelValue","onUpdate:modelValue","title"]))),128))])):s("",!0),e[21]||(e[21]=p("hr",null,null,-1)),l(C,{modelValue:t.plan.phases_to_use,"onUpdate:modelValue":e[15]||(e[15]=g=>t.plan.phases_to_use=g),title:"Anzahl Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"}]},{help:a(()=>e[19]||(e[19]=[i(' Hier kann eingestellt werden, ob Ladevorgänge mit einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen 1- und 3-phasig (sog. 1p3p). ',-1)])),_:1},8,["modelValue"])]),_:1,__:[20,21]},8,["title"])],64)}const Ge=q(Ze,[["render",Je],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/ChargeTemplateTimeChargingPlan.vue"]]);x.add(de,X,j,G,J,H,R,I,oe,se,me,$,Q);const Qe={name:"OpenwbVehicleConfigView",components:{FontAwesomeIcon:O,FontAwesomeLayers:ge,OpenwbVehicleProxy:ye,ChargeTemplateScheduledChargingPlan:qe,ChargeTemplateTimeChargingPlan:Ge,VehicleIdWikiHint:be},mixins:[Y],props:{installAssistantActive:{type:Boolean,required:!1,default:!1}},emits:["sendCommand","save","reset","defaults"],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/optional/dc_charging","openWB/optional/et/provider","openWB/optional/rfid/active","openWB/vehicle/template/ev_template/+","openWB/vehicle/template/charge_template/+","openWB/vehicle/template/charge_template/+/chargemode/scheduled_charging/plans/+","openWB/vehicle/template/charge_template/+/time_charging/plans/+","openWB/vehicle/+/name","openWB/vehicle/+/info","openWB/vehicle/+/charge_template","openWB/vehicle/+/ev_template","openWB/vehicle/+/tag_id","openWB/system/configurable/soc_modules","openWB/vehicle/+/soc_module/general_config","openWB/vehicle/+/soc_module/config"],showVehicleModal:!1,modalVehicleIndex:void 0,showEvTemplateModal:!1,modalEvTemplateIndex:void 0,showChargeTemplateModal:!1,modalChargeTemplateIndex:void 0}},computed:{dcChargingEnabled:{get(){return this.$store.state.mqtt["openWB/optional/dc_charging"]}},vehicleIndexes:{get(){return this.getWildcardIndexList("openWB/vehicle/+/name")}},evTemplates:{get(){return this.getWildcardTopics("openWB/vehicle/template/ev_template/+")}},evTemplateList:{get(){let n=[];return Object.keys(this.evTemplates).forEach(e=>{let v=parseInt(e.match(/([0-9]+)$/g)[0]),E=this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+v].name;n.push({value:v,text:E})}),n}},chargeTemplates:{get(){return this.getWildcardTopics("openWB/vehicle/template/charge_template/+")}},chargeTemplateList:{get(){let n=[];return Object.keys(this.chargeTemplates).forEach(e=>{let v=parseInt(e.match(/([0-9]+)$/g)[0]),E=this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+v].name;n.push({value:v,text:E})}),n}},socModuleList:{get(){return this.$store.state.mqtt["openWB/system/configurable/soc_modules"]}}},methods:{updateConfiguration(n,e){console.debug("updateConfiguration",n,e),this.updateState(n,e.value,e.object)},addVehicle(n){n.stopPropagation(),this.$emit("sendCommand",{command:"addVehicle",data:{}})},removeVehicleModal(n,e){n.stopPropagation(),this.modalVehicleIndex=e,this.showVehicleModal=!0},removeVehicle(n,e){this.showVehicleModal=!1,n=="confirm"&&this.$emit("sendCommand",{command:"removeVehicle",data:{id:e}})},getVehicleName(n){return this.$store.state.mqtt["openWB/vehicle/"+n+"/name"]?this.$store.state.mqtt["openWB/vehicle/"+n+"/name"]:"Fahrzeug "+n},getSocDefaultConfiguration(n){const e=this.socModuleList.find(v=>v.value==n);return Object.prototype.hasOwnProperty.call(e,"defaults")?{...JSON.parse(JSON.stringify(e.defaults))}:(console.warn("no default configuration found for soc type!",n),{})},updateSelectedSocModule(n,e){this.updateState("openWB/vehicle/"+n+"/soc_module/config",e,"type"),this.updateState("openWB/vehicle/"+n+"/soc_module/config",this.getSocDefaultConfiguration(e))},addEvTemplate(n,e){n.stopPropagation();let v={};e&&e.match(/([^/]+)$/)&&(v.copy=parseInt(e.match(/([^/]+)$/)[0])),this.$emit("sendCommand",{command:"addEvTemplate",data:v})},removeEvTemplateModal(n,e){n.stopPropagation(),this.modalEvTemplateIndex=parseInt(e.match(/([^/]+)$/)[0]),this.showEvTemplateModal=!0},removeEvTemplate(n,e){this.showEvTemplateModal=!1,n=="confirm"&&this.$emit("sendCommand",{command:"removeEvTemplate",data:{id:e}})},getEvTemplateName(n){return this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+n]?this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+n].name:"Fahrzeug-Profil "+n},addChargeTemplate(n,e){n.stopPropagation();let v={};e&&e.match(/([^/]+)$/)&&(v.copy=parseInt(e.match(/([^/]+)$/)[0])),this.$emit("sendCommand",{command:"addChargeTemplate",data:v})},removeChargeTemplateModal(n,e){this.modalChargeTemplateIndex=e,this.showChargeTemplateModal=!0},removeChargeTemplate(n,e){this.showChargeTemplateModal=!1,n=="confirm"&&this.$emit("sendCommand",{command:"removeChargeTemplate",data:{id:e}})},getChargeTemplateName(n){return this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+n]?this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+n].name:"Lade-Profil "+n},addChargeTemplateSchedulePlan(n){this.$emit("sendCommand",{command:"addChargeTemplateSchedulePlan",data:{template:n}})},addChargeTemplateTimeChargingPlan(n){this.$emit("sendCommand",{command:"addChargeTemplateTimeChargingPlan",data:{template:n}})},openActiveChargeModeCard(n,e){this.$nextTick(()=>{["instant_charging","pv_charging","eco_charging","scheduled_charging"].forEach(E=>{const S=`card-${n}-${E}`,t=this.$refs[S],y=Array.isArray(t)?t[0]:t;y&&(y.isCollapsed=E!==e)})})}}},Xe={class:"vehicleConfig"},Ye={name:"vehicleConfigForm"},Ke={key:0},$e={key:1},en={key:2},nn={key:3},tn={key:0},ln={key:1},an={key:0},rn={key:0},un={key:1},dn={key:0},on={key:0},sn={key:3},mn={key:0},gn={key:1},pn={key:0},hn={key:0},cn={key:1};function bn(n,e,v,E,S,t){const y=b("openwb-base-modal-dialog"),c=b("font-awesome-icon"),z=b("openwb-base-avatar"),V=b("openwb-base-alert"),C=b("openwb-base-text-input"),W=b("openwb-base-select-input"),F=b("openwb-base-array-input"),D=b("vehicle-id-wiki-hint"),g=b("openwb-base-button-group-input"),m=b("openwb-base-heading"),_=b("openwb-base-number-input"),N=b("openwb-vehicle-proxy"),P=b("openwb-base-card"),K=b("font-awesome-layers"),A=b("openwb-base-range-input"),ne=b("charge-template-scheduled-charging-plan"),te=b("charge-template-time-charging-plan"),le=b("openwb-base-submit-buttons");return o(),h(L,null,[l(y,{show:S.showVehicleModal,title:"Fahrzeug löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:e[0]||(e[0]=r=>t.removeVehicle(r,S.modalVehicleIndex))},{default:a(()=>[i(' Wollen Sie das Fahrzeug "'+k(t.getVehicleName(S.modalVehicleIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),l(y,{show:S.showEvTemplateModal,title:"Fahrzeug-Profil löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:e[1]||(e[1]=r=>t.removeEvTemplate(r,S.modalEvTemplateIndex))},{default:a(()=>[i(' Wollen Sie das Fahrzeug-Profil "'+k(t.getEvTemplateName(S.modalEvTemplateIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),l(y,{show:S.showChargeTemplateModal,title:"Lade-Profil löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:e[2]||(e[2]=r=>t.removeChargeTemplate(r,S.modalChargeTemplateIndex))},{default:a(()=>[i(' Wollen Sie das Lade-Profil "'+k(t.getChargeTemplateName(S.modalChargeTemplateIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),p("div",Xe,[p("form",Ye,[l(P,{subtype:"info",collapsible:!0,collapsed:n.$route.params.section!="vehicle"},{header:a(()=>[l(c,{icon:["fas","car"]}),e[8]||(e[8]=i(" Fahrzeuge ",-1))]),actions:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!1?(o(),f(z,{key:0,class:"bg-success clickable",title:"Neues Fahrzeug hinzufügen",onClick:t.addVehicle},{default:a(()=>[l(c,{icon:["fas","plus"]})]),_:1},8,["onClick"])):s("",!0)]),default:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!0?(o(),h("div",Ke,[l(V,{subtype:"info"},{default:a(()=>e[9]||(e[9]=[i(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[9]})])):(o(),h("div",$e,[(o(!0),h(L,null,T(t.vehicleIndexes,r=>(o(),f(P,{key:r,title:t.getVehicleName(r),collapsible:!0,collapsed:!(n.$route.params.section=="vehicle"&&parseInt(n.$route.params.section_index)==r),subtype:"info"},Z({default:a(()=>[l(C,{title:"Bezeichnung","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/name"],disabled:r===0,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/name",d)},Z({_:2},[r===0?{name:"help",fn:a(()=>[e[10]||(e[10]=i(" Das Standard-Fahrzeug kann nicht umbenannt werden. ",-1))]),key:"0"}:void 0]),1032,["model-value","disabled","onUpdate:modelValue"]),r!==0?(o(),f(C,{key:0,title:"Fahrzeughersteller ","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/info"].manufacturer,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/info",d,"manufacturer")},{help:a(()=>[...e[11]||(e[11]=[i(" Optional: zusätzliche Information für den Systembericht. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):s("",!0),r!==0?(o(),f(C,{key:1,title:"Fahrzeugmodell","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/info"].model,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/info",d,"model")},{help:a(()=>[...e[12]||(e[12]=[i(" Optional: zusätzliche Information für den Systembericht.",-1),p("br",null,null,-1),i(" Nach Möglichkeit auch Angabe des Baujahres, da es durchaus beim Verhalten des Fahrzeugs Unterschiede geben kann. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):s("",!0),l(V,{subtype:"info"},{default:a(()=>[...e[13]||(e[13]=[i(" Ein anderes Fahrzeug-Profil wird erst NACH dem Abstecken übernommen, da es sonst durch die Änderung bestimmter Einstellungen im laufenden Ladevorgang zu Widersprüchen kommen kann. ",-1)])]),_:1,__:[13]}),l(W,{title:"Fahrzeug-Profil",options:t.evTemplateList,"model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/ev_template"],"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/ev_template",d)},null,8,["options","model-value","onUpdate:modelValue"]),l(W,{title:"Lade-Profil",options:t.chargeTemplateList,"model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/charge_template"],"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/charge_template",d)},null,8,["options","model-value","onUpdate:modelValue"]),e[24]||(e[24]=p("hr",null,null,-1)),n.$store.state.mqtt["openWB/optional/rfid/active"]===!0&&!v.installAssistantActive?(o(),h("div",en,[l(F,{title:"Zugeordnete ID-Tags","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/tag_id"],"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/tag_id",d)},null,8,["model-value","onUpdate:modelValue"]),l(V,{subtype:"info"},{default:a(()=>[e[14]||(e[14]=i(" Die hier eingetragenen ID-Tags dienen ausschließlich der Fahrzeugzuordnung.",-1)),e[15]||(e[15]=p("br",null,null,-1)),l(D)]),_:1,__:[14,15]}),e[16]||(e[16]=p("hr",null,null,-1))])):s("",!0),l(W,{class:"mb-2",title:"SoC-Modul des Fahrzeugs",options:t.socModuleList,"model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/config"].type,"onUpdate:modelValue":d=>t.updateSelectedSocModule(r,d)},{help:a(()=>[...e[17]||(e[17]=[i(" Mit einem SoC-Modul kann der Ladestand des Fahrzeugs ermittelt und geregelt werden. Z.B. lassen sich unabhängig vom Fahrzeug bestimmte SoC-Werte einstellen, um den Fahrzeugakku zu schonen. Aktuell werden die SoC-Werte mittels der App-Zugangsdaten aus dem Herstellerserver des Fahrzeuges ausgelesen. Zukünftig soll auch eine direkte SoC-Auslesung aus dem Fahrzeug möglich werden (openWB Pro).",-1),p("br",null,null,-1),i(" Die SoC-Abfrage erfolgt automatisch beim Anstecken des Fahrzeuges und zusätzlich über einstellbare Abfrageintervalle während des Ladens und Nichtladens. Die Abfrage kann auch manuell durch Klick auf den Reload-Pfeil auf der Hauptseite ausgelöst werden.",-1),p("br",null,null,-1),i(" Wenn eine Abfrage fehlschlägt, wird noch drei weitere Male im Abstand von 5 Minuten versucht, den SoC abzufragen. Wenn dies nicht erfolgreich ist, wird der SoC auf 0% gesetzt um zu vermeiden, dass ein Auto beim SoC-basierten Laden nicht geladen wird. Die Abfrage erfolgt dann wieder in den oben genannten Intervallen.",-1),p("br",null,null,-1),i(" Da aktuell die SoC-Abfragen über Onlineserver der Fahrzeughersteller laufen, ist infolge möglicher Umstellungen/Wartungen keine 100%-ig sichere SoC-Abfrage garantiert. Auch kann es zu SoC-Abweichungen infolge von zeitlicher Verzögerungen kommen. Hilfestellung erfolgt primär im openWB-Forum. ",-1)])]),_:2},1032,["options","model-value","onUpdate:modelValue"]),n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/config"].type?(o(),h("div",nn,[l(g,{title:"SoC direkt aus Fahrzeug auslesen",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/general_config"].use_soc_from_cp,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/soc_module/general_config",d,"use_soc_from_cp")},{help:a(()=>[...e[18]||(e[18]=[i(" Wenn Ladepunkt und Fahrzeug das direkte Auslesen des SoCs über das Ladekabel unterstützen, wird der SoC nach dem Anstecken aus dem Fahrzeug ausgelesen und während der Ladung berechnet. Das direkte Auslesen des SoC aus dem Fahrzeug ist aktuell nur mit einer openWB Pro möglich. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(m,null,{help:a(()=>[...e[19]||(e[19]=[i(" Einige Hersteller begrenzen die möglichen Abfragen. Sobald ein gewisses Limit in einem Zeitraum überschritten wird, werden weitere Anfragen blockiert. Die Zeitintervalle sollten daher nicht zu klein gewählt werden. ",-1)])]),default:a(()=>[e[20]||(e[20]=i(" Aktualisierung der Fahrzeugdaten ",-1))]),_:1,__:[20]}),l(_,{title:"Während der Ladung",unit:"Min.",min:1,required:"","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/general_config"].request_interval_charging/60,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/soc_module/general_config",d*60,"request_interval_charging")},{help:a(()=>[...e[21]||(e[21]=[i(" Der Ladestand des Fahrzeugs (SoC) wird bei einem laufenden Ladevorgang in dem hier eingestellten Intervall in Minuten abgefragt. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(_,{title:"Ohne laufende Ladung",unit:"Min.",min:1,required:"","model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/general_config"].request_interval_not_charging/60,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/soc_module/general_config",d*60,"request_interval_not_charging")},{help:a(()=>[...e[22]||(e[22]=[i(" Der Ladestand des Fahrzeugs (SoC) wird in dem hier eingestellten Intervall in Minuten abgefragt, falls kein Ladevorgang aktiv ist. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Nur aktualisieren wenn angesteckt",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/general_config"].request_only_plugged,"onUpdate:modelValue":d=>n.updateState("openWB/vehicle/"+r+"/soc_module/general_config",d,"request_only_plugged")},{help:a(()=>[...e[23]||(e[23]=[i(' Wird hier "Ja" ausgewählt, dann wird der Ladestand des Fahrzeugs nur abgefragt, wenn das Ladekabel angesteckt ist. ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(N,{"vehicle-id":r,vehicle:n.$store.state.mqtt["openWB/vehicle/"+r+"/soc_module/config"],"onUpdate:configuration":d=>t.updateConfiguration("openWB/vehicle/"+r+"/soc_module/config",d)},null,8,["vehicle-id","vehicle","onUpdate:configuration"])])):s("",!0)]),_:2},[r!==0?{name:"actions",fn:a(d=>[d.collapsed?s("",!0):(o(),f(z,{key:0,class:"bg-danger clickable",title:"Fahrzeug löschen",onClick:u=>t.removeVehicleModal(u,r)},{default:a(()=>[l(c,{icon:["fas","trash"]})]),_:2},1032,["onClick"]))]),key:"0"}:void 0]),1032,["title","collapsed"]))),128))]))]),_:1},8,["collapsed"]),e[85]||(e[85]=p("hr",{class:"border-secondary"},null,-1)),l(m,null,{default:a(()=>e[25]||(e[25]=[i("Profile",-1)])),_:1,__:[25]}),l(P,{collapsible:!0,collapsed:!0},{header:a(()=>[l(K,{class:"fa-lg"},{default:a(()=>[l(c,{icon:["far","file"]}),l(c,{icon:["fas","car"],transform:"shrink-8"})]),_:1}),e[26]||(e[26]=i(" Fahrzeug-Profile ",-1))]),actions:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!1?(o(),f(z,{key:0,class:"bg-success clickable",title:"Neues Fahrzeug-Profil hinzufügen",onClick:t.addEvTemplate},{default:a(()=>[l(c,{icon:["fas","plus"]})]),_:1},8,["onClick"])):s("",!0)]),default:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!0?(o(),h("div",tn,[l(V,{subtype:"info"},{default:a(()=>e[27]||(e[27]=[i(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[27]})])):(o(),h("div",ln,[l(V,{subtype:"info"},{default:a(()=>e[28]||(e[28]=[i(" Ein anderes Fahrzeug-Profil wird erst ",-1),p("span",{class:"text-uppercase font-weight-bold"}," nach dem Abstecken ",-1),i(" übernommen, da es sonst durch die Änderung bestimmter Einstellungen im laufenden Ladevorgang zu Widersprüchen kommen kann. ",-1)])),_:1,__:[28]}),(o(!0),h(L,null,T(t.evTemplates,(r,d)=>(o(),f(P,{key:d,title:r.name?r.name:d,collapsible:!0,collapsed:!0},Z({default:a(()=>[l(C,{title:"Bezeichnung","model-value":r.name,disabled:d.endsWith("/0"),"onUpdate:modelValue":u=>n.updateState(d,u,"name")},Z({_:2},[d.endsWith("/0")?{name:"help",fn:a(()=>[e[29]||(e[29]=i(" Das Standard-Profil kann nicht umbenannt werden. ",-1))]),key:"0"}:void 0]),1032,["model-value","disabled","onUpdate:modelValue"]),l(m,null,{default:a(()=>[...e[30]||(e[30]=[i(" Angaben zur Batterie ",-1)])]),_:1,__:[30]}),l(_,{title:"Kapazität der Batterie",unit:"kWh",min:1,step:1,required:"","model-value":r.battery_capacity/1e3,"onUpdate:modelValue":u=>n.updateState(d,u*1e3,"battery_capacity")},{help:a(()=>[...e[31]||(e[31]=[i(" Angabe der Netto-Kapazität der Fahrzeugbatterie. Dient zur Berechnung des manuellen SoC und der geladenen Reichweite. Die Netto-Kapazität unterscheidet sich meist von den Angaben der Fahrzeughersteller. So besitzt ein Tesla Model S 90 z. B. nur ca. 83kWh und nicht die durch die Typenbezeichnung suggerierten 90kWh. Andere Hersteller begrenzen die nutzbare Kapazität absichtlich, um eine höhere Lebensdauer der Akkus zu erreichen. Gängig sind eine Drosselung auf 90% der angegebenen Brutto-Kapazität. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),v.installAssistantActive?s("",!0):(o(),h("div",rn,[l(_,{title:"Wirkungsgrad der Ladeelektronik",unit:"%",min:1,max:100,required:"","model-value":r.efficiency,"onUpdate:modelValue":u=>n.updateState(d,u,"efficiency")},{help:a(()=>[...e[32]||(e[32]=[i(" Durch Verluste in der Ladeelektronik (z. B. Umwandlung Wechselspannung in Gleichspannung) gelangt nicht die komplette Energie, welche durch den Zähler in der Wallbox gemessen wird, in den Akku des Fahrzeugs. Der anzugebende Wert liegt bei gängigen Fahrzeugen im Bereich 90-95%. Eine Ausnahme stellt der Zoe dar, dessen Chameleon-Lader je nach Modellversion und freigegebener Leistung der Wallbox teilweise nur auf ca. 50% kommt.",-1),p("br",null,null,-1),i(" Liegen die Angaben der Wallbox und des Fahrzeugs nach der Ladung mehrere Prozent auseinander, dann kann mit dieser Einstellung eine Feinabstimmung erfolgen: ",-1),p("br",null,null,-1),i(" SoC an der Wallbox zu hoch: Wirkungsgrad um ein paar Prozent reduzieren",-1),p("br",null,null,-1),i(" SoC an der Wallbox zu gering: Wirkungsgrad um ein paar Prozent erhöhen",-1),p("br",null,null,-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])])),l(_,{title:"Durchschnittsverbrauch",unit:"kWh / 100km",min:1,step:.1,required:"","model-value":r.average_consump/1e3,"onUpdate:modelValue":u=>n.updateState(d,u*1e3,"average_consump")},null,8,["model-value","onUpdate:modelValue"]),l(g,{title:"Bidirektionales Laden",buttons:[{buttonValue:!1,text:"Nicht unterstützt",class:"btn-outline-danger"},{buttonValue:!0,text:"AC nach ISO15118-20",class:"btn-outline-success"}],"model-value":r.bidi,"onUpdate:modelValue":u=>n.updateState(d,u,"bidi")},{help:a(()=>[...e[33]||(e[33]=[i(' Für bidirektionales Laden wird eine openWB Pro benötigt. Die openWB Pro muss auf den Modus "Bidi" gestellt werden.',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),t.dcChargingEnabled===!0?(o(),h("div",un,[l(m,null,{default:a(()=>[...e[34]||(e[34]=[i(" Angaben zur Ladeleistung (DC) ",-1)])]),_:1,__:[34]}),l(_,{title:"Mindestleistung",min:0,unit:"kW","model-value":n.ac_current2dc_power(r.dc_min_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"dc_min_current")},null,8,["model-value","onUpdate:modelValue"]),l(_,{title:"Maximalleistung",unit:"kW","model-value":n.ac_current2dc_power(r.dc_max_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"dc_max_current")},null,8,["model-value","onUpdate:modelValue"])])):s("",!0),l(m,null,{default:a(()=>[e[35]||(e[35]=i(" Angaben zum Ladestrom ",-1)),t.dcChargingEnabled===!0?(o(),h("span",dn," (AC) ")):s("",!0)]),_:1,__:[35]}),l(A,{title:"Mindeststrom",min:6,max:16,step:1,unit:"A","model-value":r.min_current,"onUpdate:modelValue":u=>n.updateState(d,u,"min_current")},null,8,["model-value","onUpdate:modelValue"]),l(A,{title:"Maximalstrom bei einer Phase",min:6,max:32,step:1,unit:"A","model-value":r.max_current_single_phase,"onUpdate:modelValue":u=>n.updateState(d,u,"max_current_single_phase")},null,8,["model-value","onUpdate:modelValue"]),l(A,{title:"Maximalstrom mehrere Phasen",min:6,max:32,step:1,unit:"A","model-value":r.max_current_multi_phases,"onUpdate:modelValue":u=>n.updateState(d,u,"max_current_multi_phases")},null,8,["model-value","onUpdate:modelValue"]),l(_,{title:"Erlaubte Stromabweichung",step:.1,min:0,max:5,unit:"A","model-value":r.nominal_difference,"onUpdate:modelValue":u=>n.updateState(d,u,"nominal_difference")},{help:a(()=>[...e[36]||(e[36]=[i(" In manchen Lademodi, z.B. bei der automatischen Phasenumschaltung, wird geprüft, ob das Fahrzeug mit der vorgegebenen Stromstärke lädt. Manche Fahrzeuge laden nicht exakt mit der vorgegebenen Stromstärke. Die erlaubte Abweichung kann hier eingestellt werden. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(m,null,{default:a(()=>[e[37]||(e[37]=i(" Angaben zur Handhabung von Phasen ",-1)),t.dcChargingEnabled===!0?(o(),h("span",on," (AC) ")):s("",!0)]),_:1,__:[37]}),l(g,{title:"Unterstützte Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:2,text:"2"},{buttonValue:3,text:"3"}],"model-value":r.max_phases,"onUpdate:modelValue":u=>n.updateState(d,u,"max_phases")},{help:a(()=>[...e[38]||(e[38]=[i(" Anzahl der Phasen, die der Fahrzeuglader (s.g. OBC - OnboardCharger) verwendet. Plugin-Hybride nutzen meist nur eine Phase, reine E-Autos meist 3, manche nur 2 Phasen. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"CP-Unterbrechung",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":r.control_pilot_interruption,"onUpdate:modelValue":u=>n.updateState(d,u,"control_pilot_interruption")},{help:a(()=>[...e[39]||(e[39]=[i(' Erläuterung siehe "Konfiguration - Ladepunkte" -> Hardware-Optionen ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),r.control_pilot_interruption?(o(),f(_,{key:2,title:"Dauer der CP-Unterbrechung",min:4,step:1,unit:"s","model-value":r.control_pilot_interruption_duration,"onUpdate:modelValue":u=>n.updateState(d,u,"control_pilot_interruption_duration")},null,8,["model-value","onUpdate:modelValue"])):s("",!0),l(g,{title:"Phasenumschaltung blockieren",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":r.prevent_phase_switch,"onUpdate:modelValue":u=>n.updateState(d,u,"prevent_phase_switch")},{help:a(()=>[...e[40]||(e[40]=[i(' Erläuterung zu 1p3p siehe "Ladeeinstellungen" ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Ladung aktiv halten",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":r.prevent_charge_stop,"onUpdate:modelValue":u=>n.updateState(d,u,"prevent_charge_stop")},{help:a(()=>[...e[41]||(e[41]=[i(" Der Ladevorgang wird in den Lademodi PV- und Zielladen nach Ladebeginn nicht unterbrochen, selbst wenn nicht mehr genug Überschuss vorhanden ist. Diese Einstellung sollte bei Fahrzeugen aktiviert werden, die nach einer Ladungsunterbrechung keine Ladung mehr starten. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(_,{title:"Pause bei Phasenumschaltung",unit:"s",min:2,step:1,required:"","model-value":r.phase_switch_pause,"onUpdate:modelValue":u=>n.updateState(d,u,"phase_switch_pause")},null,8,["model-value","onUpdate:modelValue"]),v.installAssistantActive?s("",!0):(o(),h("div",sn,[l(_,{title:"Mindestzeit zwischen Umschaltungen",unit:"s",min:2,step:1,required:"","model-value":r.keep_charge_active_duration,"onUpdate:modelValue":u=>n.updateState(d,u,"keep_charge_active_duration")},{help:a(()=>[...e[42]||(e[42]=[i(" Manche Fahrzeuge benötigen nach der Umschaltung einige Zeit, bis sie mit der vorgegebenen Phasenzahl laden. In dieser Zeit wird keine neue Phasenumschaltung angestoßen. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])]))]),_:2},[n.$store.state.mqtt["openWB/general/extern"]===!1?{name:"actions",fn:a(u=>[u.collapsed?s("",!0):(o(),h("span",an,[l(z,{class:"bg-success clickable",title:"Fahrzeug-Profil duplizieren",onClick:U=>t.addEvTemplate(U,d)},{default:a(()=>[l(c,{icon:["fas","copy"]})]),_:2},1032,["onClick"]),d.endsWith("/0")?s("",!0):(o(),f(z,{key:0,class:"bg-danger clickable ml-1",title:"Fahrzeug-Profil löschen",onClick:U=>t.removeEvTemplateModal(U,d)},{default:a(()=>[l(c,{icon:["fas","trash"]})]),_:2},1032,["onClick"]))]))]),key:"0"}:void 0]),1032,["title"]))),128))]))]),_:1}),l(P,{collapsible:!0,collapsed:n.$route.params.section!="charge_template"},{header:a(()=>[l(K,{class:"fa-lg"},{default:a(()=>[l(c,{icon:["far","file"]}),l(c,{icon:["fas","plug"],transform:"shrink-8"})]),_:1}),e[43]||(e[43]=i(" Lade-Profile ",-1))]),actions:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!1?(o(),f(z,{key:0,class:"bg-success clickable",title:"Neues Lade-Profil hinzufügen",onClick:t.addChargeTemplate},{default:a(()=>[l(c,{icon:["fas","plus"]})]),_:1},8,["onClick"])):s("",!0)]),default:a(()=>[n.$store.state.mqtt["openWB/general/extern"]===!0?(o(),h("div",mn,[l(V,{subtype:"info"},{default:a(()=>e[44]||(e[44]=[i(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[44]})])):(o(),h("div",gn,[(o(!0),h(L,null,T(t.chargeTemplates,(r,d)=>(o(),f(P,{key:d,title:r.name?r.name:d,collapsible:!0,collapsed:!(n.$route.params.section=="charge_template"&&parseInt(n.$route.params.section_index)==r.id)},{actions:a(u=>[u.collapsed?s("",!0):(o(),h("span",pn,[l(z,{class:"bg-success clickable",title:"Lade-Profil duplizieren",onClick:U=>t.addChargeTemplate(U,d)},{default:a(()=>[l(c,{icon:["fas","copy"]})]),_:2},1032,["onClick"]),d.endsWith("/0")?s("",!0):(o(),f(z,{key:0,class:"bg-danger clickable ml-1",title:"Lade-Profil löschen",onClick:B(U=>t.removeChargeTemplateModal(U,r.id),["stop"])},{default:a(()=>[l(c,{icon:["fas","trash"]})]),_:2},1032,["onClick"]))]))]),default:a(()=>[l(C,{title:"Bezeichnung","model-value":r.name,disabled:d.endsWith("/0"),"onUpdate:modelValue":u=>n.updateState(d,u,"name")},Z({_:2},[d.endsWith("/0")?{name:"help",fn:a(()=>[e[45]||(e[45]=i(" Das Standard-Profil kann nicht umbenannt werden. ",-1))]),key:"0"}:void 0]),1032,["model-value","disabled","onUpdate:modelValue"]),l(m,null,{default:a(()=>[...e[46]||(e[46]=[i(" Allgemeine Optionen ",-1)])]),_:1,__:[46]}),l(g,{title:"Aktiver Lademodus",buttons:[{buttonValue:"instant_charging",text:"Sofort",class:"btn-outline-danger"},{buttonValue:"pv_charging",text:"PV",class:"btn-outline-success"},{buttonValue:"scheduled_charging",text:"Ziel",class:"btn-outline-primary"},{buttonValue:"eco_charging",text:"Eco",class:"btn-outline-secondary"},{buttonValue:"stop",text:"Stop",class:"btn-outline-dark"}],"model-value":r.chargemode.selected,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.selected"),onButtonClick:u=>t.openActiveChargeModeCard(d,u)},{help:a(()=>[...e[47]||(e[47]=[i(" Diese Einstellung entspricht dem gewählten Lademodus auf der Hauptseite und ist aktiv, wenn ein zugehöriges Fahrzeug angesteckt ist.",-1),p("br",null,null,-1),i(" Die zur Verfügung stehende Leistung wird intern anhand folgender Prioritätenliste auf die Fahrzeuge bzw. Ladepunkte verteilt:",-1),p("br",null,null,-1),p("ol",null,[p("li",null,"Ziel (Sofortladen) mit Priorität"),p("li",null,"Ziel (Sofortladen)"),p("li",null,"Zeit mit Priorität"),p("li",null,"Zeit"),p("li",null,"Sofort mit Priorität"),p("li",null,"Sofort"),p("li",null,"Eco (Min-Anteil) mit Priorität"),p("li",null,"Eco (Min-Anteil)"),p("li",null,"PV (Min-Anteil) mit Priorität"),p("li",null,"PV (Min-Anteil)"),p("li",null,"Ziel (PV) mit Priorität"),p("li",null,"Ziel (PV)"),p("li",null,"Eco (PV-Anteil) mit Priorität"),p("li",null,"Eco (PV-Anteil)"),p("li",null,"PV (PV-Anteil) mit Priorität"),p("li",null,"PV (PV-Anteil)"),p("li",null,"Bidi-Entladen ohne Priorität"),p("li",null,"Bidi-Entladen mit Priorität")],-1)])]),_:2},1032,["model-value","onUpdate:modelValue","onButtonClick"]),v.installAssistantActive?s("",!0):(o(),h("div",hn,[l(g,{title:"Priorität",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":r.prio,"onUpdate:modelValue":u=>n.updateState(d,u,"prio")},{help:a(()=>[...e[48]||(e[48]=[i(" Die Ladefreigabe mit dem jeweils eingestellten Mindeststrom erfolgt für alle Fahrzeuge, soweit die verfügbare Leistung ausreicht. Fahrzeuge mit Priorität werden bevorzugt mit mehr Leistung geladen, falls verfügbar. Erst wenn alle priorisierten Fahrzeuge die maximale Ladeleistung bekommen und noch zusätzlicher Überschuss vorhanden ist, wird auch für Fahrzeuge ohne Priorität mehr Leistung freigegeben. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Standard nach Abstecken",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":r.load_default,"onUpdate:modelValue":u=>n.updateState(d,u,"load_default")},{help:a(()=>[...e[49]||(e[49]=[i(" Falls diese Option aktiviert ist, wird der betroffene Ladepunkt nach dem Abstecken auf das Standard Fahrzeug zurückgesetzt. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),e[51]||(e[51]=p("hr",null,null,-1)),l(m,null,{default:a(()=>[...e[50]||(e[50]=[i("Einstellungen der Lademodi",-1)])]),_:1,__:[50]})])),l(P,{ref_for:!0,ref:`card-${d}-instant_charging`,collapsible:!0,collapsed:!0,subtype:"secondary"},{header:a(()=>[...e[52]||(e[52]=[i(" Sofort ",-1)])]),default:a(()=>[l(A,{title:`Soll-Ladestrom${t.dcChargingEnabled?" (AC)":""}`,min:6,max:32,step:1,unit:"A","model-value":r.chargemode.instant_charging.current,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.instant_charging.current")},null,8,["title","model-value","onUpdate:modelValue"]),t.dcChargingEnabled===!0?(o(),f(_,{key:0,title:"Soll-Ladeleistung (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(r.chargemode.instant_charging.dc_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"chargemode.instant_charging.dc_current")},null,8,["model-value","onUpdate:modelValue"])):s("",!0),l(g,{title:"Anzahl Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"}],"model-value":r.chargemode.instant_charging.phases_to_use,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.instant_charging.phases_to_use")},{help:a(()=>[...e[53]||(e[53]=[i(' Hier kann eingestellt werden, ob Ladevorgänge mit einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen 1- und 3-phasig (s.g. 1p3p). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Begrenzung",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"Fahrzeug-SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":r.chargemode.instant_charging.limit.selected,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.instant_charging.limit.selected")},{help:a(()=>[...e[54]||(e[54]=[i(" Sofortladen kann ohne Fahrzeug-SoC-Begrenzung (Aus), mit Begrenzung des Fahrzeug-SoC (SoC) bei konfiguriertem SoC-Auslesemodul oder mittels Vorgabe eine gewünschten Energiemenge in kWh (Energie) genutzt werden. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(A,{title:"SoC-Limit für das Fahrzeug",min:5,max:100,step:5,unit:"%","model-value":r.chargemode.instant_charging.limit.soc,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.instant_charging.limit.soc")},{help:a(()=>[...e[55]||(e[55]=[i(' Um die Fahrzeug-SoC-Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet sein (siehe "Konfiguration" -> "Fahrzeuge" -> "SoC-Modul"). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(_,{title:"Energie-Limit",unit:"kWh",min:1,step:1,"model-value":r.chargemode.instant_charging.limit.amount/1e3,"onUpdate:modelValue":u=>n.updateState(d,u*1e3,"chargemode.instant_charging.limit.amount")},{help:a(()=>[...e[56]||(e[56]=[i(" Die geladene Energiemenge wird nach dem Anstecken neu gezählt. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1536),l(P,{ref_for:!0,ref:`card-${d}-pv_charging`,collapsible:!0,collapsed:!0,subtype:"secondary"},{header:a(()=>[...e[57]||(e[57]=[i(" PV ",-1)])]),default:a(()=>[l(A,{title:`Minimaler Dauerstrom${t.dcChargingEnabled?" (AC)":""}`,min:0,max:11,step:1,unit:"A",labels:[{label:"Aus",value:0},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16}],"model-value":r.chargemode.pv_charging.min_current,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.min_current")},{help:a(()=>[...e[58]||(e[58]=[i(' Hier kann eine Stromstärke eingestellt werden, mit dem unabhängig vom vorhandenen Überschuss durchgeladen wird. Hierdurch wird z.B. an Tagen mit häufigem Sonne/Wolken-Wechsel oder mit nur wenig PV-Ertrag ein Laden ohne Unterbrechung ermöglicht. Folglich kann auch Netzbezug für das Fahrzeugladen entstehen, weshalb der niedrigste Stromwert empfohlen wird. Diese Einstellung entspricht weitestgehend dem Lademodus "Min+PV" der Version 1.x. ',-1)])]),_:2},1032,["title","model-value","onUpdate:modelValue"]),t.dcChargingEnabled===!0?(o(),f(_,{key:0,title:"Minimale Dauerleistung (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(r.chargemode.pv_charging.dc_min_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"chargemode.pv_charging.dc_min_current")},{help:a(()=>[...e[59]||(e[59]=[i(" Hier kann eine Leistung eingestellt werden, mit dem unabhängig vom vorhandenen Überschuss durchgeladen wird. Hierdurch wird z.B. an Tagen mit häufigem Sonne/Wolken-Wechsel oder mit nur wenig PV-Ertrag ein Laden ohne Unterbrechung ermöglicht. Folglich kann auch Netzbezug für das Fahrzeugladen entstehen, weshalb der niedrigste Leistungswert empfohlen wird. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):s("",!0),l(g,{title:"Anzahl Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"},{buttonValue:0,text:"Automatik"}],"model-value":r.chargemode.pv_charging.phases_to_use,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.phases_to_use")},{help:a(()=>[...e[60]||(e[60]=[i(' Hier kann eingestellt werden, ob Ladevorgänge mit einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Im Modus "Automatik" entscheidet die Regelung, welche Einstellung genutzt wird, um den verfügbaren Überschuss in die Fahrzeuge zu laden. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen einer und mehreren Phasen (sog. 1p3p). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Begrenzung",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"Fahrzeug-SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":r.chargemode.pv_charging.limit.selected,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.limit.selected")},{help:a(()=>[...e[61]||(e[61]=[i(" PV kann ohne Fahrzeug-SoC-Begrenzung (Aus), mit Begrenzung des Fahrzeug-SoC (SoC) bei konfiguriertem SoC-Auslesemodul oder mittels Vorgabe eine gewünschten Energiemenge in kWh (Energie) genutzt werden. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(A,{title:"SoC-Limit für das Fahrzeug",min:5,max:100,step:5,unit:"%","model-value":r.chargemode.pv_charging.limit.soc,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.limit.soc")},{help:a(()=>[...e[62]||(e[62]=[i(' Um die Fahrzeug-SoC-Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet sein (siehe "Konfiguration" -> "Fahrzeuge" -> "SoC-Modul"). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(_,{title:"Energie-Limit",unit:"kWh",min:1,step:1,"model-value":r.chargemode.pv_charging.limit.amount/1e3,"onUpdate:modelValue":u=>n.updateState(d,u*1e3,"chargemode.pv_charging.limit.amount")},{help:a(()=>[...e[63]||(e[63]=[i(" Die geladene Energiemenge wird nach dem Anstecken neu gezählt. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(A,{title:"Mindest-SoC für das Fahrzeug",min:0,max:19,step:1,unit:"%",labels:[{label:"Aus",value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95}],"model-value":r.chargemode.pv_charging.min_soc,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.min_soc")},{help:a(()=>[...e[64]||(e[64]=[i(' Liegt der Fahrzeug-Ladestand (SoC) unter dem hier eingestellten Wert, dann wird bis zum Erreichen dieses Wertes mit dem eingestellten "Mindest-SoC-Strom" geladen. Dies dient der Sicherstellung eines "Mindest-SoC" - z.B. für eine immer abzudeckende Fahrzeugreichweite - auch wenn kein oder zu wenig Überschuss verfügbar ist (=> Laden mit anteilig Netzstrom). Nach dem Erreichen des "Mindest-SoC" wird bei verfügbarem Überschuss geladen.',-1),p("br",null,null,-1),i(' Um die Fahrzeug-SoC-Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet sein (siehe "Konfiguration" -> "Fahrzeuge" -> "SoC-Modul"). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(A,{title:`Mindest-SoC-Strom${t.dcChargingEnabled?" (AC)":""}`,min:6,max:32,step:1,unit:"A","model-value":r.chargemode.pv_charging.min_soc_current,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.min_soc_current")},{help:a(()=>[...e[65]||(e[65]=[i(' Wird der oben eingestellte "Mindest-SoC" des Fahrzeuges unterschritten, dann wird unabhängig vom Überschuss ein Ladevorgang mit dem hier festgelegten "Mindest-SoC-Strom" initiiert (ggf. mit anteilig Netzbezug). ',-1)])]),_:2},1032,["title","model-value","onUpdate:modelValue"]),t.dcChargingEnabled===!0?(o(),f(_,{key:1,title:"Mindest-SoC-Leistung (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(r.chargemode.pv_charging.dc_min_soc_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"chargemode.pv_charging.dc_min_soc_current")},{help:a(()=>[...e[66]||(e[66]=[i(' Wird der oben eingestellte "Mindest-SoC" des Fahrzeuges unterschritten, dann wird unabhängig vom Überschuss ein Ladevorgang mit der hier festgelegten "Mindest-SoC-Leistung" initiiert (ggf. mit anteilig Netzbezug). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):s("",!0),l(g,{title:"Anzahl Phasen Mindest-SoC",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"}],"model-value":r.chargemode.pv_charging.phases_to_use_min_soc,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.phases_to_use_min_soc")},{help:a(()=>[...e[67]||(e[67]=[i(' Hier kann eingestellt werden, ob Ladevorgänge mit einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen einer und mehreren Phasen (sog. 1p3p). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Einspeisegrenze beachten",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":r.chargemode.pv_charging.feed_in_limit,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.pv_charging.feed_in_limit")},{help:a(()=>[...e[68]||(e[68]=[i(' Erläuterung siehe "Ladeeinstellungen" -> "PV-Laden" -> "Regelparameter" -> "Regelpunkt Einspeisegrenze" ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1536),l(P,{ref_for:!0,ref:`card-${d}-scheduled_charging`,collapsible:!0,collapsed:!0,subtype:"secondary"},{header:a(()=>[...e[69]||(e[69]=[i(" Ziel ",-1)])]),default:a(()=>[l(m,null,{actions:a(()=>[l(z,{class:"bg-success clickable",title:"Neuen Zielladen-Plan hinzufügen",onClick:B(u=>t.addChargeTemplateSchedulePlan(r.id),["stop"])},{default:a(()=>[l(c,{icon:["fas","plus"]})]),_:2},1032,["onClick"])]),help:a(()=>[...e[70]||(e[70]=[i(' Im Lademodus "Zielladen" wird der Ladestrom so angepasst, dass das Fahrzeug zum angegebenen Zeitpunkt den eingestellten SoC bzw. die einzuladende Energiemenge erreicht. Anhand des vorgegebenen Ladestroms wird der Zeitpunkt berechnet, an dem die Ladung spätestens starten muss.',-1),p("br",null,null,-1),i(' Ist der berechnete Zeitpunkt des Ladestarts noch nicht erreicht, wird mit Überschuss geladen. Auch nach Erreichen des Ziel-SoCs wird mit Überschuss geladen, solange bis das "SoC-Limit für das Fahrzeug" erreicht wird.',-1),p("br",null,null,-1),i(" Es wird nach den Vorgaben des Zeitplans geladen, dessen Zieltermin am nächsten liegt. Ist der Zielzeitpunkt vorbei, wird solange geladen bis, das Ziel erreicht oder das Auto abgesteckt wird. Wenn der Ziel-Termin des nächsten Plans innerhalb der nächsten 12 Stunden liegt, wird auf den nächsten Plan umgeschaltet. ",-1)])]),default:a(()=>[e[71]||(e[71]=i(" Zielladepläne ",-1))]),_:2,__:[71]},1024),r.chargemode.scheduled_charging.plans.length==0?(o(),f(V,{key:0,subtype:"info"},{default:a(()=>[...e[72]||(e[72]=[i(" Es wurden noch keine Pläne für das Zielladen angelegt. ",-1)])]),_:1,__:[72]})):s("",!0),(o(!0),h(L,null,T(r.chargemode.scheduled_charging.plans,(u,U)=>(o(),f(ne,{key:U,"model-value":u,"template-id":r.id,"dc-charging-enabled":t.dcChargingEnabled,"onUpdate:modelValue":M=>n.updateState(d,M,`chargemode.scheduled_charging.plans.${U}`),onSendCommand:e[3]||(e[3]=M=>n.$emit("sendCommand",M))},null,8,["model-value","template-id","dc-charging-enabled","onUpdate:modelValue"]))),128))]),_:2},1536),l(P,{ref_for:!0,ref:`card-${d}-eco_charging`,collapsible:!0,collapsed:!0,subtype:"secondary"},{header:a(()=>[...e[73]||(e[73]=[i(" Eco ",-1)])]),default:a(()=>[l(m,null,{help:a(()=>[...e[74]||(e[74]=[i(" Im Eco-Modus wird eine Preisgrenze vorgegeben. Wenn der Strompreis unter dieser Grenze liegt, wird mit dem eingestellten Ladestrom geladen und -falls vorhanden- zusätzlich mit dem Überschuss. Wenn die Preisgrenze überschritten wird, wird nur mit Überschuss geladen, wenn dieser vorhanden ist. ",-1)])]),default:a(()=>[e[75]||(e[75]=i("Arbeitsweise von Eco ",-1))]),_:1,__:[75]}),l(A,{title:`Minimaler Dauerstrom unter der Preisgrenze${t.dcChargingEnabled?" (AC)":""}`,min:6,max:32,step:1,unit:"A","model-value":r.chargemode.eco_charging.current,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.eco_charging.current")},null,8,["title","model-value","onUpdate:modelValue"]),t.dcChargingEnabled===!0?(o(),f(_,{key:0,title:"Minimale Dauerleistung unter der Preisgrenze (DC)",unit:"kW",min:0,"model-value":n.ac_current2dc_power(r.chargemode.eco_charging.dc_current),"onUpdate:modelValue":u=>n.updateState(d,n.dc_power2ac_current(u),"chargemode.eco_charging.dc_current")},null,8,["model-value","onUpdate:modelValue"])):s("",!0),l(g,{title:"Anzahl Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:3,text:"Maximum"},{buttonValue:0,text:"Automatik"}],"model-value":r.chargemode.eco_charging.phases_to_use,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.eco_charging.phases_to_use")},{help:a(()=>[...e[76]||(e[76]=[i(' Hier kann eingestellt werden, ob Ladevorgänge mit einer Phase oder dem möglichen Maximum in Abhängigkeit der "Ladepunkt"- und "Fahrzeug"-Einstellungen durchgeführt werden. Im Modus "Automatik" entscheidet die Regelung, welche Einstellung genutzt wird, um den verfügbaren Überschuss in die Fahrzeuge zu laden. Voraussetzung ist die verbaute Umschaltmöglichkeit zwischen einer und mehreren Phasen (sog. 1p3p). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(g,{title:"Begrenzung",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"Fahrzeug-SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":r.chargemode.eco_charging.limit.selected,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.eco_charging.limit.selected")},{help:a(()=>[...e[77]||(e[77]=[i(" Eco kann ohne Fahrzeug-SoC-Begrenzung (Aus), mit Begrenzung des Fahrzeug-SoC (SoC) bei konfiguriertem SoC-Auslesemodul oder mittels Vorgabe eine gewünschten Energiemenge in kWh (Energie) genutzt werden. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(A,{title:"SoC-Limit für das Fahrzeug",min:5,max:100,step:5,unit:"%","model-value":r.chargemode.eco_charging.limit.soc,"onUpdate:modelValue":u=>n.updateState(d,u,"chargemode.eco_charging.limit.soc")},{help:a(()=>[...e[78]||(e[78]=[i(' Um die Fahrzeug-SoC-Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet sein (siehe "Konfiguration" -> "Fahrzeuge" -> "SoC-Modul"). ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(_,{title:"Energie-Limit",unit:"kWh",min:1,step:1,"model-value":r.chargemode.eco_charging.limit.amount/1e3,"onUpdate:modelValue":u=>n.updateState(d,u*1e3,"chargemode.eco_charging.limit.amount")},{help:a(()=>[...e[79]||(e[79]=[i(" Die geladene Energiemenge wird nach dem Anstecken neu gezählt. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),!n.$store.state.mqtt["openWB/optional/et/provider"]||!n.$store.state.mqtt["openWB/optional/et/provider"].type?(o(),f(V,{key:1,subtype:"warning"},{default:a(()=>[...e[80]||(e[80]=[i(" Bitte in den übergreifenden Ladeeinstellungen einen Strompreis-Anbieter konfigurieren. Ohne Strompreis-Anbieter wird im Modus Eco nur geladen, wenn Überschuss vorhanden ist. ",-1)])]),_:1,__:[80]})):s("",!0),l(_,{title:"Preisgrenze für strompreisbasiertes Laden",min:"-80",max:"80",step:"0.01",precision:2,unit:"ct/kWh","model-value":r.chargemode.eco_charging.max_price*1e5,"onUpdate:modelValue":u=>n.updateState(d,parseFloat((u/1e5).toFixed(7)),"chargemode.eco_charging.max_price")},null,8,["model-value","onUpdate:modelValue"])]),_:2},1536),v.installAssistantActive?s("",!0):(o(),h("div",cn,[e[84]||(e[84]=p("hr",null,null,-1)),l(g,{title:"Zeitladen",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":r.time_charging.active,"onUpdate:modelValue":u=>n.updateState(d,u,"time_charging.active")},{help:a(()=>[...e[81]||(e[81]=[p("p",null,' Der Lademodus Zeit kann parallel zu einem der anderen Lademodi aktiviert werden. Die Auswahl des Lademodus, der in der Regelung genutzt wird, erfolgt anhand der Übersicht in der Hilfe bei "Aktiver Lademodus". Wenn kein Zeitplan aktiv ist oder das Limit des Zeitplans erreicht wurde, wird der Lademodus verwendet, der bei "Aktiver Lademodus" ausgewählt ist. ',-1),p("p",null," Mit einem Zeitplan kann ein klar abgegrenzter Zeitbereich zum Fahrzeugladen definiert werden. Dies wird häufig genutzt, um einem Fahrzeug kurz vor der Abfahrt Strom anzubieten, damit dessen Vorklimatisierung nicht aus dem Fahrzeugakku, sondern aus der openWB bezogen wird (Enteisung, Vorwärmung, Abkühlung). Nicht von der Vorklimatisierung benötigter Strom erhöht dabei den Fahrzeug-SoC. Um das Stromnetz am Morgen nicht unnötig zu strapazieren, sollte eine moderate Stromvorgabe und ein beschränkter Zeitbereich vorgegeben werden (z.B. max. 10A; 30min - in Übereinstimmung mit den Fahrzeug-App-Vorklimatisierungsvorgaben). ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),l(P,{ref_for:!0,ref:`card-${d}-scheduled_charging`,collapsible:!0,collapsed:!0,subtype:"secondary"},{header:a(()=>[...e[82]||(e[82]=[i(" Zeitladen-Pläne ",-1)])]),actions:a(()=>[l(z,{class:"bg-success clickable",title:"Neuen Zeitladen-Plan hinzufügen",onClick:B(u=>t.addChargeTemplateTimeChargingPlan(r.id),["stop"])},{default:a(()=>[l(c,{icon:["fas","plus"]})]),_:2},1032,["onClick"])]),default:a(()=>[(r.time_charging.plans??[]).length==0?(o(),f(V,{key:0,subtype:"info"},{default:a(()=>[...e[83]||(e[83]=[i(" Es wurden noch keine Pläne für das Zeitladen angelegt. ",-1)])]),_:1,__:[83]})):s("",!0),(o(!0),h(L,null,T(r.time_charging.plans??[],(u,U)=>(o(),f(te,{key:U,"model-value":u,"template-id":r.id,"dc-charging-enabled":t.dcChargingEnabled,"onUpdate:modelValue":M=>n.updateState(d,M,`time_charging.plans.${U}`),onSendCommand:e[4]||(e[4]=M=>n.$emit("sendCommand",M))},null,8,["model-value","template-id","dc-charging-enabled","onUpdate:modelValue"]))),128))]),_:2},1536)]))]),_:2},1032,["title","collapsed"]))),128))]))]),_:1},8,["collapsed"]),l(le,{"form-name":"vehicleConfigForm",onSave:e[5]||(e[5]=r=>n.$emit("save")),onReset:e[6]||(e[6]=r=>n.$emit("reset")),onDefaults:e[7]||(e[7]=r=>n.$emit("defaults"))})])])],64)}const fn=q(Qe,[["render",bn],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/VehicleConfig.vue"]]),zn=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"}));export{ve as V,fn as a,zn as b};
