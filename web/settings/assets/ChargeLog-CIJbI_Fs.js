import{F as x,l as N,a6 as k,a7 as E}from"./vendor-fortawesome-DunXjMUr.js";import{_ as S,a1 as B,m as g,l as u,f as _,q as h,u as s,D as d,y as r,K as n,z as y,k as w,P as m,x as W}from"./vendor-Cm2BcoGA.js";import{C as V}from"./index-UZ-qidAy.js";import"./vendor-sortablejs-BIKIFH7x.js";import"./vendor-bootstrap-CFWPZPj5.js";import"./vendor-jquery-CEMonh9Y.js";import"./vendor-axios-DnM0A367.js";N.add(k,E);const I={name:"OpenwbChargeLogView",components:{Vue3TableLite:B,FontAwesomeIcon:x},mixins:[V],emits:["sendCommand"],data(){return{dateTimeFormat:new Intl.DateTimeFormat(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),mqttTopicsToSubscribe:["openWB/general/extern","openWB/general/charge_log_data_config","openWB/chargepoint/+/config","openWB/vehicle/+/info","openWB/vehicle/+/name"],currentMonth:"",chargeLogRequestData:{month:"",year:"",filter:{chargepoint:{id:[]},vehicle:{id:[],tag:[],chargemode:[],prio:void 0}}},downloadFile:null,table:{messages:{pagingInfo:"Einträge {0}-{1} von {2}",pageSizeChangeLabel:"Einträge:",gotoPageLabel:" Gehe zu:",noDataAvailable:"Keine Einträge gefunden."},pageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"},{value:100,text:"100"}],columns:[{label:"Beginn",field:"time_begin",sortable:!0},{label:"Ende",field:"time_end",sortable:!0},{label:"Dauer",field:"time_time_charged",sortable:!0},{label:"Kosten",field:"data_costs",sortable:!0},{label:"Energieaufteilung",field:"data_power_source",sortable:!1},{label:"Fahrzeug",field:"vehicle_name",sortable:!0},{label:"Lademodus",field:"vehicle_chargemode",sortable:!0},{label:"Priorität",field:"vehicle_prio",sortable:!0},{label:"ID-Tag",field:"vehicle_rfid",sortable:!0},{label:"SoC Beginn",field:"vehicle_soc_at_start",sortable:!0},{label:"SoC Ende",field:"vehicle_soc_at_end",sortable:!0},{label:"Ladepunkt",field:"chargepoint_name",sortable:!0},{label:"Seriennummer",field:"chargepoint_serial_number",sortable:!0},{label:"Energie",field:"data_imported_since_mode_switch",sortable:!0},{label:"Zähler Laden Beginn",field:"chargepoint_imported_at_start",sortable:!0},{label:"Zähler Laden Ende",field:"chargepoint_imported_at_end",sortable:!0},{label:"Entladene Energie",field:"data_exported_since_mode_switch",sortable:!0},{label:"Zähler Entladen Beginn",field:"chargepoint_exported_at_start",sortable:!0},{label:"Zähler Entladen Ende",field:"chargepoint_exported_at_end",sortable:!0}],sortable:{order:"timestamp_begin",sort:"asc"}},totals:{columns:[{label:"Dauer",field:"time_charged",sortable:!1},{label:"Energie",field:"imported_since_mode_switch",sortable:!1},{label:"Entladene Energie",field:"exported_since_mode_switch",sortable:!1},{label:"Reichweite",field:"range_charged",sortable:!1},{label:"Kosten",field:"costs",sortable:!1}]}}},computed:{mqttClientId(){return this.$root.mqttClientId},baseUrl(){const t=parseInt(location.port)||(location.protocol==="https:"?443:80);return`${location.protocol}//${location.hostname}:${t}/openWB/web/settings/downloadChargeLog.php`},downloadUrlMonth(){return!this.chargeLogRequestData.year||!this.chargeLogRequestData.month?null:`${this.baseUrl}?year=${this.chargeLogRequestData.year}&month=${this.chargeLogRequestData.month}`},downloadUrlYear(){return this.chargeLogRequestData.year?`${this.baseUrl}?year=${this.chargeLogRequestData.year}`:null},chargeLogDate:{get(){return this.chargeLogRequestData.year+"-"+this.chargeLogRequestData.month},set(t){let e=t.split("-");this.chargeLogRequestData.year=e[0],this.chargeLogRequestData.month=e[1]}},chargeLogTotals(){return this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"]?[this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"].totals]:[]},chargeLogColumns(){return this.table.columns.map(t=>({...t,headerClasses:this.addClasses(t.field),columnClasses:this.addClasses(t.field)}))},chargeLogDataset:{get(){if(this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"]==null)return[];try{return this.$store.state.mqtt["openWB/log/"+this.mqttClientId+"/data"].entries.map(t=>{var e=Date.parse(t.time.begin),o=Date.parse(t.time.end);return{chargepoint_id:t.chargepoint.id,chargepoint_name:t.chargepoint.name,chargepoint_imported_at_start:t.chargepoint.imported_at_start,chargepoint_imported_at_end:t.chargepoint.imported_at_end,chargepoint_exported_at_start:t.chargepoint.exported_at_start,chargepoint_exported_at_end:t.chargepoint.exported_at_end,chargepoint_serial_number:t.chargepoint.serial_number,vehicle_id:t.vehicle.id,vehicle_name:t.vehicle.name,vehicle_chargemode:this.translateChargeMode(t.vehicle.chargemode),vehicle_rfid:t.vehicle.rfid,vehicle_prio:t.vehicle.prio,vehicle_soc_at_start:t.vehicle.soc_at_start,vehicle_soc_at_end:t.vehicle.soc_at_end,vehicle_range_at_start:t.vehicle.range_at_start,vehicle_range_at_end:t.vehicle.range_at_end,timestamp_begin:e/1e3,time_begin:isNaN(e)?null:this.dateTimeFormat.format(new Date(e)),timestamp_end:o/1e3,time_end:isNaN(o)?null:this.dateTimeFormat.format(new Date(o)),time_time_charged:t.time.time_charged,data_power_source:t.data.power_source?{pv:t.data.power_source.pv*100,grid:t.data.power_source.grid*100,bat:t.data.power_source.bat*100,cp:t.data.power_source.cp*100}:void 0,data_range_charged:t.data.range_charged,data_costs:t.data.costs,data_imported_since_plugged:t.data.imported_since_plugged,data_imported_since_mode_switch:t.data.imported_since_mode_switch,data_exported_since_plugged:t.data.exported_since_plugged,data_exported_since_mode_switch:t.data.exported_since_mode_switch}})}catch(t){return console.error(t),[]}}},chargeLogCsv:{get(){return[['"Beginn"','"Ende"','"Zeitstempel Beginn"','"Zeitstempel Ende"','"Dauer"','"Kosten"','"Energieanteil Netz"','"Energieanteil Ladepunkte"','"Energieanteil Speicher"','"Energieanteil PV"','"Fahrzeug"','"Fahrzeug-ID"','"Lademodus"','"Priorität"','"ID-Tag"','"SoC Beginn"','"SoC Ende"','"Reichweite Beginn"','"Reichweite Ende"','"Ladepunkt"','"Ladepunkt-ID"','"Zähler Seriennummer"','"Geladene Energie"','"Entladene Energie"','"Reichweite"','"Zählerstand Laden Beginn"','"Zählerstand Laden Ende"','"Zählerstand Entladen Beginn"','"Zählerstand Entladen Ende"','"Energie seit Anstecken"','"Entladene Energie seit Anstecken"'],...this.chargeLogDataset.map(e=>[e.time_begin==null?"":'"'+e.time_begin+'"',e.time_end==null?"":'"'+e.time_end+'"',e.timestamp_begin==null||isNaN(e.timestamp_begin)?"":e.timestamp_begin,e.timestamp_end==null||isNaN(e.timestamp_end)?"":e.timestamp_end,'"'+e.time_time_charged+'"',this.formatCosts(e.data_costs,!1),e.data_power_source==null?"":this.formatNumber(e.data_power_source.grid,2),e.data_power_source==null?"":this.formatNumber(e.data_power_source.cp,2),e.data_power_source==null?"":this.formatNumber(e.data_power_source.bat,2),e.data_power_source==null?"":this.formatNumber(e.data_power_source.pv,2),'"'+e.vehicle_name+'"',e.vehicle_id,'"'+e.vehicle_chargemode+'"','"'+this.formatBool(e.vehicle_prio)+'"',e.vehicle_rfid==null?"":'"'+e.vehicle_rfid+'"',e.vehicle_soc_at_start==null?"":this.formatNumber(e.vehicle_soc_at_start,0),e.vehicle_soc_at_end==null?"":this.formatNumber(e.vehicle_soc_at_end,0),e.vehicle_range_at_start==null?"":this.formatNumber(e.vehicle_range_at_start,0),e.vehicle_range_at_end==null?"":this.formatNumber(e.vehicle_range_at_end,0),'"'+e.chargepoint_name+'"',e.chargepoint_id,e.chargepoint_serial_number==null?"":'"'+e.chargepoint_serial_number+'"',this.formatNumber(e.data_imported_since_mode_switch/1e3,2),this.formatNumber((e.data_exported_since_mode_switch||0)/1e3,2),this.formatNumber(e.data_range_charged,0),this.formatNumber(e.chargepoint_imported_at_start/1e3,2),this.formatNumber(e.chargepoint_imported_at_end/1e3,2),this.formatNumber((e.chargepoint_exported_at_start||0)/1e3,2),this.formatNumber((e.chargepoint_exported_at_end||0)/1e3,2),this.formatNumber(e.data_imported_since_plugged/1e3,2),this.formatNumber((e.data_exported_since_plugged||0)/1e3,2)])].map(e=>e.join(";")).join(`
`)+`
`}},chargeLogRead:{get(){return this.chargeLogDataset!=null}},chargeLogHasEntries:{get(){return this.chargeLogDataset==null?!1:this.chargeLogDataset.length>0}},totalRecordCount(){return this.chargeLogDataset.length},chargeModeList(){let t=this.chargeModes.map(o=>({value:o,text:this.translateChargeMode(o)}));const e=t.map(o=>o.value);return t.unshift({value:e,text:"Alle"}),t},chargePointList(){let t=this.getWildcardTopics("openWB/chargepoint/+/config");var e=[];for(const[,o]of Object.entries(t))e.push({value:o.id,text:o.name});if(e.length>1){const o=e.map(c=>c.value);e.unshift({value:o,text:"Alle"})}return e},vehicleList(){let t=this.getWildcardTopics("openWB/vehicle/+/info");var e=[];for(const o of Object.keys(t)){let c=parseInt(o.match(/\/([0-9]+)\/info$/)[1]);const l=this.$store.state.mqtt["openWB/vehicle/"+c+"/name"];e.push({value:c,text:l||`Fahrzeug ${c}`})}if(e.length>1){const o=e.map(c=>c.value);e.unshift({value:o,text:"Alle"})}return e}},beforeMount(){this.mqttTopicsToSubscribe.push("openWB/log/"+this.mqttClientId+"/data");const t=new Date;this.currentMonth=this.chargeLogDate=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")},mounted(){window.setTimeout(()=>{console.debug("initial charge log request"),console.debug("vehicle List on init:",JSON.stringify(this.vehicleList)),console.debug("charge Point List on init:",JSON.stringify(this.chargePointList)),this.requestChargeLog()},500)},methods:{cleanRequestData(){"id"in this.chargeLogRequestData.filter.chargepoint&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargeLogRequestData.filter.chargepoint.id.filter(t=>t!=null),this.chargeLogRequestData.filter.chargepoint.id.length==0&&(console.debug("no charge point id filter set, setting to first available",JSON.stringify(this.chargePointList[0])),this.chargePointList.length>0&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargePointList[0].value)),this.chargeLogRequestData.filter.chargepoint.id.length==1&&Array.isArray(this.chargeLogRequestData.filter.chargepoint.id[0])&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargeLogRequestData.filter.chargepoint.id[0])),"chargemode"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.chargemode=this.chargeLogRequestData.filter.vehicle.chargemode.filter(t=>t!=null),this.chargeLogRequestData.filter.vehicle.chargemode.length==0&&(console.debug("no vehicle chargemode filter set, setting to first available",JSON.stringify(this.chargeModeList[0])),this.chargeModeList.length>0&&(this.chargeLogRequestData.filter.vehicle.chargemode=this.chargeModeList[0].value)),this.chargeLogRequestData.filter.vehicle.chargemode.length==1&&Array.isArray(this.chargeLogRequestData.filter.vehicle.chargemode[0])&&(this.chargeLogRequestData.filter.vehicle.chargemode=this.chargeLogRequestData.filter.vehicle.chargemode[0])),"id"in this.chargeLogRequestData.filter.vehicle&&(this.chargeLogRequestData.filter.vehicle.id=this.chargeLogRequestData.filter.vehicle.id.filter(t=>t!=null),this.chargeLogRequestData.filter.vehicle.id.length==0&&(console.debug("no vehicle id filter set, setting to first available",JSON.stringify(this.vehicleList[0])),this.vehicleList.length>0&&(this.chargeLogRequestData.filter.vehicle.id=this.vehicleList[0].value)),this.chargeLogRequestData.filter.vehicle.id.length==1&&Array.isArray(this.chargeLogRequestData.filter.vehicle.id[0])&&(this.chargeLogRequestData.filter.vehicle.id=this.chargeLogRequestData.filter.vehicle.id[0])),"id"in this.chargeLogRequestData.filter.chargepoint&&this.chargeLogRequestData.filter.chargepoint.id.length==1&&Array.isArray(this.chargeLogRequestData.filter.chargepoint.id[0])&&(this.chargeLogRequestData.filter.chargepoint.id=this.chargeLogRequestData.filter.chargepoint.id[0]),"prio"in this.chargeLogRequestData.filter.vehicle&&this.chargeLogRequestData.filter.vehicle.prio===null&&(this.chargeLogRequestData.filter.vehicle.prio=void 0),console.debug("cleaned request data",JSON.stringify(this.chargeLogRequestData))},requestChargeLog(){if(console.debug("requesting charge log with data:",JSON.stringify(this.chargeLogRequestData)),document.forms.chargeLogForm.reportValidity())this.cleanRequestData(),this.$emit("sendCommand",{command:"getChargeLog",data:this.chargeLogRequestData});else{console.warn("form invalid");return}},makeTextFile(t){var e=new Blob([t],{type:"text/csv"});return this.downloadFile!==null&&window.URL.revokeObjectURL(this.downloadFile),this.downloadFile=window.URL.createObjectURL(e),this.downloadFile},downloadChargeLog(){this.$refs.downloadChargeLogLink.setAttribute("download","Ladeprotokoll-"+this.chargeLogDate+".csv"),this.$refs.downloadChargeLogLink.href=this.makeTextFile(this.chargeLogCsv),this.$refs.downloadChargeLogLink.dispatchEvent(new MouseEvent("click"))},addClasses(t){return this.$store.state.mqtt["openWB/general/charge_log_data_config"]!==void 0&&Object.hasOwn(this.$store.state.mqtt["openWB/general/charge_log_data_config"],t)?this.$store.state.mqtt["openWB/general/charge_log_data_config"][t]?[]:["d-none"]:[]},getProgressTitle(t){return`Netz: ${this.formatNumber(t.grid,0,0)}%, Ladepunkte: ${this.formatNumber(t.cp,0,0)}%, Speicher: ${this.formatNumber(t.bat,0,0)}%, PV: ${this.formatNumber(t.pv,0,0)}%`},formatBool(t){return t?"Ja":"Nein"},formatW(t,e=!0){let o=this.dashIfNotSet(this.formatNumber(t/1e3,2));return e?o+"kW":o},formatWh(t,e=!0){let o=this.dashIfNotSet(this.formatNumber(t/1e3,2));return e?o+"kWh":o},formatRange(t,e=!0){let o=this.dashIfNotSet(this.formatNumber(t,0));return e?o+"km":o},formatSoc(t,e=!0){let o=this.dashIfNotSet(this.formatNumber(t,0));return e?o+"%":o},formatCosts(t,e=!0){let o=this.dashIfNotSet(this.formatNumber(t,2));return e?o+"€":o},dashIfNotSet(t){return t==null||t==""||t==null?"-":t},getChargeModeClass(t){switch(t){case"Sofort":return"bg-danger";case"PV":return"bg-success";case"Zielladen":return"bg-primary";case"Zeitladen":return"bg-warning";case"Eco":case"Standby":return"bg-secondary";case"Stop":return"bg-dark";default:return console.warn("unknown charge mode:",t),"bg-light"}}}},F={class:"chargeLog"},T={key:0},M={key:1},U={name:"chargeLogForm"},P=["href"],A=["href"],O={key:1},Z={class:"td-end"},z={class:"td-end"},J=["title"],j=["aria-valuenow"],K=["aria-valuenow"],Y=["aria-valuenow"],G=["aria-valuenow"],H={key:1,class:"td-center"},Q={class:"td-end"},X={class:"no-wrap"},$={class:"no-wrap"},ee={class:"td-end"},te={class:"no-wrap"},ae={class:"no-wrap"},ie={class:"td-end"},re={class:"no-wrap"},se={class:"no-wrap"},oe={class:"td-end"},ne={class:"no-wrap"},le={class:"td-end"},de={class:"td-end"},he={class:"td-end"},ge={class:"td-end"},ce={key:0},ue={class:"row justify-content-center"},_e={ref:"downloadChargeLogLink",class:"hide"},me={class:"td-end"},pe={class:"td-end"},fe={class:"td-end"},ve={class:"td-end"},be={class:"td-end"};function Le(t,e,o,c,l,i){const p=g("openwb-base-alert"),D=g("openwb-base-text-input"),v=g("font-awesome-icon"),q=g("openwb-base-button-group-input"),f=g("openwb-base-select-input"),R=g("openwb-base-array-input"),b=g("openwb-base-card"),L=g("vue3-table-lite"),C=g("openwb-base-click-button");return u(),_("div",F,[t.$store.state.mqtt["openWB/general/extern"]===!0?(u(),_("div",T,[h(p,{subtype:"info"},{default:s(()=>[...e[13]||(e[13]=[d(' Das Ladeprotokoll ist nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. Du findest alle Ladevorgänge in der openWB, die sich im Steuerungsmodus "primary" befindet. ',-1)])]),_:1})])):(u(),_("div",M,[r("form",U,[h(b,{title:"Filter"},{default:s(()=>[h(D,{modelValue:i.chargeLogDate,"onUpdate:modelValue":[e[0]||(e[0]=a=>i.chargeLogDate=a),e[1]||(e[1]=a=>i.requestChargeLog())],title:"Zeitraum",subtype:"month",min:"2018-01","show-quick-buttons":!0,max:l.currentMonth},null,8,["modelValue","max"]),h(b,{title:"Erweiterte Optionen",collapsible:!0,collapsed:!0},{header:s(()=>[h(v,{icon:["fas","filter"]}),e[14]||(e[14]=d(" Erweiterte Optionen ",-1))]),default:s(()=>[h(q,{modelValue:l.chargeLogRequestData.filter.vehicle.prio,"onUpdate:modelValue":[e[2]||(e[2]=a=>l.chargeLogRequestData.filter.vehicle.prio=a),e[3]||(e[3]=a=>i.requestChargeLog())],title:"Priorität",buttons:[{buttonValue:null,text:"Alle",class:"btn-outline-info"},{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},null,8,["modelValue"]),h(f,{modelValue:l.chargeLogRequestData.filter.vehicle.chargemode,"onUpdate:modelValue":[e[4]||(e[4]=a=>l.chargeLogRequestData.filter.vehicle.chargemode=a),e[5]||(e[5]=a=>i.requestChargeLog())],title:"Lademodus",multiple:"",options:i.chargeModeList},{help:s(()=>[...e[15]||(e[15]=[d(" Es können mehrere Elemente ausgewählt werden. ",-1)])]),_:1},8,["modelValue","options"]),h(f,{modelValue:l.chargeLogRequestData.filter.chargepoint.id,"onUpdate:modelValue":[e[6]||(e[6]=a=>l.chargeLogRequestData.filter.chargepoint.id=a),e[7]||(e[7]=a=>i.requestChargeLog())],title:"Ladepunkt",multiple:"",options:i.chargePointList},{help:s(()=>[...e[16]||(e[16]=[d(" Es können mehrere Elemente ausgewählt werden. ",-1)])]),_:1},8,["modelValue","options"]),h(f,{modelValue:l.chargeLogRequestData.filter.vehicle.id,"onUpdate:modelValue":[e[8]||(e[8]=a=>l.chargeLogRequestData.filter.vehicle.id=a),e[9]||(e[9]=a=>i.requestChargeLog())],title:"Fahrzeug",multiple:"",options:i.vehicleList},{help:s(()=>[...e[17]||(e[17]=[d(" Es können mehrere Elemente ausgewählt werden. ",-1)])]),_:1},8,["modelValue","options"]),h(R,{modelValue:l.chargeLogRequestData.filter.vehicle.tag,"onUpdate:modelValue":[e[10]||(e[10]=a=>l.chargeLogRequestData.filter.vehicle.tag=a),e[11]||(e[11]=a=>i.requestChargeLog())],title:"ID-Tags"},{help:s(()=>[...e[18]||(e[18]=[d(" Es können mehrere Tags als Filter verwendet werden. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),h(p,{subtype:"info"},{default:s(()=>[e[19]||(e[19]=d(" Das Ladeprotokoll kann monatsweise automatisiert über folgende URL abgerufen werden: ",-1)),r("a",{href:i.downloadUrlMonth},n(i.downloadUrlMonth),9,P),e[20]||(e[20]=d()),e[21]||(e[21]=r("br",null,null,-1)),e[22]||(e[22]=d(" Das komplette Ladeprotokoll für das gesamte Jahr kann automatisiert über folgende URL abgerufen werden: ",-1)),r("a",{href:i.downloadUrlYear},n(i.downloadUrlYear),9,A)]),_:1}),i.chargeLogRead?(u(),_("div",O,[h(L,{class:"charge-log-table","is-static-mode":!0,columns:i.chargeLogColumns,rows:i.chargeLogDataset,total:i.totalRecordCount,sortable:l.table.sortable,messages:l.table.messages,"page-options":l.table.pageOptions,limit:25,"is-slot-mode":!0},{time_begin:s(a=>[d(n(i.dashIfNotSet(a.value.time_begin)),1)]),time_end:s(a=>[d(n(i.dashIfNotSet(a.value.time_end)),1)]),time_time_charged:s(a=>[r("div",Z,n(a.value.time_time_charged),1)]),data_costs:s(a=>[r("div",z,n(i.formatCosts(a.value.data_costs)),1)]),data_power_source:s(a=>[a.value.data_power_source?(u(),_("div",{key:0,class:"progress td-center",title:i.getProgressTitle(a.value.data_power_source)},[r("div",{class:"progress-bar bg-danger",role:"progressbar",style:m({width:a.value.data_power_source.grid+"%"}),"aria-valuenow":a.value.data_power_source.grid,"aria-valuemin":"0","aria-valuemax":"100"},null,12,j),r("div",{class:"progress-bar bg-primary",role:"progressbar",style:m({width:a.value.data_power_source.cp+"%"}),"aria-valuenow":a.value.data_power_source.cp,"aria-valuemin":"0","aria-valuemax":"100"},null,12,K),r("div",{class:"progress-bar bg-warning",role:"progressbar",style:m({width:a.value.data_power_source.bat+"%"}),"aria-valuenow":a.value.data_power_source.bat,"aria-valuemin":"0","aria-valuemax":"100"},null,12,Y),r("div",{class:"progress-bar bg-success",role:"progressbar",style:m({width:a.value.data_power_source.pv+"%"}),"aria-valuenow":a.value.data_power_source.pv,"aria-valuemin":"0","aria-valuemax":"100"},null,12,G)],8,J)):(u(),_("div",H," - "))]),vehicle_chargemode:s(a=>[r("div",{class:w(["td-center tag",i.getChargeModeClass(a.value.vehicle_chargemode)])},n(a.value.vehicle_chargemode),3)]),vehicle_prio:s(a=>[r("div",{class:w(["td-center tag",a.value.vehicle_prio?"bg-success":"bg-danger"])},n(i.formatBool(a.value.vehicle_prio)),3)]),vehicle_rfid:s(a=>[d(n(i.dashIfNotSet(a.value.vehicle_rfid)),1)]),vehicle_soc_at_start:s(a=>[r("div",Q,[r("span",X,n(i.formatSoc(a.value.vehicle_soc_at_start)),1),r("span",$," ("+n(i.formatRange(a.value.vehicle_range_at_start))+") ",1)])]),vehicle_soc_at_end:s(a=>[r("div",ee,[r("span",te,n(i.formatSoc(a.value.vehicle_soc_at_end)),1),r("span",ae," ("+n(i.formatRange(a.value.vehicle_range_at_end))+") ",1)])]),chargepoint_name:s(a=>[d(n(i.dashIfNotSet(a.value.chargepoint_name)),1)]),chargepoint_serial_number:s(a=>[d(n(i.dashIfNotSet(a.value.chargepoint_serial_number)),1)]),data_imported_since_mode_switch:s(a=>[r("div",ie,[r("span",re,n(i.formatWh(a.value.data_imported_since_mode_switch)),1),r("span",se," ("+n(i.formatRange(a.value.data_range_charged))+") ",1)])]),data_exported_since_mode_switch:s(a=>[r("div",oe,[r("span",ne,n(i.formatWh(a.value.data_exported_since_mode_switch||0)),1)])]),chargepoint_imported_at_start:s(a=>[r("div",le,n(i.formatWh(a.value.chargepoint_imported_at_start)),1)]),chargepoint_imported_at_end:s(a=>[r("div",de,n(i.formatWh(a.value.chargepoint_imported_at_end)),1)]),chargepoint_exported_at_start:s(a=>[r("div",he,n(i.formatWh(a.value.chargepoint_exported_at_start||0)),1)]),chargepoint_exported_at_end:s(a=>[r("div",ge,n(i.formatWh(a.value.chargepoint_exported_at_end||0)),1)]),_:1},8,["columns","rows","total","sortable","messages","page-options"]),i.totalRecordCount>0?(u(),_("div",ce,[r("div",ue,[h(C,{class:"col-4 btn-success",onButtonClicked:e[12]||(e[12]=a=>i.downloadChargeLog())},{default:s(()=>[e[24]||(e[24]=d(" Als CSV exportieren ",-1)),h(v,{icon:["fas","download"]})]),_:1}),r("a",_e,null,512)]),e[25]||(e[25]=r("div",{class:"row"},[r("div",{class:"col"},[r("h2",null,"Summe")])],-1)),h(L,{class:"charge-log-totals","is-static-mode":!0,"is-hide-paging":!0,columns:l.totals.columns,rows:i.chargeLogTotals,total:1,"is-slot-mode":!0},{time_charged:s(a=>[r("div",me,n(a.value.time_charged),1)]),imported_since_mode_switch:s(a=>[r("div",pe,n(i.formatWh(a.value.imported_since_mode_switch)),1)]),exported_since_mode_switch:s(a=>[r("div",fe,n(i.formatWh(a.value.exported_since_mode_switch||0)),1)]),range_charged:s(a=>[r("div",ve,n(i.formatRange(a.value.range_charged)),1)]),costs:s(a=>[r("div",be,n(i.formatCosts(a.value.costs)),1)]),_:1},8,["columns","rows"])])):W("",!0)])):(u(),y(p,{key:0,subtype:"info"},{default:s(()=>[...e[23]||(e[23]=[d(" Es wurden noch keine Daten abgerufen. ",-1)])]),_:1}))])]))])}const ke=S(I,[["render",Le],["__scopeId","data-v-8607e7e7"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/ChargeLog.vue"]]);export{ke as default};
