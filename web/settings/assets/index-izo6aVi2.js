const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Status-BP39vwEe.js","assets/vendor-fortawesome-Bn25cRey.js","assets/vendor-CPWhyePA.js","assets/vendor-D1GV4U4l.css","assets/vendor-chartjs-DB5Gx2Mc.js","assets/vendor-luxon-BDx6lZXm.js","assets/vendor-bootstrap-DoSh2SwU.js","assets/vendor-jquery-CEMonh9Y.js","assets/vendor-bootstrap-BJ8HpIhY.css","assets/vendor-axios-BuID6n48.js","assets/Status-C2EBkHqs.css","assets/ChargeLog-DLvdmV1J.js","assets/ChargeLog-D2ZLixbI.css","assets/Chart-C-dJ6Bvp.js","assets/Chart-BggLkBbQ.css","assets/GeneralConfiguration-YHm-rGPE.js","assets/dynamic-import-helper-BheWnx7M.js","assets/IdentificationConfiguration-Gd9tlI3q.js","assets/DisplayConfiguration-1jvkcZJD.js","assets/GeneralChargeConfiguration-D-0JxxQ8.js","assets/SurplusChargeConfiguration-DiEuUPoD.js","assets/ActiveBatControlConfiguration-BYD3GnG9.js","assets/HardwareInstallation-C9dkW93x.js","assets/LoadManagementConfiguration-q6ivlmKT.js","assets/OpenwbSortableList-DcHGmz6p.js","assets/OpenwbSortableList-C11EhIQj.css","assets/ChargePointInstallation-BlRVHk1U.js","assets/ChargePointInstallation-37TSBtDo.css","assets/VehicleConfiguration-DFPDt1D2.js","assets/IoConfiguration-DAq6pEK0.js","assets/CloudConfiguration-BCBUZNpE.js","assets/MqttBridgeConfiguration-BUtIe_ro.js","assets/DebugConfiguration-qKFwryNG.js","assets/DebugConfiguration-CN753w98.css","assets/Support-DJzcKvpm.js","assets/LegalSettings-aVis3SO7.js","assets/SystemConfiguration-Dg4rZg1o.js","assets/SystemConfiguration-BWslT2W-.css","assets/SecurityConfiguration-DHR1YyCr.js","assets/DataManagement-DDZzhpER.js","assets/InstallAssistant-CawdPliW.js","assets/Error-Cvap85j9.js","assets/TestingStore-DBZ6MWSz.js"])))=>i.map(i=>d[i]);
import{_ as S,e as u,f as _,j as C,k as o,l as h,m as b,q as m,u as d,x as l,y as f,z as E,A as g,D as q,E as I,F as $,G as K,I as V,J as w,K as T,L as P,M as Q,N as de,O as ue,P as ce,Q as pe,T as N,R as G,n as me,S as fe,U as ge,V as he,W as be,X as _e,Y as ve,Z as ye,$ as we}from"./vendor-CPWhyePA.js";import{l as A,f as Y,a as X,F as M,b as ke,c as Se,d as z,e as Ce,g as U,h as Be,i as $e,j as Ie,k as Oe,m as Ae,n as Me,o as Te,p as Ve,q as Pe,r as qe,s as De,t as Le,u as Ee,v as xe,w as ee,x as We,y as Re,z as je,A as Ne,B as ze,C as te,D as Ue,E as Fe,G as He,H as Ke,I as Ge,J as Je,K as Ze,L as Qe,M as Ye,N as Xe,O as et,P as se,Q as tt,R as st,S as nt}from"./vendor-fortawesome-Bn25cRey.js";import"./vendor-bootstrap-DoSh2SwU.js";import{p as ot,a as at}from"./vendor-axios-BuID6n48.js";import"./vendor-jquery-CEMonh9Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const it={name:"OpenwbAlert",props:{subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}}};function lt(e,t,s,c,a,n){return o(),u("div",{class:C(["card-text alert","alert-"+s.subtype])},[_(e.$slots,"default",{},void 0,!0)],2)}const rt=S(it,[["render",lt],["__scopeId","data-v-055c15aa"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAlert.vue"]]),dt=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"}));A.add(Y,X);const ut={name:"OpenwbBaseSettingElement",components:{FontAwesomeIcon:M},data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},ct={key:0,class:"col-md-4 col-form-label"},pt={class:"form-row"},mt={key:0,class:"form-text alert alert-info my-1 small flex-fill"};function ft(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-tooltip");return o(),u("div",{class:C(["form-row",e.$slots.title?"mb-1":"mx-0"])},[e.$slots.title?(o(),u("div",ct,[_(e.$slots,"title",{},void 0,!0),b(p,{description:`Hilfe ${a.showHelp?"verbergen":"anzeigen"}`},{default:m(()=>[e.$slots.help?(o(),f(i,{key:0,icon:a.showHelp?["fas","question-circle"]:["far","question-circle"],class:C(["clickable ml-1",a.showHelp?"text-info":""]),onClick:E(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):d("",!0)]),_:1},8,["description"])])):d("",!0),l("div",{class:C(e.$slots.title?"col-md-8":"col px-0")},[l("div",{class:C({"form-row":e.$slots.title})},[_(e.$slots,"default",{},()=>[t[0]||(t[0]=g("*ELEMENT MISSING*",-1))],!0)],2),l("div",pt,[a.showHelp?(o(),u("span",mt,[_(e.$slots,"help",{},void 0,!0)])):d("",!0)])],2)],2)}const D=S(ut,[["render",ft],["__scopeId","data-v-33864f66"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSettingElement.vue"]]),gt=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"})),ht={name:"BaseSettingComponents",data(){return{uid:Math.random().toString(36).substring(2,15)}}},L=S(ht,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/BaseSettingComponents.vue"]]);A.add(ke,Se,z,Ce);const bt={name:"OpenwbArrayInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!0},modelValue:{type:Array,default:()=>[]},validElements:{type:Array,default:()=>null},noElementsMessage:{type:String,default:()=>"Keine Elemente zugeordnet."},disabled:{type:Boolean,default:()=>!1},readonly:{type:Boolean,default:()=>!1}},emits:["update:modelValue"],data(){return{newTag:""}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},remainingElements(){return this.validElements===null?null:this.validElements.filter(e=>!this.value.includes(e.value||e))},newTagValid:{get(){return this.newTag.length>0&&!this.value.includes(this.newTag)&&(this.validElements===null||this.validElements.includes(this.newTag)||this.validElements.some(e=>e.value===this.newTag))&&this.$refs.tagInput?.checkValidity()}},tagLabel(){return e=>{if(this.validElements===null)return e;{const t=this.validElements.find(s=>(s.value||s)===e);return t?t.label||t.value||t:e}}}},methods:{addTag(){if(this.newTagValid){const e=[...this.value,this.newTag].sort();this.value=e,this.newTag=""}this.$refs.tagInput.focus()},removeTag(e){let t=[...this.value];t.splice(e,1),this.value=t}}},_t={key:0,class:"w-100"},vt={class:"input-group"},yt={class:"input-group-prepend"},wt={class:"input-group-text"},kt=["id","disabled"],St=["id","disabled"],Ct={value:"",disabled:""},Bt=["value"],$t={class:"input-group-append"},It={class:"tagList mt-1 w-100"},Ot={key:0,class:"noTag"};function At(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[s.readonly||s.disabled?d("",!0):(o(),u("div",_t,[l("div",vt,[l("div",yt,[l("div",wt,[_(e.$slots,"input-prefix",{},()=>[b(i,{icon:["fas","tag"]})],!0)])]),s.validElements===null?I((o(),u("input",$({key:0,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[0]||(t[0]=r=>a.newTag=r),type:"text",class:"form-control"},e.$attrs,{disabled:s.disabled,onKeyup:t[1]||(t[1]=K((...r)=>n.addTag&&n.addTag(...r),["enter"]))}),null,16,kt)),[[V,a.newTag]]):I((o(),u("select",$({key:1,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[2]||(t[2]=r=>a.newTag=r),class:"form-control"},e.$attrs,{disabled:s.disabled,onKeyup:t[3]||(t[3]=K((...r)=>n.addTag&&n.addTag(...r),["enter"]))}),[l("option",Ct,w(n.remainingElements.length>0?"Bitte wählen...":"Keine weiteren Optionen verfügbar"),1),(o(!0),u(T,null,P(n.remainingElements,(r,v)=>(o(),u("option",{key:v,value:r.value||r},w(r.label||r.value||r),9,Bt))),128))],16,St)),[[Q,a.newTag]]),l("div",$t,[l("div",{class:C(["input-group-text",n.newTagValid?"bg-success clickable":"not-clickable"]),onClick:t[4]||(t[4]=(...r)=>n.addTag&&n.addTag(...r))},[_(e.$slots,"input-add",{},()=>[b(i,{icon:["fas","plus"]})],!0)],2)])])])),l("div",It,[n.value.length==0?(o(),u("span",Ot,[b(i,{icon:["fas","info-circle"]}),g(" "+w(s.noElementsMessage),1)])):d("",!0),(o(!0),u(T,null,P(n.value,(r,v)=>(o(),u("span",{key:v,class:"tag"},[_(e.$slots,"element-prefix",{},()=>[b(i,{icon:["fas","tag"]})],!0),g(" "+w(n.tagLabel(r))+" ",1),s.readonly||s.disabled?d("",!0):(o(),f(i,{key:0,class:"clickable remove-element",icon:["fas","times-circle"],onClick:k=>n.removeTag(v)},null,8,["onClick"]))]))),128))])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Mt=S(bt,[["render",At],["__scopeId","data-v-9de93d37"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseArrayInput.vue"]]),Tt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),Vt={name:"OpenwbAvatar"},Pt={class:"avatar"};function qt(e,t,s,c,a,n){return o(),u("div",Pt,[_(e.$slots,"default",{},()=>[t[0]||(t[0]=g("?",-1))],!0)])}const Dt=S(Vt,[["render",qt],["__scopeId","data-v-06082a1a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAvatar.vue"]]),Lt=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"}));A.add(U);const Et={name:"OpenwbButtonRow",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{buttons:{type:Array,required:!0},modelValue:{type:[String,Number,Boolean],default:null},disabled:{type:Boolean,default:!1},uid:{type:String,required:!0}},emits:["update:modelValue","button-click"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},xt={class:"btn-group btn-block btn-group-toggle"},Wt=["for"],Rt=["id","value","disabled","onClick"];function jt(e,t,s,c,a,n){const i=h("font-awesome-icon");return o(),u("div",xt,[(o(!0),u(T,null,P(s.buttons,p=>(o(),u("label",{key:p.buttonValue,class:C(["btn btn-same-size btn-centered",[{active:s.modelValue===p.buttonValue},{disabled:s.disabled},p.class?p.class:"btn-outline-info"]]),for:`${s.uid}-${p.buttonValue}`},[l("span",null,[I(l("input",$({id:`${s.uid}-${p.buttonValue}`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"radio",value:p.buttonValue},{ref_for:!0},e.$attrs,{disabled:s.disabled,onClick:r=>e.$emit("button-click",p.buttonValue)}),null,16,Rt),[[de,n.value]]),_(e.$slots,"label-"+p.buttonValue,{},()=>[g(w(p.text),1)],!0),t[1]||(t[1]=l("span",null," ",-1)),b(i,{icon:["fas","check"],style:ue([n.value==p.buttonValue?"visibility: visible":"visibility: hidden"])},null,8,["style"])])],10,Wt))),128))])}const ne=S(Et,[["render",jt],["__scopeId","data-v-4bd221b6"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonRow.vue"]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),zt={name:"OpenwbButtonGroupInput",components:{OpenwbBaseSettingElement:D,OpenwbBaseButtonRow:ne},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Number,Boolean],default:void 0},buttons:{type:Array,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxButtonsPerRow:{type:Number,default:Number.POSITIVE_INFINITY}},emits:["update:modelValue","button-click"],data(){return{containerWidth:0}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},maxButtonsPerRowAuto(){return this.containerWidth<=200?1:this.containerWidth<=360?2:this.containerWidth<=550?3:1/0},buttonRows(){const e=[];for(let t=0;t<this.buttons.length;t+=this.maxButtonsPerRowAuto)e.push(this.buttons.slice(t,t+this.maxButtonsPerRowAuto));return e},screenSizeXs(){return this.containerWidth<=360},screenSizeSm(){return this.containerWidth<=550},screenSizeMd(){return this.containerWidth<=1024}},mounted(){this.updateContainerWidth(),window.addEventListener("resize",this.updateContainerWidth)},beforeUnmount(){window.removeEventListener("resize",this.updateContainerWidth)},methods:{updateContainerWidth(){const e=this.$refs.container;e&&(this.containerWidth=e.offsetWidth)}}},Ut={ref:"container",class:"btn-group-multi"};function Ft(e,t,s,c,a,n){const i=h("openwb-base-button-row"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[l("div",Ut,[(o(!0),u(T,null,P(n.buttonRows,(r,v)=>(o(),f(i,$({key:v,buttons:r,uid:e.uid,"model-value":n.value,disabled:s.disabled},{ref_for:!0},e.$attrs,{"onUpdate:modelValue":t[0]||(t[0]=k=>n.value=k),onButtonClick:t[1]||(t[1]=k=>e.$emit("button-click",k))}),q({_:2},[P(r,k=>({name:`label-${k.buttonValue}`,fn:m(y=>[_(e.$slots,`label-${k.buttonValue}`,$({ref_for:!0},y),void 0,!0)])}))]),1040,["buttons","uid","model-value","disabled"]))),128))],512)]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Ht=S(zt,[["render",Ft],["__scopeId","data-v-31e583df"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonGroupInput.vue"]]),Kt=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Gt={name:"OpenwbClickButton",props:{title:{type:String,required:!1,default:""},tooltip:{type:String,required:!1,default:""}},emits:["buttonClicked"],methods:{click(e){this.$emit("buttonClicked",e)}}},Jt=["title"];function Zt(e,t,s,c,a,n){return o(),u("button",{type:"button",class:"btn btn-block",title:s.tooltip,onClick:t[0]||(t[0]=E((...i)=>n.click&&n.click(...i),["prevent"]))},[_(e.$slots,"default",{},()=>[g(w(s.title),1)],!0)],8,Jt)}const oe=S(Gt,[["render",Zt],["__scopeId","data-v-2e9c095b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseClickButton.vue"]]),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),Yt={name:"OpenwbButtonInput",components:{OpenwbBaseSettingElement:D,OpenwbBaseClickButton:oe},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},buttonText:{type:String,required:!1,default:void 0},disabled:{type:Boolean,default:!1},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}},emits:["buttonClicked"],methods:{handleClick(e){this.$emit("buttonClicked",e)}}};function Xt(e,t,s,c,a,n){const i=h("openwb-base-click-button"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)])]),default:m(()=>[b(i,$({class:(s.disabled?"btn-outline-":"btn-")+s.subtype,disabled:s.disabled},e.$attrs,{onButtonClicked:n.handleClick}),{default:m(()=>[g(w(s.buttonText),1)]),_:1},16,["class","disabled","onButtonClicked"])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help")]),key:"0"}:void 0]),1024)}const es=S(Yt,[["render",Xt],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonInput.vue"]]),ts=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"}));A.add(Be,$e);const ss={name:"OpenwbCard",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{title:{type:String,default:void 0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"secondary"},bodyBg:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"light"},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1}},emits:["collapsed","expanded"],data(){return{isCollapsed:this.collapsible&&this.collapsed}},methods:{toggleBody(){this.collapsible===!0&&(this.isCollapsed=!this.isCollapsed,this.$emit(this.isCollapsed?"collapsed":"expanded"))}}},ns={class:"form-group mb-0"},os={class:"form-row vaRow mb-0 py-2"},as={class:"col"},is={class:"card-actions ml-4"},ls={key:0,class:"card-actions mr-2"},rs={key:2,class:"card-footer"};function ds(e,t,s,c,a,n){const i=h("font-awesome-icon");return o(),u("div",{class:C(["card","border-"+s.subtype])},[s.title!==void 0||e.$slots.header?(o(),u("div",{key:0,class:C(["card-header py-1","bg-"+s.subtype]),onClick:t[0]||(t[0]=(...p)=>n.toggleBody&&n.toggleBody(...p))},[l("div",ns,[l("div",os,[l("div",as,[_(e.$slots,"header",{collapsed:a.isCollapsed},()=>[g(w(s.title),1)],!0)])])]),l("div",is,[e.$slots.actions?(o(),u("div",ls,[_(e.$slots,"actions",{collapsed:a.isCollapsed},void 0,!0)])):d("",!0),s.collapsible?(o(),f(i,{key:1,icon:a.isCollapsed?["fas","chevron-right"]:["fas","chevron-down"]},null,8,["icon"])):d("",!0)])],2)):d("",!0),a.isCollapsed===!1?(o(),u("div",$({key:1,class:["card-body",[s.title==null&&!e.$slots.header?"border-radius-top-inherit":"",e.$slots.footer?"":"border-radius-bottom-inherit","bg-"+s.bodyBg]]},e.$attrs),[_(e.$slots,"default",{},void 0,!0)],16)):d("",!0),e.$slots.footer&&a.isCollapsed===!1?(o(),u("div",rs,[_(e.$slots,"footer",{},void 0,!0)])):d("",!0)],2)}const us=S(ss,[["render",ds],["__scopeId","data-v-9833c353"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCard.vue"]]),cs=Object.freeze(Object.defineProperty({__proto__:null,default:us},Symbol.toStringTag,{value:"Module"})),ps={name:"OpenwbCheckboxInput",components:{OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Boolean}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},ms={class:"col-md-8"},fs=["id"];function gs(e,t,s,c,a,n){const i=h("openwb-base-setting-element");return o(),f(i,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)])]),default:m(()=>[l("div",ms,[I(l("input",$({id:`${e.uid}-checkbox-input`,"onUpdate:modelValue":t[0]||(t[0]=p=>n.value=p),class:"form-control",type:"checkbox"},e.$attrs),null,16,fs),[[ce,n.value]])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help")]),key:"0"}:void 0]),1024)}const hs=S(ps,[["render",gs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCheckboxInput.vue"]]),bs=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));A.add(Ie);const _s={name:"OpenwbColorPicker",components:{FontAwesomeIcon:M},mixins:[L],props:{defaultColor:{type:String,required:!1,default:void 0,validator:e=>/^#[0-9A-F]{6}$/i.test(e)},modelValue:{type:String,required:!1,default:"#000000",validator:e=>/^#[0-9A-F]{6}$/i.test(e)}},emits:["update:model-value"],methods:{changed(e){this.$emit("update:model-value",e)}}},vs={class:"wrapper"},ys=["id","value","title"];function ws(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-tooltip");return o(),u("div",vs,[l("input",{id:`${e.uid}-color-input`,type:"color",class:"custom-color-picker",value:s.modelValue,title:`Farbe: ${s.modelValue}`,onInput:t[0]||(t[0]=r=>n.changed(r.target.value))},null,40,ys),s.defaultColor?(o(),f(p,{key:0,description:`Zurücksetzen auf Standardfarbe (${s.defaultColor})`},{default:m(()=>[b(i,{class:"ml-1 clickable",icon:["fas","rotate-left"],onClick:t[1]||(t[1]=r=>n.changed(s.defaultColor))})]),_:1},8,["description"])):d("",!0)])}const ks=S(_s,[["render",ws],["__scopeId","data-v-1378b599"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseColorPicker.vue"]]),Ss=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),{text:J,copy:Cs,copied:Bs,isSupported:$s}=pe({copiedDuring:3e3,legacy:!0});A.add(Oe,Ae);const Is={name:"OpenwbCopyToClipboard",components:{FontAwesomeIcon:M},props:{tooltip:{type:String,default:"Wert kopieren"}},data(){return{}},computed:{contentText(){return this.$refs.content?this.$refs.content.innerText.trim():""},isCopied(){return Bs.value&&J.value===this.contentText},copySupported(){return $s.value}},methods:{click(){this.copySupported&&Cs(this.contentText).then(()=>{console.debug("Text copied to clipboard:",J.value)}).catch(e=>{console.error("Failed to copy text to clipboard:",e)})}}},Os=["title"],As={ref:"content"};function Ms(e,t,s,c,a,n){const i=h("font-awesome-icon");return o(),u("span",{title:n.copySupported&&!n.isCopied?s.tooltip:"",class:C({"copy-me":n.copySupported&&!n.isCopied}),onClick:t[0]||(t[0]=E((...p)=>n.click&&n.click(...p),["stop"]))},[l("span",As,[_(e.$slots,"default",{},void 0,!0)],512),n.copySupported?(o(),f(i,{key:0,class:"ml-1",icon:n.isCopied?["fas","clipboard-check"]:["fas","clipboard"]},null,8,["icon"])):d("",!0)],10,Os)}const Ts=S(Is,[["render",Ms],["__scopeId","data-v-81826ebe"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCopyToClipboard.vue"]]),Vs=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"}));A.add(Y,X,U);const Ps={name:"OpenwbHeading",components:{FontAwesomeIcon:M},inheritAttrs:!1,data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},qs={class:"heading-text"},Ds={key:0,class:"actions"},Ls={class:""},Es={key:0,class:"form-row alert alert-info small flex-fill"};function xs(e,t,s,c,a,n){const i=h("font-awesome-icon");return o(),u(T,null,[l("div",$({class:"card-text card-text-heading"},e.$attrs),[l("div",qs,[_(e.$slots,"default",{},void 0,!0),e.$slots.help?(o(),f(i,{key:0,icon:a.showHelp?["fas","question-circle"]:["far","question-circle"],class:C(["clickable",a.showHelp?"text-info":""]),onClick:E(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):d("",!0)]),e.$slots.actions?(o(),u("span",Ds,[_(e.$slots,"actions",{},void 0,!0)])):d("",!0)],16),l("div",Ls,[a.showHelp?(o(),u("span",Es,[_(e.$slots,"help",{},void 0,!0)])):d("",!0)])],64)}const Ws=S(Ps,[["render",xs],["__scopeId","data-v-cbe4e96e"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseHeading.vue"]]),Rs=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"}));A.add(Me,Te,Ve,Pe);const W={null:{value:null,icon:["fas","question"],iconClass:"text-secondary",title:"Nicht relevant",nextValue:!0},true:{value:!0,icon:["fas","square"],iconClass:"",title:"Geschlossen",nextValue:!1},false:{value:!1,icon:["far","square"],iconClass:"",title:"Offen",nextValue:null}},js={name:"OpenwbIoPattern",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Array,required:!1,default:()=>[]}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{getIcon(e){return W[e].icon},getIconClass(e){return W[e].iconClass},getTitle(e){return W[e].title},toggleInput(e,t){this.value[e]=W[t].nextValue}}};function Ns(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-tooltip"),r=h("openwb-base-setting-element");return o(),f(r,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)])]),default:m(()=>[(o(!0),u(T,null,P(n.value,(v,k)=>(o(),u("span",{key:k},[b(p,{description:n.getTitle(v)},{default:m(()=>[b(i,{icon:n.getIcon(v),class:C([n.getIconClass(v),"fa-fw clickable"]),size:"2x",transform:v=="undefined"?"shrink-6":null,mask:v=="undefined"?["fas","square"]:null,onClick:E(y=>n.toggleInput(k,v),["stop","prevent"]),onMousedown:t[0]||(t[0]=E(()=>{},["stop","prevent"])),onMouseup:t[1]||(t[1]=E(()=>{},["stop","prevent"]))},null,8,["icon","class","transform","mask","onClick"])]),_:2},1032,["description"])]))),128))]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help")]),key:"0"}:void 0]),1024)}const zs=S(js,[["render",Ns],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseIoPattern.vue"]]),Us=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),Fs={name:"OpenwbModalDialog",props:{title:{type:String,required:!1,default:""},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},buttons:{type:Array,default:void 0},footerAlignment:{type:String,validator:function(e){return["around","between","center","end","start"].indexOf(e)!==-1},default:"end"},preventClose:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},emits:["modal-result"],computed:{myButtons(){var e=[];return this.buttons!==void 0&&(e=this.buttons),e.findIndex(t=>t.event==="close")===-1&&!this.preventClose&&e.push({text:"Schließen",event:"close"}),e}},methods:{handleClick(e){e.stopPropagation();let t=e.target.getAttribute("data-event");t===null&&(t="close"),(t!="close"||!this.preventClose)&&this.$emit("modal-result",t)}}},Hs={class:"modal-content"},Ks={class:"modal-title"},Gs={class:"modal-body"},Js=["disabled","data-event"];function Zs(e,t,s,c,a,n){return s.show?(o(),f(N,{key:0,to:"body"},[t[5]||(t[5]=l("div",{class:"modal-backdrop fade show"},null,-1)),l("div",{class:"modal fade d-block show",role:"dialog",onClick:t[3]||(t[3]=(...i)=>n.handleClick&&n.handleClick(...i))},[l("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document",onClick:t[2]||(t[2]=E(()=>{},["stop"]))},[l("div",Hs,[l("div",{class:C(["modal-header","bg-"+s.subtype])},[l("h4",Ks,w(s.title),1),s.preventClose?d("",!0):(o(),u("button",{key:0,type:"button",class:"close",onClick:t[0]||(t[0]=(...i)=>n.handleClick&&n.handleClick(...i))}," × "))],2),l("div",Gs,[_(e.$slots,"default",{},()=>[t[4]||(t[4]=g("# Body #",-1))])]),n.myButtons.length>0?(o(),u("div",{key:0,class:C(["modal-footer d-flex","justify-content-"+s.footerAlignment])},[(o(!0),u(T,null,P(n.myButtons,i=>(o(),u("button",{key:i.text,disabled:i.disabled===!0,type:"button",class:C(["btn",(i.disabled?"btn-outline-":"btn-")+(i.subtype??"secondary")]),"data-dismiss":"modal","data-event":i.event?i.event:"close",onClick:t[1]||(t[1]=(...p)=>n.handleClick&&n.handleClick(...p))},w(i.text),11,Js))),128))],2)):d("",!0)])])])])):d("",!0)}const Qs=S(Fs,[["render",Zs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseModalDialog.vue"]]),Ys=Object.freeze(Object.defineProperty({__proto__:null,default:Qs},Symbol.toStringTag,{value:"Module"}));A.add(qe);const Xs={name:"OpenwbNumberInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},precision:{type:Number,default:void 0},emptyValue:{type:[Number,null],required:!1,default:null}},emits:["update:modelValue"],computed:{value:{get(){return this.precision!==void 0?parseFloat(Math.round(this.modelValue*Math.pow(10,this.precision))/Math.pow(10,this.precision)):this.modelValue},set(e){(isNaN(e)||typeof e!="number")&&(e=this.emptyValue),this.$emit("update:modelValue",e)}}}},en={class:"input-group"},tn={class:"input-group-prepend"},sn={class:"input-group-text"},nn=["id"],on={key:0,class:"input-group-append"},an={class:"input-group-text"},ln={key:1,class:"input-group-append"},rn={class:"input-group-text p-0"};function dn(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[l("div",en,[l("div",tn,[l("div",sn,[b(i,{icon:["fas","calculator"]})])]),I(l("input",$({id:`${e.uid}-number-input`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"number",class:"form-control"},e.$attrs),null,16,nn),[[V,n.value,void 0,{number:!0}]]),s.unit?(o(),u("div",on,[l("div",an,w(s.unit),1)])):d("",!0),e.$slots.append?(o(),u("div",ln,[l("div",rn,[_(e.$slots,"append",{},void 0,!0)])])):d("",!0)])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const un=S(Xs,[["render",dn],["__scopeId","data-v-c2fb7eef"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseNumberInput.vue"]]),cn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"}));A.add(De,Le);const pn={name:"OpenwbRangeInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},labels:{type:Array,required:!1,default:void 0}},emits:["update:modelValue"],computed:{label(){var e;return this.labels&&this.sliderValue!=null?this.sliderValue<this.labels.length?e=this.labels[this.sliderValue].label:console.error("index out of bounds: "+this.sliderValue):e=this.sliderValue,typeof e=="number"&&(e=e.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision}),this.unit&&(e+=" "+this.unit)),e},precision(){if(!isFinite(this.step))return 0;for(var e=1,t=0;Math.round(this.step*e)/e!==this.step;)e*=10,t++;return t},sliderValue:{get(){if(this.labels){var e=void 0;for(let t=0;t<this.labels.length;t++)if(this.labels[t].value==this.modelValue){e=t;break}return e===void 0&&this.modelValue!==void 0?(console.warn("sliderValue: not found in values: ",this.modelValue,"using min as default: ",this.min),this.min):e}return this.modelValue},set(e){if(this.labels){var t=this.labels[e].value;this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",e)}}},methods:{increment(){var e=Math.min(this.sliderValue+this.step,this.max);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var e=Math.max(this.sliderValue-this.step,this.min);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}},mn={class:"w-100"},fn={class:"vaRow mb-1 w-100"},gn=["for"],hn=["id"],bn={class:"col"},_n=["min","max","step"];function vn(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[l("div",mn,[l("div",fn,[n.label?(o(),u("label",{key:0,class:"col-2 pl-0 col-form-label valueLabel",for:`${e.uid}-button`},w(n.label),9,gn)):d("",!0),l("button",{id:`${e.uid}-button`,class:"col-1 btn btn-block btn-info",type:"button",onClick:t[0]||(t[0]=(...r)=>n.decrement&&n.decrement(...r))},[b(i,{icon:["fas","step-backward"]})],8,hn),l("div",bn,[I(l("input",$({"onUpdate:modelValue":t[1]||(t[1]=r=>n.sliderValue=r),type:"range",class:"form-control-range rangeInput",min:s.min,max:s.max,step:s.step},e.$attrs),null,16,_n),[[V,n.sliderValue,void 0,{number:!0}]])]),l("button",{class:"col-1 btn btn-block btn-info",type:"button",onClick:t[2]||(t[2]=(...r)=>n.increment&&n.increment(...r))},[b(i,{icon:["fas","step-forward"]})])])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const yn=S(pn,[["render",vn],["__scopeId","data-v-449fb0a5"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseRangeInput.vue"]]),wn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"}));A.add(z);const kn={name:"OpenwbSelectInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:void 0},modelValue:{type:[String,Number,Array,null],required:!1,default:void 0},emptyValue:{type:[String,Number,Array],required:!1,default:void 0},groups:{type:Array,required:!1,default:void 0},options:{type:Array,required:!1,default:void 0},notSelected:{type:String,default:void 0},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},addDisabled:{get(){return this.value===void 0}}},methods:{addClicked(){this.addDisabled||this.$emit("input:add")}}},Sn={class:"w-100"},Cn={class:"input-group"},Bn={key:0,class:"input-group-prepend"},$n={class:"input-group-text"},In=["id"],On=["value"],An=["value"],Mn=["label"],Tn=["value"],Vn={key:1,class:"input-group-append"};function Pn(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({default:m(()=>[l("div",Sn,[l("div",Cn,[e.$slots.prefix?(o(),u("div",Bn,[l("div",$n,[_(e.$slots,"prefix")])])):d("",!0),I(l("select",$({id:`${e.uid}-select`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),class:"col form-control"},e.$attrs),[s.notSelected!==void 0?(o(),u("option",{key:0,value:s.emptyValue,disabled:""}," -- "+w(s.notSelected)+" -- ",9,On)):d("",!0),(o(!0),u(T,null,P(s.options,r=>(o(),u("option",{key:r.value,value:r.value},w(r.text),9,An))),128)),(o(!0),u(T,null,P(s.groups,r=>(o(),u("optgroup",{key:r.label,label:r.label},[(o(!0),u(T,null,P(r.options,v=>(o(),u("option",{key:v.value,value:v.value},w(v.text),9,Tn))),128))],8,Mn))),128))],16,In),[[Q,n.value]]),s.addButton?(o(),u("div",Vn,[l("div",{class:C(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[1]||(t[1]=r=>n.addClicked())},[_(e.$slots,"inputAdd",{},()=>[b(i,{icon:["fas","plus"]})])],2)])):d("",!0)])])]),_:2},[e.$slots.title||s.title?{name:"title",fn:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)])]),key:"0"}:void 0,e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help")]),key:"1"}:void 0]),1024)}const qn=S(kn,[["render",Pn],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSelectInput.vue"]]),Dn=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"}));A.add(U,Ee,xe);const Ln={name:"OpenwbSubmitButtons",components:{FontAwesomeIcon:M},props:{formName:{type:String,default:void 0},hideReset:{type:Boolean,default:!1},hideDefaults:{type:Boolean,default:!0},saveLabel:{type:String,default:"Speichern"},saveDisabled:{type:Boolean,default:!1},saveId:{type:String,default:"saveSettingsBtn"},resetLabel:{type:String,default:"Änderungen verwerfen"},resetDisabled:{type:Boolean,default:!1},resetId:{type:String,default:"modalResetBtn"},defaultsLabel:{type:String,default:"Werkseinstellungen"},defaultsDisabled:{type:Boolean,default:!1},defaultsId:{type:String,default:"modalDefaultsBtn"}},emits:["reset","defaults","save"],data(){return{showModalReset:!1,showModalDefaults:!1}},computed:{showModalSave(){return this.$store.state.local.savingData}},methods:{showResetModal(){this.showModalReset=!0},handleModalReset(e){this.showModalReset=!1,e=="confirm"&&this.$emit("reset")},showDefaultsModal(){this.showModalDefaults=!0},handleModalDefaults(e){this.showModalDefaults=!1,e=="confirm"&&this.$emit("defaults")},saveSettings(){if(this.formName){if(!document.forms[this.formName].reportValidity()){console.debug("form invalid");return}}else console.debug("no form to validate");this.$emit("save")}}},En={class:"row justify-content-center mb-1"},xn={class:"col-md-4 d-flex py-1 justify-content-center"},Wn=["id","disabled"],Rn={key:0,class:"col-md-4 d-flex py-1 justify-content-center"},jn=["id","disabled"],Nn={key:1,class:"col-md-4 d-flex py-1 justify-content-center"},zn=["id","disabled"];function Un(e,t,s,c,a,n){const i=h("openwb-base-modal-dialog"),p=h("font-awesome-icon");return o(),u(T,null,[b(i,{show:n.showModalSave,title:"Speichern",subtype:"success","prevent-close":!0},{default:m(()=>[...t[3]||(t[3]=[g(" Einstellungen werden gespeichert... ",-1)])]),_:1},8,["show"]),b(i,{show:a.showModalReset,title:"Änderungen verwerfen",subtype:"warning",buttons:[{text:"Ok",event:"confirm",subtype:"warning"}],onModalResult:n.handleModalReset},{default:m(()=>[...t[4]||(t[4]=[g(" Willst Du die nicht gespeicherten Änderungen wirklich verwerfen? ",-1)])]),_:1},8,["show","onModalResult"]),b(i,{show:a.showModalDefaults,title:"Werkseinstellungen",subtype:"danger",buttons:[{text:"Ok",event:"confirm",subtype:"danger"}],onModalResult:n.handleModalDefaults},{default:m(()=>[...t[5]||(t[5]=[g(" Willst Du wirklich alle Werte dieser Seite auf die Werkseinstellungen zurücksetzen? ",-1)])]),_:1},8,["show","onModalResult"]),l("div",En,[l("div",xn,[l("button",{id:s.saveId,type:"button",class:C(["btn btn-block",[{disabled:s.saveDisabled},s.saveDisabled?"btn-outline-success":"btn-success"]]),disabled:s.saveDisabled,onClick:t[0]||(t[0]=(...r)=>n.saveSettings&&n.saveSettings(...r))},[g(w(s.saveLabel)+" ",1),b(p,{icon:["fas","check"]})],10,Wn)]),s.hideReset?d("",!0):(o(),u("div",Rn,[l("button",{id:s.resetId,type:"button",class:C(["btn btn-block",[{disabled:s.resetDisabled},s.resetDisabled?"btn-outline-warning":"btn-warning"]]),disabled:s.saveDisabled,onClick:t[1]||(t[1]=(...r)=>n.showResetModal&&n.showResetModal(...r))},[g(w(s.resetLabel)+" ",1),b(p,{icon:["fas","undo"]})],10,jn)])),s.hideDefaults?d("",!0):(o(),u("div",Nn,[l("button",{id:s.defaultsId,type:"button",class:C(["btn btn-block",[{disabled:s.defaultsDisabled},s.defaultsDisabled?"btn-outline-danger":"btn-danger"]]),disabled:s.saveDisabled,onClick:t[2]||(t[2]=(...r)=>n.showDefaultsModal&&n.showDefaultsModal(...r))},[g(w(s.defaultsLabel)+" ",1),b(p,{icon:["fas","times"]})],10,zn)]))])],64)}const Fn=S(Ln,[["render",Un],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSubmitButtons.vue"]]),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"}));A.add(ee,We,Re,je,Ne,ze,te,Ue,Fe,He,Ke,z,Ge,Je);const Kn={name:"OpenwbTextInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","email","host","url","user","group","json","password","time","date","month","year"].indexOf(e)!==-1},default:"text"},pattern:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},emptyValue:{type:[String,Object,null],required:!1,default:null},validator:{type:Function,required:!1,default:null},showQuickButtons:{type:Boolean,default:!1},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],data(){return{showPassword:!1,inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.warn("returning invalid String"),this.tempValue):JSON.stringify(this.tempValue):this.modelValue},set(e){if(this.validator){console.log("Validating input value:",e);const t=this.validator(e);console.log("Validation result:",t),t!==!0?(console.log("Marking input as invalid",JSON.stringify(this.$refs)),this.$refs[this.subtype+"Input"].setCustomValidity(t),this.inputInvalid=!0,this.tempValue=e):(console.log("Input is valid"),this.$refs[this.subtype+"Input"].setCustomValidity(""),this.inputInvalid=!1)}if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.error("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else e==""&&(e=this.emptyValue),this.$emit("update:modelValue",e)}},inputRef(){switch(this.subtype){case"json":return this.$refs.jsonInput;case"password":return this.$refs.passwordInput;case"host":return this.$refs.hostInput;case"email":case"url":return this.$refs.urlInput;case"time":return this.$refs.timeInput;case"date":return this.$refs.dateInput;case"month":return this.$refs.monthInput;case"year":return this.$refs.yearInput}return this.$refs.textInput},hostPattern(){return"(^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$)|(^(?=.*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])$)|(^((?=[^.]*[a-zA-Z][^.]*\\.)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]\\.))+((?=[^.]*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]))$)"},addDisabled:{get(){return this.value===this.emptyValue}}},methods:{togglePassword(){this.showPassword=!this.showPassword},modify(e){var t,s=new Date(this.modelValue);switch(this.subtype){case"date":s.setDate(s.getDate()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0");break;case"month":s.setMonth(s.getMonth()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0");break;case"year":s.setYear(s.getFullYear()+e),t=String(s.getFullYear());break;default:console.warn(`cannot modify input of subtype '${this.subtype}'`);return}t>this.inputRef.max||t<this.inputRef.min||(this.value=t)},addClicked(){this.addDisabled||this.$emit("input:add")}}},Gn={class:"w-100"},Jn={class:"input-group"},Zn={class:"input-group-prepend"},Qn={class:"input-group-text"},Yn=["id","pattern"],Xn=["id","pattern"],eo=["id","type","pattern"],to=["id","pattern"],so=["id","type"],no=["id"],oo=["id"],ao=["id"],io=["id"],lo={key:9,class:"input-group-append"},ro={class:"input-group-text"},uo={class:"input-group-text"},co={key:13,class:"input-group-append"},po={key:14,class:"input-group-append"},mo={class:"input-group-text p-0"};function fo(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[l("div",Gn,[l("div",Jn,[l("div",Zn,[l("div",Qn,[s.subtype=="text"?(o(),f(i,{key:0,icon:["fas","keyboard"]})):d("",!0),s.subtype=="email"?(o(),f(i,{key:1,icon:["fas","envelope"]})):d("",!0),s.subtype=="host"?(o(),f(i,{key:2,icon:["fas","network-wired"]})):d("",!0),s.subtype=="url"?(o(),f(i,{key:3,icon:["fas","globe"]})):d("",!0),s.subtype=="user"?(o(),f(i,{key:4,icon:["fas","user"]})):d("",!0),s.subtype=="group"?(o(),f(i,{key:5,icon:["fas","users"]})):d("",!0),s.subtype=="json"?(o(),f(i,{key:6,icon:["fas","code"]})):d("",!0),s.subtype=="password"?(o(),f(i,{key:7,icon:a.showPassword?["fas","unlock"]:["fas","lock"]},null,8,["icon"])):d("",!0),s.subtype=="time"?(o(),f(i,{key:8,icon:["fas","clock"]})):d("",!0),s.subtype=="date"||s.subtype=="month"||s.subtype=="year"?(o(),f(i,{key:9,icon:["fas","calendar-day"]})):d("",!0)])]),["text","user","group"].includes(s.subtype)?I((o(),u("input",$({key:0,id:`${e.uid}-text-input`,ref:"textInput","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"text",class:["form-control",{invalid:a.inputInvalid}]},e.$attrs,{pattern:s.pattern}),null,16,Yn)),[[V,n.value]]):d("",!0),s.subtype=="json"?I((o(),u("input",$({key:1,id:`${e.uid}-json-input`,ref:"jsonInput","onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),type:"text",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,Xn)),[[V,n.value]]):d("",!0),s.subtype=="password"?I((o(),u("input",$({key:2,id:`${e.uid}-password-input`,ref:"passwordInput","onUpdate:modelValue":t[2]||(t[2]=r=>n.value=r),type:a.showPassword?"text":"password",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,eo)),[[G,n.value]]):d("",!0),s.subtype=="host"?I((o(),u("input",$({key:3,id:`${e.uid}-host-input`,ref:"hostInput","onUpdate:modelValue":t[3]||(t[3]=r=>n.value=r),type:"text",class:"form-control"},e.$attrs,{pattern:n.hostPattern}),null,16,to)),[[V,n.value]]):d("",!0),["email","url"].includes(s.subtype)?I((o(),u("input",$({key:4,id:`${e.uid}-url-input`,"onUpdate:modelValue":t[4]||(t[4]=r=>n.value=r),refs:"urlInput",type:s.subtype,class:"form-control"},e.$attrs),null,16,so)),[[G,n.value]]):d("",!0),s.subtype=="time"?I((o(),u("input",$({key:5,id:`${e.uid}-time-input`,ref:"timeInput","onUpdate:modelValue":t[5]||(t[5]=r=>n.value=r),type:"time",class:"form-control"},e.$attrs),null,16,no)),[[V,n.value]]):d("",!0),s.subtype=="date"?I((o(),u("input",$({key:6,id:`${e.uid}-date-input`,ref:"dateInput","onUpdate:modelValue":t[6]||(t[6]=r=>n.value=r),type:"date",class:"form-control"},e.$attrs),null,16,oo)),[[V,n.value]]):d("",!0),s.subtype=="month"?I((o(),u("input",$({key:7,id:`${e.uid}-month-input`,ref:"monthInput","onUpdate:modelValue":t[7]||(t[7]=r=>n.value=r),type:"month",class:"form-control"},e.$attrs),null,16,ao)),[[V,n.value]]):d("",!0),s.subtype=="year"?I((o(),u("input",$({key:8,id:`${e.uid}-year-input`,ref:"yearInput","onUpdate:modelValue":t[8]||(t[8]=r=>n.value=r),type:"number",class:"form-control"},e.$attrs),null,16,io)),[[V,n.value]]):d("",!0),s.unit?(o(),u("div",lo,[l("div",ro,w(s.unit),1)])):d("",!0),s.subtype=="password"?(o(),u("div",{key:10,class:"input-group-append clickable",onClick:t[9]||(t[9]=(...r)=>n.togglePassword&&n.togglePassword(...r))},[l("div",uo,[b(i,{icon:a.showPassword?["far","eye"]:["far","eye-slash"]},null,8,["icon"])])])):d("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(o(),u("div",{key:11,class:"input-group-append clickable",onClick:t[10]||(t[10]=r=>n.modify(-1))},[...t[13]||(t[13]=[l("div",{class:"input-group-text"},"-",-1)])])):d("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(o(),u("div",{key:12,class:"input-group-append clickable",onClick:t[11]||(t[11]=r=>n.modify(1))},[...t[14]||(t[14]=[l("div",{class:"input-group-text"},"+",-1)])])):d("",!0),s.addButton?(o(),u("div",co,[l("div",{class:C(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[12]||(t[12]=r=>n.addClicked())},[_(e.$slots,"inputAdd",{},()=>[b(i,{icon:["fas","plus"]})],!0)],2)])):d("",!0),e.$slots.append?(o(),u("div",po,[l("div",mo,[_(e.$slots,"append",{},void 0,!0)])])):d("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const go=S(Kn,[["render",fo],["__scopeId","data-v-6927d479"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextInput.vue"]]),ho=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"}));A.add(ee,te);const bo={name:"OpenwbTextareaInput",components:{OpenwbBaseSettingElement:D,FontAwesomeIcon:M},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","json"].indexOf(e)!==-1},default:"text"}},emits:["update:modelValue"],data(){return{inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.debug("returning invalid JSON as String"),this.tempValue):JSON.stringify(this.tempValue,void 0,2):this.modelValue},set(e){if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.warn("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else this.$emit("update:modelValue",e)}},length:{get(){return this.value!==void 0?this.value.length:0}}}},_o={class:"w-100"},vo={class:"input-group"},yo={class:"input-group-prepend"},wo={class:"input-group-text"},ko=["id"],So=["id"],Co={key:2,class:"input-group-append"},Bo={class:"input-group-text"},$o={class:"form-text text-muted text-right"};function Io(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[_(e.$slots,"title",{},()=>[g(w(s.title),1)],!0)]),default:m(()=>[l("div",_o,[l("div",vo,[l("div",yo,[l("div",wo,[s.subtype=="text"?(o(),f(i,{key:0,icon:["fas","keyboard"]})):d("",!0),s.subtype=="json"?(o(),f(i,{key:1,icon:["fas","code"]})):d("",!0)])]),s.subtype==="json"?I((o(),u("textarea",$({key:0,id:`${e.uid}-textarea`,ref:"jsonInput","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),class:"form-control"},e.$attrs),null,16,ko)),[[V,n.value,void 0,{lazy:!0}]]):I((o(),u("textarea",$({key:1,id:`${e.uid}-textarea`,"onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),class:"form-control"},e.$attrs),null,16,So)),[[V,n.value]]),e.$attrs.maxlength?(o(),u("div",Co,[l("div",Bo,[l("small",$o,w(n.length)+" / "+w(e.$attrs.maxlength),1)])])):d("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[_(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Oo=S(bo,[["render",Io],["__scopeId","data-v-3d93046b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextarea.vue"]]),Ao=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Mo={name:"OpenwbToast",props:{topic:{type:String,required:!0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},source:{type:String,required:!0,validator:function(e){return["system","client","command"].indexOf(e)!==-1}},timestamp:{type:Number,required:!0}},emits:["dismiss","hide"],data(){return{handle:void 0,relativeTime:void 0,hidden:!1}},mounted(){this.handle=window.setInterval(this.updateRelativeTime,1e3)},unmounted(){window.clearInterval(this.handle)},methods:{dismiss(){this.$emit("dismiss",{topic:this.topic})},updateRelativeTime(){const e={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3};var t=new Intl.RelativeTimeFormat("de",{numeric:"auto"});const c=new Date-this.timestamp*1e3;for(var a in e)if(Math.abs(c)>e[a]){this.relativeTime=t.format(Math.round(-c/e[a]),a);break}c>10*1e3&&!this.hidden&&(this.hidden=!0,this.$emit("hide",{topic:this.topic}))}}},To={key:0,class:"time-diff"},Vo={class:"toast-body"};function Po(e,t,s,c,a,n){return o(),u("div",{class:C(["toast","border-"+s.subtype]),role:"alert"},[l("div",{class:C(["toast-header","bg-"+s.subtype])},[t[2]||(t[2]=l("strong",{class:"pr-2 mr-auto"},"openWB",-1)),s.timestamp?(o(),u("small",To,w(a.relativeTime),1)):d("",!0),l("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:t[0]||(t[0]=(...i)=>n.dismiss&&n.dismiss(...i))},[...t[1]||(t[1]=[l("span",{"aria-hidden":"true"},"×",-1)])])],2),l("div",Vo,[_(e.$slots,"default",{},void 0,!0)])],2)}const qo=S(Mo,[["render",Po],["__scopeId","data-v-c51b5764"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseToast.vue"]]),Do=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Lo={name:"OpenwbTooltip",props:{description:{type:String,default:"#TOOLTIP#"},addHint:{type:Boolean,default:!1}}},Eo=["title"];function xo(e,t,s,c,a,n){return o(),u("div",{class:C(["base-text",{dotted:s.addHint}]),title:s.description},[_(e.$slots,"default",{},void 0,!0)],10,Eo)}const Wo=S(Lo,[["render",xo],["__scopeId","data-v-c65a1128"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTooltip.vue"]]),Ro=Object.freeze(Object.defineProperty({__proto__:null,default:Wo},Symbol.toStringTag,{value:"Module"})),jo={name:"ComponentState",emits:["reset","defaults","save"],data(){return{mqttTopicsToSubscribe:[],mqttTopicsToPublish:[]}},computed:{weekdays(){return["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"]},chargeModes(){return["instant_charging","pv_charging","scheduled_charging","time_charging","eco_charging","stop"]},statusLevel(){return["success","warning","danger"]},stateIcon:{get(){switch(this.$store.state.mqtt[this.baseTopic+"/get/fault_state"]){case 0:return["fas","check-circle"];case 1:return["fas","exclamation-triangle"];case 2:return["fas","times-circle"];default:return["fas","check-circle"]}}}},mounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doSubscribe(this.mqttTopicsToSubscribe)},unmounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doUnsubscribe(this.mqttTopicsToSubscribe)},methods:{updateState(e,t,s=void 0){console.debug("updateState:",e,t,s),this.$store.commit({type:"updateTopic",topic:e,objectPath:s,payload:t})},ac_current2dc_power(e){return parseFloat((e*3*230/1e3).toFixed(0))},dc_power2ac_current(e){return parseFloat((e*1e3/230/3).toFixed(2))},getWildcardIndexList(e,t=!1){let s=e;t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$");let c=Object.keys(this.$store.state.mqtt).filter(a=>a.match(s));return c.forEach((a,n,i)=>{i[n]=parseInt(a.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""))}),c},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(c=>c.match(s)).reduce((c,a)=>({...c,[a]:this.$store.state.mqtt[a]}),{})},formatDate(e,t={year:"numeric",month:"2-digit",day:"2-digit"}){return new Date(e).toLocaleDateString(void 0,t)},formatNumber(e,t=0,s=t,c=1){if(!(e==null||isNaN(e)))return e=e*c,e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:s})},formatNumberTopic(e,t=0,s=t,c=1){return this.$store.state.mqtt[e]?this.formatNumber(this.$store.state.mqtt[e],t,s,c):"-"},formatPhaseArrayNumberTopic(e,t=0,s=t,c=1){return this.$store.state.mqtt[e]?this.$store.state.mqtt[e].map(a=>this.formatNumber(a,t,s,c)):["-","-","-"]},translateChargeMode(e){switch(e){case"instant_charging":return"Sofort";case"pv_charging":return"PV";case"scheduled_charging":return"Zielladen";case"time_charging":return"Zeitladen";case"eco_charging":return"Eco";case"standby":return"Standby";case"stop":return"Stop";default:return console.warn("unknown charge mode:",e),e}},getFaultStateSubtype(e){const t=this.$store.state.mqtt[e+"/get/fault_state"];if(t===void 0)return"warning";switch(t){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"dark"}}}},j=S(jo,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/ComponentState.vue"]]);A.add(Ze);const No={name:"OpenwbNavBar",components:{FontAwesomeIcon:M},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/security/access/+"]}},computed:{nodeEnv(){return"development"},accessAllowed(){return e=>this.$store.state.mqtt[`openWB/system/security/access/${e}`]===!0}},watch:{$route(){this.$refs.collapsibleNavbar.classList.remove("show"),this.$refs.navbarButton.classList.add("collapsed"),this.$refs.navbarButton.setAttribute("aria-expanded",!1)}}},zo={class:"navbar navbar-expand-xl bg-dark navbar-dark fixed-top"},Uo={ref:"navbarButton",class:"navbar-toggler mr-auto",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},Fo={id:"collapsibleNavbar",ref:"collapsibleNavbar",class:"collapse navbar-collapse navbar-nav-scroll"},Ho={class:"navbar-nav mr-auto"},Ko={key:0,class:"nav-item"},Go={class:"nav-item dropdown nav-separator-before"},Jo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Zo={class:"nav-item dropdown nav-separator-before"},Qo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Yo={class:"nav-item dropdown"},Xo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ea={class:"nav-item dropdown"},ta={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},sa={key:5,class:"dropdown-divider"},na={key:6,href:"modules/legacy_smart_home/smarthomeconfig.php",class:"dropdown-item",target:"_blank"},oa={class:"nav-item dropdown"},aa={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ia={class:"nav-item nav-separator-before"},la={class:"nav-link",href:"https://wiki.openwb.de/",target:"_blank"};function ra(e,t,s,c,a,n){const i=h("router-link"),p=h("font-awesome-icon");return o(),u("nav",zo,[t[30]||(t[30]=l("a",{class:"navbar-brand",href:"/openWB/web/"},[l("span",null,"openWB")],-1)),l("button",Uo,[...t[0]||(t[0]=[l("span",{class:"navbar-toggler-icon"},null,-1)])],512),l("div",Fo,[l("ul",Ho,[n.accessAllowed("Status")?(o(),u("li",Ko,[b(i,{to:"/Status",class:"nav-link","active-class":"active disabled"},{default:m(()=>[...t[1]||(t[1]=[g(" Status ",-1)])]),_:1})])):d("",!0),l("li",Go,[t[4]||(t[4]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Auswertungen ",-1)),l("div",Jo,[n.accessAllowed("ChargeLog")?(o(),f(i,{key:0,to:"/Logging/ChargeLog",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[2]||(t[2]=[g(" Ladeprotokoll ",-1)])]),_:1})):d("",!0),n.accessAllowed("Chart")?(o(),f(i,{key:1,to:"/Logging/Chart",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[3]||(t[3]=[g(" Diagramme ",-1)])]),_:1})):d("",!0)])]),l("li",Zo,[t[8]||(t[8]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Einstellungen ",-1)),l("div",Qo,[n.accessAllowed("GeneralConfiguration")?(o(),f(i,{key:0,to:"/GeneralConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[5]||(t[5]=[g(" Allgemein ",-1)])]),_:1})):d("",!0),n.accessAllowed("DisplayConfiguration")?(o(),f(i,{key:1,to:"/DisplayConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[6]||(t[6]=[g(" Display ",-1)])]),_:1})):d("",!0),n.accessAllowed("IdentificationConfiguration")?(o(),f(i,{key:2,to:"/IdentificationConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[7]||(t[7]=[g(" Identifikation ",-1)])]),_:1})):d("",!0)])]),l("li",Yo,[t[12]||(t[12]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Ladeeinstellungen ",-1)),l("div",Xo,[n.accessAllowed("GeneralChargeConfiguration")?(o(),f(i,{key:0,to:"/GeneralChargeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[9]||(t[9]=[g(" Übergreifendes ",-1)])]),_:1})):d("",!0),n.accessAllowed("SurplusChargeConfiguration")?(o(),f(i,{key:1,to:"/SurplusChargeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[10]||(t[10]=[g(" Überschuss-Laden ",-1)])]),_:1})):d("",!0),n.accessAllowed("ActiveBatControlConfiguration")?(o(),f(i,{key:2,to:"/ActiveBatControlConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[11]||(t[11]=[g(" Speichersteuerung ",-1)])]),_:1})):d("",!0)])]),l("li",ea,[t[18]||(t[18]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Konfiguration ",-1)),l("div",ta,[n.accessAllowed("HardwareInstallation")?(o(),f(i,{key:0,to:"/HardwareInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[13]||(t[13]=[g(" Geräte und Komponenten ",-1)])]),_:1})):d("",!0),n.accessAllowed("LoadManagementConfiguration")?(o(),f(i,{key:1,to:"/LoadManagementConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[14]||(t[14]=[g(" Lastmanagement ",-1)])]),_:1})):d("",!0),n.accessAllowed("ChargePointInstallation")?(o(),f(i,{key:2,to:"/ChargePointInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[15]||(t[15]=[g(" Ladepunkte ",-1)])]),_:1})):d("",!0),n.accessAllowed("VehicleConfiguration")?(o(),f(i,{key:3,to:"/VehicleConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[16]||(t[16]=[g(" Fahrzeuge ",-1)])]),_:1})):d("",!0),n.accessAllowed("IoConfiguration")?(o(),f(i,{key:4,to:"/IoConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[17]||(t[17]=[g(" Ein-/Ausgänge ",-1)])]),_:1})):d("",!0),n.accessAllowed("LegacySmartHomeConfiguration")?(o(),u("div",sa)):d("",!0),n.accessAllowed("LegacySmartHomeConfiguration")?(o(),u("a",na," SmartHome ")):d("",!0)])]),l("li",oa,[t[28]||(t[28]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," System ",-1)),l("div",aa,[n.accessAllowed("InstallAssistant")?(o(),f(i,{key:0,to:"/System/InstallAssistant",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[19]||(t[19]=[g(" Einrichtungsassistent ",-1)])]),_:1})):d("",!0),n.accessAllowed("CloudConfiguration")?(o(),f(i,{key:1,to:"/System/CloudConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[20]||(t[20]=[g(" openWB Cloud ",-1)])]),_:1})):d("",!0),n.accessAllowed("MqttBridgeConfiguration")?(o(),f(i,{key:2,to:"/System/MqttBridgeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[21]||(t[21]=[g(" MQTT-Brücken ",-1)])]),_:1})):d("",!0),n.accessAllowed("DebugConfiguration")?(o(),f(i,{key:3,to:"/System/DebugConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[22]||(t[22]=[g(" Fehlersuche ",-1)])]),_:1})):d("",!0),n.accessAllowed("Support")?(o(),f(i,{key:4,to:"/System/Support",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[23]||(t[23]=[g(" Support ",-1)])]),_:1})):d("",!0),n.accessAllowed("DataManagement")?(o(),f(i,{key:5,to:"/System/DataManagement",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[24]||(t[24]=[g(" Datenverwaltung ",-1)])]),_:1})):d("",!0),n.accessAllowed("SecurityConfiguration")?(o(),f(i,{key:6,to:"/System/SecurityConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[25]||(t[25]=[g(" Sicherheit ",-1)])]),_:1})):d("",!0),n.accessAllowed("SystemConfiguration")?(o(),f(i,{key:7,to:"/System/SystemConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[26]||(t[26]=[g(" System ",-1)])]),_:1})):d("",!0),n.accessAllowed("LegalSettings")?(o(),f(i,{key:8,to:"/System/LegalSettings",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[27]||(t[27]=[g(" Rechtliches ",-1)])]),_:1})):d("",!0)])]),l("li",ia,[l("a",la,[t[29]||(t[29]=g(" Wiki ",-1)),b(p,{icon:["fas","external-link-alt"]})])])])],512),t[31]||(t[31]=l("div",{id:"infobar",class:"ml-auto d-flex flex-row align-items-center"},null,-1))])}const da=S(No,[["render",ra],["__scopeId","data-v-e7a6d0c0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageNavbar.vue"]]),ua={name:"OpenwbPageFooter"},ca={id:"footer",class:"footer bg-dark text-light font-small"},pa={class:"container text-center"};function ma(e,t,s,c,a,n){return o(),u("footer",ca,[l("div",pa,[l("small",null," Du befindest dich hier: Einstellungen / "+w(e.$route.meta.heading),1)])])}const fa=S(ua,[["render",ma],["__scopeId","data-v-3c9a239a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageFooter.vue"]]);A.add(Qe,Ye,Xe,et);const ga={name:"OpenwbPageUser",components:{FontAwesomeIcon:M,FontAwesomeLayers:se},mixins:[j],emits:["sendCommand"],data(){return{mqttTopicsToSubscribe:["openWB/system/security/user_management_active","openWB/system/security/access_allowed","openWB/system/dataprotection_acknowledged"],showLoginModal:!1,showPasswordResetModal:!1,showLogoutModal:!1,username:"",password:"",token:"",passwordConfirm:""}},computed:{loggedInUser(){return this.$store.state.local.username||null},userManagementActive(){return this.$store.state.mqtt["openWB/system/security/user_management_active"]!==!1},accessAllowed(){return this.$store.state.mqtt["openWB/system/security/access_allowed"]===void 0?!1:this.$store.state.mqtt["openWB/system/security/access_allowed"]===!0},anonymousAccessAllowed(){return this.accessAllowed&&this.loggedInUser===null},dataProtectionAcknowledged(){return this.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]===!0},loginButtons(){let e=[{text:"Anmelden",event:"login",subtype:"success",disabled:this.stringIsEmpty(this.username)||this.stringIsEmpty(this.password)}];return this.dataProtectionAcknowledged&&e.push({text:"Kennwort vergessen",event:"forgot_password",subtype:"warning"}),e},requestTokenDisabled(){return this.stringIsEmpty(this.username)},resetPasswordDisabled(){return this.stringIsEmpty(this.username)||this.stringIsEmpty(this.token)||this.stringIsEmpty(this.password)||this.stringIsEmpty(this.passwordConfirm)||this.password!==this.passwordConfirm}},watch:{loggedInUser(e){e&&this.checkAutoLogin()},accessAllowed(){this.checkAutoLogin()}},mounted(){me(()=>{this.checkAutoLogin()})},methods:{stringIsEmpty(e){return!e||e.length===0},checkAutoLogin(){console.debug("Checking auto login: ",this.userManagementActive,this.accessAllowed,this.loggedInUser),this.userManagementActive&&!this.accessAllowed?this.showLoginModal=!0:this.showLoginModal=!1},doLogin(e){switch(e){case"login":if(!this.username||!this.password){this.$root.postClientMessage("Benutzername und Passwort erforderlich.","danger");return}console.warn("Login with:",this.username,"/",this.password),this.$cookies.set("mqtt",`${this.username}:${this.password}`),this.$root.reconnectMqttClient(),location.reload();break;case"forgot_password":console.warn("Password reset requested for user:",this.username),this.showLoginModal=!1,this.username="",this.password="",this.showPasswordResetModal=!0;break;default:this.showLoginModal=!1,this.username="",this.password=""}},processResetResult(e){switch(console.log("Password reset modal result:",e),e){case"request_token":if(!this.username){this.$root.postClientMessage("Benutzername erforderlich.","danger");return}console.warn("Requesting password reset token for:",this.username),this.$emit("sendCommand",{command:"createPasswordResetToken",data:{username:this.username}});break;case"reset_password":if(!this.username||!this.token||!this.password||!this.passwordConfirm||this.password!==this.passwordConfirm){this.$root.postClientMessage("Benutzername, Token und neues Kennwort erforderlich.","danger");return}console.warn("Resetting password for:",this.username,"with token:",this.token,"and new password:",this.password),this.$emit("sendCommand",{command:"resetUserPassword",data:{username:this.username,token:this.token,newPassword:this.password}});break;case"close":this.showPasswordResetModal=!1,this.username="",this.password="",this.token="",this.showLoginModal=!0;return}},doLogout(e){this.showLogoutModal=!1,e==="confirm"&&(console.warn("Logging out user"),this.$cookies.remove("mqtt"),this.$root.reconnectMqttClient(),location.reload())}}},ha={id:"user-indicator"},ba={key:0,class:"pill bg-primary"},_a={class:"non-selectable"},va={key:1,class:"pill bg-secondary"},ya={name:"loginForm"},wa={name:"requestTokenForm"};function ka(e,t,s,c,a,n){const i=h("FontAwesomeIcon"),p=h("openwb-base-tooltip"),r=h("FontAwesomeLayers"),v=h("openwb-base-modal-dialog"),k=h("openwb-base-text-input");return o(),u(T,null,[n.userManagementActive===!0?(o(),f(N,{key:0,defer:"",to:"#infobar"},[l("div",ha,[n.loggedInUser?(o(),u("span",ba,[b(i,{icon:["fas","circle-user"],size:"lg"}),l("span",_a,w(n.loggedInUser),1),b(p,{description:"Abmelden"},{default:m(()=>[b(i,{class:"text-light clickable px-2",icon:["fas","arrow-right-from-bracket"],size:"lg",onClick:t[0]||(t[0]=y=>a.showLogoutModal=!0)})]),_:1})])):(o(),u("span",va,[b(p,{description:"Nicht angemeldet"},{default:m(()=>[b(r,null,{default:m(()=>[b(i,{icon:["fas","circle-user"]}),b(i,{icon:["fas","ban"],color:"red"})]),_:1})]),_:1}),b(p,{description:"Anmelden"},{default:m(()=>[b(i,{class:"text-light clickable px-2",icon:["fas","arrow-right-to-bracket"],size:"lg",onClick:t[1]||(t[1]=y=>a.showLoginModal=!0)})]),_:1})]))])])):d("",!0),n.userManagementActive?(o(),f(v,{key:1,show:a.showLogoutModal,title:"Abmelden",subtype:"warning",buttons:[{text:"Abmelden",event:"confirm",subtype:"danger"}],onModalResult:t[2]||(t[2]=y=>n.doLogout(y))},{default:m(()=>[...t[11]||(t[11]=[l("p",null,"Willst Du Dich wirklich abmelden?",-1)])]),_:1},8,["show"])):d("",!0),n.userManagementActive?(o(),f(v,{key:2,show:a.showLoginModal,"prevent-close":!n.anonymousAccessAllowed,title:"Anmelden",subtype:"success",buttons:n.loginButtons,onModalResult:t[5]||(t[5]=y=>n.doLogin(y))},{default:m(()=>[l("form",ya,[b(k,{modelValue:a.username,"onUpdate:modelValue":t[3]||(t[3]=y=>a.username=y),title:"Benutzername",subtype:"user",required:"",autocomplete:"username"},null,8,["modelValue"]),b(k,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=y=>a.password=y),title:"Passwort",subtype:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])])]),_:1},8,["show","prevent-close","buttons"])):d("",!0),n.userManagementActive&&n.dataProtectionAcknowledged?(o(),f(v,{key:3,show:a.showPasswordResetModal,title:"Kennwort zurücksetzen",subtype:"warning",buttons:[{text:"Token anfordern",event:"request_token",subtype:"success",disabled:n.requestTokenDisabled},{text:"Kennwort zurücksetzen",event:"reset_password",subtype:"primary",disabled:n.resetPasswordDisabled},{text:"Zurück",event:"close",subtype:"secondary"}],onModalResult:t[10]||(t[10]=y=>n.processResetResult(y))},{default:m(()=>[l("form",wa,[b(k,{modelValue:a.username,"onUpdate:modelValue":t[6]||(t[6]=y=>a.username=y),title:"Benutzername",subtype:"user",required:"",autocomplete:"username"},null,8,["modelValue"]),b(k,{modelValue:a.token,"onUpdate:modelValue":t[7]||(t[7]=y=>a.token=y),title:"Token",subtype:"password"},null,8,["modelValue"]),b(k,{modelValue:a.password,"onUpdate:modelValue":t[8]||(t[8]=y=>a.password=y),title:"Neues Kennwort",subtype:"password"},null,8,["modelValue"]),b(k,{modelValue:a.passwordConfirm,"onUpdate:modelValue":t[9]||(t[9]=y=>a.passwordConfirm=y),title:"Neues Kennwort bestätigen",subtype:"password",validator:y=>y===a.password||"Kennwörter stimmen nicht überein"},null,8,["modelValue","validator"])])]),_:1},8,["show","buttons"])):d("",!0)],64)}const Sa=S(ga,[["render",ka],["__scopeId","data-v-adc196c2"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageUser.vue"]]);A.add(tt,st);const Ca={name:"OpenwbPageMessages",components:{FontAwesomeIcon:M,FontAwesomeLayers:se,FontAwesomeLayersText:nt},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/messages/+","openWB/command/"+this.$root.mqttClientId+"/messages/+"],showAllMessages:!1,hiddenMessages:[]}},computed:{alertLevel(){return this.messages.reduce((t,s)=>((t=="light"&&["info","success","warning","danger"].includes(s.type)||t=="info"&&["success","warning","danger"].includes(s.type)||t=="success"&&["warning","danger"].includes(s.type)||t=="warning"&&s.type=="danger")&&(t=s.type),t),"light")},messages(){const e=[];return this.systemMessages.forEach(t=>{e.push(t)}),this.localMessages.forEach(t=>{e.push(t)}),this.clientMessages.forEach(t=>{e.push(t)}),e.sort(this.compareMessagesByTimestamp),e},recentMessages(){return this.showAllMessages?this.messages:this.messages.filter(e=>!this.hiddenMessages.includes(e.topic))},messageIndicatorClass(){return"text-"+this.alertLevel},systemMessages(){let e=this.getWildcardTopics("openWB/system/messages/+");var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t},localMessages(){const e=this.$store.state.local.messages||{};var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t},clientMessages(){let e=this.getWildcardTopics("openWB/command/"+this.$root.mqttClientId+"/messages/+");var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t}},methods:{toggleAllMessages(){this.showAllMessages=!this.showAllMessages},compareMessagesByTimestamp(e,t){return t.timestamp-e.timestamp},clearTopic(e){this.$root.doPublish(e,void 0)},dismissMessage(e){this.localMessages.find(s=>s.topic===e.topic)?this.$store.commit("removeClientMessage",e.topic):this.clearTopic(e.topic);var t=this.hiddenMessages.indexOf(e.topic);t>-1&&this.hiddenMessages.splice(t,1)},dismissAllMessages(){this.messages.forEach(e=>{this.dismissMessage({topic:e.topic})}),this.hiddenMessages=[],this.toggleAllMessages()},hideMessage(e){this.hiddenMessages.includes(e.topic)||this.hiddenMessages.push(e.topic)}}},Ba=["title"],$a=["innerHTML"];function Ia(e,t,s,c,a,n){const i=h("font-awesome-icon"),p=h("font-awesome-layers-text"),r=h("font-awesome-layers"),v=h("openwb-base-alert"),k=h("openwb-base-click-button"),y=h("openwb-base-toast");return o(),u(T,null,[(o(),f(N,{defer:"",to:"nav"},[l("div",{id:"message-indicator",class:C(["text-light clickable",a.showAllMessages?"active":""]),title:a.showAllMessages?"nur neue Nachrichten anzeigen":"Alle Nachrichten anzeigen",onClick:t[0]||(t[0]=(...O)=>n.toggleAllMessages&&n.toggleAllMessages(...O))},[b(r,{"full-width":""},{default:m(()=>[b(i,{icon:a.showAllMessages?["fas","bell"]:["far","bell"],class:C(n.messageIndicatorClass)},null,8,["icon","class"]),n.messages.length>0?(o(),f(p,{key:0,counter:"",value:n.messages.length,position:"top-right",class:"message-counter bg-light text-dark"},null,8,["value"])):d("",!0)]),_:1})],10,Ba)])),n.recentMessages.length>0||a.showAllMessages?(o(),u("div",{key:0,class:C(["openwb-toast-container",a.showAllMessages?"full-height":""])},[n.recentMessages.length==0?(o(),f(v,{key:0,subtype:"info"},{default:m(()=>[...t[1]||(t[1]=[g(" Keine Nachrichten vorhanden. ",-1)])]),_:1})):a.showAllMessages?(o(),f(k,{key:1,class:"btn-sm btn-secondary mb-1",onButtonClicked:n.dismissAllMessages},{default:m(()=>[...t[2]||(t[2]=[g(" Alle Nachrichten löschen ",-1)])]),_:1},8,["onButtonClicked"])):d("",!0),(o(!0),u(T,null,P(n.recentMessages,O=>(o(),f(y,{key:O.topic,topic:O.topic,source:O.source,subtype:O.type,timestamp:O.timestamp,onDismiss:n.dismissMessage,onHide:n.hideMessage},{default:m(()=>[l("span",{innerHTML:O.message},null,8,$a)]),_:2},1032,["topic","source","subtype","timestamp","onDismiss","onHide"]))),128))],2)):d("",!0)],64)}const Oa=S(Ca,[["render",Ia],["__scopeId","data-v-2c25f0d0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageMessages.vue"]]),Aa={name:"OpenwbPageBlocker",mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/boot_done","openWB/system/update_in_progress"]}},computed:{title(){return this.bootInProgress||this.updateInProgress?"openWB ist noch nicht bereit":this.reloadRequired?"Neues Laden der Seite erforderlich":"???"},myButtons(){return!(this.bootInProgress||this.updateInProgress)&&this.reloadRequired?[{text:"Jetzt neu laden",subtype:"success",event:"reload"}]:[]},bootInProgress(){return this.$store.state.mqtt["openWB/system/boot_done"]==null?!0:!this.$store.state.mqtt["openWB/system/boot_done"]},updateInProgress(){return this.$store.state.mqtt["openWB/system/update_in_progress"]==null?!1:this.$store.state.mqtt["openWB/system/update_in_progress"]},reloadRequired(){return this.$store.state.local.reloadRequired},showModalBlocker(){return this.bootInProgress||this.updateInProgress||this.reloadRequired}},methods:{handleModalResult(e){e=="reload"?location.reload():console.warn("unknown event",e)}}},Ma={class:"openwb-blocker"},Ta={key:0},Va={key:1},Pa={key:2},qa={key:3};function Da(e,t,s,c,a,n){const i=h("openwb-base-modal-dialog");return o(),u("div",Ma,[b(i,{show:n.showModalBlocker,title:n.title,subtype:"dark","prevent-close":!0,buttons:n.myButtons,onModalResult:t[0]||(t[0]=p=>n.handleModalResult(p))},{default:m(()=>[n.bootInProgress?(o(),u("p",Ta,"Der Systemstart ist noch nicht abgeschlossen.")):d("",!0),n.updateInProgress?(o(),u("p",Va,"Es wird eine Systemaktualisierung ausgeführt.")):d("",!0),!(n.bootInProgress||n.updateInProgress)&&n.reloadRequired?(o(),u("p",Pa,"Bitte die Seite neu laden.")):(o(),u("p",qa,"Bitte warten..."))]),_:1},8,["show","title","buttons"])])}const La=S(Aa,[["render",Da],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageBlocker.vue"]]),Ea={name:"OpenwbSettingsApp",components:{NavBar:da,PageFooter:fa,UserInfo:Sa,Messages:Oa,Blocker:La},data(){return{client:{connected:!1},connection:{protocol:location.protocol=="https:"?"wss":"ws",protocolVersion:5,host:location.hostname,port:parseInt(location.port)||(location.protocol=="https:"?443:80),path:"/ws",connectTimeout:4e3,reconnectPeriod:4e3,resubscribe:!0,properties:{requestResponseInformation:!0,requestProblemInformation:!0}}}},computed:{mqttClientId(){try{return this.client.options.clientId}catch(e){console.error("mqttClientId error",e);return}},topicList(){return Object.keys(this.$store.state.mqtt)},nodeEnv(){return"development"}},created(){this.createConnection()},methods:{async saveValues(e=void 0){function t(a){return new Promise(n=>setTimeout(n,a))}function s(a){return a.includes("#")||a.includes("+")}this.$store.state.local.savingData=!0;let c={};if(e===void 0){console.error("no topics to save defined!");return}if(Array.isArray(e))e.forEach(a=>{if(s(a)){console.debug("expanding wildcard topic:",a);const n=this.getWildcardTopics(a);Object.entries(n).forEach(([i,p])=>{console.debug("adding topic to save:",i),c[i]=p})}else console.debug("adding topic to save:",a),c[a]=this.$store.state.mqtt[a]});else{console.error("expected array, got ",typeof e);return}for(const[a,n]of Object.entries(c)){if(a.startsWith("$CONTROL")){console.debug("skipping control topic:",a);continue}let i=a.replace("openWB/","openWB/set/");console.debug("saving data:",i,n),this.doPublish(i,n),await t(50)}this.$store.state.local.savingData=!1},resetValues(e=this.topicList){console.debug("resetting values..."),console.debug("topics: ",e),this.doUnsubscribe(e),this.doSubscribe(e)},setDefaultValues(){console.debug("setting default values... (ToDo)")},sendCommand(e){console.debug("sendCommand:",e),this.doPublish(`openWB/set/command/${this.client.options.clientId}/todo/${e.command}`,e,!1)},createConnection(){const{protocol:e,host:t,port:s,path:c,...a}=this.connection,n=`${e}://${t}:${s}${c}`,[i,p]=this.$cookies.get("mqtt")?.split(":")||[null,null];i&&p||console.debug("Anonymous mqtt connection (no cookie set)"),(this.nodeEnv!=="production"||e=="wss")&&i&&p&&(console.debug("Using mqtt credentials from cookie:",i,"/",p.charAt(0),"..."),a.username=i,a.password=p,i==="admin"&&p==="openwb"&&(console.warn("Using default mqtt credentials! This is insecure and not recommended for production systems."),this.postClientMessage("Warnung: Es werden die Standard-Zugangsdaten für MQTT verwendet! Dies ist unsicher und wird für Produktivsysteme nicht empfohlen.","warning"))),console.debug("connecting to broker:",n),this.client=fe.connect(n,a),this.client.on("connect",()=>{console.debug("Connection succeeded! ClientId: ",this.client.options.clientId),i&&(this.postClientMessage(`Angemeldet als "${i}".`,"success"),this.$store.commit("storeLocal",{name:"username",value:i})),this.doSubscribe(["openWB/system/usage_terms_acknowledged","openWB/system/installAssistantDone","openWB/system/security/access/+"])}),this.client.on("error",r=>{console.error("Connection failed",r),this.postClientMessage("Verbindungsfehler:<br />"+r.message,"danger"),this.$cookies.remove("mqtt"),this.$store.commit("storeLocal",{name:"username",value:null}),this.client.end(),this.createConnection()}),this.client.on("message",(r,v)=>{if(v.toString().length>0){let k;try{k=JSON.parse(v.toString())}catch(y){console.debug("Json parsing failed, fallback to string: ",r,y),k=v.toString()}this.$store.commit("updateTopic",{topic:r,payload:k})}else this.$store.commit("removeTopic",r)})},endConnection(){this.client?.connected?(console.warn("Ending mqtt connection..."),this.client.end(),this.$store.commit("storeLocal",{name:"username",value:null})):console.error("No mqtt connection to end.")},reconnectMqttClient(){this.client?.connected&&this.endConnection(),this.createConnection()},doSubscribe(e){e.forEach(t=>{this.$store.commit("addSubscription",t),this.$store.getters.subscriptionCount(t)==1?(t.includes("#")||t.includes("+")?console.debug("skipping init of wildcard topic:",t):this.$store.commit("addTopic",{topic:t,payload:void 0}),this.client.subscribe(t,{},s=>{if(s){this.postClientMessage(`Daten konnten nicht abonniert werden.<br />Topic: ${t}<br />${s}`,"danger");return}})):console.debug("Already subscribed to topic: ",t)})},doUnsubscribe(e){e.forEach(t=>{this.$store.commit("removeSubscription",t),this.$store.getters.subscriptionCount(t)==0?(this.client.unsubscribe(t,s=>{s&&(console.error("Unsubscribe error",s),this.postClientMessage(`Daten konnten nicht abbestellt werden.<br />Topic: ${t}<br />${s}`,"danger"))}),t.includes("#")||t.includes("+")?(console.debug("expanding wildcard topic:",t),Object.keys(this.getWildcardTopics(t)).forEach(s=>{console.debug("removing wildcardTopic:",s),this.$store.commit("removeTopic",s)})):(console.debug("removing topic:",t),this.$store.commit("removeTopic",t))):console.debug("Still subscribed to topic: ",t)})},doPublish(e,t,s=!0,c=2){let a={qos:c,retain:s};this.client.publish(e,JSON.stringify(t),a,n=>{n&&(console.error("Publish error",n),this.postClientMessage(`Daten konnten nicht geschrieben werden.<br />Topic: ${e}<br />${n}`,"danger"))})},postClientMessage(e,t="secondary"){console.debug("postMessage:",e,t);const s=Date.now();this.$store.commit({type:"addClientMessage",timestamp:s,payload:{message:e,type:t,source:"client",timestamp:Math.floor(s/1e3)}})},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(c=>c.match(s)).reduce((c,a)=>({...c,[a]:this.$store.state.mqtt[a]}),{})}}},xa={role:"main",class:"container"},Wa={id:"content"};function Ra(e,t,s,c,a,n){const i=h("nav-bar"),p=h("router-view"),r=h("page-footer"),v=h("user-info"),k=h("messages"),y=h("blocker");return o(),u(T,null,[l("header",null,[b(i)]),l("div",xa,[l("div",Wa,[l("h1",null,w(e.$route.meta.heading),1),b(p,{onSave:n.saveValues,onReset:n.resetValues,onDefaults:n.setDefaultValues,onSendCommand:n.sendCommand},null,8,["onSave","onReset","onDefaults","onSendCommand"])])]),b(r),b(v,{onSendCommand:n.sendCommand},null,8,["onSendCommand"]),b(k),b(y)],64)}const ja=S(Ea,[["render",Ra],["__file","/opt/openWB-dev/openwb-ui-settings/src/App.vue"]]),Na="modulepreload",za=function(e){return"/openWB/web/settings/"+e},Z={},B=function(t,s,c){let a=Promise.resolve();if(s&&s.length>0){let r=function(v){return Promise.all(v.map(k=>Promise.resolve(k).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),p=i?.nonce||i?.getAttribute("nonce");a=r(s.map(v=>{if(v=za(v),v in Z)return;Z[v]=!0;const k=v.endsWith(".css"),y=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${y}`))return;const O=document.createElement("link");if(O.rel=k?"stylesheet":Na,k||(O.as="script"),O.crossOrigin="",O.href=v,p&&O.setAttribute("nonce",p),document.head.appendChild(O),k)return new Promise((le,re)=>{O.addEventListener("load",le),O.addEventListener("error",()=>re(new Error(`Unable to preload CSS for ${v}`)))})}))}function n(i){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=i,window.dispatchEvent(p),!p.defaultPrevented)throw i}return a.then(i=>{for(const p of i||[])p.status==="rejected"&&n(p.reason);return t().catch(n)})},Ua={namespaced:!0,state:()=>({hiddenDatasets:[]}),mutations:{toggleDataset(e,t){e.hiddenDatasets.includes(t)?e.hiddenDatasets=e.hiddenDatasets.filter(s=>s!==t):e.hiddenDatasets.push(t)},setHiddenDatasets(e,t){e.hiddenDatasets=t}}};let ae={mqtt:{},mqttSubscriptions:{},local:{reloadRequired:!1,savingData:!1,username:null}};ae.examples={text1:"Text...",text2:"mail@domain.com",text3:"openwb.local",text4:"http://www.openwb.de",text5:"Benutzername",text6:"12:34",text7:"2021-10-31",text8:"Text mit Add-Button",color1:"#ff0000",color2:"#0000ff",number1:5,number2:10,number3:28e-5,password1:"GeHeiM!",textarea1:"Langer Text...",range1:6,range2:10,select1:1,select2:void 0,buttonGroup1:1,checkbox1:!0,json1:{text:"Text",number:123},hierarchy1:[{id:0,type:"counter",children:[{id:3,type:"inverter",children:[]},{id:4,type:"bat",children:[]},{id:1,type:"cp",children:[]},{id:2,type:"cp",children:[]}]}],hierarchy1Labels:{0:"EVU",1:"Ladepunkt 1",2:"Ladepunkt 2",3:"Wechselrichter",4:"Batteriespeicher"},tags:["1234","2345","3456"],ioConfig:{active:!1,pattern:[null,!1,!0],action:{value:"stop_all",options:null}}};const x=ge({state:ae,mutations:{storeLocal(e,t){e.local[t.name]=t.value},addTopic(e,t){Object.keys(e.mqtt).includes(t.topic)?console.warn("topic already exists: ",t.topic):e.mqtt[t.topic]=t.payload},removeTopic(e,t){delete e.mqtt[t]},updateTopic(e,t){const s=(c,a,n)=>a.split(".").reduce((i,p,r)=>i[p]=a.split(".").length===++r?n:i[p]||{},c);t.topic in e.mqtt||!(t.topic in e.examples)?t.objectPath!=null?s(e.mqtt[t.topic],t.objectPath,t.payload):e.mqtt[t.topic]=t.payload:(console.debug("topic not found in state.mqtt: ",t.topic),t.topic in e.examples?t.objectPath!=null?s(e.examples[t.topic],t.objectPath,t.payload):e.examples[t.topic]=t.payload:console.warn("topic not found in state: ",t.topic," giving up"))},addClientMessage(e,t){e.local.messages||(e.local.messages={}),e.local.messages[t.timestamp]=t.payload},removeClientMessage(e,t){e.local.messages&&t in e.local.messages&&delete e.local.messages[t]},addSubscription(e,t){t in e.mqttSubscriptions?e.mqttSubscriptions[t]+=1:e.mqttSubscriptions[t]=1,console.debug("subscription count: ",t,e.mqttSubscriptions[t])},removeSubscription(e,t){t in e.mqttSubscriptions&&(e.mqttSubscriptions[t]-=1,e.mqttSubscriptions[t]<=0&&delete e.mqttSubscriptions[t])}},actions:{},modules:{chartLegend:Ua},getters:{usageTermsAcknowledged(e){return new Promise(t=>{if(e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0)t(e.mqtt["openWB/system/usage_terms_acknowledged"]);else{var s,c;s=setTimeout(()=>{clearInterval(c),t(!1)},5e3),c=setInterval(()=>{e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0&&(clearTimeout(s),clearInterval(c),t(e.mqtt["openWB/system/usage_terms_acknowledged"]))},100)}})},installAssistantDone(e){return new Promise(t=>{if(e.mqtt["openWB/system/installAssistantDone"]!==void 0)t(e.mqtt["openWB/system/installAssistantDone"]);else{var s,c;s=setTimeout(()=>{clearInterval(c),t(!1)},5e3),c=setInterval(()=>{e.mqtt["openWB/system/installAssistantDone"]!==void 0&&(clearTimeout(s),clearInterval(c),t(e.mqtt["openWB/system/installAssistantDone"]))},100)}})},accessAllowed(e){return t=>new Promise(s=>{const c=`openWB/system/security/access/${t}`;if(e.mqtt[c]!==void 0)s(e.mqtt[c]);else{var a,n;a=setTimeout(()=>{clearInterval(n),s(!1)},5e3),n=setInterval(()=>{e.mqtt[c]!==void 0&&(clearTimeout(a),clearInterval(n),s(e.mqtt[c]))},100)}})},subscriptionCount:e=>t=>e.mqttSubscriptions[t]||0}}),ie=[{path:"/",redirect:"/GeneralConfiguration"},{path:"/Status",name:"Status",meta:{heading:"Status",checkPermissions:!0},component:()=>B(()=>import("./Status-BP39vwEe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/Logging/ChargeLog",name:"ChargeLog",meta:{heading:"Auswertungen - Ladeprotokoll",checkPermissions:!0},component:()=>B(()=>import("./ChargeLog-DLvdmV1J.js"),__vite__mapDeps([11,1,2,3,6,7,8,9,12]))},{path:"/Logging/Chart/:chartRange?/:initialDate?",name:"Chart",meta:{heading:"Auswertungen - Diagramme",checkPermissions:!0},component:()=>B(()=>import("./Chart-C-dJ6Bvp.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,14]))},{path:"/GeneralConfiguration",name:"GeneralConfiguration",meta:{heading:"Einstellungen - Allgemein",checkPermissions:!0},component:()=>B(()=>import("./GeneralConfiguration-YHm-rGPE.js").then(e=>e.a),__vite__mapDeps([15,1,2,3,16]))},{path:"/IdentificationConfiguration",name:"IdentificationConfiguration",meta:{heading:"Einstellungen - Identifikation",checkPermissions:!0},component:()=>B(()=>import("./IdentificationConfiguration-Gd9tlI3q.js"),__vite__mapDeps([17,2,3,1,6,7,8,9]))},{path:"/DisplayConfiguration",name:"DisplayConfiguration",meta:{heading:"Einstellungen - Display",checkPermissions:!0},component:()=>B(()=>import("./DisplayConfiguration-1jvkcZJD.js").then(e=>e.a),__vite__mapDeps([18,16,1,2,3]))},{path:"/GeneralChargeConfiguration",name:"GeneralChargeConfiguration",meta:{heading:"Ladeeinstellungen - Übergreifendes",checkPermissions:!0},component:()=>B(()=>import("./GeneralChargeConfiguration-D-0JxxQ8.js").then(e=>e.a),__vite__mapDeps([19,16,1,2,3]))},{path:"/SurplusChargeConfiguration",name:"SurplusChargeConfiguration",meta:{heading:"Ladeeinstellungen - Überschuss-Laden",checkPermissions:!0},component:()=>B(()=>import("./SurplusChargeConfiguration-DiEuUPoD.js"),__vite__mapDeps([20,1,2,3,6,7,8,9]))},{path:"/ActiveBatControlConfiguration",name:"ActiveBatControlConfiguration",meta:{heading:"Ladeeinstellungen - Speichersteuerung",checkPermissions:!0},component:()=>B(()=>import("./ActiveBatControlConfiguration-BYD3GnG9.js"),__vite__mapDeps([21,1,2,3,6,7,8,9]))},{path:"/HardwareInstallation",name:"HardwareInstallation",meta:{heading:"Konfiguration - Geräte und Komponenten",checkPermissions:!0},component:()=>B(()=>import("./HardwareInstallation-C9dkW93x.js").then(e=>e.a),__vite__mapDeps([22,1,2,3,16]))},{path:"/LoadManagementConfiguration",name:"LoadManagementConfiguration",meta:{heading:"Konfiguration - Lastmanagement",checkPermissions:!0},component:()=>B(()=>import("./LoadManagementConfiguration-q6ivlmKT.js"),__vite__mapDeps([23,1,2,3,24,25,6,7,8,9]))},{path:"/ChargePointInstallation",name:"ChargePointInstallation",meta:{heading:"Konfiguration - Ladepunkte",checkPermissions:!0},component:()=>B(()=>import("./ChargePointInstallation-BlRVHk1U.js").then(e=>e.c),__vite__mapDeps([26,1,2,3,16,27]))},{path:"/VehicleConfiguration/:section?/:section_index?/:section_part?/:action?",name:"VehicleConfiguration",meta:{heading:"Konfiguration - Fahrzeuge",checkPermissions:!0},component:()=>B(()=>import("./VehicleConfiguration-DFPDt1D2.js").then(e=>e.b),__vite__mapDeps([28,1,2,3,16]))},{path:"/IoConfiguration",name:"IoConfiguration",meta:{heading:"Konfiguration - Ein- und Ausgänge",checkPermissions:!0},component:()=>B(()=>import("./IoConfiguration-DAq6pEK0.js").then(e=>e.b),__vite__mapDeps([29,1,2,3,16]))},{path:"/System/CloudConfiguration",name:"CloudConfiguration",meta:{heading:"System - openWB Cloud",checkPermissions:!0},component:()=>B(()=>import("./CloudConfiguration-BCBUZNpE.js"),__vite__mapDeps([30,1,2,3,6,7,8,9]))},{path:"/System/MqttBridgeConfiguration",name:"MqttBridgeConfiguration",meta:{heading:"System - MQTT-Brücken",checkPermissions:!0},component:()=>B(()=>import("./MqttBridgeConfiguration-BUtIe_ro.js"),__vite__mapDeps([31,1,2,3,6,7,8,9]))},{path:"/System/DebugConfiguration",name:"DebugConfiguration",meta:{heading:"System - Fehlersuche",checkPermissions:!0},component:()=>B(()=>import("./DebugConfiguration-qKFwryNG.js"),__vite__mapDeps([32,1,2,3,9,6,7,8,33]))},{path:"/System/Support",name:"Support",meta:{heading:"System - Support",checkPermissions:!0},component:()=>B(()=>import("./Support-DJzcKvpm.js"),__vite__mapDeps([34,1,2,3,6,7,8,9]))},{path:"/System/LegalSettings",name:"LegalSettings",meta:{heading:"System - Rechtliches",checkPermissions:!0},component:()=>B(()=>import("./LegalSettings-aVis3SO7.js"),__vite__mapDeps([35,1,2,3,6,7,8,9]))},{path:"/System/SystemConfiguration",name:"SystemConfiguration",meta:{heading:"System - System",checkPermissions:!0},component:()=>B(()=>import("./SystemConfiguration-Dg4rZg1o.js"),__vite__mapDeps([36,1,2,3,6,7,8,9,37]))},{path:"/System/SecurityConfiguration",name:"SecurityConfiguration",meta:{heading:"System - Sicherheit",checkPermissions:!0},component:()=>B(()=>import("./SecurityConfiguration-DHR1YyCr.js"),__vite__mapDeps([38,1,2,3,6,7,8,9]))},{path:"/System/DataManagement",name:"DataManagement",meta:{heading:"System - Datenverwaltung",checkPermissions:!0},component:()=>B(()=>import("./DataManagement-DDZzhpER.js").then(e=>e.a),__vite__mapDeps([39,1,2,3,16]))},{path:"/System/InstallAssistant",name:"InstallAssistant",meta:{heading:"System - Einrichtungsassistent",checkPermissions:!0},component:()=>B(()=>import("./InstallAssistant-CawdPliW.js"),__vite__mapDeps([40,16,2,3,1,6,7,8,9]))},{path:"/Error",name:"Error",meta:{heading:"Fehler",checkPermissions:!1},component:()=>B(()=>import("./Error-Cvap85j9.js"),__vite__mapDeps([41,2,3]))}];ie.push({path:"/TestingStore",name:"VUEX Store",meta:{heading:"Beispiele - VUEX Store",checkPermissions:!1},component:()=>B(()=>import("./TestingStore-DBZ6MWSz.js"),__vite__mapDeps([42,24,2,3,1,25,6,7,8,9]))});const F=he({history:be(),routes:ie});let R=!1;F.beforeEach(async e=>{const t=async n=>{if(n.meta.checkPermissions===!0){const i=await x.getters.accessAllowed(n.name);if(console.debug("access check for",n.name,"->",i),R)return console.debug("route already handled, cancel further processing"),!1;if(!i)return console.warn("no permission to access",n.name),x.state.local.username?{name:"Error"}:(console.debug("not logged in, cancel navigation to",n.name),R=!0,!1)}return!0};if(R=!1,!await x.getters.usageTermsAcknowledged)return e.name!=="LegalSettings"?(console.log("usage terms not acknowledged, redirect to legal settings"),{name:"LegalSettings"}):(console.log("usage terms not acknowledged, but already on legal settings, continue"),await t(e));if(!await x.getters.installAssistantDone)return e.name!=="InstallAssistant"?(console.log("install assistant not done, redirect to install assistant"),{name:"InstallAssistant"}):(console.log("install assistant not done, but already on install assistant, continue"),await t(e));const a=await t(e);return R=!0,a});F.afterEach(e=>{e.meta.heading?document.title="openWB | "+e.meta.heading:document.title="openWB"});const H=_e(ja);H.use(x).use(F).use(ot,at).use(ve,{expire:"30d",path:"/",domain:"",secure:!0,sameSite:"Lax"});const Fa=Object.assign({"./components/OpenwbBaseAlert.vue":dt,"./components/OpenwbBaseArrayInput.vue":Tt,"./components/OpenwbBaseAvatar.vue":Lt,"./components/OpenwbBaseButtonGroupInput.vue":Kt,"./components/OpenwbBaseButtonInput.vue":ts,"./components/OpenwbBaseButtonRow.vue":Nt,"./components/OpenwbBaseCard.vue":cs,"./components/OpenwbBaseCheckboxInput.vue":bs,"./components/OpenwbBaseClickButton.vue":Qt,"./components/OpenwbBaseColorPicker.vue":Ss,"./components/OpenwbBaseCopyToClipboard.vue":Vs,"./components/OpenwbBaseHeading.vue":Rs,"./components/OpenwbBaseIoPattern.vue":Us,"./components/OpenwbBaseModalDialog.vue":Ys,"./components/OpenwbBaseNumberInput.vue":cn,"./components/OpenwbBaseRangeInput.vue":wn,"./components/OpenwbBaseSelectInput.vue":Dn,"./components/OpenwbBaseSettingElement.vue":gt,"./components/OpenwbBaseSubmitButtons.vue":Hn,"./components/OpenwbBaseTextInput.vue":ho,"./components/OpenwbBaseTextarea.vue":Ao,"./components/OpenwbBaseToast.vue":Do,"./components/OpenwbBaseTooltip.vue":Ro});Object.entries(Fa).forEach(([e,t])=>{const s=ye(we(e.split("/").pop().replace(/\.\w+$/,"")));H.component(s,t.default)});H.mount("#app");export{j as C,D as O,B as _};
