import{l as L,a4 as w,F as k}from"./vendor-fortawesome-385a0110.js";import{C as _}from"./index-16992b94.js";import{_ as P,q as p,k as B,l as F,u as l,B as t,M as o,x as c,y as u}from"./vendor-033b944b.js";import"./vendor-bootstrap-2fe72263.js";import"./vendor-jquery-e24ccc96.js";import"./vendor-axios-bd72bf9d.js";import"./vendor-sortablejs-01d816ac.js";L.add(w);const v={name:"OpenwbDebugging",mixins:[_],components:{FontAwesomeIcon:k},data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/system/debug_level"],dataMigrationLogLog:"-- noch nicht geladen --",mainLog:"-- noch nicht geladen --",internalChargepointLog:"-- noch nicht geladen --",mqttLog:"-- noch nicht geladen --",socLog:"-- noch nicht geladen --",updateLog:"-- noch nicht geladen --",remoteSupportLog:"--noch nicht geladen --",smartHomeLog:"--noch nicht geladen --"}},methods:{async getFilePromise(n,e=!1){return this.axios.get(location.protocol+"//"+location.host+n).then(s=>s.data).catch(s=>s.response?s.response.status==404&&e?"":`A 404 is expected if running node.js dev server!
`+s.response.status+" "+s.response.statusText+": "+s.response.request.responseURL:s.request?s.request:s.message)},loadDataMigrationLog(n){n.stopPropagation(),this.dataMigrationLog="wird aktualisiert...",this.getFilePromise("/openWB/data/log/data_migration.log").then(e=>{this.dataMigrationLog=e}),this.getFilePromise("/openWB/data/log/data_migration.log.1",!0).then(e=>{this.dataMigrationLog+=e})},loadMainLog(n){n.stopPropagation(),this.mainLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/main.log").then(e=>{this.mainLog=e}),this.getFilePromise("/openWB/ramdisk/main.log.1",!0).then(e=>{this.mainLog+=e})},loadInternalChargepointLog(n){n.stopPropagation(),this.internalChargepointLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/internal_chargepoint.log").then(e=>{this.internalChargepointLog=e}),this.getFilePromise("/openWB/ramdisk/internal_chargepoint.log.1",!0).then(e=>{this.internalChargepointLog+=e})},loadMqttLog(n){n.stopPropagation(),this.mqttLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/mqtt.log").then(e=>{this.mqttLog=e}),this.getFilePromise("/openWB/ramdisk/mqtt.log.1",!0).then(e=>{this.mqttLog+=e})},loadSocLog(n){n.stopPropagation(),this.socLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/soc.log").then(e=>{this.socLog=e}),this.getFilePromise("/openWB/ramdisk/soc.log.1",!0).then(e=>{this.socLog+=e})},loadUpdateLog(n){n.stopPropagation(),this.updateLog="wird aktualisiert...",this.getFilePromise("/openWB/data/log/update.log").then(e=>{this.updateLog=e}),this.getFilePromise("/openWB/data/log/update.log.1",!0).then(e=>{this.updateLog+=e})},loadRemoteSupportLog(n){n.stopPropagation(),this.remoteSupportLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/remote_support.log").then(e=>{this.remoteSupportLog=e}),this.getFilePromise("/openWB/ramdisk/remote_support.log.1",!0).then(e=>{this.remoteSupportLog+=e})},loadSmartHomeLog(n){n.stopPropagation(),this.smartHomeLog="wird aktualisiert...",this.getFilePromise("/openWB/ramdisk/smarthome.log").then(e=>{this.smartHomeLog=e}),this.getFilePromise("/openWB/ramdisk/smarthome.log.1").then(e=>{this.smartHomeLog+=e})}}},C={class:"debugging"},W={name:"debugConfigForm"};function S(n,e,s,D,m,r){const h=p("openwb-base-button-group-input"),b=p("openwb-base-alert"),a=p("openwb-base-card"),f=p("openwb-base-submit-buttons"),g=p("font-awesome-icon"),d=p("openwb-base-avatar");return B(),F("div",C,[l("form",W,[t(a,{title:"Protokollierung"},{default:o(()=>[t(h,{title:"Debug Level",buttons:[{buttonValue:30,text:"Warnungen und Fehler"},{buttonValue:20,text:"Info"},{buttonValue:10,text:"Details"}],"model-value":n.$store.state.mqtt["openWB/system/debug_level"],"onUpdate:modelValue":e[0]||(e[0]=i=>n.updateState("openWB/system/debug_level",i))},{help:o(()=>[c(' Wenn der Debug Level auf "Info" oder "Details" gesetzt wird, werden mehr Informationen in die Logdateien geschrieben. Im normalen Betrieb sollte immer "Warnungen und Fehler" gewählt werden, um die Schreibvorgänge auf der SD-Karte zu reduzieren. ')]),_:1},8,["model-value"]),t(b,{subtype:"warning"},{default:o(()=>[c(' Achtung! In den Einstellungen "Info" und "Details" können in den Logdateien sensible Daten wie Benutzernamen und Kennwörter enthalten sein. Diese sollten vor dem Veröffentlichen z.B. im Forum unkenntlich gemacht werden. Private IP-Adressen (z.B. 192.168.x.x) müssen nicht maskiert werden, da diese nicht über das Internet erreichbar sind. ')]),_:1})]),_:1}),t(f,{formName:"debugConfigForm",onSave:e[1]||(e[1]=i=>n.$emit("save")),onReset:e[2]||(e[2]=i=>n.$emit("reset")),onDefaults:e[3]||(e[3]=i=>n.$emit("defaults"))})]),t(a,{title:"Main-Log",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[4]||(e[4]=i=>r.loadMainLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.mainLog),1)]),_:1}),t(a,{title:"Log des internen Ladepunktes",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[5]||(e[5]=i=>r.loadInternalChargepointLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.internalChargepointLog),1)]),_:1}),t(a,{title:"MQTT-Log",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[6]||(e[6]=i=>r.loadMqttLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.mqttLog),1)]),_:1}),t(a,{title:"SoC-Log",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[7]||(e[7]=i=>r.loadSocLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.socLog),1)]),_:1}),t(a,{title:"Protokoll des letzten Updates",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[8]||(e[8]=i=>r.loadUpdateLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.updateLog),1)]),_:1}),t(a,{title:"Protokoll des Remote-Dienstes",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[9]||(e[9]=i=>r.loadRemoteSupportLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.remoteSupportLog),1)]),_:1}),t(a,{title:"Protokoll des SmartHome Dienstes",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[10]||(e[10]=i=>r.loadSmartHomeLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(m.smartHomeLog),1)]),_:1}),t(a,{title:"Protokoll der Datenmigration",class:"mt-3",collapsible:!0,collapsed:!0},{actions:o(()=>[t(d,{class:"bg-success clickable",onClick:e[11]||(e[11]=i=>r.loadDataMigrationLog(i))},{default:o(()=>[t(g,{"fixed-width":"",icon:["fas","file-download"]})]),_:1})]),default:o(()=>[l("pre",null,u(n.dataMigrationLog),1)]),_:1})])}const z=P(v,[["render",S],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/DebugConfig.vue"]]);export{z as default};
