import{C as y}from"./index-ad11aee2.js";import{l as T,K as q,L as P,c as S,F as w,M as A,N as D,O as G,P as H,Q as Z,R as F,S as K,T as J,U,V as I,W as L,X as Q,Y as X,Z as Y}from"./vendor-fortawesome-c5ffc2b2.js";import{_ as v,u as i,l as d,z as g,D as j,E as r,x as e,m as f,G as n,y as u,F as a,B as x,p as $,q as ee,N as B,M as N}from"./vendor-ea36120f.js";import{C as te,p as se,a as oe,L as ae,b as re,P as ie,c as ne,T as ce,i as de,d as le,e as pe}from"./vendor-chartjs-1398beb1.js";import"./vendor-bootstrap-038cab7c.js";import"./vendor-jquery-48e02303.js";import"./vendor-axios-1f03ee31.js";import"./vendor-sortablejs-c6aaccb3.js";import"./vendor-luxon-8ddd27a0.js";T.add(q,P,S);const me={name:"StatusCard",components:{FontAwesomeIcon:w},props:{subtype:{type:String,required:!0},state:{type:Number,required:!1,default:0},stateMessage:{type:String,required:!1,default:void 0},componentId:{type:Number,required:!1,default:void 0}},computed:{stateClass(){switch(this.state){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"dark"}},stateIcon(){switch(this.state){case 0:return["fas","check-circle"];case 1:return["fas","exclamation-triangle"];case 2:return["fas","times-circle"];default:return["fas","check-circle"]}}}},ue={class:"text-right"},ge={class:"container"},he={class:"row justify-content-end"},be={key:0,class:"col px-0"},_e={style:{"white-space":"pre-wrap"}},fe={key:1,class:"col col-auto pr-0"},ve={class:"text-right"};function ye(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-alert"),m=i("openwb-base-card");return d(),g(m,{subtype:c.subtype,collapsible:!0,collapsed:!0,class:"pb-0"},j({header:r(()=>[$(s.$slots,"header-left")]),actions:r(()=>[e("div",ue,[$(s.$slots,"header-right")]),n(p,{class:ee([c.state===0?`text-${c.subtype}`:"","ml-1"]),"fixed-width":"",icon:t.stateIcon},null,8,["class","icon"])]),default:r(()=>[$(s.$slots,"default")]),_:2},[c.componentId!==void 0||c.stateMessage?{name:"footer",fn:r(()=>[e("div",ge,[e("div",he,[c.stateMessage?(d(),f("div",be,[n(l,{subtype:t.stateClass},{default:r(()=>[n(p,{"fixed-width":"",icon:t.stateIcon},null,8,["icon"]),o[0]||(o[0]=u(" Modulmeldung: ")),e("span",_e,a(c.stateMessage),1)]),_:1},8,["subtype"])])):x("",!0),c.componentId!==void 0?(d(),f("div",fe,[e("div",ve,"ID: "+a(c.componentId),1)])):x("",!0)])])]),key:"0"}:void 0]),1032,["subtype"])}const W=v(me,[["render",ye],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/StatusCard.vue"]]);T.add(A);const Te={name:"ChargePointSumCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/chargepoint/get/power","openWB/chargepoint/get/imported","openWB/chargepoint/get/exported","openWB/chargepoint/get/daily_imported","openWB/chargepoint/get/daily_exported"]}},computed:{baseTopic:{get(){return"openWB/chargepoint"}}}},we={class:"text-right"},xe={class:"row"},We={class:"col text-right text-monospace"},ke={class:"row"},Ce={class:"col-4 text-right text-monospace"},Be={class:"col-4 text-right text-monospace"},Ne={class:"row"},$e={class:"col-4 text-right text-monospace"},qe={class:"col-4 text-right text-monospace"};function Pe(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"primary"},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","charging-station"]}),o[0]||(o[0]=u(" Alle Ladepunkte "))]),"header-right":r(()=>[e("span",we,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1)]),default:r(()=>[n(l,{subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row py-2"},[e("div",{class:"col font-weight-bold"},"Ladevorgang"),e("div",{class:"col text-right"},"Leistung")],-1)),e("div",xe,[e("div",We,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001)),1)])]),_:1}),n(l,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Zählerstände"},{default:r(()=>[o[4]||(o[4]=e("div",{class:"row justify-content-end"},[e("div",{class:"col-4 text-right"},"Geladen"),e("div",{class:"col-4 text-right"},"Entladen")],-1)),e("div",ke,[o[2]||(o[2]=e("div",{class:"col text-right"},"Heute",-1)),e("div",Ce,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001)+" kWh"),1),e("div",Be,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001)+" kWh"),1)]),e("div",Ne,[o[3]||(o[3]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",$e,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001)+" kWh"),1),e("div",qe,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001)+" kWh"),1)])]),_:1})]),_:1})}const Se=v(Te,[["render",Pe],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointSumCard.vue"]]);T.add(A,D,G,H,Z,F,K,J);const Ae={name:"ChargePointCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],props:{installedChargePointKey:{type:String,required:!0},installedChargePoint:{type:Object,required:!0}},data(){return{mqttTopicsToSubscribe:[`openWB/chargepoint/${this.installedChargePoint.id}/get/+`,`"openWB/chargepoint/${this.installedChargePoint.id}/get/connected_vehicle/info`,`"openWB/chargepoint/${this.installedChargePoint.id}/set/+`,`"openWB/internal_chargepoint/${this.installedChargePoint.id}/data/phases_to_use`]}},computed:{chargePointIndex:{get(){return this.installedChargePoint.id}},baseTopic:{get(){return"openWB/chargepoint/"+this.chargePointIndex}},chargingStatus:{get(){let s=this.$store.state.mqtt[this.baseTopic+"/get/plug_state"],o=this.$store.state.mqtt[this.baseTopic+"/get/charge_state"];return s==1&&o==1?{icon:["fas","plug-circle-bolt"],text:"Fahrzeug angesteckt, Ladevorgang aktiv"}:s==1?{icon:["fas","plug-circle-check"],text:"Fahrzeug angesteckt, kein Ladevorgang aktiv"}:{icon:["fas","plug-circle-minus"],text:"Kein Fahrzeug angesteckt"}}}}},Ie={class:"row py-2"},Le={class:"col text-right"},je={style:{"white-space":"pre-wrap"}},Oe={class:"row"},ze={class:"col text-right text-monospace"},Ee={class:"col text-right text-monospace"},Re={class:"row"},Ve={key:0,class:"col text-right text-monospace"},Me={key:1,class:"col text-right text-monospace"},De={class:"col text-right text-monospace"},Ge={class:"row"},He={class:"col-4 text-right text-monospace"},Ze={class:"col-4 text-right text-monospace"},Fe={class:"row"},Ke={class:"col-4 text-right text-monospace"},Je={class:"col-4 text-right text-monospace"},Ue={class:"row"},Qe={class:"col text-right text-monospace"},Xe={class:"col text-right text-monospace"},Ye={class:"col text-right text-monospace"},et={class:"row"},tt={class:"col text-right text-monospace"},st={class:"col text-right text-monospace"},ot={class:"col text-right text-monospace"},at={class:"row"},rt={class:"col text-right text-monospace"},it={class:"col text-right text-monospace"},nt={class:"col text-right text-monospace"},ct={class:"row"},dt={class:"col text-right text-monospace"},lt={class:"col text-right text-monospace"},pt={class:"col text-right text-monospace"},mt={class:"row"},ut={class:"col text-center text-monospace"};function gt(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-alert"),m=i("openwb-base-card"),k=i("status-card");return d(),g(k,{subtype:"primary","component-id":t.chargePointIndex,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","charging-station"]}),u(" "+a(c.installedChargePoint.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Ie,[o[0]||(o[0]=e("div",{class:"col col-auto font-weight-bold"},"Status",-1)),e("div",Le,[n(p,{"fixed-width":"",icon:t.chargingStatus.icon,title:t.chargingStatus.text},null,8,["icon","title"]),u(" "+a(t.chargingStatus.text),1)])]),n(l,{subtype:"info"},{default:r(()=>[o[1]||(o[1]=u(" Statusmeldung: ")),e("span",je,a(s.$store.state.mqtt[t.baseTopic+"/get/state_str"]),1)]),_:1}),e("div",null," max. Ladeleistung: "+a((s.max_power=s.formatNumberTopic("openWB/chargepoint/"+t.chargePointIndex+"/get/max_evse_current",0))=="-"?s.max_power:Math.floor(s.max_power*3*230/1e3))+" kW ",1)]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Ladevorgang"},{default:r(()=>[o[2]||(o[2]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Ladestrom Vorgabe"),e("div",{class:"col text-right"},"Leistung")],-1)),e("div",Oe,[e("div",ze,a(s.formatNumberTopic(t.baseTopic+"/set/current",2))+" A",1),e("div",Ee,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1)]),o[3]||(o[3]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Phasen Vorgabe"),e("div",{class:"col text-right"},"Phasen Aktuell")],-1)),e("div",Re,[s.$store.state.mqtt["openWB/general/extern"]===!0?(d(),f("div",Ve,a(s.formatNumberTopic("openWB/internal_chargepoint/"+t.chargePointIndex+"/data/phases_to_use")),1)):(d(),f("div",Me,a(s.formatNumberTopic(t.baseTopic+"/set/phases_to_use")),1)),e("div",De,a(s.formatNumberTopic(t.baseTopic+"/get/phases_in_use")),1)])]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Zählerstände"},{default:r(()=>[o[6]||(o[6]=e("div",{class:"row justify-content-end"},[e("div",{class:"col-4 text-right"},"Geladen"),e("div",{class:"col-4 text-right"},"Entladen")],-1)),e("div",Ge,[o[4]||(o[4]=e("div",{class:"col text-right"},"Heute",-1)),e("div",He,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",Ze,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",Fe,[o[5]||(o[5]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Ke,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",Je,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(m,{subtype:"white","body-bg":"white",class:"py-1 mb-2",title:"Werte pro Phase"},{default:r(()=>[e("div",Ue,[o[7]||(o[7]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Spannung [V]",-1)),e("div",Qe,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[0]),1),e("div",Xe,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[1]),1),e("div",Ye,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[2]),1)]),e("div",et,[o[8]||(o[8]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Strom [A]",-1)),e("div",tt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[0]),1),e("div",st,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[1]),1),e("div",ot,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[2]),1)]),e("div",at,[o[9]||(o[9]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Wirkleistung [kW]",-1)),e("div",rt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[0]),1),e("div",it,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[1]),1),e("div",nt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[2]),1)]),e("div",ct,[o[10]||(o[10]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Leistungsfaktor",-1)),e("div",dt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[0]),1),e("div",lt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[1]),1),e("div",pt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[2]),1)]),e("div",mt,[o[11]||(o[11]=e("div",{class:"col-md-4 pr-1 text-center text-md-right"},"Netzfrequenz",-1)),e("div",ut,a(s.formatNumberTopic(t.baseTopic+"/get/frequency",3))+" Hz ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const ht=v(Ae,[["render",gt],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ChargePointCard.vue"]]);T.add(U);const bt={name:"CounterCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],props:{counter:{type:Object,required:!0}},data(){return{mqttTopicsToSubscribe:[`openWB/counter/${this.counter.id}/get/+`]}},computed:{baseTopic:{get(){return"openWB/counter/"+this.counter.id}}}},_t={class:"row"},ft={class:"col text-right text-monospace pl-0"},vt={class:"col text-right text-monospace pl-0"},yt={class:"row"},Tt={class:"col text-right text-monospace pl-0"},wt={class:"col text-right text-monospace pl-0"},xt={class:"row"},Wt={class:"col"},kt={class:"row"},Ct={class:"col text-right text-monospace pl-0"},Bt={class:"col text-right text-monospace pl-0"},Nt={class:"col text-right text-monospace pl-0"},$t={class:"row"},qt={class:"col"},Pt={class:"row"},St={class:"col text-right text-monospace pl-0"},At={class:"col text-right text-monospace pl-0"},It={class:"col text-right text-monospace pl-0"},Lt={class:"row"},jt={class:"col"},Ot={class:"row"},zt={class:"col text-right text-monospace pl-0"},Et={class:"col text-right text-monospace pl-0"},Rt={class:"col text-right text-monospace pl-0"},Vt={class:"row"},Mt={class:"col"},Dt={class:"row"},Gt={class:"col text-right text-monospace pl-0"},Ht={class:"col text-right text-monospace pl-0"},Zt={class:"col text-right text-monospace pl-0"};function Ft(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"danger","component-id":c.counter.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","gauge-high"]}),u(" "+a(c.counter.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Netzfrequenz")],-1)),e("div",_t,[e("div",ft,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001)+" kW"),1),e("div",vt,a(s.formatNumberTopic(t.baseTopic+"/get/frequency",3)+" Hz"),1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Export"),e("div",{class:"col-6 text-right"},"Import")],-1)),e("div",yt,[e("div",Tt,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001)+" kWh"),1),e("div",wt,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001)+" kWh"),1)])]),_:1}),n(l,{title:"Werte pro Phase",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",xt,[o[2]||(o[2]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Spannung [V]",-1)),e("div",Wt,[e("div",kt,[e("div",Ct,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[0]),1),e("div",Bt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[1]),1),e("div",Nt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/voltages",1).split(" / ")[2]),1)])])]),e("div",$t,[o[3]||(o[3]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Strom [A]",-1)),e("div",qt,[e("div",Pt,[e("div",St,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[0]),1),e("div",At,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[1]),1),e("div",It,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/currents",2).split(" / ")[2]),1)])])]),e("div",Lt,[o[4]||(o[4]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Wirkleistung [kW]",-1)),e("div",jt,[e("div",Ot,[e("div",zt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[0]),1),e("div",Et,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[1]),1),e("div",Rt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/powers",3,3,.001).split(" / ")[2]),1)])])]),e("div",Vt,[o[5]||(o[5]=e("div",{class:"col-md-4 pr-0 text-center text-md-right"},"Leistungsfaktor",-1)),e("div",Mt,[e("div",Dt,[e("div",Gt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[0]),1),e("div",Ht,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[1]),1),e("div",Zt,a(s.formatPhaseArrayNumberTopic(t.baseTopic+"/get/power_factors",2).split(" / ")[2]),1)])])])]),_:1})]),_:1},8,["component-id","state","state-message"])}const Kt=v(bt,[["render",Ft],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/CounterCard.vue"]]);T.add(I);const Jt={name:"InverterSumCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/pv/get/+"]}},computed:{baseTopic:{get(){return"openWB/pv"}}}},Ut={class:"row"},Qt={class:"col text-right text-monospace"},Xt={class:"col text-right text-monospace"},Yt={class:"row"},es={class:"col text-right text-monospace"},ts={class:"col text-right text-monospace"},ss={class:"col text-right text-monospace"};function os(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"success",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","solar-panel"]}),o[0]||(o[0]=u(" Alle Wechselrichter "))]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Leistung"),e("div",{class:"col text-right"},"Zählerstand")],-1)),e("div",Ut,[e("div",Qt,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",Xt,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(l,{title:"Erträge",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[2]||(o[2]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Heute"),e("div",{class:"col text-right"},"Monat"),e("div",{class:"col text-right"},"Jahr")],-1)),e("div",Yt,[e("div",es,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1),e("div",ts,a(s.formatNumberTopic(t.baseTopic+"/get/monthly_exported",1,1,.001))+" kWh ",1),e("div",ss,a(s.formatNumberTopic(t.baseTopic+"/get/yearly_exported",0,0,.001))+" kWh ",1)])]),_:1})]),_:1},8,["state","state-message"])}const as=v(Jt,[["render",os],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterSumCard.vue"]]);T.add(I);const rs={name:"InverterCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],props:{inverter:{type:Object,required:!0}},data(){return{mqttTopicsToSubscribe:[`openWB/pv/${this.inverter.id}/get/+`]}},computed:{baseTopic:{get(){return"openWB/pv/"+this.inverter.id}}}},is={class:"row"},ns={class:"col text-right text-monospace"},cs={class:"col text-right text-monospace"},ds={class:"row"},ls={class:"col text-right text-monospace"},ps={class:"col text-right text-monospace"},ms={class:"col text-right text-monospace"};function us(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"success","component-id":c.inverter.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","solar-panel"]}),u(" "+a(c.inverter.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Leistung"),e("div",{class:"col text-right"},"Zählerstand")],-1)),e("div",is,[e("div",ns,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",cs,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1}),n(l,{title:"Erträge",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col text-right"},"Heute"),e("div",{class:"col text-right"},"Monat"),e("div",{class:"col text-right"},"Jahr")],-1)),e("div",ds,[e("div",ls,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1),e("div",ps,a(s.formatNumberTopic(t.baseTopic+"/get/monthly_exported",1,1,.001))+" kWh ",1),e("div",ms,a(s.formatNumberTopic(t.baseTopic+"/get/yearly_exported",0,0,.001))+" kWh ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const gs=v(rs,[["render",us],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/InverterCard.vue"]]);T.add(L);const hs={name:"BatterySumCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/bat/get/+"]}},computed:{baseTopic:{get(){return"openWB/bat"}}}},bs={class:"row"},_s={class:"col text-right text-monospace pl-0"},fs={class:"col text-right text-monospace pl-0"},vs={class:"row"},ys={class:"col text-right text-monospace"},Ts={class:"col text-right text-monospace"},ws={class:"row"},xs={class:"col text-right text-monospace"},Ws={class:"col text-right text-monospace"};function ks(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"warning",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car-battery"]}),o[0]||(o[0]=u(" Alle Speicher "))]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",1,1,.001))+" kW / "+a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" % ",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[1]||(o[1]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Ladestand")],-1)),e("div",bs,[e("div",_s,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",fs,a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" %",1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[4]||(o[4]=e("div",{class:"row"},[e("div",{class:"col"}),e("div",{class:"col text-right"},"Geladen"),e("div",{class:"col text-right"},"Entladen")],-1)),e("div",vs,[o[2]||(o[2]=e("div",{class:"col text-right"},"Heute",-1)),e("div",ys,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",Ts,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",ws,[o[3]||(o[3]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",xs,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",Ws,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1})]),_:1},8,["state","state-message"])}const Cs=v(hs,[["render",ks],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatterySumCard.vue"]]);T.add(L);const Bs={name:"BatteryCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],props:{battery:{type:Object,required:!0}},data(){return{mqttTopicsToSubscribe:[`openWB/bat/${this.battery.id}/get/+`]}},computed:{baseTopic:{get(){return"openWB/bat/"+this.battery.id}}}},Ns={class:"row"},$s={class:"col text-right text-monospace pl-0"},qs={class:"col text-right text-monospace pl-0"},Ps={class:"row"},Ss={class:"col text-right text-monospace"},As={class:"col text-right text-monospace"},Is={class:"row"},Ls={class:"col text-right text-monospace"},js={class:"col text-right text-monospace"};function Os(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"warning","component-id":c.battery.id,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car-battery"]}),u(" "+a(c.battery.name),1)]),"header-right":r(()=>[u(a(s.formatNumberTopic(t.baseTopic+"/get/power",1,1,.001))+" kW / "+a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" % ",1)]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col-6 text-right"},"Leistung"),e("div",{class:"col-6 text-right"},"Ladestand")],-1)),e("div",Ns,[e("div",$s,a(s.formatNumberTopic(t.baseTopic+"/get/power",3,3,.001))+" kW ",1),e("div",qs,a(s.$store.state.mqtt[t.baseTopic+"/get/soc"])+" %",1)])]),_:1}),n(l,{title:"Zählerstände",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[3]||(o[3]=e("div",{class:"row"},[e("div",{class:"col"}),e("div",{class:"col text-right"},"Geladen"),e("div",{class:"col text-right"},"Entladen")],-1)),e("div",Ps,[o[1]||(o[1]=e("div",{class:"col text-right"},"Heute",-1)),e("div",Ss,a(s.formatNumberTopic(t.baseTopic+"/get/daily_imported",3,3,.001))+" kWh ",1),e("div",As,a(s.formatNumberTopic(t.baseTopic+"/get/daily_exported",3,3,.001))+" kWh ",1)]),e("div",Is,[o[2]||(o[2]=e("div",{class:"col text-right"},"Gesamt",-1)),e("div",Ls,a(s.formatNumberTopic(t.baseTopic+"/get/imported",3,3,.001))+" kWh ",1),e("div",js,a(s.formatNumberTopic(t.baseTopic+"/get/exported",3,3,.001))+" kWh ",1)])]),_:1})]),_:1},8,["component-id","state","state-message"])}const zs=v(Bs,[["render",Os],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/BatteryCard.vue"]]);T.add(q,P,S,Q);const Es={name:"RippleControlReceiverCard",components:{FontAwesomeIcon:w},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/general/ripple_control_receiver/get/fault_state","openWB/general/ripple_control_receiver/get/fault_str","openWB/general/ripple_control_receiver/get/override_value","openWB/general/ripple_control_receiver/module"]}},computed:{baseTopic:{get(){return"openWB/general/ripple_control_receiver"}}}},Rs={class:"row"},Vs={key:0,class:"col"},Ms={key:1,class:"col"},Ds={style:{"white-space":"pre-wrap"}};function Gs(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("openwb-base-alert");return s.$store.state.mqtt[t.baseTopic+"/module"]&&s.$store.state.mqtt[t.baseTopic+"/module"].type?(d(),g(l,{key:0,subtype:"secondary",collapsible:!0,collapsed:!0,class:"pb-0"},{header:r(()=>[n(p,{icon:["fas","tower-broadcast"]}),o[0]||(o[0]=u(" Steuerbare Verbrauchseinrichtung (RSE) "))]),footer:r(()=>[n(m,{subtype:s.getFaultStateSubtype(t.baseTopic)},{default:r(()=>[n(p,{"fixed-width":"",icon:s.stateIcon},null,8,["icon"]),o[2]||(o[2]=u(" Modulmeldung: ")),e("span",Ds,a(s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]),1)]),_:1},8,["subtype"])]),default:r(()=>[n(l,{title:"Aktuelle Werte",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",Rs,[o[1]||(o[1]=e("div",{class:"col"},"Status",-1)),s.$store.state.mqtt[t.baseTopic+"/get/override_value"]==0?(d(),f("div",Vs," Laden gesperrt ")):(d(),f("div",Ms," Laden erlaubt ("+a(s.$store.state.mqtt[t.baseTopic+"/get/override_value"])+" %) ",1))])]),_:1})]),_:1})):x("",!0)}const Hs=v(Es,[["render",Gs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/RippleControlReceiver.vue"]]);T.add(X);const Zs={name:"VehicleCard",components:{StatusCard:W,FontAwesomeIcon:w},mixins:[y],props:{vehicleKey:{type:String,required:!0},vehicleName:{type:String,default:""}},data(){return{mqttTopicsToSubscribe:["openWB/vehicle/+/get/+"]}},computed:{vehicleIndex:{get(){return parseInt(this.vehicleKey.match(/(?:\/)(\d+)(?=\/)/)[1])}},soc:{get(){return this.formatNumberTopic(this.baseTopic+"/get/soc")}},socTimestamp:{get(){return this.$store.state.mqtt[this.baseTopic+"/get/soc_timestamp"]!==void 0?new Date(this.$store.state.mqtt[this.baseTopic+"/get/soc_timestamp"]*1e3).toLocaleString():"-"}},socRange:{get(){return this.$store.state.mqtt[this.baseTopic+"/get/range"]!==void 0?Math.round(this.$store.state.mqtt[this.baseTopic+"/get/range"]):0}},baseTopic:{get(){return"openWB/vehicle/"+this.vehicleIndex}}}},Fs={class:"row"},Ks={class:"col text-right text-monospace"},Js={class:"col text-right text-monospace"},Us={class:"col text-right text-monospace"};function Qs(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("openwb-base-card"),m=i("status-card");return d(),g(m,{subtype:"info","component-id":t.vehicleIndex,state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},j({"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","car"]}),u(" "+a(c.vehicleName),1)]),default:r(()=>[n(l,{title:"Fahrzeugdaten",subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[o[0]||(o[0]=e("div",{class:"row"},[e("div",{class:"col pr-0 text-right"},"Ladestand"),e("div",{class:"col pr-0 text-right"},"Reichweite"),e("div",{class:"col pr-0 text-right"},"Letzter Zeitstempel")],-1)),e("div",Fs,[e("div",Ks,a(t.soc)+" %",1),e("div",Js,a(t.socRange)+" km",1),e("div",Us,a(t.socTimestamp),1)])]),_:1})]),_:2},[t.soc!="-"?{name:"header-right",fn:r(()=>[u(a(t.soc)+" % ",1)]),key:"0"}:void 0]),1032,["component-id","state","state-message"])}const Xs=v(Zs,[["render",Qs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/VehicleCard.vue"]]);T.add(Y);te.register(se,oe,ae,re,ie,ne,ce,de,le);const Ys={name:"ElectricityTariffCard",components:{StatusCard:W,FontAwesomeIcon:w,ChartjsLine:pe},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/optional/et/provider","openWB/optional/et/get/fault_state","openWB/optional/et/get/fault_str","openWB/optional/et/get/prices"],chartDatasets:{datasets:[{label:"Stromtarif",unit:"ct/kWh",type:"line",stepped:!0,borderColor:"rgba(255, 0, 0, 0.7)",backgroundColor:"rgba(255, 10, 13, 0.3)",fill:!1,pointStyle:"circle",pointRadius:0,pointHoverRadius:4,cubicInterpolationMode:"monotone",hidden:!1,borderWidth:1,data:void 0,yAxisID:"y",parsing:{xAxisKey:"timestamp",yAxisKey:"price"}}]},chartOptions:{plugins:{title:{display:!1},tooltip:{enabled:!0},legend:{display:!1}},elements:{point:{radius:2}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",text:"Zeit",maxTicksLimit:24},display:!0,title:{display:!0,text:"Uhrzeit"},ticks:{font:{size:12},maxTicksLimit:0},grid:{}},y:{position:"left",type:"linear",display:"auto",title:{font:{size:12},display:!0,text:"Preis [ct/kWh]"},grid:{},ticks:{font:{size:12},stepSize:.01,maxTicksLimit:11}}}}}},computed:{electricityTariffConfigured(){const s=this.$store.state.mqtt["openWB/optional/et/provider"];return s!==void 0?s.type!==null:!1},chartDataRead(){return this.chartDataObject.datasets[0].data!=null},chartDataObject(){if(this.$store.state.mqtt["openWB/optional/et/get/prices"]){var s=this.$store.state.mqtt["openWB/optional/et/get/prices"],o=[];for(const[b,t]of Object.entries(s))o.push({timestamp:b*1e3,price:t*1e5});const h=o.slice(-1)[0];o.push({timestamp:h.timestamp+(60*60-1)*1e3,price:h.price})}const c=this.chartDatasets;return c.datasets[0].data=o,c},currentPrice(){return this.chartDataObject.datasets[0].data===void 0||this.chartDataObject.datasets[0].data.length===0?this.formatNumber(0,2):this.formatNumber(this.chartDataObject.datasets[0].data[0].price||0,2)},baseTopic:{get(){return"openWB/optional/et"}}}},eo={class:"openwb-chart"};function to(s,o,c,h,b,t){const p=i("font-awesome-icon"),l=i("chartjs-line"),m=i("openwb-base-card"),k=i("status-card");return t.electricityTariffConfigured?(d(),g(k,{key:0,subtype:"secondary",state:s.$store.state.mqtt[t.baseTopic+"/get/fault_state"],"state-message":s.$store.state.mqtt[t.baseTopic+"/get/fault_str"]},{"header-left":r(()=>[n(p,{"fixed-width":"",icon:["fas","ranking-star"]}),o[0]||(o[0]=u(" Variabler Stromtarif "))]),"header-right":r(()=>[u(a(t.currentPrice)+" ct/kWh",1)]),default:r(()=>[n(m,{title:"Anbieter: "+s.$store.state.mqtt[t.baseTopic+"/provider"].name,subtype:"white","body-bg":"white",class:"py-1 mb-2"},{default:r(()=>[e("div",eo,[t.chartDataRead?(d(),g(l,{key:0,ref:"myChart",data:t.chartDataObject,options:b.chartOptions},null,8,["data","options"])):x("",!0)])]),_:1},8,["title"])]),_:1},8,["state","state-message"])):x("",!0)}const so=v(Ys,[["render",to],["__scopeId","data-v-f4769d2f"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/status/ElectricityTariffCard.vue"]]);const oo={name:"OpenwbStatusView",components:{ChargePointSumCard:Se,ChargePointCard:ht,CounterCard:Kt,InverterSumCard:as,InverterCard:gs,BatterySumCard:Cs,BatteryCard:zs,RippleControlReceiverCard:Hs,VehicleCard:Xs,ElectricityTariffCard:so},mixins:[y],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/system/device/+/component/+/config","openWB/vehicle/+/name","openWB/chargepoint/+/config"]}},computed:{installedChargePoints:{get(){let s=this.getWildcardTopics("openWB/chargepoint/+/config"),o={};for(const[c,h]of Object.entries(s))(h.type==="internal_openwb"||this.$store.state.mqtt["openWB/general/extern"]===!1)&&(o[c]=h);return o}},numChargePointsInstalled:{get(){return Object.keys(this.installedChargePoints).length}},counterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"counter")}},numInvertersInstalled:{get(){return Object.keys(this.inverterConfigs).length}},inverterConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"inverter")}},numBatteriesInstalled:{get(){return Object.keys(this.batteryConfigs).length}},batteryConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"bat")}},vehicleNames:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.getWildcardTopics("openWB/vehicle/+/name")}}},methods:{filterComponentsByType(s,o){return Object.keys(s).filter(c=>s[c].type.includes(o)).reduce((c,h)=>({...c,[h]:s[h]}),{})}}},ao={class:"status"};function ro(s,o,c,h,b,t){const p=i("charge-point-sum-card"),l=i("charge-point-card"),m=i("counter-card"),k=i("inverter-sum-card"),O=i("inverter-card"),z=i("battery-sum-card"),E=i("battery-card"),R=i("vehicle-card"),V=i("electricity-tariff-card"),M=i("ripple-control-receiver-card");return d(),f("div",ao,[t.numChargePointsInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),g(p,{key:0})):x("",!0),(d(!0),f(B,null,N(t.installedChargePoints,(_,C)=>(d(),g(l,{key:C,"installed-charge-point":_,"installed-charge-point-key":C},null,8,["installed-charge-point","installed-charge-point-key"]))),128)),(d(!0),f(B,null,N(t.counterConfigs,_=>(d(),g(m,{key:_.id,counter:_},null,8,["counter"]))),128)),t.numInvertersInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),g(k,{key:1})):x("",!0),(d(!0),f(B,null,N(t.inverterConfigs,_=>(d(),g(O,{key:_.id,inverter:_},null,8,["inverter"]))),128)),t.numBatteriesInstalled>1&&s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),g(z,{key:2})):x("",!0),(d(!0),f(B,null,N(t.batteryConfigs,_=>(d(),g(E,{key:_.id,battery:_},null,8,["battery"]))),128)),(d(!0),f(B,null,N(t.vehicleNames,(_,C)=>(d(),g(R,{key:C,"vehicle-key":C,"vehicle-name":_},null,8,["vehicle-key","vehicle-name"]))),128)),s.$store.state.mqtt["openWB/general/extern"]===!1?(d(),g(V,{key:3})):x("",!0),n(M)])}const bo=v(oo,[["render",ro],["__scopeId","data-v-051028a3"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/Status.vue"]]);export{bo as default};
