import{l as R,d as j,Q as J,A as H,S as G,T as Q,z as X,K as Y,W as K,I as ee,U as te,X as ae,F as le,V as ne}from"./vendor-fortawesome-b3888957.js";import{_ as W,C as oe}from"./index-d1717957.js";import{_ as ie}from"./dynamic-import-helper-be004503.js";import{_ as Z,q as V,l as u,m as h,A as a,K as l,v as d,x as w,u as g,$ as de,y as v,a0 as ue,z as m,F as z,G as q,a2 as E,p as I,P as se,Q as re}from"./vendor-6ce277ad.js";import"./vendor-bootstrap-d19731a7.js";import"./vendor-jquery-44ace3c0.js";import"./vendor-axios-03377982.js";import"./vendor-sortablejs-bb80b62c.js";const me={name:"VehicleConfigFallback",emits:["update:configuration"],props:{configuration:{type:Object,required:!0},vehicleId:{default:void 0},vehicleType:String},methods:{updateConfiguration(e,n=void 0){this.$emit("update:configuration",{value:e,object:n})}}},ce={class:"vehicle-fallback"};function he(e,n,c,x,b,r){const y=V("openwb-base-alert"),p=V("openwb-base-textarea");return u(),h("div",ce,[a(y,{subtype:"warning"},{default:l(()=>[d(' Es wurde keine Konfigurationsseite für den Fahrzeug-Typ "'+w(c.vehicleType)+'" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ',1)]),_:1}),a(p,{title:"Konfiguration",subtype:"json","model-value":c.configuration,"onUpdate:modelValue":n[0]||(n[0]=S=>r.updateConfiguration(S,"configuration"))},{help:l(()=>[d(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ")]),_:1},8,["model-value"]),a(y,{subtype:"info"},{default:l(()=>[g("pre",null,w(JSON.stringify(c.configuration,void 0,2)),1)]),_:1})])}const ge=Z(me,[["render",he],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/OpenwbVehicleConfigFallback.vue"]]),pe={name:"OpenwbVehicleProxy",emits:["update:configuration"],props:{vehicleId:{required:!0},vehicleType:{type:String,required:!0},configuration:{type:Object,required:!0}},computed:{myComponent(){return console.debug(`loading vehicle: ${this.vehicleType}`),de({loader:()=>ie(Object.assign({"./bmw/vehicle.vue":()=>W(()=>import("./vehicle-8c985ac7.js"),["assets/vehicle-8c985ac7.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./evnotify/vehicle.vue":()=>W(()=>import("./vehicle-736e8148.js"),["assets/vehicle-736e8148.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./http/vehicle.vue":()=>W(()=>import("./vehicle-ed40c623.js"),["assets/vehicle-ed40c623.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./mqtt/vehicle.vue":()=>W(()=>import("./vehicle-7ca7e08e.js"),["assets/vehicle-7ca7e08e.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./psa/vehicle.vue":()=>W(()=>import("./vehicle-d0d7dc1d.js"),["assets/vehicle-d0d7dc1d.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./renault/vehicle.vue":()=>W(()=>import("./vehicle-cd46a293.js"),["assets/vehicle-cd46a293.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./skodaconnect/vehicle.vue":()=>W(()=>import("./vehicle-739d1b47.js"),["assets/vehicle-739d1b47.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"]),"./tesla/vehicle.vue":()=>W(()=>import("./vehicle-a4570182.js"),["assets/vehicle-a4570182.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css","assets/vendor-axios-03377982.js","assets/index-d1717957.js","assets/vendor-fortawesome-b3888957.js","assets/vendor-bootstrap-d19731a7.js","assets/vendor-jquery-44ace3c0.js","assets/vendor-bootstrap-ced125c2.css","assets/index-4fda1468.css"]),"./vwid/vehicle.vue":()=>W(()=>import("./vehicle-0d4cd9f1.js"),["assets/vehicle-0d4cd9f1.js","assets/vendor-6ce277ad.js","assets/vendor-sortablejs-bb80b62c.js","assets/vendor-c2bc9875.css"])}),`./${this.vehicleType}/vehicle.vue`),errorComponent:ge})}},methods:{updateConfiguration(e){this.$emit("update:configuration",e)}}};function fe(e,n,c,x,b,r){return u(),v(ue(r.myComponent),{configuration:c.configuration,vehicleId:c.vehicleId,vehicleType:c.vehicleType,"onUpdate:configuration":n[0]||(n[0]=y=>r.updateConfiguration(y))},null,40,["configuration","vehicleId","vehicleType"])}const ve=Z(pe,[["render",fe],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/vehicles/OpenwbVehicleProxy.vue"]]);R.add(j,J,H,G,Q,X,Y,K,ee,te,ae);const be={name:"OpenwbVehicleConfig",mixins:[oe],emits:["sendCommand"],components:{FontAwesomeIcon:le,FontAwesomeLayers:ne,OpenwbVehicleProxy:ve},data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/optional/rfid/active","openWB/vehicle/template/ev_template/+","openWB/vehicle/template/charge_template/+","openWB/vehicle/template/charge_template/+/chargemode/scheduled_charging/plans/+","openWB/vehicle/template/charge_template/+/time_charging/plans/+","openWB/vehicle/+/name","openWB/vehicle/+/charge_template","openWB/vehicle/+/ev_template","openWB/vehicle/+/tag_id","openWB/system/configurable/soc_modules","openWB/vehicle/+/soc_module/config"],showVehicleModal:!1,modalVehicleIndex:void 0,showEvTemplateModal:!1,modalEvTemplateIndex:void 0,showChargeTemplateModal:!1,modalChargeTemplateIndex:void 0,showChargeTemplateSchedulePlanModal:!1,modalChargeTemplateSchedulePlanIndex:void 0,showChargeTemplateTimeChargingPlanModal:!1,modalChargeTemplateTimeChargingPlanIndex:void 0}},computed:{vehicleIndexes:{get(){return this.getWildcardIndexList("openWB/vehicle/+/name")}},evTemplates:{get(){return this.getWildcardTopics("openWB/vehicle/template/ev_template/+")}},evTemplateList:{get(){let e=[];return Object.keys(this.evTemplates).forEach(n=>{let c=parseInt(n.match(/([0-9]+)$/g)[0]),x=this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+c].name;e.push({value:c,text:x})}),e}},chargeTemplates:{get(){return this.getWildcardTopics("openWB/vehicle/template/charge_template/+")}},chargeTemplateList:{get(){let e=[];return Object.keys(this.chargeTemplates).forEach(n=>{let c=parseInt(n.match(/([0-9]+)$/g)[0]),x=this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+c].name;e.push({value:c,text:x})}),e}},socModuleList:{get(){return this.$store.state.mqtt["openWB/system/configurable/soc_modules"]}}},methods:{getChargeTemplateScheduledChargingPlans(e){let n=e.match(/([^/]+)$/)[0];return this.getWildcardTopics("openWB/vehicle/template/charge_template/"+n+"/chargemode/scheduled_charging/plans/+")},getChargeTemplateTimeChargingPlans(e){let n=e.match(/([^/]+)$/)[0];return this.getWildcardTopics("openWB/vehicle/template/charge_template/"+n+"/time_charging/plans/+")},addVehicle(e){e.stopPropagation(),console.info("requesting new vehicle..."),this.$emit("sendCommand",{command:"addVehicle",data:{}})},removeVehicleModal(e,n){n.stopPropagation(),this.modalVehicleIndex=e,this.showVehicleModal=!0},removeVehicle(e,n){this.showVehicleModal=!1,n=="confirm"&&(console.info("request removal of vehicle '"+e+"'"),this.$emit("sendCommand",{command:"removeVehicle",data:{id:e}}))},getVehicleName(e){return this.$store.state.mqtt["openWB/vehicle/"+e+"/name"]?this.$store.state.mqtt["openWB/vehicle/"+e+"/name"]:"Fahrzeug "+e},getSocDefaultConfiguration(e){const n=this.socModuleList.find(c=>c.value==e);return Object.prototype.hasOwnProperty.call(n,"defaults")?{...n.defaults.configuration}:(console.warn("no default configuration found for soc type!",e),{})},updateSelectedSocModule(e,n){this.updateState("openWB/vehicle/"+e+"/soc_module/config",n,"type"),this.updateState("openWB/vehicle/"+e+"/soc_module/config",this.getSocDefaultConfiguration(n),"configuration")},updateConfiguration(e,n){console.debug("updateConfiguration",e,n),this.updateState(e,n.value,n.object)},addEvTemplate(e){e.stopPropagation(),console.info("requesting new ev template..."),this.$emit("sendCommand",{command:"addEvTemplate",data:{}})},removeEvTemplateModal(e,n){n.stopPropagation(),this.modalEvTemplateIndex=parseInt(e.match(/([^/]+)$/)[0]),this.showEvTemplateModal=!0},removeEvTemplate(e,n){this.showEvTemplateModal=!1,n=="confirm"&&(console.info("request removal of ev template '"+e+"'"),this.$emit("sendCommand",{command:"removeEvTemplate",data:{id:e}}))},getEvTemplateName(e){return this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+e]?this.$store.state.mqtt["openWB/vehicle/template/ev_template/"+e].name:"Fahrzeug-Vorlage "+e},addChargeTemplate(e){e.stopPropagation(),console.info("requesting new charge template..."),this.$emit("sendCommand",{command:"addChargeTemplate",data:{}})},getChargeTemplateIndex(e){return parseInt(e.match(/([^/]+)$/)[0])},removeChargeTemplateModal(e,n){n.stopPropagation(),this.modalChargeTemplateIndex=this.getChargeTemplateIndex(e),this.showChargeTemplateModal=!0},removeChargeTemplate(e,n){this.showChargeTemplateModal=!1,n=="confirm"&&(console.info("request removal of charge template '"+e+"'"),this.$emit("sendCommand",{command:"removeChargeTemplate",data:{id:e}}))},getChargeTemplateName(e){return this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e]?this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e].name:"Ladeprofil-Vorlage "+e},getChargeTemplateSchedulePlanName(e,n){return this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e+"/chargemode/scheduled_charging/plans/"+n]?this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e+"/chargemode/scheduled_charging/plans/"+n].name:"Zielladen Zeitplan "+e+"/"+n},addChargeTemplateSchedulePlan(e,n){n.stopPropagation(),console.info("requesting new charge template schedule plan...");let c=parseInt(e.match(/([^/]+)$/)[0]);this.$emit("sendCommand",{command:"addChargeTemplateSchedulePlan",data:{template:c}})},removeChargeTemplateSchedulePlanModal(e,n,c){c.stopPropagation(),this.modalChargeTemplateIndex=parseInt(e.match(/([^/]+)$/)[0]),this.modalChargeTemplateSchedulePlanIndex=parseInt(n.match(/([^/]+)$/)[0]),this.showChargeTemplateSchedulePlanModal=!0},removeChargeTemplateSchedulePlan(e,n,c){this.showChargeTemplateSchedulePlanModal=!1,c=="confirm"&&(console.info("request removal of charge template '"+e+"' schedule plan '"+n+"'"),this.$emit("sendCommand",{command:"removeChargeTemplateSchedulePlan",data:{template:e,plan:n}}))},getChargeTemplateTimeChargingPlanName(e,n){return this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e+"/time_charging/plans/"+n]?this.$store.state.mqtt["openWB/vehicle/template/charge_template/"+e+"/time_charging/plans/"+n].name:"Zeitladen Zeitplan "+e+"/"+n},addChargeTemplateTimeChargingPlan(e,n){n.stopPropagation(),console.info("requesting new charge template time charging plan...");let c=parseInt(e.match(/([^/]+)$/)[0]);this.$emit("sendCommand",{command:"addChargeTemplateTimeChargingPlan",data:{template:c}})},removeChargeTemplateTimeChargingPlanModal(e,n,c){c.stopPropagation(),this.modalChargeTemplateIndex=parseInt(e.match(/([^/]+)$/)[0]),this.modalChargeTemplateTimeChargingPlanIndex=parseInt(n.match(/([^/]+)$/)[0]),this.showChargeTemplateTimeChargingPlanModal=!0},removeChargeTemplateTimeChargingPlan(e,n,c){this.showChargeTemplateTimeChargingPlanModal=!1,c=="confirm"&&(console.info("request removal of charge template '"+e+"' time charging plan '"+n+"'"),this.$emit("sendCommand",{command:"removeChargeTemplateTimeChargingPlan",data:{template:e,plan:n}}))}}},k=e=>(se("data-v-d7193cf0"),e=e(),re(),e),_e={class:"vehicleConfig"},Ve={name:"vehicleConfigForm"},we={key:0},Ce={key:1},ke=k(()=>g("hr",null,null,-1)),Se={key:0},Te=k(()=>g("br",null,null,-1)),Ue=["innerHTML"],ye=k(()=>g("hr",null,null,-1)),Pe=k(()=>g("br",null,null,-1)),We=k(()=>g("hr",{class:"border-secondary"},null,-1)),Le={key:0},Be={key:1},ze={key:0},qe={key:1},xe=k(()=>g("br",null,null,-1)),Ee=k(()=>g("br",null,null,-1)),Me=k(()=>g("ol",null,[g("li",null," Zielladen (Sofortladen) mit Priorität "),g("li",null,"Zielladen (Sofortladen)"),g("li",null,"Zeitladen mit Priorität"),g("li",null,"Zeitladen"),g("li",null,"Sofortladen mit Priorität"),g("li",null,"Sofortladen"),g("li",null,"PV (Min-Anteil) mit Priorität"),g("li",null,"PV (Min-Anteil)"),g("li",null,"Zielladen (PV) mit Priorität"),g("li",null,"Zielladen (PV)"),g("li",null,"PV (PV-Anteil) mit Priorität"),g("li",null,"PV (PV-Anteil)")],-1)),Ae=k(()=>g("hr",null,null,-1)),De=k(()=>g("hr",null,null,-1)),Ze=k(()=>g("br",null,null,-1)),Fe=k(()=>g("br",null,null,-1)),Ie=k(()=>g("hr",null,null,-1)),Ne={key:0},Oe={key:1},$e={key:2},Re={key:3},je={key:4},Je={key:4},He=k(()=>g("hr",null,null,-1)),Ge={key:0},Qe={key:1},Xe={key:2},Ye={key:3},Ke={key:4},et={key:4};function tt(e,n,c,x,b,r){const y=V("openwb-base-modal-dialog"),p=V("font-awesome-icon"),S=V("openwb-base-avatar"),M=V("openwb-base-alert"),T=V("openwb-base-text-input"),A=V("openwb-base-select-input"),N=V("openwb-base-array-input"),O=V("openwb-vehicle-proxy"),L=V("openwb-base-card"),P=V("openwb-base-heading"),F=V("font-awesome-layers"),C=V("openwb-base-range-input"),B=V("openwb-base-number-input"),_=V("openwb-base-button-group-input"),$=V("openwb-base-submit-buttons");return u(),h(z,null,[m(" modal dialogs "),a(y,{show:b.showVehicleModal,title:"Fahrzeug löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[0]||(n[0]=o=>r.removeVehicle(b.modalVehicleIndex,o))},{default:l(()=>[d(' Wollen Sie das Fahrzeug "'+w(r.getVehicleName(b.modalVehicleIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),a(y,{show:b.showEvTemplateModal,title:"Fahrzeug-Vorlage löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[1]||(n[1]=o=>r.removeEvTemplate(b.modalEvTemplateIndex,o))},{default:l(()=>[d(' Wollen Sie die Fahrzeug-Vorlage "'+w(r.getEvTemplateName(b.modalEvTemplateIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),a(y,{show:b.showChargeTemplateModal,title:"Ladeprofil-Vorlage löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[2]||(n[2]=o=>r.removeChargeTemplate(b.modalChargeTemplateIndex,o))},{default:l(()=>[d(' Wollen Sie die Ladeprofil-Vorlage "'+w(r.getChargeTemplateName(b.modalChargeTemplateIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),a(y,{show:b.showChargeTemplateSchedulePlanModal,title:"Zielladen Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[3]||(n[3]=o=>r.removeChargeTemplateSchedulePlan(b.modalChargeTemplateIndex,b.modalChargeTemplateSchedulePlanIndex,o))},{default:l(()=>[d(' Wollen Sie den Zielladen Zeitplan "'+w(r.getChargeTemplateSchedulePlanName(b.modalChargeTemplateIndex,b.modalChargeTemplateSchedulePlanIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),a(y,{show:b.showChargeTemplateTimeChargingPlanModal,title:"Zeitladen Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n[4]||(n[4]=o=>r.removeChargeTemplateTimeChargingPlan(b.modalChargeTemplateIndex,b.modalChargeTemplateTimeChargingPlanIndex,o))},{default:l(()=>[d(' Wollen Sie den Zeitladen Zeitplan "'+w(r.getChargeTemplateTimeChargingPlanName(b.modalChargeTemplateIndex,b.modalChargeTemplateTimeChargingPlanIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),m(" main content "),g("div",_e,[g("form",Ve,[m(" vehicle card "),a(L,{subtype:"primary",collapsible:!0,collapsed:!0},{header:l(()=>[a(p,{"fixed-width":"",icon:["fas","car"]}),d(" Fahrzeuge ")]),actions:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!1?(u(),v(S,{key:0,class:"bg-success clickable",onClick:r.addVehicle},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","plus"]})]),_:1},8,["onClick"])):m("v-if",!0)]),default:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!0?(u(),h("div",we,[a(M,{subtype:"info"},{default:l(()=>[d(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Modus "Nur Ladepunkt" befindet. ')]),_:1})])):(u(),h("div",Ce,[(u(!0),h(z,null,q(r.vehicleIndexes,o=>(u(),v(L,{key:o,title:r.getVehicleName(o),collapsible:!0,collapsed:!0,subtype:"primary"},E({default:l(()=>[a(T,{title:"Bezeichnung","model-value":e.$store.state.mqtt["openWB/vehicle/"+o+"/name"],"onUpdate:modelValue":i=>e.updateState("openWB/vehicle/"+o+"/name",i),disabled:o===0},E({_:2},[o===0?{name:"help",fn:l(()=>[d(" Das Standard-Fahrzeug kann nicht umbenannt werden. ")]),key:"0"}:void 0]),1032,["model-value","onUpdate:modelValue","disabled"]),a(A,{title:"Fahrzeug-Vorlage",options:r.evTemplateList,"model-value":e.$store.state.mqtt["openWB/vehicle/"+o+"/ev_template"],"onUpdate:modelValue":i=>e.updateState("openWB/vehicle/"+o+"/ev_template",i)},null,8,["options","model-value","onUpdate:modelValue"]),a(A,{title:"Ladeprofil-Vorlage",options:r.chargeTemplateList,"model-value":e.$store.state.mqtt["openWB/vehicle/"+o+"/charge_template"],"onUpdate:modelValue":i=>e.updateState("openWB/vehicle/"+o+"/charge_template",i)},null,8,["options","model-value","onUpdate:modelValue"]),ke,e.$store.state.mqtt["openWB/optional/rfid/active"]===!0?(u(),h("div",Se,[a(N,{title:"Zugeordnete Tags","model-value":e.$store.state.mqtt["openWB/vehicle/"+o+"/tag_id"],"onUpdate:modelValue":i=>e.updateState("openWB/vehicle/"+o+"/tag_id",i)},null,8,["model-value","onUpdate:modelValue"]),a(M,{subtype:"info"},{default:l(()=>[d(" Der/die RFID-Tag(s) müssen in der Ladepunkt-Vorlage eingetragen werden, um zuzuordnen, an welchem Ladepunkt die Tags verwendet werden dürfen."),Te,g("span",{innerHTML:e.$store.state.text.rfidWiki},null,8,Ue)]),_:1}),ye])):m("v-if",!0),a(A,{class:"mb-2",title:"SoC-Modul",options:r.socModuleList,"model-value":e.$store.state.mqtt["openWB/vehicle/"+o+"/soc_module/config"].type,"onUpdate:modelValue":i=>r.updateSelectedSocModule(o,i)},{help:l(()=>[d(" Mit einem SoC-Modul kann der Ladestand des Fahrzeugs ermittelt werden."),Pe,d(" Die Abfrage erfolgt automatisch beim Anstecken, wenn das Auto nicht lädt alle 12 Stunden und wenn es lädt alle 5 Minuten. Die Abfrage kann manuell durch Klick auf den Reload-Pfeil auf der Hauptseite ausgelöst werden. ")]),_:2},1032,["options","model-value","onUpdate:modelValue"]),e.$store.state.mqtt["openWB/vehicle/"+o+"/soc_module/config"].type?(u(),v(O,{key:1,vehicleId:o,vehicleType:e.$store.state.mqtt["openWB/vehicle/"+o+"/soc_module/config"].type,configuration:e.$store.state.mqtt["openWB/vehicle/"+o+"/soc_module/config"].configuration,"onUpdate:configuration":i=>r.updateConfiguration("openWB/vehicle/"+o+"/soc_module/config",i)},null,8,["vehicleId","vehicleType","configuration","onUpdate:configuration"])):m("v-if",!0)]),_:2},[o!==0?{name:"actions",fn:l(()=>[a(S,{class:"bg-danger clickable",onClick:i=>r.removeVehicleModal(o,i)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["title"]))),128))]))]),_:1}),We,a(P,null,{default:l(()=>[d("Vorlagen")]),_:1}),m(" vehicle template card "),a(L,{collapsible:!0,collapsed:!0},{header:l(()=>[a(F,{"fixed-width":"",class:"fa-lg"},{default:l(()=>[a(p,{"fixed-width":"",icon:["far","file"]}),a(p,{"fixed-width":"",icon:["fas","car"],transform:"shrink-8"})]),_:1}),d(" Fahrzeug-Vorlagen ")]),actions:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!1?(u(),v(S,{key:0,class:"bg-success clickable",onClick:r.addEvTemplate},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","plus"]})]),_:1},8,["onClick"])):m("v-if",!0)]),default:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!0?(u(),h("div",Le,[a(M,{subtype:"info"},{default:l(()=>[d(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Modus "Nur Ladepunkt" befindet. ')]),_:1})])):(u(),h("div",Be,[(u(!0),h(z,null,q(r.evTemplates,(o,i)=>(u(),v(L,{key:i,title:o.name?o.name:i,collapsible:!0,collapsed:!0},E({default:l(()=>[a(T,{title:"Bezeichnung","model-value":o.name,"onUpdate:modelValue":t=>e.updateState(i,t,"name"),disabled:i.endsWith("/0")},E({_:2},[i.endsWith("/0")?{name:"help",fn:l(()=>[d(" Die Standard-Vorlage kann nicht umbenannt werden. ")]),key:"0"}:void 0]),1032,["model-value","onUpdate:modelValue","disabled"]),a(P,null,{default:l(()=>[d(" Angaben zum Ladestrom ")]),_:1}),a(C,{title:"Mindeststrom",min:6,max:16,step:1,unit:"A","model-value":o.min_current,"onUpdate:modelValue":t=>e.updateState(i,t,"min_current")},null,8,["model-value","onUpdate:modelValue"]),a(C,{title:"Maximalstrom bei einer Phase",min:6,max:32,step:1,unit:"A","model-value":o.max_current_single_phase,"onUpdate:modelValue":t=>e.updateState(i,t,"max_current_single_phase")},null,8,["model-value","onUpdate:modelValue"]),a(C,{title:"Maximalstrom mehrere Phasen",min:6,max:32,step:1,unit:"A","model-value":o.max_current_multi_phases,"onUpdate:modelValue":t=>e.updateState(i,t,"max_current_multi_phases")},null,8,["model-value","onUpdate:modelValue"]),a(B,{title:"Erlaubte Stromabweichung",unit:"A","model-value":o.nominal_difference,"onUpdate:modelValue":t=>e.updateState(i,t,"nominal_difference")},null,8,["model-value","onUpdate:modelValue"]),a(P,null,{default:l(()=>[d(" Angaben zur Batterie ")]),_:1}),a(B,{title:"Kapazität der Batterie",unit:"kWh",min:10,step:1,"model-value":o.battery_capacity,"onUpdate:modelValue":t=>e.updateState(i,t,"battery_capacity")},null,8,["model-value","onUpdate:modelValue"]),a(B,{title:"Durchschnittsverbrauch",unit:"kWh / 100km",min:0,step:.1,"model-value":o.average_consump,"onUpdate:modelValue":t=>e.updateState(i,t,"average_consump")},null,8,["step","model-value","onUpdate:modelValue"]),a(P,null,{default:l(()=>[d(" Angaben zur Handhabung von Phasen ")]),_:1}),a(_,{title:"Unterstützte Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:2,text:"2"},{buttonValue:3,text:"3"}],"model-value":o.max_phases,"onUpdate:modelValue":t=>e.updateState(i,t,"max_phases")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"CP-Unterbrechung",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":o.control_pilot_interruption,"onUpdate:modelValue":t=>e.updateState(i,t,"control_pilot_interruption")},null,8,["model-value","onUpdate:modelValue"]),o.control_pilot_interruption?(u(),v(B,{key:0,title:"Dauer der CP-Unterbrechung",min:4,step:1,unit:"s","model-value":o.control_pilot_interruption_duration,"onUpdate:modelValue":t=>e.updateState(i,t,"control_pilot_interruption_duration")},null,8,["model-value","onUpdate:modelValue"])):m("v-if",!0),a(_,{title:"Phasenumschaltung blockieren",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":o.prevent_phase_switch,"onUpdate:modelValue":t=>e.updateState(i,t,"prevent_phase_switch")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Ladung aktiv halten",buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":o.prevent_charge_stop,"onUpdate:modelValue":t=>e.updateState(i,t,"prevent_charge_stop")},null,8,["model-value","onUpdate:modelValue"]),a(B,{title:"Pause bei Phasenumschaltung",unit:"s",min:2,step:1,"model-value":o.phase_switch_pause,"onUpdate:modelValue":t=>e.updateState(i,t,"phase_switch_pause")},null,8,["model-value","onUpdate:modelValue"])]),_:2},[i.endsWith("/0")?void 0:{name:"actions",fn:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!1?(u(),v(S,{key:0,class:"bg-danger clickable",onClick:t=>r.removeEvTemplateModal(i,t)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])):m("v-if",!0)]),key:"0"}]),1032,["title"]))),128))]))]),_:1}),m(" charge template card "),a(L,{collapsible:!0,collapsed:e.$route.params.section!="charge_template"},{header:l(()=>[a(F,{"fixed-width":"",class:"fa-lg"},{default:l(()=>[a(p,{"fixed-width":"",icon:["far","file"]}),a(p,{"fixed-width":"",icon:["fas","plug"],transform:"shrink-8"})]),_:1}),d(" Ladeprofil-Vorlagen ")]),actions:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!1?(u(),v(S,{key:0,class:"bg-success clickable",onClick:r.addChargeTemplate},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","plus"]})]),_:1},8,["onClick"])):m("v-if",!0)]),default:l(()=>[e.$store.state.mqtt["openWB/general/extern"]===!0?(u(),h("div",ze,[a(M,{subtype:"info"},{default:l(()=>[d(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Modus "Nur Ladepunkt" befindet. ')]),_:1})])):(u(),h("div",qe,[(u(!0),h(z,null,q(r.chargeTemplates,(o,i)=>(u(),v(L,{key:i,title:o.name?o.name:i,collapsible:!0,collapsed:!(e.$route.params.section=="charge_template"&&parseInt(e.$route.params.section_index)==r.getChargeTemplateIndex(i))},E({default:l(()=>[a(T,{title:"Bezeichnung","model-value":o.name,"onUpdate:modelValue":t=>e.updateState(i,t,"name"),disabled:i.endsWith("/0")},E({_:2},[i.endsWith("/0")?{name:"help",fn:l(()=>[d(" Die Standard-Vorlage kann nicht umbenannt werden. ")]),key:"0"}:void 0]),1032,["model-value","onUpdate:modelValue","disabled"]),a(P,null,{default:l(()=>[d(" Allgemeine Optionen ")]),_:1}),a(_,{title:"Aktiver Lademodus",buttons:[{buttonValue:"instant_charging",text:"Sofortladen",class:"btn-outline-danger"},{buttonValue:"pv_charging",text:"PV",class:"btn-outline-success"},{buttonValue:"scheduled_charging",text:"Zielladen",class:"btn-outline-primary"},{buttonValue:"standby",text:"Standby",class:"btn-outline-secondary"},{buttonValue:"stop",text:"Stop",class:"btn-outline-dark"}],"model-value":o.chargemode.selected,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.selected")},{help:l(()=>[d(" Dieser Lademodus ist aktiv, wenn ein zugehöriges Fahrzeug angesteckt wird. Diese Einstellung entspricht dem Lademodus auf der Hauptseite."),xe,d(" Die zur Verfügung stehende Leistung wird intern anhand einer Liste verteilt. Die Fahrzeuge bzw. Ladepunkte werden in dieser Reihenfolge beachtet:"),Ee,Me]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Priorität",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":o.prio,"onUpdate:modelValue":t=>e.updateState(i,t,"prio")},{help:l(()=>[d(" Fahrzeuge mit Priorität werden bevorzugt geladen. Erst wenn alle priorisierten Fahrzeuge die maximale Ladeleistung bekommen und noch zusätzlicher Überschuss vorhanden ist, werden auch Fahrzeuge ohne Priorität geladen. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Zeitladen",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":o.time_charging.active,"onUpdate:modelValue":t=>e.updateState(i,t,"time_charging.active")},{help:l(()=>[d(' Der Lademodus Zeitladen kann parallel zu einem der anderen Lademodi aktiviert werden. Die Auswahl des Lademodus, der in der Regelung genutzt wird, erfolgt anhand der Übersicht in der Hilfe bei "Aktiver Lademodus". Wenn kein Zeitplan aktiv ist oder das Limit des Zeitplans erreicht wurde, wird der Lademodus verwendet, der bei "Aktiver Lademodus" ausgewählt ist. ')]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Sperre nach Abstecken",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":o.disable_after_unplug,"onUpdate:modelValue":t=>e.updateState(i,t,"disable_after_unplug")},{help:l(()=>[d(" Wird ein Fahrzeug mit diesem Profil abgesteckt, dann wird der betroffene Ladepunkt automatisch deaktiviert. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Standard nach Abstecken",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":o.load_default,"onUpdate:modelValue":t=>e.updateState(i,t,"load_default")},{help:l(()=>[d(" Falls diese Option aktiviert ist, wird der betroffene Ladepunkt nach dem Abstecken auf das Standard Ladeprofil zurückgesetzt. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),Ae,a(P,null,{default:l(()=>[d("Sofortladen")]),_:1}),a(C,{title:"Ladestrom",min:6,max:32,step:1,unit:"A","model-value":o.chargemode.instant_charging.current,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.instant_charging.current")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Begrenzung",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":o.chargemode.instant_charging.limit.selected,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.instant_charging.limit.selected")},{help:l(()=>[d(" Sofortladen kann entweder durch den Ladestand der Fahrzeugbatterie (SoC) oder eine Energie in kWh begrenzt werden. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(C,{title:"SoC-Limit",min:5,max:100,step:5,unit:"%","model-value":o.chargemode.instant_charging.limit.soc,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.instant_charging.limit.soc")},{help:l(()=>[d(" Um diese Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet werden! ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(B,{title:"Energie-Limit",unit:"kWh",min:.5,step:.5,"model-value":o.chargemode.instant_charging.limit.amount/1e3,"onUpdate:modelValue":t=>e.updateState(i,t*1e3,"chargemode.instant_charging.limit.amount")},{help:l(()=>[d(" Die geladene Energiemenge wird beim Wechsel des Lademodus oder nach dem Anstecken, wenn Sofortladen schon ausgewählt ist, neu gezählt. ")]),_:2},1032,["min","step","model-value","onUpdate:modelValue"]),De,a(P,null,{default:l(()=>[d("PV-Laden")]),_:1}),a(C,{title:"Mindeststrom",min:0,max:11,step:1,unit:"A",labels:[{label:"Aus",value:0},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16}],"model-value":o.chargemode.pv_charging.min_current,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.pv_charging.min_current")},{help:l(()=>[d(' Hier kann ein Mindeststrom eingestellt werden, mit dem unabhängig vom vorhandenen Überschuss immer geladen wird. Diese Einstellung entspricht weitestgehend dem Lademodus "Min+PV" der Version 1.x. ')]),_:2},1032,["model-value","onUpdate:modelValue"]),a(C,{title:"SoC-Limit",min:0,max:20,step:1,unit:"%",labels:[{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95},{label:100,value:100},{label:"Aus",value:101}],"model-value":o.chargemode.pv_charging.max_soc,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.pv_charging.max_soc")},{help:l(()=>[d(' Bei der Einstellung "100%" wird die Ladung mit Erreichen der 100% ebenfalls beendet. Dadurch erfolgt kein Balancing der Batteriezellen. Ist dies gewünscht, muss hier "Aus" gewählt werden, um die Ladung nicht zu beenden.'),Ze,d(" Um diese Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet werden! ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(C,{title:"Mindest-SoC",min:0,max:19,step:1,unit:"%",labels:[{label:"Aus",value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95}],"model-value":o.chargemode.pv_charging.min_soc,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.pv_charging.min_soc")},{help:l(()=>[d(' Liegt der Ladestand (SoC) der Fahrzeugbatterie unter dem hier eingestellten Wert, dann wird bis zum Erreichen dieses Wertes mit dem eingestellten "Mindest-SoC-Strom" geladen.'),Fe,d(" Um diese Begrenzung nutzen zu können, muss ein SoC-Modul für das jeweilige Fahrzeug eingerichtet werden! ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(C,{title:"Mindest-SoC-Strom",min:6,max:32,step:1,unit:"A","model-value":o.chargemode.pv_charging.min_soc_current,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.pv_charging.min_soc_current")},{help:l(()=>[d(" Wird der eingestellte Mindest-SoC unterschritten, dann wird unabhängig vom Überschuss ein Ladevorgang mit dem hier festgelegten Strom statt. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Einspeisegrenze beachten",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":o.chargemode.pv_charging.feed_in_limit,"onUpdate:modelValue":t=>e.updateState(i,t,"chargemode.pv_charging.feed_in_limit")},null,8,["model-value","onUpdate:modelValue"]),Ie,a(P,null,{actions:l(()=>[a(S,{class:"bg-success clickable",onClick:t=>r.addChargeTemplateSchedulePlan(i,t)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","plus"]})]),_:2},1032,["onClick"])]),help:l(()=>[d(" Im Lademodus Zielladen wird der Ladestrom so angepasst, dass das Fahrzeug zum angegebenen Zeitpunkt den festgelegten SoC/Energie erreicht. Anhand des angegebenen Ladestroms wird der Zeitpunkt berechnet, an dem die Ladung spätestens starten muss. Ist der berechnete Zeitpunkt des Ladestarts noch nicht erreicht, wird mit PV-Überschuss geladen. Auch nach Erreichen des Ziel-SoCs wird mit PV-Überschuss geladen, solange bis das SoC-Limit erreicht wird. Kann der Ziel-SoC/Energie nicht erreicht werden, z.B. weil das Auto zu spät angesteckt wurde oder das Lastmanagement eingegriffen hat, wird bis 20 Minuten nach dem angegebenen Termin mit der Maximalstromstärke geladen. Danach wird der Termin verworfen und mit PV-Überschuss geladen. ")]),default:l(()=>[d(" Zielladen ")]),_:2},1024),(u(!0),h(z,null,q(r.getChargeTemplateScheduledChargingPlans(i),(t,f)=>(u(),v(L,{key:f,title:t.name,collapsible:!0,collapsed:!0},{actions:l(s=>[s.collapsed==!0?(u(),h("span",{key:0,class:I(["subheader pill",t.active?"bg-success":"bg-danger"])},[t.limit.selected=="soc"?(u(),h("span",Ne,[a(p,{"fixed-width":"",icon:["fas","car-battery"]}),d(" "+w(t.limit.soc_scheduled)+"% ",1)])):m("v-if",!0),t.limit.selected=="amount"?(u(),h("span",Oe,[a(p,{"fixed-width":"",icon:["fas","bolt"]}),d(" "+w(t.limit.amount/1e3)+"kWh ",1)])):m("v-if",!0),a(p,{"fixed-width":"",icon:["fas","clock"]}),d(" "+w(t.time)+" ",1),t.frequency.selected=="once"?(u(),h("span",$e,[a(p,{"fixed-width":"",icon:["fas","calendar-day"]}),d(" "+w(e.formatDate(t.frequency.once)),1)])):m("v-if",!0),t.frequency.selected=="daily"?(u(),h("span",Re,[a(p,{"fixed-width":"",icon:["fas","calendar-week"]})])):m("v-if",!0),t.frequency.selected=="weekly"?(u(),h("span",je,[a(p,{"fixed-width":"",icon:["fas","calendar-alt"]})])):m("v-if",!0)],2)):m("v-if",!0),s.collapsed==!1?(u(),v(S,{key:1,class:"bg-danger clickable",onClick:U=>r.removeChargeTemplateSchedulePlanModal(i,f,U)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])):m("v-if",!0)]),default:l(()=>[a(T,{title:"Bezeichnung","model-value":t.name,"onUpdate:modelValue":s=>e.updateState(f,s,"name")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Zeitpunkt aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.active,"onUpdate:modelValue":s=>e.updateState(f,s,"active")},null,8,["model-value","onUpdate:modelValue"]),a(T,{title:"Uhrzeit",subtype:"time","model-value":t.time,"onUpdate:modelValue":s=>e.updateState(f,s,"time")},null,8,["model-value","onUpdate:modelValue"]),a(C,{title:"Ladestrom",min:6,max:32,step:1,unit:"A","model-value":t.current,"onUpdate:modelValue":s=>e.updateState(f,s,"current")},{help:l(()=>[d(" Mit dieser Stromstärke wird der Zeitpunkt berechnet, wann die Ladung mit Netzbezug gestartet werden muss. Wird der Ziel-SoC nicht zum angegebenen Termin erreicht, weil z.B. das Auto erst später angesteckt wurde, wird auch mit einer höheren Stromstärke geladen. Um etwas Puffer zu haben, empfiehlt es sich, etwas weniger als die Maximalstromstärke des Fahrzeugs zu wählen. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),a(_,{title:"Ziel",buttons:[{buttonValue:"soc",text:"SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":t.limit.selected,"onUpdate:modelValue":s=>e.updateState(f,s,"limit.selected")},{help:l(()=>[d(" Bestimmt die Art der Grenze für den Ladevorgang. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),t.limit.selected=="soc"?(u(),v(C,{key:0,title:"Ziel-SoC",min:5,max:100,step:5,unit:"%","model-value":t.limit.soc_scheduled,"onUpdate:modelValue":s=>e.updateState(f,s,"limit.soc_scheduled")},{help:l(()=>[d(" SoC, der zum angegebenen Zeitpunkt erreicht werden soll. ")]),_:2},1032,["model-value","onUpdate:modelValue"])):m("v-if",!0),t.limit.selected=="soc"?(u(),v(C,{key:1,title:"SoC-Limit",min:5,max:100,step:5,unit:"%","model-value":t.limit.soc_limit,"onUpdate:modelValue":s=>e.updateState(f,s,"limit.soc_limit")},{help:l(()=>[d(" Nach Erreichen des Ziel-SoCs wird mit Überschuss weiter geladen, bis das SoC-Limit erreicht wird. ")]),_:2},1032,["model-value","onUpdate:modelValue"])):m("v-if",!0),t.limit.selected=="amount"?(u(),v(B,{key:2,title:"Ziel-Energie",unit:"kWh",min:1,step:.5,"model-value":t.limit.amount/1e3,"onUpdate:modelValue":s=>e.updateState(f,s*1e3,"limit.amount")},{help:l(()=>[d(" Die geladene Energiemenge wird beim Wechsel des Lademodus, Wechsel des Plans oder nach dem Anstecken, wenn Zielladen schon ausgewählt ist, neu gezählt. ")]),_:2},1032,["step","model-value","onUpdate:modelValue"])):m("v-if",!0),a(_,{title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}],"model-value":t.frequency.selected,"onUpdate:modelValue":s=>e.updateState(f,s,"frequency.selected")},null,8,["model-value","onUpdate:modelValue"]),t.frequency.selected=="once"?(u(),v(T,{key:3,title:"Datum",subtype:"date","model-value":t.frequency.once,"onUpdate:modelValue":s=>e.updateState(f,s,"frequency.once")},null,8,["model-value","onUpdate:modelValue"])):m("v-if",!0),t.frequency.selected=="weekly"?(u(),h("div",Je,[(u(!0),h(z,null,q(e.weekdays,(s,U)=>(u(),v(_,{key:U,title:s,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":t.frequency.weekly[U],"onUpdate:modelValue":D=>e.updateState(f,D,"frequency.weekly."+U)},null,8,["title","model-value","onUpdate:modelValue"]))),128))])):m("v-if",!0)]),_:2},1032,["title"]))),128)),He,a(P,null,{actions:l(()=>[a(S,{class:"bg-success clickable",onClick:t=>r.addChargeTemplateTimeChargingPlan(i,t)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","plus"]})]),_:2},1032,["onClick"])]),default:l(()=>[d(" Laden nach Zeitplan ")]),_:2},1024),(u(!0),h(z,null,q(r.getChargeTemplateTimeChargingPlans(i),(t,f)=>(u(),v(L,{key:f,title:t.name,collapsible:!0,collapsed:!0},{actions:l(s=>[s.collapsed==!0?(u(),h("span",{key:0,class:I(["subheader pill",t.active?"bg-success":"bg-danger"])},[t.limit.selected=="soc"?(u(),h("span",Ge,[a(p,{"fixed-width":"",icon:["fas","car-battery"]}),d(" "+w(t.limit.soc)+"% ",1)])):m("v-if",!0),t.limit.selected=="amount"?(u(),h("span",Qe,[a(p,{"fixed-width":"",icon:["fas","bolt"]}),d(" "+w(t.limit.amount/1e3)+"kWh ",1)])):m("v-if",!0),a(p,{"fixed-width":"",icon:["fas","clock"]}),d(" "+w(t.time[0])+" - "+w(t.time[1])+" ",1),t.frequency.selected=="once"?(u(),h("span",Xe,[a(p,{"fixed-width":"",icon:["fas","calendar-day"]}),d(" "+w(e.formatDate(t.frequency.once[0])==e.formatDate(t.frequency.once[1])?e.formatDate(t.frequency.once[0]):e.formatDate(t.frequency.once[0])+" - "+e.formatDate(t.frequency.once[1])),1)])):m("v-if",!0),t.frequency.selected=="daily"?(u(),h("span",Ye,[a(p,{"fixed-width":"",icon:["fas","calendar-week"]})])):m("v-if",!0),t.frequency.selected=="weekly"?(u(),h("span",Ke,[a(p,{"fixed-width":"",icon:["fas","calendar-alt"]})])):m("v-if",!0)],2)):m("v-if",!0),s.collapsed==!1?(u(),v(S,{key:1,class:"bg-danger clickable",onClick:U=>r.removeChargeTemplateTimeChargingPlanModal(i,f,U)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])):m("v-if",!0)]),default:l(()=>[a(T,{title:"Bezeichnung","model-value":t.name,"onUpdate:modelValue":s=>e.updateState(f,s,"name")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Zeitplan aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.active,"onUpdate:modelValue":s=>e.updateState(f,s,"active")},null,8,["model-value","onUpdate:modelValue"]),a(C,{title:"Ladestrom",min:6,max:32,step:1,unit:"A","model-value":t.current,"onUpdate:modelValue":s=>e.updateState(f,s,"current")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Ziel",buttons:[{buttonValue:"none",text:"Aus"},{buttonValue:"soc",text:"SoC"},{buttonValue:"amount",text:"Energie"}],"model-value":t.limit.selected,"onUpdate:modelValue":s=>e.updateState(f,s,"limit.selected")},{help:l(()=>[d(" Bestimmt die Art der Grenze für den Ladevorgang. ")]),_:2},1032,["model-value","onUpdate:modelValue"]),t.limit.selected=="soc"?(u(),v(C,{key:0,title:"Ziel-SoC",min:5,max:100,step:5,unit:"%","model-value":t.limit.soc,"onUpdate:modelValue":s=>e.updateState(f,s,"limit.soc")},{help:l(()=>[d(" Ladestand des Akku (State of Charge, SoC), bis zu welchem maximal geladen werden soll. ")]),_:2},1032,["model-value","onUpdate:modelValue"])):m("v-if",!0),t.limit.selected=="amount"?(u(),v(B,{key:1,title:"Ziel-Energie",unit:"kWh",min:1,step:.5,"model-value":t.limit.amount/1e3,"onUpdate:modelValue":s=>e.updateState(f,s*1e3,"limit.amount")},{help:l(()=>[d(" Maximal zu ladende Energie innerhalb des Zeitfensters. Eignet sich immer dann wenn kein SoC zur Verfügung steht. Die geladene Energiemenge wird beim Wechsel des Lademodus, Wechsel des Plans oder nach dem Anstecken, wenn Zeitladen schon aktiv ist, neu gezählt. ")]),_:2},1032,["step","model-value","onUpdate:modelValue"])):m("v-if",!0),a(T,{title:"Beginn",subtype:"time","model-value":t.time[0],"onUpdate:modelValue":s=>e.updateState(f,s,"time.0")},null,8,["model-value","onUpdate:modelValue"]),a(T,{title:"Ende",subtype:"time","model-value":t.time[1],"onUpdate:modelValue":s=>e.updateState(f,s,"time.1")},null,8,["model-value","onUpdate:modelValue"]),a(_,{title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}],"model-value":t.frequency.selected,"onUpdate:modelValue":s=>e.updateState(f,s,"frequency.selected")},null,8,["model-value","onUpdate:modelValue"]),t.frequency.selected=="once"?(u(),v(T,{key:2,title:"Gültig ab",subtype:"date","model-value":t.frequency.once[0],"onUpdate:modelValue":s=>e.updateState(f,s,"frequency.once.0")},null,8,["model-value","onUpdate:modelValue"])):m("v-if",!0),t.frequency.selected=="once"?(u(),v(T,{key:3,title:"Gültig bis",subtype:"date",min:t.frequency.once[0],"model-value":t.frequency.once[1],"onUpdate:modelValue":s=>e.updateState(f,s,"frequency.once.1")},null,8,["min","model-value","onUpdate:modelValue"])):m("v-if",!0),t.frequency.selected=="weekly"?(u(),h("div",et,[(u(!0),h(z,null,q(e.weekdays,(s,U)=>(u(),v(_,{key:U,title:s,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":t.frequency.weekly[U],"onUpdate:modelValue":D=>e.updateState(f,D,"frequency.weekly."+U)},null,8,["title","model-value","onUpdate:modelValue"]))),128))])):m("v-if",!0)]),_:2},1032,["title"]))),128))]),_:2},[i.endsWith("/0")?void 0:{name:"actions",fn:l(()=>[a(S,{class:"bg-danger clickable",onClick:t=>r.removeChargeTemplateModal(i,t)},{default:l(()=>[a(p,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])]),key:"0"}]),1032,["title","collapsed"]))),128))]))]),_:1},8,["collapsed"]),a($,{formName:"vehicleConfigForm",onSave:n[5]||(n[5]=o=>e.$emit("save")),onReset:n[6]||(n[6]=o=>e.$emit("reset")),onDefaults:n[7]||(n[7]=o=>e.$emit("defaults"))})])])],64)}const rt=Z(be,[["render",tt],["__scopeId","data-v-d7193cf0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/VehicleConfig.vue"]]);export{rt as default};
