import{_ as T,C as O}from"./index-82d2b997.js";import{_ as S}from"./dynamic-import-helper-be004503.js";import{l as V,a6 as z,a7 as E,F as I}from"./vendor-fortawesome-855c7d62.js";import{_ as h,u as l,l as s,m as d,x as y,E as i,B as o,F as b,G as n,A as r,a2 as L,a3 as F,N as q,z as _}from"./vendor-cc4615be.js";import{V as N}from"./VehicleIdWikiHint-9bf87407.js";const j={props:{displayTheme:{type:Object,required:!0}},emits:["update:configuration"],methods:{updateConfiguration(t,e=void 0){this.$emit("update:configuration",{value:t,object:e})}}},P=h(j,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/display_themes/DisplayThemeConfigMixin.vue"]]),A={name:"DisplayThemeFallback",mixins:[P]},M={class:"display-theme-fallback"},U={key:1};function R(t,e,p,c,w,m){const u=l("openwb-base-alert"),g=l("openwb-base-textarea");return s(),d("div",M,[Object.keys(t.displayTheme.configuration).length==0?(s(),y(u,{key:0,subtype:"info"},{default:i(()=>[o(' Das Display-Theme "'+b(t.displayTheme.name)+'" bietet keine Einstellungen. ',1)]),_:1})):(s(),d("div",U,[n(u,{subtype:"warning"},{default:i(()=>[o(' Es wurde keine Konfigurationsseite für das Display-Theme "'+b(t.displayTheme.name)+'" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ',1)]),_:1}),n(g,{title:"Konfiguration",subtype:"json","model-value":t.displayTheme.configuration,"onUpdate:modelValue":e[0]||(e[0]=f=>t.updateConfiguration(f,"configuration"))},{help:i(()=>e[1]||(e[1]=[o(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ",-1)])),_:1},8,["model-value"]),n(u,{subtype:"info"},{default:i(()=>[r("pre",null,b(JSON.stringify(t.displayTheme.configuration,void 0,2)),1)]),_:1})]))])}const x=h(A,[["render",R],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/display_themes/OpenwbDisplayThemeFallback.vue"]]);V.add(z,E);const H={name:"OpenwbDisplayThemeProxy",components:{FontAwesomeIcon:I},props:{displayTheme:{type:Object,required:!0}},emits:["update:configuration"],methods:{getDisplayThemeComponent(){return console.debug(`loading display theme: ${this.displayTheme.type}`),L({loader:()=>S(Object.assign({"./cards/displayTheme.vue":()=>T(()=>import("./displayTheme-ef959647.js"),["assets/displayTheme-ef959647.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/index-82d2b997.js","assets/vendor-fortawesome-855c7d62.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"]),"./colors/displayTheme.vue":()=>T(()=>import("./displayTheme-57980f24.js"),["assets/displayTheme-57980f24.js","assets/vendor-cc4615be.js","assets/vendor-sortablejs-7c09d6dd.js","assets/vendor-3a7c342f.css","assets/index-82d2b997.js","assets/vendor-fortawesome-855c7d62.js","assets/vendor-bootstrap-09a7ccd9.js","assets/vendor-jquery-13cad4c1.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-3dcaeec5.js","assets/index-de563ad7.css","assets/dynamic-import-helper-be004503.js","assets/VehicleIdWikiHint-9bf87407.js"])}),`./${this.displayTheme.type}/displayTheme.vue`),errorComponent:x})},updateConfiguration(t){this.$emit("update:configuration",t)}}};function J(t,e,p,c,w,m){const u=l("font-awesome-icon"),g=l("openwb-base-alert"),f=l("openwb-base-heading");return s(),d(q,null,[p.displayTheme.official?(s(),y(g,{key:0,subtype:"success"},{default:i(()=>[n(u,{icon:["fas","certificate"]}),o(' Das ausgewählte Display Theme "'+b(p.displayTheme.name)+'" wird von openWB gepflegt. ',1)]),_:1})):(s(),y(g,{key:1,subtype:"info"},{default:i(()=>[n(u,{icon:["fas","people-group"]}),o(' Das ausgewählte Display Theme "'+b(p.displayTheme.name)+'" wird in unserer Community gepflegt. Rückfragen oder Probleme bitte im Forum diskutieren. ',1)]),_:1})),n(f,null,{default:i(()=>[o(' Einstellungen für Display Theme "'+b(p.displayTheme.name)+'" ',1)]),_:1}),(s(),y(F(m.getDisplayThemeComponent()),{"display-theme":p.displayTheme,"onUpdate:configuration":e[0]||(e[0]=v=>m.updateConfiguration(v))},null,40,["display-theme"]))],64)}const G=h(H,[["render",J],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/display_themes/OpenwbDisplayThemeProxy.vue"]]),K={name:"OpenwbOptionalComponentsView",components:{OpenwbDisplayThemeProxy:G,VehicleIdWikiHint:N},mixins:[O],emits:["save","reset","defaults"],data(){return{mqttTopicsToSubscribe:["openWB/chargepoint/+/config","openWB/chargepoint/+/get/rfid","openWB/chargepoint/+/get/rfid_timestamp","openWB/chargepoint/+/get/vehicle_id","openWB/chargepoint/+/set/rfid","openWB/general/extern","openWB/optional/int_display/active","openWB/optional/int_display/on_if_plugged_in","openWB/optional/int_display/only_local_charge_points","openWB/optional/int_display/pin_active","openWB/optional/int_display/pin_code","openWB/optional/int_display/rotation","openWB/optional/int_display/standby","openWB/optional/int_display/theme","openWB/optional/rfid/active","openWB/system/configurable/display_themes"],tempIdTagList:{}}},computed:{idTagList(){return Object.values(this.updateIdTagList())},displayThemeList(){return this.$store.state.mqtt["openWB/system/configurable/display_themes"]},displayThemeGroupList(){var e;let t=[{label:"openWB",options:[]},{label:"Community",options:[]}];return(e=this.displayThemeList)==null||e.forEach(p=>{p.official===!0?t[0].options.push(p):t[1].options.push(p)}),t}},methods:{getIdFromTopic(t){return t.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,"")},updateIdTagList(){return Object.entries(this.getWildcardTopics("^openWB/chargepoint/[^+/]+/[gs]et/(rfid|vehicle_id)$",!0)).forEach(t=>{t[1]!==null&&(this.tempIdTagList[t[1]]=`${t[1]} (${t[0].includes("/set/")?"zugewiesen":"erfasst"} an ${this.getChargePointName(this.getIdFromTopic(t[0]))})`)}),this.tempIdTagList},getChargePointName(t){return this.$store.state.mqtt["openWB/chargepoint/"+t+"/config"]?this.$store.state.mqtt["openWB/chargepoint/"+t+"/config"].name:"Ladepunkt "+t},getDisplayThemeDefaults(t){const e=this.displayThemeList.find(p=>p.value==t);return Object.prototype.hasOwnProperty.call(e,"defaults")?{...JSON.parse(JSON.stringify(e.defaults))}:(console.warn("no default configuration found for display theme type!",t),{})},updateSelectedDisplayTheme(t){this.updateState("openWB/optional/int_display/theme",this.getDisplayThemeDefaults(t))},updateConfiguration(t,e){console.debug("updateConfiguration",t,e),this.updateState(t,e.value,e.object)}}},Z={class:"optionalComponents"},Q={name:"optionalComponentsForm"},X={key:0},Y={key:1},ee={key:0},te={key:0},ne={key:1},ie={key:2},oe={key:0};function ae(t,e,p,c,w,m){const u=l("openwb-base-button-group-input"),g=l("openwb-base-alert"),f=l("vehicle-id-wiki-hint"),v=l("openwb-base-textarea"),B=l("openwb-base-card"),W=l("openwb-base-heading"),D=l("openwb-base-range-input"),k=l("openwb-base-select-input"),$=l("openwb-display-theme-proxy"),C=l("openwb-base-submit-buttons");return s(),d("div",Z,[r("form",Q,[n(B,{title:"Identifikation"},{default:i(()=>[n(u,{title:"Identifikation aktivieren","model-value":t.$store.state.mqtt["openWB/optional/rfid/active"],buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"onUpdate:modelValue":e[0]||(e[0]=a=>t.updateState("openWB/optional/rfid/active",a))},{help:i(()=>e[10]||(e[10]=[o(" Die Identifikation kann zum Entsperren von Ladepunkten und/oder zur Zuordnung von Fahrzeugen genutzt werden und kann auf mehreren Wegen erfolgen: ",-1),r("ul",null,[r("li",null,"Über einen in der openWB verbauten RFID-Reader (optional, z.B. anhand des Lieferscheins prüfen)."),r("li",null," Durch die automatische Erkennung an einer openWB Pro (muss in den Einstellungen aktiviert werden). "),r("li",null,"Durch manuelle Eingabe einer ID am Display einer openWB.")],-1)])),_:1},8,["model-value"]),t.$store.state.mqtt["openWB/general/extern"]===!0?(s(),d("div",X,[n(g,{subtype:"info"},{default:i(()=>e[11]||(e[11]=[o(' Weitere Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[11]})])):(s(),d("div",Y,[t.$store.state.mqtt["openWB/optional/rfid/active"]===!0?(s(),d("div",ee,[n(g,{subtype:"info",class:"mb-1"},{default:i(()=>[e[12]||(e[12]=o(" Die ID-Tags müssen in den Einstellungen der Fahrzeuge diesen zugeordnet werden.",-1)),e[13]||(e[13]=r("br",null,null,-1)),e[14]||(e[14]=o(" Es kann zuerst das Fahrzeug angesteckt und dann der ID-Tag erfasst werden oder andersherum. Im letzten Fall muss innerhalb von 5 Minuten ein Fahrzeug angesteckt werden, sonst wird der ID-Tag verworfen.",-1)),e[15]||(e[15]=r("br",null,null,-1)),n(f)]),_:1,__:[12,13,14,15]}),n(v,{title:"Erkannte ID-Tags",readonly:"",disabled:"","model-value":m.idTagList.join(`
`)},{help:i(()=>e[16]||(e[16]=[o(" Solange diese Seite geöffnet ist, werden alle erfassten ID-Tags in dieser Liste aufgeführt. Bei der openWB Pro/Pro+ nur bei angestecktem Fahrzeug. ",-1)])),_:1},8,["model-value"])])):_("",!0)]))]),_:1}),n(B,{title:"Display (intern oder extern)"},{default:i(()=>[n(u,{title:"Integriertes Display","model-value":t.$store.state.mqtt["openWB/optional/int_display/active"],buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"onUpdate:modelValue":e[1]||(e[1]=a=>t.updateState("openWB/optional/int_display/active",a))},{help:i(()=>e[17]||(e[17]=[o(' Je nach Bestellung kann die openWB mit oder ohne Display geliefert worden sein. Auch die Variante "Standalone" bietet beide Optionen. Bitte prüfe zuerst die Hardwareausstattung deiner openWB (z.B. Lieferschein). ',-1)])),_:1},8,["model-value"]),t.$store.state.mqtt["openWB/optional/int_display/active"]==!0?(s(),d("div",te,[n(u,{title:"Orientierung","model-value":t.$store.state.mqtt["openWB/optional/int_display/rotation"],buttons:[{buttonValue:0,text:"0°"},{buttonValue:90,text:"90°"},{buttonValue:180,text:"180°"},{buttonValue:270,text:"270°"}],"onUpdate:modelValue":e[2]||(e[2]=a=>t.updateState("openWB/optional/int_display/rotation",a))},{help:i(()=>e[18]||(e[18]=[o(" Mit dieser Einstellung kann das Display im Uhrzeigersinn gedreht werden, falls erforderlich. Nach einer Änderung ist ein Neustart erforderlich!",-1),r("br",null,null,-1),o(" Diese Einstellung erfordert ein Raspberry Pi Display. Für eine openWB series2 mit integriertem Display muss 0° ausgewählt werden, für eine Standalone mit Display 180°. Anzeigen, welche über HDMI angeschlossen sind, werden nicht unterstützt. ",-1)])),_:1},8,["model-value"]),e[21]||(e[21]=r("hr",null,null,-1)),n(W,null,{default:i(()=>e[19]||(e[19]=[o(" Display Standby ",-1)])),_:1,__:[19]}),n(D,{title:"Ausschaltzeit",min:0,max:12,step:1,"model-value":t.$store.state.mqtt["openWB/optional/int_display/standby"],unit:"Sek",labels:[{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:30,value:30},{label:45,value:45},{label:"1 Min",value:60},{label:"1,5 Min",value:90},{label:"2 Min",value:120},{label:"3 Min",value:180},{label:"4 Min",value:240},{label:"5 Min",value:300},{label:"10 Min",value:600},{label:"Immer an",value:0}],"onUpdate:modelValue":e[3]||(e[3]=a=>t.updateState("openWB/optional/int_display/standby",a))},{help:i(()=>e[20]||(e[20]=[o(" Hier kann eine Zeitspanne angegeben werden, nach der das Display ausgeschaltet wird. ",-1)])),_:1},8,["model-value"])])):_("",!0),t.$store.state.mqtt["openWB/general/extern"]===!0?(s(),d("div",ne,[e[23]||(e[23]=r("hr",null,null,-1)),n(g,{subtype:"info"},{default:i(()=>e[22]||(e[22]=[o(' Weitere Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[22]})])):(s(),d("div",ie,[e[26]||(e[26]=r("hr",null,null,-1)),n(u,{title:"Ladepunkte auf secondary openWB","model-value":t.$store.state.mqtt["openWB/optional/int_display/only_local_charge_points"],buttons:[{buttonValue:!1,text:"Alle",class:"btn-outline-danger"},{buttonValue:!0,text:"Nur Lokale",class:"btn-outline-success"}],"onUpdate:modelValue":e[4]||(e[4]=a=>t.updateState("openWB/optional/int_display/only_local_charge_points",a))},{help:i(()=>e[24]||(e[24]=[o(" Hiermit kann festgelegt werden, ob an angebundenen secondary openWB alle oder nur die jeweils lokalen Ladepunkte angezeigt werden sollen. ",-1)])),_:1},8,["model-value"]),e[27]||(e[27]=r("hr",null,null,-1)),t.$store.state.mqtt["openWB/optional/int_display/theme"]!==void 0?(s(),d("div",oe,[n(k,{class:"mb-2",title:"Theme des Displays",groups:m.displayThemeGroupList,"model-value":t.$store.state.mqtt["openWB/optional/int_display/theme"].type,"onUpdate:modelValue":e[5]||(e[5]=a=>m.updateSelectedDisplayTheme(a))},{help:i(()=>e[25]||(e[25]=[o(" Hier können unterschiedliche Display-Anzeigen, s.g. Themes, ausgewählt werden. Die Anzahl der Themes wird sich mit zukünftigen Releases erhöhen. ",-1)])),_:1},8,["groups","model-value"]),t.$store.state.mqtt["openWB/optional/int_display/theme"].type?(s(),y($,{key:0,"display-theme":t.$store.state.mqtt["openWB/optional/int_display/theme"],"onUpdate:configuration":e[6]||(e[6]=a=>m.updateConfiguration("openWB/optional/int_display/theme",a))},null,8,["display-theme"])):_("",!0)])):_("",!0)]))]),_:1}),n(C,{"form-name":"optionalComponentsForm",onSave:e[7]||(e[7]=a=>t.$emit("save")),onReset:e[8]||(e[8]=a=>t.$emit("reset")),onDefaults:e[9]||(e[9]=a=>t.$emit("defaults"))})])])}const se=h(K,[["render",ae],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/OptionalComponents.vue"]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{P as D,me as O};
