import{l as v,m as T,n as M,o as D,p as A,a9 as O,d as q,N as z,f as E,a as I,F as y}from"./vendor-fortawesome-9c5ed7ee.js";import{_ as N,u as _,l as a,m as l,A as r,z as c,N as m,M as p,F as w,G as d,E as P,q as k,y as f,K as j,p as B,B as V}from"./vendor-253b919f.js";v.add(T,M,D,A,O,q,z,E,I);const b={undefined:{value:void 0,icon:["fas","question"],iconClass:"text-secondary",title:"Nicht relevant",nextValue:!0},true:{value:!0,icon:["fas","square"],iconClass:"",title:"Geschlossen",nextValue:!1},false:{value:!1,icon:["far","square"],iconClass:"",title:"Offen",nextValue:void 0}},S={name:"IoActionInputPattern",components:{FontAwesomeIcon:y},inheritAttrs:!1,props:{digitalInputs:{type:Object,required:!0},modelValue:{type:Array,required:!0},enableAddDelete:{type:Boolean,default:!0},minPatterns:{type:Number,default:1},maxPatterns:{type:Number,default:10}},emits:["update:modelValue"],data(){return{showTestPattern:!1,testPattern:{...this.digitalInputs}}},computed:{value:{get(){return this.modelValue},set(s){this.$emit("update:modelValue",s)}},numInputs(){return Object.keys(this.digitalInputs).length},addPatternDisabled(){return this.value.length>=this.maxPatterns},addPatternTooltip(){return this.addPatternDisabled?this.maxPatterns===1?"Es kann maximal ein Muster definiert werden":`Es können maximal ${this.maxPatterns} Muster definiert werden`:"Muster hinzufügen"},deletePatternDisabled(){return this.value.length<=this.minPatterns},deletePatternTooltip(){return this.deletePatternDisabled?this.minPatterns===1?"Es muss mindestens ein Muster definiert sein":`Es müssen mindestens ${this.minPatterns} Muster definiert sein`:"Muster löschen"}},watch:{digitalInputs(){this.testPattern={...this.digitalInputs}}},mounted(){for(;this.value.length<this.minPatterns;)this.addPattern()},methods:{toggleHelp(){this.showHelp=!this.showHelp},getIcon(s){return b[s].icon},getIconClass(s){return b[s].iconClass},getTitle(s){return b[s].title},toggleInput(s,e){const i=b[this.value[s].input_matrix[e]].nextValue;i!==void 0?this.value[s].input_matrix[e]=i:delete this.value[s].input_matrix[e]},toggleTestPattern(s){this.testPattern[s]=!this.testPattern[s]},patternMatch(s){return Object.keys(this.value[s].input_matrix).every(e=>this.testPattern[e]===void 0?!0:this.value[s].input_matrix[e]===this.testPattern[e])},deletePattern(s){delete this.value.splice(s,1)},addPattern(){this.value.push({input_matrix:{},value:null})}}},H={class:"w-100 mb-2"},F=["span"],Q=["colspan"],G={key:0,rowspan:"2",class:"input-header"},L=["colspan"],U={key:0},W={key:0,class:"text-center"},J={key:1},R={key:0},X=["colspan"],Y={key:1,class:"bg-info"},Z=["colspan"];function K(s,e,i,$,u,n){const h=_("font-awesome-icon"),x=_("openwb-base-click-button"),C=_("openwb-base-button-group-input");return a(),l(m,null,[r("table",H,[r("colgroup",null,[r("col",{span:n.numInputs,class:"bg-white",style:{border:"1px solid #dee2e6"}},null,8,F)]),r("thead",null,[r("tr",null,[r("th",{colspan:n.numInputs},"Eingangsmuster",8,Q),u.showTestPattern?(a(),l("th",G,e[6]||(e[6]=[r("div",null,"Prüfergebnis",-1)]))):c("",!0),r("th",{colspan:i.enableAddDelete?2:1},null,8,L)]),r("tr",null,[(a(!0),l(m,null,p(Object.keys(i.digitalInputs),t=>(a(),l("th",{key:t,class:"input-header"},[r("div",null,w(t),1)]))),128)),e[7]||(e[7]=r("th",null,"Verhalten",-1)),i.enableAddDelete?(a(),l("th",U,[d(x,{class:"bg-success text-white",tooltip:n.addPatternTooltip,disabled:n.addPatternDisabled,onClick:e[0]||(e[0]=t=>n.addPattern())},{default:P(()=>[d(h,{icon:["fas","plus"]})]),_:1},8,["tooltip","disabled"])])):c("",!0)])]),r("tbody",null,[(a(!0),l(m,null,p(n.value,(t,g)=>(a(),l("tr",{key:g},[(a(!0),l(m,null,p(Object.keys(i.digitalInputs),o=>(a(),l("td",{key:o,class:"text-center"},[d(h,{title:n.getTitle(t.input_matrix[o]),icon:n.getIcon(t.input_matrix[o]),class:k([n.getIconClass(t.input_matrix[o]),"fa-fw clickable"]),size:"2x",transform:t.input_matrix[o]==null?"shrink-6":null,mask:t.input_matrix[o]==null?["fas","square"]:null,onClick:f(ee=>n.toggleInput(g,o),["stop","prevent"]),onMousedown:e[1]||(e[1]=f(()=>{},["stop","prevent"])),onMouseup:e[2]||(e[2]=f(()=>{},["stop","prevent"]))},null,8,["title","icon","class","transform","mask","onClick"])]))),128)),u.showTestPattern?(a(),l("td",W,[d(h,{title:"Muster passt",icon:["fas","check-circle"],class:k(["text-success fa-fw",{hidden:!n.patternMatch(g)}])},null,8,["class"])])):c("",!0),r("td",j({ref_for:!0},s.$attrs),[B(s.$slots,"default",{pattern:t},()=>[V(w(t.value),1)],!0)],16),i.enableAddDelete?(a(),l("td",J,[d(x,{class:"bg-danger text-white",tooltip:n.deletePatternTooltip,disabled:n.deletePatternDisabled,onClick:o=>n.deletePattern(g)},{default:P(()=>[d(h,{icon:["fas","trash"]})]),_:2},1032,["tooltip","disabled","onClick"])])):c("",!0)]))),128)),u.showTestPattern?(a(),l("tr",R,[(a(!0),l(m,null,p(Object.keys(i.digitalInputs),t=>(a(),l("td",{key:t,class:"pt-4"},"   "))),128)),r("td",{colspan:i.enableAddDelete?3:2},null,8,X)])):c("",!0),u.showTestPattern?(a(),l("tr",Y,[(a(!0),l(m,null,p(Object.keys(i.digitalInputs),t=>(a(),l("td",{key:t,class:"text-center text-body"},[d(h,{title:n.getTitle(u.testPattern[t]),icon:n.getIcon(u.testPattern[t]),class:k([n.getIconClass(u.testPattern[t]),"fa-fw clickable"]),size:"2x",transform:u.testPattern[t]==null?"shrink-6":null,mask:u.testPattern[t]==null?["fas","square"]:null,onClick:f(g=>n.toggleTestPattern(t),["stop","prevent"]),onMousedown:e[3]||(e[3]=f(()=>{},["stop","prevent"])),onMouseup:e[4]||(e[4]=f(()=>{},["stop","prevent"]))},null,8,["title","icon","class","transform","mask","onClick"])]))),128)),r("td",{class:"pl-2",colspan:i.enableAddDelete?3:2}," Prüfmuster ",8,Z)])):c("",!0)])]),d(C,{modelValue:u.showTestPattern,"onUpdate:modelValue":e[5]||(e[5]=t=>u.showTestPattern=t),title:"Prüfmuster",buttons:[{buttonValue:!1,text:"Verbergen"},{buttonValue:!0,text:"Anzeigen"}]},{help:P(()=>e[8]||(e[8]=[V(' Das Prüfmuster ist eine Hilfe um zu testen, ob die Eingangsmuster zum gewünschten Verhalten passen. Ein grüner Haken in der Spalte "Prüfergebnis" zeigt an, dass das Eingangsmuster zu dem Prüfmuster passt. Eingangsmuster mit unterschiedlichem Verhalten dürfen nicht gleichzeitig passen, da sonst das Verhalten nicht eindeutig ist. ')])),_:1},8,["modelValue"])],64)}const ne=N(S,[["render",K],["__scopeId","data-v-3624c649"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/io_actions/OpenwbIoPattern.vue"]]);export{ne as O};
