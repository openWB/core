import{a as y}from"./IoConfig-807ac1ba.js";import{O as C}from"./OpenwbIoSinglePattern-67be81d3.js";import{_ as E,u as s,l as r,m as w,x as _,z as l,G as B,E as O,B as k,A as P,N as z}from"./vendor-50125810.js";import"./vendor-fortawesome-641b8eb6.js";import"./index-e5c981d0.js";import"./vendor-bootstrap-01761fad.js";import"./vendor-jquery-a46fe321.js";import"./vendor-axios-1a87d4ae.js";import"./vendor-sortablejs-8982fad4.js";import"./dynamic-import-helper-be004503.js";const x={name:"IoActionDimming",components:{OpenwbIoSinglePattern:C},mixins:[y],computed:{value:{get(){var e,t;return((t=(e=this.ioAction)==null?void 0:e.configuration)==null?void 0:t.input_pattern)||[]},set(e){this.updateConfiguration(e,"configuration.input_pattern")}},isPatternConfigured(){var e;return((e=this.value)==null?void 0:e.length)>0&&this.value[0].matrix&&Object.keys(this.value[0].matrix).length>0},ioDevicesOutputOptions(){var t;let e=[];return(t=this.availableIoDevices)==null||t.forEach(i=>{var u;let a=[];Object.keys(((u=i==null?void 0:i.output)==null?void 0:u.digital)||{}).forEach(n=>{a.push({text:`${n}`,value:{type:"io",id:i.id,digital_output:n}})}),a.length>0&&e.push({label:i.name,options:a})}),e},availableDevices(){var t;return[{label:"Ladepunkte",options:((t=this.availableChargePoints)==null?void 0:t.map(i=>({value:{type:"cp",id:i.value},text:i.text})))||[]}].concat(this.ioDevicesOutputOptions)}}},L={key:2};function N(e,t,i,a,u,n){var d,p,g,m,c,b,h,v,f;const V=s("openwb-io-single-pattern"),A=s("openwb-base-number-input"),D=s("openwb-base-select-input");return r(),w(z,null,[((d=e.ioDevice)==null?void 0:d.type)!=="eebus"&&n.value&&n.value.length>0?(r(),_(V,{key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),contacts:((g=(p=e.ioDevice)==null?void 0:p.input)==null?void 0:g.digital)||{}},null,8,["modelValue","contacts"])):l("",!0),(m=e.ioAction)!=null&&m.configuration&&((c=e.ioDevice)==null?void 0:c.type)!=="eebus"?(r(),_(A,{key:1,title:"maximale Bezugsleistung",unit:"kW",min:"0",step:"0.01",required:"",disabled:!n.isPatternConfigured,"model-value":(e.ioAction.configuration.max_import_power||0)/1e3,"onUpdate:modelValue":t[1]||(t[1]=o=>e.updateConfiguration(o*1e3,"configuration.max_import_power"))},null,8,["disabled","model-value"])):l("",!0),((b=e.ioDevice)==null?void 0:b.type)!=="eebus"?(r(),w("hr",L)):l("",!0),B(D,{title:"Anwenden auf...",groups:n.availableDevices,required:"",multiple:"",disabled:((h=e.ioDevice)==null?void 0:h.type)!=="eebus"&&!n.isPatternConfigured,"model-value":((f=(v=e.ioAction)==null?void 0:v.configuration)==null?void 0:f.devices)||[],"onUpdate:modelValue":t[2]||(t[2]=o=>e.updateConfiguration(o,"configuration.devices"))},{help:O(()=>[...t[3]||(t[3]=[k(" Bitte die Ladepunkte und/oder digitale Ausgänge auswählen, welche berücksichtigt werden sollen. Es können mehrere Einträge ausgewählt werden. Bei steuerbaren Verbrauchseinrichtungen, die über einen digitalen Ausgang angesteuert werden, wird eine Leistung von 4,2 kW bei aktiver Dimmung angenommen. Ladepunkte werden so gesteuert, dass die angegebene Leistung am EVU-Punkt nicht überschritten wird. Eigene PV-Erzeugung und vorhandene Speicher werden berücksichtigt und zusätzlich genutzt.",-1),P("br",null,null,-1),k(' Zugeordnete digitale Ausgänge werden im nicht gedimmten Zustand aktiviert und im gedimmten Zustand deaktiviert. So ist sichergestellt, dass bei einem Verbindungsabbruch oder einem Ausfall der Steuerung die Verbraucher nicht ungewollt mit voller Leistung betrieben werden. Ein mit "NO" bezeichneter digitaler Ausgang ist also für den nicht gedimmten Zustand geschlossen und bei aktivierter Dimmung geöffnet. ',-1)])]),_:1},8,["groups","disabled","model-value"])],64)}const T=E(x,[["render",N],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/io_actions/controllable_consumers/dimming/io_action.vue"]]);export{T as default};
