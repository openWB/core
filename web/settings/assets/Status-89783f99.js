import{l as N,G as q,H as C,c as L,I as S,J as P,K as V,L as A,M as Z,F as D}from"./vendor-fortawesome-12414438.js";import{C as H}from"./index-3872039d.js";import{_ as M,q as f,l as i,m as b,z as c,y as u,K as n,A as t,v as r,F as B,G as y,x as p,P as z,Q as E,u as v}from"./vendor-b78ff8c0.js";import"./vendor-bootstrap-760bc08d.js";import"./vendor-jquery-41669b5b.js";import"./vendor-axios-a6fb860e.js";import"./vendor-sortablejs-116030fd.js";N.add(q,C,L,S,P,V,A,Z);const F={name:"OpenwbStatus",mixins:[H],components:{FontAwesomeIcon:D},data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/chargepoint/get/power","openWB/chargepoint/get/imported","openWB/chargepoint/get/exported","openWB/chargepoint/get/daily_imported","openWB/chargepoint/get/daily_exported","openWB/chargepoint/+/config","openWB/chargepoint/+/get/+","openWB/chargepoint/+/get/connected_vehicle/info","openWB/chargepoint/+/set/+","openWB/system/device/+/component/+/config","openWB/counter/+/get/+","openWB/pv/get/+","openWB/pv/+/get/+","openWB/bat/get/+","openWB/bat/+/get/+","openWB/vehicle/+/name","openWB/vehicle/+/get/+"],statusLevel:["success","warning","danger"]}},computed:{installedChargePoints:{get(){return this.getWildcardTopics("openWB/chargepoint/+/config")}},numChargePointsInstalled:{get(){return Object.keys(this.installedChargePoints).length}},counterConfigs:{get(){return this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"counter")}},numInvertersInstalled:{get(){return Object.keys(this.inverterConfigs).length}},inverterConfigs:{get(){return this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"inverter")}},numBatteriesInstalled:{get(){return Object.keys(this.batteryConfigs).length}},batteryConfigs:{get(){return this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"bat")}},vehicleNames:{get(){return this.getWildcardTopics("openWB/vehicle/+/name")}}},methods:{filterComponentsByType(e,I){return Object.keys(e).filter(k=>e[k].type.includes(I)).reduce((k,w)=>({...k,[w]:e[w]}),{})},getChargePointIndex(e){return parseInt(e.match(/(?:\/)(\d+)(?=\/)/)[1])},getComponentIndex(e){return parseInt(e.match(/(?:\/)(\d+)(?=\/)/)[1])},getVehicleIndex(e){return parseInt(e.match(/(?:\/)(\d+)(?=\/)/)[1])}}},W=e=>(z("data-v-051028a3"),e=e(),E(),e),O={class:"status"},j=W(()=>v("br",null,null,-1)),G=W(()=>v("br",null,null,-1)),J=W(()=>v("br",null,null,-1)),Q=W(()=>v("br",null,null,-1)),R=W(()=>v("br",null,null,-1)),U=W(()=>v("br",null,null,-1)),X=W(()=>v("br",null,null,-1));function Y(e,I,k,w,x,o){const d=f("font-awesome-icon"),l=f("openwb-base-text-input"),m=f("openwb-base-heading"),g=f("openwb-base-card"),h=f("openwb-base-alert"),T=f("openwb-base-checkbox-input"),_=f("openwb-base-number-input");return i(),b("div",O,[c(" all charge points "),o.numChargePointsInstalled>1?(i(),u(g,{key:0,subtype:"primary",collapsible:!0,collapsed:!0},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","charging-station"]}),r(" Alle Ladepunkte ")]),default:n(()=>[t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/chargepoint/get/power",3,3,.001)},null,8,["model-value"]),t(l,{title:"Zählerstand laden",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Zählerstand entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/exported",3,3,.001)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Historie")]),_:1}),t(l,{title:"Heute geladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Heute entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/get/daily_exported",3,3,.001)},null,8,["model-value"])]),_:1})):c("v-if",!0),c(" individual charge points "),(i(!0),b(B,null,y(o.installedChargePoints,(a,s)=>(i(),u(g,{key:s,collapsible:!0,collapsed:!0,subtype:"primary"},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","charging-station"]}),r(" "+p(a.name)+" (ID: "+p(o.getChargePointIndex(s))+") ",1)]),default:n(()=>[t(h,{subtype:x.statusLevel[e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/fault_state"]]},{default:n(()=>[e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/fault_state"]==1?(i(),u(d,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/fault_state"]==2?(i(),u(d,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(i(),u(d,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),r(" Modulmeldung:"),j,r(" "+p(e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/fault_str"]),1)]),_:2},1032,["subtype"]),t(h,{subtype:"info"},{default:n(()=>[r(" Statusmeldung:"),G,r(" "+p(e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/state_str"]),1)]),_:2},1024),t(T,{title:"Fahrzeug angesteckt",disabled:"","model-value":e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/plug_state"]==1},null,8,["model-value"]),t(T,{title:"Ladevorgang aktiv",disabled:"","model-value":e.$store.state.mqtt["openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/charge_state"]==1},null,8,["model-value"]),t(l,{title:"Zählerstand laden",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Zählerstand entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Heute geladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Heute entladen",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/power",3,3,.001)},null,8,["model-value"]),t(l,{title:"Ladestromvorgabe",readonly:"",class:"text-right text-monospace",step:"0.01",unit:"A","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/set/current",2)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Werte pro Phase")]),_:1}),t(l,{title:"Spannung",readonly:"",class:"text-right text-monospace",unit:"V","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/voltages",1)},null,8,["model-value"]),t(l,{title:"Strom",readonly:"",class:"text-right text-monospace",unit:"A","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/currents",2)},null,8,["model-value"]),t(l,{title:"Leistungsfaktor",readonly:"",class:"text-right text-monospace","model-value":e.formatPhaseArrayNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/power_factors",2)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Phasen")]),_:1}),t(l,{title:"Vorgabe",readonly:"",class:"text-right text-monospace","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/set/phases_to_use")},null,8,["model-value"]),t(l,{title:"Aktuell",readonly:"",class:"text-right text-monospace","model-value":e.formatNumberTopic("openWB/chargepoint/"+o.getChargePointIndex(s)+"/get/phases_in_use")},null,8,["model-value"])]),_:2},1024))),128)),c(" counters "),(i(!0),b(B,null,y(o.counterConfigs,a=>(i(),u(g,{key:a.id,title:a.name+" (ID: "+a.id+")",collapsible:!0,collapsed:!0,subtype:"danger"},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","gauge-high"]}),r(" "+p(a.name)+" (ID: "+p(a.id)+") ",1)]),default:n(()=>[t(h,{subtype:x.statusLevel[e.$store.state.mqtt["openWB/counter/"+a.id+"/get/fault_state"]]},{default:n(()=>[e.$store.state.mqtt["openWB/counter/"+a.id+"/get/fault_state"]==1?(i(),u(d,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/counter/"+a.id+"/get/fault_state"]==2?(i(),u(d,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(i(),u(d,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),r(" Modulmeldung:"),J,r(" "+p(e.$store.state.mqtt["openWB/counter/"+a.id+"/get/fault_str"]),1)]),_:2},1032,["subtype"]),e.$store.state.mqtt["openWB/counter/"+a.id+"/get/state_str"]!=null?(i(),u(h,{key:0,subtype:"info"},{default:n(()=>[r(" Statusmeldung:"),Q,r(" "+p(e.$store.state.mqtt["openWB/counter/"+a.id+"/get/state_str"]),1)]),_:2},1024)):c("v-if",!0),t(m,null,{default:n(()=>[r("Zählerstände")]),_:1}),t(l,{title:"Export",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/counter/"+a.id+"/get/exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Import",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/counter/"+a.id+"/get/imported",3,3,.001)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Saldierte Werte")]),_:1}),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/counter/"+a.id+"/get/power",3,3,.001)},null,8,["model-value"]),t(l,{title:"Netzfrequenz",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"Hz","model-value":e.formatNumberTopic("openWB/counter/"+a.id+"/get/frequency",3)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Werte pro Phase")]),_:1}),t(l,{title:"Spannung",readonly:"",class:"text-right text-monospace",unit:"V","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.id+"/get/voltages",1)},null,8,["model-value"]),t(l,{title:"Strom",readonly:"",class:"text-right text-monospace",unit:"A","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.id+"/get/currents",2)},null,8,["model-value"]),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",unit:"kW","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.id+"/get/powers",3,3,.001)},null,8,["model-value"]),t(l,{title:"Leistungsfaktor",readonly:"",class:"text-right text-monospace","model-value":e.formatPhaseArrayNumberTopic("openWB/counter/"+a.id+"/get/power_factors",2)},null,8,["model-value"])]),_:2},1032,["title"]))),128)),c(" all inverters "),o.numInvertersInstalled>1?(i(),u(g,{key:1,subtype:"success",collapsible:!0,collapsed:!0},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","solar-panel"]}),r(" Alle Wechselrichter ")]),default:n(()=>[t(l,{title:"Zählerstand",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/pv/get/power",3,3,.001)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Erträge")]),_:1}),t(l,{title:"Heute",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Dieser Monat",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/monthly_exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Dieses Jahr",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/get/yearly_exported",3,3,.001)},null,8,["model-value"])]),_:1})):c("v-if",!0),c(" individual inverters "),(i(!0),b(B,null,y(o.inverterConfigs,a=>(i(),u(g,{key:a.id,collapsible:!0,collapsed:!0,subtype:"success"},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","solar-panel"]}),r(" "+p(a.name)+" (ID: "+p(a.id)+") ",1)]),default:n(()=>[t(h,{subtype:x.statusLevel[e.$store.state.mqtt["openWB/pv/"+a.id+"/get/fault_state"]]},{default:n(()=>[e.$store.state.mqtt["openWB/pv/"+a.id+"/get/fault_state"]==1?(i(),u(d,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/pv/"+a.id+"/get/fault_state"]==2?(i(),u(d,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(i(),u(d,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),r(" Modulmeldung:"),R,r(" "+p(e.$store.state.mqtt["openWB/pv/"+a.id+"/get/fault_str"]),1)]),_:2},1032,["subtype"]),t(l,{title:"Zählerstand",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/pv/"+a.id+"/get/exported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/pv/"+a.id+"/get/power",3,3,.001)},null,8,["model-value"])]),_:2},1024))),128)),c(" all batteries "),o.numBatteriesInstalled>1?(i(),u(g,{key:2,subtype:"warning",collapsible:!0,collapsed:!0},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","car-battery"]}),r(" Alle Speicher ")]),default:n(()=>[t(m,null,{default:n(()=>[r("Zählerstände")]),_:1}),t(l,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/exported",3,3,.001)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Tageswerte")]),_:1}),t(l,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/daily_imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/get/daily_exported",3,3,.001)},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Saldierte Werte")]),_:1}),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/bat/get/power",3,3,.001)},null,8,["model-value"]),t(_,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/bat/get/soc"]},null,8,["model-value"])]),_:1})):c("v-if",!0),c(" individual batteries "),(i(!0),b(B,null,y(o.batteryConfigs,a=>(i(),u(g,{key:a.id,collapsible:!0,collapsed:!0,subtype:"warning"},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","car-battery"]}),r(" "+p(a.name)+" (ID: "+p(a.id)+") ",1)]),default:n(()=>[t(h,{subtype:x.statusLevel[e.$store.state.mqtt["openWB/bat/"+a.id+"/get/fault_state"]]},{default:n(()=>[e.$store.state.mqtt["openWB/bat/"+a.id+"/get/fault_state"]==1?(i(),u(d,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/bat/"+a.id+"/get/fault_state"]==2?(i(),u(d,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(i(),u(d,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),r(" Modulmeldung:"),U,r(" "+p(e.$store.state.mqtt["openWB/bat/"+a.id+"/get/fault_str"]),1)]),_:2},1032,["subtype"]),t(m,null,{default:n(()=>[r("Aktuelle Werte")]),_:1}),t(l,{title:"Leistung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kW","model-value":e.formatNumberTopic("openWB/bat/"+a.id+"/get/power",3,3,.001)},null,8,["model-value"]),t(_,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/bat/"+a.id+"/get/soc"]},null,8,["model-value"]),t(m,null,{default:n(()=>[r("Zählerstände")]),_:1}),t(l,{title:"Ladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/"+a.id+"/get/imported",3,3,.001)},null,8,["model-value"]),t(l,{title:"Entladung",readonly:"",class:"text-right text-monospace",step:"0.001",unit:"kWh","model-value":e.formatNumberTopic("openWB/bat/"+a.id+"/get/exported",3,3,.001)},null,8,["model-value"])]),_:2},1024))),128)),c(" vehicles "),(i(!0),b(B,null,y(o.vehicleNames,(a,s)=>(i(),u(g,{key:s,collapsible:!0,collapsed:!0,subtype:"info"},{header:n(()=>[t(d,{"fixed-width":"",icon:["fas","car"]}),r(" "+p(a)+" (ID: "+p(o.getVehicleIndex(s))+") ",1)]),default:n(()=>[e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/fault_state"]!==void 0?(i(),u(h,{key:0,subtype:x.statusLevel[e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/fault_state"]]},{default:n(()=>[e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/fault_state"]==1?(i(),u(d,{key:0,"fixed-width":"",icon:["fas","exclamation-triangle"]})):e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/fault_state"]==2?(i(),u(d,{key:1,"fixed-width":"",icon:["fas","times-circle"]})):(i(),u(d,{key:2,"fixed-width":"",icon:["fas","check-circle"]})),r(" Modulmeldung:"),X,r(" "+p(e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/fault_str"]),1)]),_:2},1032,["subtype"])):c("v-if",!0),t(m,null,{default:n(()=>[r("Fahrzeugdaten")]),_:1}),t(_,{title:"Ladestand",readonly:"",class:"text-right text-monospace",unit:"%","model-value":e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/soc"]},null,8,["model-value"]),t(_,{title:"Reichweite",readonly:"",class:"text-right text-monospace",unit:"km","model-value":Math.round(e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/range"])},null,8,["model-value"]),t(l,{title:"Letzter Zeitstempel",readonly:"",class:"text-right text-monospace","model-value":e.$store.state.mqtt["openWB/vehicle/"+o.getVehicleIndex(s)+"/get/soc_timestamp"]},null,8,["model-value"])]),_:2},1024))),128))])}const ne=M(F,[["render",Y],["__scopeId","data-v-051028a3"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/Status.vue"]]);export{ne as default};
