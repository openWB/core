import{G as I}from"./GeneralChargeConfig-e62b455e.js";import{_ as S,l as o,m as p,A as u,p as V,u as s,x as w,D as N,E as a,B as c,F as y,G as r,y as F,z as C,N as x,M as $,I as z,S as E}from"./vendor-8fd6b453.js";import{l as T,d as B,ab as O,F as U}from"./vendor-fortawesome-6e9d9305.js";import"./index-045361bc.js";import"./vendor-bootstrap-33df4cf2.js";import"./vendor-jquery-a36b65f4.js";import"./vendor-axios-d1389e8e.js";import"./vendor-sortablejs-6aeb6860.js";import"./dynamic-import-helper-be004503.js";const H={name:"TimeRow"},W={class:"w-100"},A={class:"form-row align-items-center"},D={class:"col-10"},Q={class:"form-row"},Z={class:"col-6"},G={class:"col-6"},M={class:"col-2 text-right"};function P(t,e,m,v,g,n){return o(),p("div",W,[u("div",A,[u("div",D,[u("div",Q,[u("div",Z,[V(t.$slots,"start")]),u("div",G,[V(t.$slots,"end")])])]),u("div",M,[V(t.$slots,"action")])])])}const K=S(H,[["render",P],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/TimeRow.vue"]]);T.add(B);T.add(O);const R={name:"TimeTable",components:{FontAwesomeIcon:U,TimeRow:K},inheritAttrs:!1,props:{title:{type:String,required:!0,default:"#TITLE#"},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],data(){return{endOptions:this.modelValue.map(()=>this.generateTimeOptions("01:00","24:00"))}},computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{generateTimeOptions(t,e){const m=[],v=parseInt(t.split(":")[0],10),g=parseInt(e.split(":")[0],10);for(let n=v;n<=g;n++){const d=`${n.toString().padStart(2,"0")}:00`;m.push({value:d,text:d})}return m},addTime(){this.value.push(["",""])},removeTime(t){this.value.splice(t,1)},updateEndOptions(t){const e=this.value[t][0];if(e){const v=(parseInt(e.split(":")[0],10)+1).toString().padStart(2,"0")+":00";this.endOptions[t]=this.generateTimeOptions(v,"24:00")}else this.endOptions[t]=this.generateTimeOptions("01:00","24:00")}}},L={key:0,class:"w-100 alert alert-danger"},j=["onUpdate:modelValue","onChange"],J=["value"],X=["onUpdate:modelValue"],Y=["value"];function ee(t,e,m,v,g,n){const f=s("font-awesome-icon"),d=s("openwb-base-avatar"),h=s("time-row"),k=s("openwb-base-setting-element");return o(),w(k,null,N({title:a(()=>[V(t.$slots,"title",{},()=>[c(y(m.title),1)])]),default:a(()=>[r(h,null,{start:a(()=>e[0]||(e[0]=[c(" Beginn ",-1)])),end:a(()=>e[1]||(e[1]=[c(" Ende ",-1)])),action:a(()=>[r(d,{class:"bg-success clickable",title:"Zeitbereich hinzufügen",onClick:F(n.addTime,["stop"])},{default:a(()=>[r(f,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),_:1}),n.value.length===0?(o(),p("div",L," Keine Zeitbereiche definiert! ")):C("",!0),(o(!0),p(x,null,$(n.value,(_,b)=>(o(),w(h,{key:b},{start:a(()=>[z(u("select",{"onUpdate:modelValue":i=>_[0]=i,class:"form-control",required:"",onChange:i=>n.updateEndOptions(b)},[e[2]||(e[2]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(o(!0),p(x,null,$(n.generateTimeOptions("00:00","23:00"),i=>(o(),p("option",{key:i.value,value:i.value},y(i.text),9,J))),128))],40,j),[[E,_[0]]])]),end:a(()=>[z(u("select",{"onUpdate:modelValue":i=>_[1]=i,class:"form-control",required:""},[e[3]||(e[3]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(o(!0),p(x,null,$(g.endOptions[b],i=>(o(),p("option",{key:i.value,value:i.value},y(i.text),9,Y))),128))],8,X),[[E,_[1]]])]),action:a(()=>[n.value.length>1?(o(),w(d,{key:0,class:"bg-danger clickable",title:"Zeitbereich entfernen",onClick:F(i=>n.removeTime(b),["stop"])},{default:a(()=>[r(f,{icon:["fas","trash"]})]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024))),128))]),_:2},[t.$slots.help?{name:"help",fn:a(()=>[V(t.$slots,"help")]),key:"0"}:void 0]),1024)}const te=S(R,[["render",ee],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/TimeTable.vue"]]);T.add(B);T.add(O);const ne={name:"FixedTariff",components:{FontAwesomeIcon:U,TimeTable:te},props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","delete"],computed:{tariff:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},dates:{get(){return this.tariff.active_times.dates.map(([t,e])=>`${t};${e}`)},set(t){this.tariff.active_times.dates=t.map(e=>e.split(";"))}}}};function ae(t,e,m,v,g,n){const f=s("font-awesome-icon"),d=s("openwb-base-avatar"),h=s("openwb-base-text-input"),k=s("openwb-base-number-input"),_=s("openwb-base-select-input"),b=s("time-table"),i=s("openwb-base-card");return o(),w(i,{subtype:"info",collapsible:!0},{header:a(()=>[c(y(n.tariff.name),1)]),actions:a(()=>[r(d,{class:"bg-danger clickable",onClick:e[0]||(e[0]=l=>t.$emit("delete"))},{default:a(()=>[r(f,{icon:["fas","trash"]})]),_:1})]),default:a(()=>[r(h,{modelValue:n.tariff.name,"onUpdate:modelValue":e[1]||(e[1]=l=>n.tariff.name=l),title:"Tarifname"},null,8,["modelValue"]),r(k,{title:"Preis",min:0,step:.1,precision:1,required:"",unit:"ct/kWh","model-value":n.tariff.price*100,"onUpdate:modelValue":e[2]||(e[2]=l=>n.tariff.price=parseFloat((l/100).toFixed(3)))},null,8,["model-value"]),r(_,{modelValue:n.dates,"onUpdate:modelValue":e[3]||(e[3]=l=>n.dates=l),title:"Quartale",required:"",multiple:"",options:[{value:"01-01;31-03",text:"1. Quartal"},{value:"01-04;30-06",text:"2. Quartal"},{value:"01-07;30-09",text:"3. Quartal"},{value:"01-10;31-12",text:"4. Quartal"}]},null,8,["modelValue"]),r(b,{modelValue:n.tariff.active_times.times,"onUpdate:modelValue":e[4]||(e[4]=l=>n.tariff.active_times.times=l),title:"Aktive Zeiten"},null,8,["modelValue"])]),_:1})}const ie=S(ne,[["render",ae],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/FixedTariff.vue"]]);T.add(B);T.add(O);const se={name:"GridFeeFixedHours",components:{FontAwesomeIcon:U,FixedTariff:ie},mixins:[I],computed:{value:{get(){return this.gridFee},set(t){console.log("set",t),this.updateConfiguration(t)}}},methods:{addTariff(){this.value.configuration.tariffs.push({name:"Neuer Tarif",price:0,active_times:{dates:[],times:[["",""]]}})},removeTariff(t){this.value.configuration.tariffs.splice(t,1)}}},oe={class:"grid-fee-fixed-hours"};function re(t,e,m,v,g,n){const f=s("openwb-base-alert"),d=s("openwb-base-number-input"),h=s("font-awesome-icon"),k=s("openwb-base-avatar"),_=s("openwb-base-heading"),b=s("fixed-tariff");return o(),p("div",oe,[r(f,{subtype:"info"},{default:a(()=>e[1]||(e[1]=[c(" Konfiguriert feste Tarifzeiten, z.b. HT, NT und Standardpreis. ",-1)])),_:1,__:[1]}),r(d,{title:"Standardpreis",min:0,step:.1,precision:1,required:"",unit:"ct/kWh","model-value":n.value.configuration.default_price*100,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value.configuration.default_price=parseFloat((i/100).toFixed(3)))},{help:a(()=>e[2]||(e[2]=[c(" Standardpreis sofern kein anderer Tarif aktiv ist. ",-1)])),_:1},8,["model-value"]),e[5]||(e[5]=u("hr",null,null,-1)),r(_,null,{actions:a(()=>[r(k,{class:"bg-success clickable",onClick:F(n.addTariff,["stop"])},{default:a(()=>[r(h,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),default:a(()=>[e[3]||(e[3]=c(" Tarife ",-1))]),_:1,__:[3]}),n.value.configuration.tariffs.length===0?(o(),w(f,{key:0,subtype:"info"},{default:a(()=>e[4]||(e[4]=[c(" Es wurde noch kein Tarif konfiguriert. Klicken Sie auf das Plus-Symbol um einen neuen Tarif hinzuzufügen.",-1),u("br",null,null,-1),c(" Tarife ermöglichen es unterschiedliche Preise für unterschiedliche Zeiten zu definieren. ",-1)])),_:1,__:[4]})):C("",!0),(o(!0),p(x,null,$(n.value.configuration.tariffs,(i,l)=>(o(),w(b,{key:l,"model-value":i,"onUpdate:modelValue":q=>n.value.configuration.tariffs[l]=q,onDelete:q=>n.removeTariff(l)},null,8,["model-value","onUpdate:modelValue","onDelete"]))),128))])}const ve=S(se,[["render",re],["__scopeId","data-v-5ed1a321"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/grid_fee.vue"]]);export{ve as default};
