import{G as E}from"./GeneralChargeConfig-BPj8lOPS.js";import{_ as S,f as p,l as s,u,j as V,m as i,x as w,A as H,D as a,F as r,q as F,y as C,z as c,L as y,M as x,E as z,K as $,N}from"./vendor-BuEZ7_tV.js";import{F as O,l as T,d as B,af as U}from"./vendor-fortawesome-2rHPxBiM.js";import"./index-BGd6n0zH.js";import"./vendor-bootstrap-Bp8-4ina.js";import"./vendor-jquery-CEMonh9Y.js";import"./vendor-axios-t3FRgHRH.js";import"./vendor-sortablejs-DntTU6yg.js";import"./dynamic-import-helper-BheWnx7M.js";const W={name:"TimeRow"},A={class:"w-100"},D={class:"form-row align-items-center"},I={class:"col-10"},Q={class:"form-row"},Z={class:"col-6"},K={class:"col-6"},M={class:"col-2 text-right"};function P(t,e,m,v,g,n){return s(),p("div",A,[u("div",D,[u("div",I,[u("div",Q,[u("div",Z,[V(t.$slots,"start")]),u("div",K,[V(t.$slots,"end")])])]),u("div",M,[V(t.$slots,"action")])])])}const G=S(W,[["render",P],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/TimeRow.vue"]]);T.add(B);T.add(U);const R={name:"TimeTable",components:{FontAwesomeIcon:O,TimeRow:G},inheritAttrs:!1,props:{title:{type:String,required:!0},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],data(){return{endOptions:this.modelValue.map(()=>this.generateTimeOptions("01:00","24:00"))}},computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{generateTimeOptions(t,e){const m=[],v=parseInt(t.split(":")[0],10),g=parseInt(e.split(":")[0],10);for(let n=v;n<=g;n++){const d=`${n.toString().padStart(2,"0")}:00`;m.push({value:d,text:d})}return m},addTime(){this.value.push(["",""])},removeTime(t){this.value.splice(t,1)},updateEndOptions(t){const e=this.value[t][0];if(e){const v=(parseInt(e.split(":")[0],10)+1).toString().padStart(2,"0")+":00";this.endOptions[t]=this.generateTimeOptions(v,"24:00")}else this.endOptions[t]=this.generateTimeOptions("01:00","24:00")}}},j={key:0,class:"w-100 alert alert-danger"},L=["onUpdate:modelValue","onChange"],J=["value"],X=["onUpdate:modelValue"],Y=["value"];function ee(t,e,m,v,g,n){const f=i("font-awesome-icon"),d=i("openwb-base-avatar"),h=i("time-row"),k=i("openwb-base-setting-element");return s(),w(k,null,H({title:a(()=>[V(t.$slots,"title",{},()=>[c($(m.title),1)])]),default:a(()=>[r(h,null,{start:a(()=>[...e[0]||(e[0]=[c(" Beginn ",-1)])]),end:a(()=>[...e[1]||(e[1]=[c(" Ende ",-1)])]),action:a(()=>[r(d,{class:"bg-success clickable",title:"Zeitbereich hinzufügen",onClick:C(n.addTime,["stop"])},{default:a(()=>[r(f,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),_:1}),n.value.length===0?(s(),p("div",j," Keine Zeitbereiche definiert! ")):F("",!0),(s(!0),p(y,null,x(n.value,(_,b)=>(s(),w(h,{key:b},{start:a(()=>[z(u("select",{"onUpdate:modelValue":o=>_[0]=o,class:"form-control",required:"",onChange:o=>n.updateEndOptions(b)},[e[2]||(e[2]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(s(!0),p(y,null,x(n.generateTimeOptions("00:00","23:00"),o=>(s(),p("option",{key:o.value,value:o.value},$(o.text),9,J))),128))],40,L),[[N,_[0]]])]),end:a(()=>[z(u("select",{"onUpdate:modelValue":o=>_[1]=o,class:"form-control",required:""},[e[3]||(e[3]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(s(!0),p(y,null,x(g.endOptions[b],o=>(s(),p("option",{key:o.value,value:o.value},$(o.text),9,Y))),128))],8,X),[[N,_[1]]])]),action:a(()=>[n.value.length>1?(s(),w(d,{key:0,class:"bg-danger clickable",title:"Zeitbereich entfernen",onClick:C(o=>n.removeTime(b),["stop"])},{default:a(()=>[r(f,{icon:["fas","trash"]})]),_:1},8,["onClick"])):F("",!0)]),_:2},1024))),128))]),_:2},[t.$slots.help?{name:"help",fn:a(()=>[V(t.$slots,"help")]),key:"0"}:void 0]),1024)}const te=S(R,[["render",ee],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/TimeTable.vue"]]);T.add(B);T.add(U);const ne={name:"FixedTariff",components:{FontAwesomeIcon:O,TimeTable:te},props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","delete"],computed:{tariff:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},dates:{get(){return this.tariff.active_times.dates.map(([t,e])=>`${t};${e}`)},set(t){this.tariff.active_times.dates=t.map(e=>e.split(";"))}}}};function ae(t,e,m,v,g,n){const f=i("font-awesome-icon"),d=i("openwb-base-avatar"),h=i("openwb-base-text-input"),k=i("openwb-base-number-input"),_=i("openwb-base-select-input"),b=i("time-table"),o=i("openwb-base-card");return s(),w(o,{subtype:"info",collapsible:!0,collapsed:!0},{header:a(()=>[c($(n.tariff.name),1)]),actions:a(()=>[r(d,{class:"bg-danger clickable",onClick:e[0]||(e[0]=l=>t.$emit("delete"))},{default:a(()=>[r(f,{icon:["fas","trash"]})]),_:1})]),default:a(()=>[r(h,{modelValue:n.tariff.name,"onUpdate:modelValue":e[1]||(e[1]=l=>n.tariff.name=l),title:"Tarifname"},null,8,["modelValue"]),r(k,{title:"Preis",min:0,step:.1,precision:1,required:"",unit:"ct/kWh","model-value":n.tariff.price*100,"onUpdate:modelValue":e[2]||(e[2]=l=>n.tariff.price=parseFloat((l/100).toFixed(3)))},null,8,["model-value"]),r(_,{modelValue:n.dates,"onUpdate:modelValue":e[3]||(e[3]=l=>n.dates=l),title:"Quartale",required:"",multiple:"",options:[{value:"01-01;31-03",text:"1. Quartal"},{value:"01-04;30-06",text:"2. Quartal"},{value:"01-07;30-09",text:"3. Quartal"},{value:"01-10;31-12",text:"4. Quartal"}]},null,8,["modelValue"]),r(b,{modelValue:n.tariff.active_times.times,"onUpdate:modelValue":e[4]||(e[4]=l=>n.tariff.active_times.times=l),title:"Aktive Zeiten"},null,8,["modelValue"])]),_:1})}const oe=S(ne,[["render",ae],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/FixedTariff.vue"]]);T.add(B);T.add(U);const ie={name:"GridFeeFixedHours",components:{FontAwesomeIcon:O,FixedTariff:oe},mixins:[E],computed:{value:{get(){return this.gridFee},set(t){console.log("set",t),this.updateConfiguration(t)}}},methods:{addTariff(){this.value.configuration.tariffs.push({name:"Neuer Tarif",price:0,active_times:{dates:[],times:[["",""]]}})},removeTariff(t){this.value.configuration.tariffs.splice(t,1)}}},se={class:"grid-fee-fixed-hours"};function re(t,e,m,v,g,n){const f=i("openwb-base-alert"),d=i("openwb-base-number-input"),h=i("font-awesome-icon"),k=i("openwb-base-avatar"),_=i("openwb-base-heading"),b=i("fixed-tariff");return s(),p("div",se,[r(f,{subtype:"info"},{default:a(()=>[...e[1]||(e[1]=[c(" Konfiguriert feste Tarifzeiten, z.b. HT, NT und Standardpreis. ",-1)])]),_:1}),r(d,{title:"Standardpreis",min:0,step:.1,precision:1,required:"",unit:"ct/kWh","model-value":n.value.configuration.default_price*100,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.configuration.default_price=parseFloat((o/100).toFixed(3)))},{help:a(()=>[...e[2]||(e[2]=[c(" Standardpreis sofern kein anderer Tarif aktiv ist. ",-1)])]),_:1},8,["model-value"]),e[5]||(e[5]=u("hr",null,null,-1)),r(_,null,{actions:a(()=>[r(k,{class:"bg-success clickable",onClick:C(n.addTariff,["stop"])},{default:a(()=>[r(h,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),default:a(()=>[e[3]||(e[3]=c(" Tarife ",-1))]),_:1}),n.value.configuration.tariffs.length===0?(s(),w(f,{key:0,subtype:"info"},{default:a(()=>[...e[4]||(e[4]=[c(" Es wurde noch kein Tarif konfiguriert. Klicken Sie auf das Plus-Symbol, um einen neuen Tarif hinzuzufügen.",-1),u("br",null,null,-1),c(" Tarife ermöglichen es, Preise für unterschiedliche Zeiten zu definieren. ",-1)])]),_:1})):F("",!0),(s(!0),p(y,null,x(n.value.configuration.tariffs,(o,l)=>(s(),w(b,{key:l,"model-value":o,"onUpdate:modelValue":q=>n.value.configuration.tariffs[l]=q,onDelete:q=>n.removeTariff(l)},null,8,["model-value","onUpdate:modelValue","onDelete"]))),128))])}const ve=S(ie,[["render",re],["__scopeId","data-v-5ed1a321"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/grid_fees/fixed_hours/grid_fee.vue"]]);export{ve as default};
