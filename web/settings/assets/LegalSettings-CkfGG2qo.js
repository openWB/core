import{F as k,l as y,al as v}from"./vendor-fortawesome-DunXjMUr.js";import{C as B}from"./index-UZ-qidAy.js";import{_ as W,m as n,l as u,f as $,y as o,q as s,u as a,z as g,D as d,x as b}from"./vendor-Cm2BcoGA.js";import"./vendor-bootstrap-CFWPZPj5.js";import"./vendor-jquery-CEMonh9Y.js";import"./vendor-axios-DnM0A367.js";import"./vendor-sortablejs-BIKIFH7x.js";y.add(v);const S={name:"OpenwbDataProtectionView",components:{FontAwesomeIcon:k},mixins:[B],emits:["sendCommand","save"],data(){return{mqttTopicsToSubscribe:["openWB/system/dataprotection_acknowledged","openWB/system/usage_terms_acknowledged"],mqttTopicsToPublish:["openWB/system/dataprotection_acknowledged","openWB/system/usage_terms_acknowledged"]}},methods:{sendSystemCommand(t,e={}){this.$emit("sendCommand",{command:t,data:e})},async onSaveLegal(){this.$emit("save",this.mqttTopicsToPublish),await new Promise(e=>{const i=this.$watch(()=>this.$store.state.local.savingData,r=>{r===!1&&(i(),e())})}),this.$store.state.mqtt["openWB/system/usage_terms_acknowledged"]||await new Promise(e=>{const i=this.$watch(()=>this.$store.state.mqtt["openWB/system/usage_terms_acknowledged"],r=>{r&&(i(),e())})}),await this.$store.getters.installAssistantDone||this.$router.push({name:"InstallAssistant"})}}},z={class:"dataProtection"},C={name:"dataProtectionForm"},D={class:"row justify-content-center"},V={class:"col-md-4 d-flex justify-content-center"};function q(t,e,i,r,A,m){const p=n("openwb-base-button-group-input"),w=n("font-awesome-icon"),_=n("openwb-base-click-button"),c=n("openwb-base-alert"),f=n("openwb-base-submit-buttons"),h=n("openwb-base-card");return u(),$("div",z,[o("form",C,[s(h,{title:"Nutzungsbedingungen & Datenschutzerklärung"},{footer:a(()=>[s(f,{"form-name":"dataProtectionForm","hide-reset":!0,"hide-defaults":!0,onSave:m.onSaveLegal},null,8,["onSave"])]),default:a(()=>[e[6]||(e[6]=o("iframe",{src:"dataProtection-usageTerms.html",width:"100%",height:"400px",class:"bg-light"},null,-1)),e[7]||(e[7]=o("hr",null,null,-1)),s(p,{title:"Nutzungsbedingungen",buttons:[{buttonValue:!1,text:"Ablehnen",class:"btn-outline-danger"},{buttonValue:!0,text:"Akzeptieren",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/system/usage_terms_acknowledged"],"onUpdate:modelValue":e[0]||(e[0]=l=>t.updateState("openWB/system/usage_terms_acknowledged",l))},null,8,["model-value"]),t.$store.state.mqtt["openWB/system/usage_terms_acknowledged"]?b("",!0):(u(),g(c,{key:0,subtype:"danger",class:"mb-1"},{default:a(()=>[e[4]||(e[4]=d(" Du musst die Nutzungsbedingungen akzeptieren, bevor openWB eingesetzt werden kann. ",-1)),o("div",D,[o("div",V,[s(_,{class:"btn-danger",onButtonClicked:e[1]||(e[1]=l=>m.sendSystemCommand("systemShutdown"))},{default:a(()=>[e[3]||(e[3]=d(" Nicht akzeptieren und ausschalten ",-1)),s(w,{icon:["fas","power-off"]})]),_:1})])])]),_:1})),s(p,{title:"Datenschutzerklärung",buttons:[{buttonValue:!1,text:"Ablehnen",class:"btn-outline-danger"},{buttonValue:!0,text:"Akzeptieren",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/system/dataprotection_acknowledged"],"onUpdate:modelValue":e[2]||(e[2]=l=>t.updateState("openWB/system/dataprotection_acknowledged",l))},null,8,["model-value"]),t.$store.state.mqtt["openWB/system/dataprotection_acknowledged"]?b("",!0):(u(),g(c,{key:1,subtype:"warning"},{default:a(()=>[...e[5]||(e[5]=[d(" Wenn Du nicht einwilligst, wird eine ggf. konfigurierte Cloud-Anbindung gelöscht. Die openWB arbeitet autark wie gewohnt weiter. Fernzugriff und Remote-Support sind dann nicht mehr möglich! ",-1)])]),_:1}))]),_:1})])])}const I=W(S,[["render",q],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/LegalSettings.vue"]]);export{I as default};
