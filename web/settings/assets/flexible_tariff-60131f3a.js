import{F as I}from"./GeneralChargeConfig-d99f183c.js";import{_ as S,l as s,m as f,A as u,p as k,u as o,x as w,D as N,E as a,B as p,F as V,G as l,y as F,z as C,N as y,M as $,I as z,S as E}from"./vendor-50125810.js";import{l as T,d as B,ab as O,F as U}from"./vendor-fortawesome-641b8eb6.js";import"./index-bbf7119b.js";import"./vendor-bootstrap-01761fad.js";import"./vendor-jquery-a46fe321.js";import"./vendor-axios-1a87d4ae.js";import"./vendor-sortablejs-8982fad4.js";import"./dynamic-import-helper-be004503.js";const H={name:"TimeRow"},W={class:"w-100"},A={class:"form-row align-items-center"},D={class:"col-10"},Q={class:"form-row"},Z={class:"col-6"},M={class:"col-6"},P={class:"col-2 text-right"};function K(t,e,c,v,g,n){return s(),f("div",W,[u("div",A,[u("div",D,[u("div",Q,[u("div",Z,[k(t.$slots,"start")]),u("div",M,[k(t.$slots,"end")])])]),u("div",P,[k(t.$slots,"action")])])])}const R=S(H,[["render",K],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/flexible_tariffs/fixed_hours/TimeRow.vue"]]);T.add(B);T.add(O);const L={name:"TimeTable",components:{FontAwesomeIcon:U,TimeRow:R},inheritAttrs:!1,props:{title:{type:String,required:!0,default:"#TITLE#"},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],data(){return{endOptions:this.modelValue.map(()=>this.generateTimeOptions("01:00","24:00"))}},computed:{value:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},methods:{generateTimeOptions(t,e){const c=[],v=parseInt(t.split(":")[0],10),g=parseInt(e.split(":")[0],10);for(let n=v;n<=g;n++){const d=`${n.toString().padStart(2,"0")}:00`;c.push({value:d,text:d})}return c},addTime(){this.value.push(["",""])},removeTime(t){this.value.splice(t,1)},updateEndOptions(t){const e=this.value[t][0];if(e){const v=(parseInt(e.split(":")[0],10)+1).toString().padStart(2,"0")+":00";this.endOptions[t]=this.generateTimeOptions(v,"24:00")}else this.endOptions[t]=this.generateTimeOptions("01:00","24:00")}}},j={key:0,class:"w-100 alert alert-danger"},G=["onUpdate:modelValue","onChange"],J=["value"],X=["onUpdate:modelValue"],Y=["value"];function ee(t,e,c,v,g,n){const m=o("font-awesome-icon"),d=o("openwb-base-avatar"),h=o("time-row"),x=o("openwb-base-setting-element");return s(),w(x,null,N({title:a(()=>[k(t.$slots,"title",{},()=>[p(V(c.title),1)])]),default:a(()=>[l(h,null,{start:a(()=>[...e[0]||(e[0]=[p(" Beginn ",-1)])]),end:a(()=>[...e[1]||(e[1]=[p(" Ende ",-1)])]),action:a(()=>[l(d,{class:"bg-success clickable",title:"Zeitbereich hinzufügen",onClick:F(n.addTime,["stop"])},{default:a(()=>[l(m,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),_:1}),n.value.length===0?(s(),f("div",j," Keine Zeitbereiche definiert! ")):C("",!0),(s(!0),f(y,null,$(n.value,(_,b)=>(s(),w(h,{key:b},{start:a(()=>[z(u("select",{"onUpdate:modelValue":i=>_[0]=i,class:"form-control",required:"",onChange:i=>n.updateEndOptions(b)},[e[2]||(e[2]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(s(!0),f(y,null,$(n.generateTimeOptions("00:00","23:00"),i=>(s(),f("option",{key:i.value,value:i.value},V(i.text),9,J))),128))],40,G),[[E,_[0]]])]),end:a(()=>[z(u("select",{"onUpdate:modelValue":i=>_[1]=i,class:"form-control",required:""},[e[3]||(e[3]=u("option",{value:"",disabled:""}," -- Bitte auswählen -- ",-1)),(s(!0),f(y,null,$(g.endOptions[b],i=>(s(),f("option",{key:i.value,value:i.value},V(i.text),9,Y))),128))],8,X),[[E,_[1]]])]),action:a(()=>[n.value.length>1?(s(),w(d,{key:0,class:"bg-danger clickable",title:"Zeitbereich entfernen",onClick:F(i=>n.removeTime(b),["stop"])},{default:a(()=>[l(m,{icon:["fas","trash"]})]),_:1},8,["onClick"])):C("",!0)]),_:2},1024))),128))]),_:2},[t.$slots.help?{name:"help",fn:a(()=>[k(t.$slots,"help")]),key:"0"}:void 0]),1024)}const te=S(L,[["render",ee],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/flexible_tariffs/fixed_hours/TimeTable.vue"]]);T.add(B);T.add(O);const ne={name:"FixedTariff",components:{FontAwesomeIcon:U,TimeTable:te},props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","delete"],computed:{tariff:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},dates:{get(){return this.tariff.active_times.dates.map(([t,e])=>`${t};${e}`)},set(t){this.tariff.active_times.dates=t.map(e=>e.split(";"))}}}};function ae(t,e,c,v,g,n){const m=o("font-awesome-icon"),d=o("openwb-base-avatar"),h=o("openwb-base-text-input"),x=o("openwb-base-number-input"),_=o("openwb-base-select-input"),b=o("time-table"),i=o("openwb-base-card");return s(),w(i,{subtype:"info",collapsible:!0,collapsed:!0},{header:a(()=>[p(V(n.tariff.name),1)]),actions:a(()=>[l(d,{class:"bg-danger clickable",onClick:e[0]||(e[0]=r=>t.$emit("delete"))},{default:a(()=>[l(m,{icon:["fas","trash"]})]),_:1})]),default:a(()=>[l(h,{modelValue:n.tariff.name,"onUpdate:modelValue":e[1]||(e[1]=r=>n.tariff.name=r),title:"Tarifname"},null,8,["modelValue"]),l(x,{title:"Preis",step:.001,precision:3,required:"",unit:"ct/kWh","model-value":n.tariff.price*100,"onUpdate:modelValue":e[2]||(e[2]=r=>n.tariff.price=parseFloat((r/100).toFixed(5)))},null,8,["model-value"]),l(_,{modelValue:n.dates,"onUpdate:modelValue":e[3]||(e[3]=r=>n.dates=r),title:"Quartale",required:"",multiple:"",options:[{value:"01-01;31-03",text:"1. Quartal"},{value:"01-04;30-06",text:"2. Quartal"},{value:"01-07;30-09",text:"3. Quartal"},{value:"01-10;31-12",text:"4. Quartal"}]},null,8,["modelValue"]),l(b,{modelValue:n.tariff.active_times.times,"onUpdate:modelValue":e[4]||(e[4]=r=>n.tariff.active_times.times=r),title:"Aktive Zeiten"},null,8,["modelValue"])]),_:1})}const ie=S(ne,[["render",ae],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/flexible_tariffs/fixed_hours/FixedTariff.vue"]]);T.add(B);T.add(O);const oe={name:"FlexibleTariffFixedHours",components:{FontAwesomeIcon:U,FixedTariff:ie},mixins:[I],computed:{value:{get(){return this.flexibleTariff},set(t){console.log("set",t),this.updateConfiguration(t)}}},methods:{addTariff(){this.value.configuration.tariffs.push({name:"Neuer Tarif",price:0,active_times:{dates:[],times:[["",""]]}})},removeTariff(t){this.value.configuration.tariffs.splice(t,1)}}},se={class:"flexible-tariff-fixed-hours"};function le(t,e,c,v,g,n){const m=o("openwb-base-alert"),d=o("openwb-base-number-input"),h=o("font-awesome-icon"),x=o("openwb-base-avatar"),_=o("openwb-base-heading"),b=o("fixed-tariff");return s(),f("div",se,[l(m,{subtype:"info"},{default:a(()=>[...e[1]||(e[1]=[p(" Konfiguriert feste Tarifzeiten, z.b. HT, NT und Standardpreis. ",-1)])]),_:1}),l(d,{title:"Standardpreis",step:.001,precision:3,required:"",unit:"ct/kWh","model-value":n.value.configuration.default_price*100,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value.configuration.default_price=parseFloat((i/100).toFixed(5)))},{help:a(()=>[...e[2]||(e[2]=[p(" Standardpreis sofern kein anderer Tarif aktiv ist. ",-1)])]),_:1},8,["model-value"]),e[5]||(e[5]=u("hr",null,null,-1)),l(_,null,{actions:a(()=>[l(x,{class:"bg-success clickable",onClick:F(n.addTariff,["stop"])},{default:a(()=>[l(h,{icon:["fas","plus"]})]),_:1},8,["onClick"])]),default:a(()=>[e[3]||(e[3]=p(" Tarife ",-1))]),_:1}),n.value.configuration.tariffs.length===0?(s(),w(m,{key:0,subtype:"info"},{default:a(()=>[...e[4]||(e[4]=[p(" Es wurde noch kein Tarif konfiguriert. Klicke auf das Plus-Symbol, um einen neuen Tarif hinzuzufügen.",-1),u("br",null,null,-1),p(" Tarife ermöglichen es, Preise für unterschiedliche Zeiten zu definieren. ",-1)])]),_:1})):C("",!0),(s(!0),f(y,null,$(n.value.configuration.tariffs,(i,r)=>(s(),w(b,{key:r,"model-value":i,"onUpdate:modelValue":q=>n.value.configuration.tariffs[r]=q,onDelete:q=>n.removeTariff(r)},null,8,["model-value","onUpdate:modelValue","onDelete"]))),128))])}const ve=S(oe,[["render",le],["__scopeId","data-v-dd67c8e4"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/electricity_pricing/flexible_tariffs/fixed_hours/flexible_tariff.vue"]]);export{ve as default};
