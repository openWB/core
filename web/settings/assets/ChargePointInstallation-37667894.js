import{l as O,aa as T,al as N,G as R,am as j,an as Z,F as J,d as K,Q as ee,ao as te,M as ne}from"./vendor-fortawesome-06606b40.js";import{_ as P,C as $}from"./index-16142b88.js";import{_ as q}from"./dynamic-import-helper-be004503.js";import{_ as W,u as g,l,m as d,x as f,E as o,B as s,F as v,G as a,A as m,a2 as M,a3 as F,N as B,q as ae,y as S,z as c,M as z,D as oe}from"./vendor-8fd6b453.js";const le={props:{chargePoint:{type:Object,required:!0}},emits:["update:configuration"],methods:{updateConfiguration(t,e=void 0){this.$emit("update:configuration",{value:t,object:e})}}},ie=W(le,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/ChargePointConfigMixin.vue"]]),re={name:"ChargePointConfigFallback",mixins:[ie]},se={class:"charge-point-config-fallback"},ue={key:1};function de(t,e,b,V,_,n){const w=g("openwb-base-alert"),h=g("openwb-base-textarea");return l(),d("div",se,[Object.keys(t.chargePoint.configuration).length==0?(l(),f(w,{key:0,subtype:"info"},{default:o(()=>[s(' Der Ladepunkt-Typ "'+v(t.chargePoint.type)+'" bietet keine Einstellungen. ',1)]),_:1})):(l(),d("div",ue,[a(w,{subtype:"warning"},{default:o(()=>[s(' Es wurde keine Konfigurationsseite für den Ladepunkt-Typ "'+v(t.chargePoint.type)+'" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ',1)]),_:1}),a(h,{title:"Konfiguration",subtype:"json","model-value":t.chargePoint.configuration,"onUpdate:modelValue":e[0]||(e[0]=C=>t.updateConfiguration(C,"configuration"))},{help:o(()=>e[1]||(e[1]=[s(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ",-1)])),_:1},8,["model-value"]),a(w,{subtype:"info"},{default:o(()=>[m("pre",null,v(JSON.stringify(t.chargePoint.configuration,void 0,2)),1)]),_:1})]))])}const pe=W(re,[["render",de],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointConfigFallback.vue"]]),me={props:{chargePoint:{type:Object,required:!0}}},ge=W(me,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/ChargePointCommandsMixin.vue"]]),ce={name:"ChargePointCommandsFallback",mixins:[ge]},be={class:"charge-point-commands-fallback"};function he(t,e,b,V,_,n){return l(),d("div",be)}const fe=W(ce,[["render",he],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointCommandsFallback.vue"]]),_e={name:"OpenwbChargePointProxy",props:{chargePoint:{required:!0,type:Object}},emits:["update:configuration"],methods:{getChargePointSettingsComponent(){return console.debug(`loading charge point settings: ${this.chargePoint.type}`),M({loader:()=>q(Object.assign({"./external_openwb/chargePoint.vue":()=>P(()=>import("./chargePoint-23204d7c.js"),["assets/chargePoint-23204d7c.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./internal_openwb/chargePoint.vue":()=>P(()=>import("./chargePoint-b72e2a27.js"),["assets/chargePoint-b72e2a27.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./mqtt/chargePoint.vue":()=>P(()=>import("./chargePoint-6a111e7b.js"),["assets/chargePoint-6a111e7b.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./openwb_dc_adapter/chargePoint.vue":()=>P(()=>import("./chargePoint-ad8443b8.js"),["assets/chargePoint-ad8443b8.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./openwb_pro/chargePoint.vue":()=>P(()=>import("./chargePoint-071e78f1.js"),["assets/chargePoint-071e78f1.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./openwb_series2_satellit/chargePoint.vue":()=>P(()=>import("./chargePoint-20772e44.js"),["assets/chargePoint-20772e44.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./smartwb/chargePoint.vue":()=>P(()=>import("./chargePoint-ae7415df.js"),["assets/chargePoint-ae7415df.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"])}),`./${this.chargePoint.type}/chargePoint.vue`),errorComponent:pe})},getChargePointCommandsComponent(){return console.debug(`loading charge point commands: ${this.chargePoint.type}`),M({loader:()=>q(Object.assign({"./internal_openwb/commands.vue":()=>P(()=>import("./commands-40ac96e8.js"),["assets/commands-40ac96e8.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"]),"./openwb_pro/commands.vue":()=>P(()=>import("./commands-e609c39d.js"),["assets/commands-e609c39d.js","assets/vendor-8fd6b453.js","assets/vendor-sortablejs-6aeb6860.js","assets/vendor-3a7c342f.css","assets/vendor-fortawesome-06606b40.js","assets/index-16142b88.js","assets/vendor-bootstrap-33df4cf2.js","assets/vendor-jquery-a36b65f4.js","assets/vendor-bootstrap-c4951098.css","assets/vendor-axios-d1389e8e.js","assets/index-01725f3e.css","assets/dynamic-import-helper-be004503.js"])}),`./${this.chargePoint.type}/commands.vue`),errorComponent:fe})},updateConfiguration(t){this.$emit("update:configuration",t)}}};function ke(t,e,b,V,_,n){const w=g("openwb-base-heading");return l(),d(B,null,[a(w,null,{default:o(()=>[s(' Einstellungen für Ladepunkt Typ "'+v(b.chargePoint.type)+'" ',1)]),_:1}),(l(),f(F(n.getChargePointSettingsComponent()),{"charge-point":b.chargePoint,"onUpdate:configuration":e[0]||(e[0]=h=>n.updateConfiguration(h))},null,40,["charge-point"])),e[1]||(e[1]=m("hr",null,null,-1)),a(w,null,{default:o(()=>[s(' Befehle für Ladepunkt Typ "'+v(b.chargePoint.type)+'" ',1)]),_:1}),(l(),f(F(n.getChargePointCommandsComponent()),{"charge-point":b.chargePoint},null,8,["charge-point"]))],64)}const ve=W(_e,[["render",ke],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointProxy.vue"]]);O.add(T,N,R,j,Z);const we={name:"TemplateAutoLockPlan",components:{FontAwesomeIcon:J},mixins:[$],props:{modelValue:{type:Object,required:!0},templateId:{type:Number,required:!0}},emits:["update:modelValue","sendCommand"],data(){return{showRemoveModal:!1}},computed:{plan(){return this.modelValue}},watch:{plan:{handler(t){this.$emit("update:modelValue",t)},deep:!0}},methods:{copyPlan(){this.$emit("sendCommand",{command:"addAutolockPlan",data:{template:this.templateId,copy:this.modelValue.id}})},removePlanModal(){this.showRemoveModal=!0},removePlan(t){this.showRemoveModal=!1,t=="confirm"&&this.$emit("sendCommand",{command:"removeAutolockPlan",data:{template:this.templateId,plan:this.modelValue.id}})}}},Ce={key:0},ye={key:1},Ve={key:2},Pe={key:1},Le={key:2};function Be(t,e,b,V,_,n){const w=g("openwb-base-modal-dialog"),h=g("font-awesome-icon"),C=g("openwb-base-avatar"),y=g("openwb-base-text-input"),A=g("openwb-base-button-group-input"),I=g("openwb-base-card");return l(),d(B,null,[a(w,{show:_.showRemoveModal,title:"Autolock Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:n.removePlan},{default:o(()=>[s(' Wollen Sie den Autolock Zeitplan "'+v(n.plan.name)+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show","onModalResult"]),a(I,{title:n.plan.name,collapsible:!0,collapsed:!0},{actions:o(p=>[p.collapsed==!0?(l(),d("span",{key:0,class:ae(["pill clickable",n.plan.active?"bg-success":"bg-danger"]),onClick:e[0]||(e[0]=S(k=>n.plan.active=!n.plan.active,["stop"]))},[a(h,{icon:["fas","clock"]}),s(" "+v(n.plan.time[0])+" - "+v(n.plan.time[1])+" ",1),n.plan.frequency.selected=="once"?(l(),d("span",Ce,[a(h,{icon:["fas","calendar-day"]}),s(" "+v(t.formatDate(n.plan.frequency.once[0])==t.formatDate(n.plan.frequency.once[1])?t.formatDate(n.plan.frequency.once[0]):t.formatDate(n.plan.frequency.once[0])+" - "+t.formatDate(n.plan.frequency.once[1])),1)])):c("",!0),n.plan.frequency.selected=="daily"?(l(),d("span",ye,[a(h,{icon:["fas","calendar-week"]})])):c("",!0),n.plan.frequency.selected=="weekly"?(l(),d("span",Ve,[a(h,{icon:["fas","calendar-alt"]})])):c("",!0)],2)):c("",!0),p.collapsed==!1?(l(),d("span",Pe,[a(C,{class:"bg-success clickable",title:"Autolock Zeitplan duplizieren",onClick:e[1]||(e[1]=S(k=>n.copyPlan(),["stop"]))},{default:o(()=>[a(h,{icon:["fas","copy"]})]),_:1}),a(C,{class:"bg-danger clickable ml-1",title:"Autolock Zeitplan löschen",onClick:e[2]||(e[2]=S(k=>n.removePlanModal(),["stop"]))},{default:o(()=>[a(h,{icon:["fas","trash"]})]),_:1})])):c("",!0)]),default:o(()=>[a(y,{modelValue:n.plan.name,"onUpdate:modelValue":e[3]||(e[3]=p=>n.plan.name=p),title:"Bezeichnung"},null,8,["modelValue"]),a(A,{modelValue:n.plan.active,"onUpdate:modelValue":e[4]||(e[4]=p=>n.plan.active=p),title:"Zeitplan aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}]},null,8,["modelValue"]),a(y,{modelValue:n.plan.time[0],"onUpdate:modelValue":e[5]||(e[5]=p=>n.plan.time[0]=p),title:"Sperren um",subtype:"time"},null,8,["modelValue"]),a(y,{modelValue:n.plan.time[1],"onUpdate:modelValue":e[6]||(e[6]=p=>n.plan.time[1]=p),title:"Freigeben um",subtype:"time"},null,8,["modelValue"]),a(A,{modelValue:n.plan.frequency.selected,"onUpdate:modelValue":e[7]||(e[7]=p=>n.plan.frequency.selected=p),title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}]},null,8,["modelValue"]),n.plan.frequency.selected=="once"?(l(),f(y,{key:0,modelValue:n.plan.frequency.once[0],"onUpdate:modelValue":e[8]||(e[8]=p=>n.plan.frequency.once[0]=p),title:"Sperren ab ...",subtype:"date"},null,8,["modelValue"])):c("",!0),n.plan.frequency.selected=="once"?(l(),f(y,{key:1,modelValue:n.plan.frequency.once[1],"onUpdate:modelValue":e[9]||(e[9]=p=>n.plan.frequency.once[1]=p),title:"... bis",subtype:"date",min:n.plan.frequency.once[0]},null,8,["modelValue","min"])):c("",!0),n.plan.frequency.selected=="weekly"?(l(),d("div",Le,[(l(!0),d(B,null,z(t.weekdays,(p,k)=>(l(),f(A,{key:k,modelValue:n.plan.frequency.weekly[k],"onUpdate:modelValue":U=>n.plan.frequency.weekly[k]=U,title:p,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}]},null,8,["modelValue","onUpdate:modelValue","title"]))),128))])):c("",!0)]),_:1},8,["title"])],64)}const We=W(we,[["render",Be],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/TemplateAutoLockPlan.vue"]]);O.add(K,T,N,R,j,Z,ee,te);const Ae={name:"OpenwbChargePointInstallationView",components:{FontAwesomeIcon:J,FontAwesomeLayers:ne,OpenwbChargePointProxy:ve,TemplateAutoLockPlan:We},mixins:[$],props:{installAssistantActive:{type:Boolean,required:!1,default:!1}},emits:["sendCommand","save","reset","defaults"],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/optional/dc_charging","openWB/optional/ocpp/config","openWB/optional/rfid/active","openWB/chargepoint/+/config","openWB/chargepoint/template/+","openWB/system/configurable/chargepoints","openWB/system/configurable/chargepoints_internal"],chargePointToAdd:void 0,showChargePointModal:!1,modalChargePointIndex:void 0,showChargePointTemplateModal:!1,modalChargePointTemplateIndex:void 0}},computed:{dcChargingEnabled:{get(){return this.$store.state.mqtt["openWB/optional/dc_charging"]}},installedChargePoints:{get(){let t=this.getWildcardTopics("openWB/chargepoint/+/config"),e={};for(const[b,V]of Object.entries(t))(V.type==="internal_openwb"||this.$store.state.mqtt["openWB/general/extern"]===!1)&&(e[b]=V);return e}},chargePointTemplates:{get(){return this.getWildcardTopics("openWB/chargepoint/template/+")}},chargePointTemplateList:{get(){let t=[];return Object.keys(this.chargePointTemplates).forEach(e=>{let b=parseInt(e.match(/([0-9]+)/g)[0]),V=this.$store.state.mqtt["openWB/chargepoint/template/"+b].name;t.push({value:b,text:V})}),t}}},methods:{addChargePoint(){this.$emit("sendCommand",{command:"addChargepoint",data:{type:this.chargePointToAdd}})},removeChargePointModal(t,e){t.stopPropagation(),this.modalChargePointIndex=parseInt(e.match(/(?:\/)(\d+)(?=\/)/)[1]),this.showChargePointModal=!0},removeChargePoint(t,e){this.showChargePointModal=!1,t=="confirm"&&this.$emit("sendCommand",{command:"removeChargepoint",data:{id:e}})},getChargePointList(){return this.$store.state.mqtt["openWB/general/extern"]===!1?this.$store.state.mqtt["openWB/system/configurable/chargepoints"]:this.$store.state.mqtt["openWB/system/configurable/chargepoints_internal"]},getChargePointName(t){return this.$store.state.mqtt["openWB/chargepoint/"+t+"/config"]?this.$store.state.mqtt["openWB/chargepoint/"+t+"/config"].name:"Ladepunkt "+t},getChargePointTemplateIndex(t){return parseInt(t.match(/([^/]+)$/)[0])},getChargePointTemplateName(t){return this.$store.state.mqtt["openWB/chargepoint/template/"+t]?this.$store.state.mqtt["openWB/chargepoint/template/"+t].name:"Profil "+t},addChargePointTemplate(t,e){t.stopPropagation();let b={};e&&(b.copy=this.getChargePointTemplateIndex(e)),this.$emit("sendCommand",{command:"addChargepointTemplate",data:b})},removeChargePointTemplateModal(t,e){t.stopPropagation(),this.modalChargePointTemplateIndex=this.getChargePointTemplateIndex(e),this.showChargePointTemplateModal=!0},removeChargePointTemplate(t,e){this.showChargePointTemplateModal=!1,t=="confirm"&&this.$emit("sendCommand",{command:"removeChargepointTemplate",data:{id:e}})},addChargePointTemplateAutolockPlan(t){this.$emit("sendCommand",{command:"addAutolockPlan",data:{template:this.getChargePointTemplateIndex(t)}})},updateConfiguration(t,e){console.debug("updateConfiguration",t,e),this.updateState(t,e.value,e.object)}}},Ue={class:"chargePointInstallation"},Se={name:"chargePointInstallationForm"},ze={key:0},Ie={key:2},xe={key:0},De={key:0},Ee={key:1},qe={key:0},Me={key:1},Fe={key:0},Oe={key:2},Te={key:4};function Ne(t,e,b,V,_,n){const w=g("openwb-base-modal-dialog"),h=g("font-awesome-icon"),C=g("openwb-base-avatar"),y=g("openwb-base-text-input"),A=g("openwb-base-select-input"),I=g("openwb-charge-point-proxy"),p=g("openwb-base-heading"),k=g("openwb-base-button-group-input"),U=g("openwb-base-card"),H=g("font-awesome-layers"),D=g("openwb-base-alert"),G=g("openwb-base-array-input"),E=g("openwb-base-range-input"),Q=g("openwb-base-number-input"),X=g("template-auto-lock-plan"),Y=g("openwb-base-submit-buttons");return l(),d(B,null,[a(w,{show:_.showChargePointModal,title:"Ladepunkt löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:e[0]||(e[0]=r=>n.removeChargePoint(r,_.modalChargePointIndex))},{default:o(()=>[s(' Wollen Sie den Ladepunkt "'+v(n.getChargePointName(_.modalChargePointIndex))+'" (ID: '+v(_.modalChargePointIndex)+") wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ",1)]),_:1},8,["show"]),a(w,{show:_.showChargePointTemplateModal,title:"Ladepunkt-Profil löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:e[1]||(e[1]=r=>n.removeChargePointTemplate(r,_.modalChargePointTemplateIndex))},{default:o(()=>[s(' Wollen Sie das Ladepunkt-Profil "'+v(n.getChargePointTemplateName(_.modalChargePointTemplateIndex))+'" (ID: '+v(_.modalChargePointTemplateIndex)+") wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ",1)]),_:1},8,["show"]),m("div",Ue,[m("form",Se,[a(U,{title:"Ladepunkte",subtype:"primary",collapsible:!0,collapsed:!b.installAssistantActive},{header:o(()=>[a(h,{icon:["fas","charging-station"]}),e[7]||(e[7]=s(" Ladepunkte ",-1))]),default:o(()=>[(l(!0),d(B,null,z(n.installedChargePoints,(r,u)=>(l(),f(U,{key:u,title:r.name+" (ID: "+r.id+")",collapsible:!0,collapsed:!0,subtype:"primary"},{actions:o(i=>[i.collapsed?c("",!0):(l(),f(C,{key:0,class:"bg-danger clickable",title:"Ladepunkt löschen",onClick:L=>n.removeChargePointModal(L,u)},{default:o(()=>[a(h,{icon:["fas","trash"]})]),_:2},1032,["onClick"]))]),default:o(()=>[a(y,{title:"Bezeichnung",subtype:"text","model-value":r.name,"onUpdate:modelValue":i=>t.updateState(u,i,"name")},null,8,["model-value","onUpdate:modelValue"]),a(y,{title:"Modul",subtype:"text",disabled:"",readonly:"","model-value":t.$store.state.mqtt[u].type},null,8,["model-value"]),r.type!=="internal_openwb"||t.$store.state.mqtt["openWB/general/extern"]===!1?(l(),d("span",ze,[a(A,{title:"Ladepunkt-Profil",options:n.chargePointTemplateList,"model-value":t.$store.state.mqtt[u].template,"onUpdate:modelValue":i=>t.updateState(u,i,"template")},null,8,["options","model-value","onUpdate:modelValue"])])):c("",!0),t.$store.state.mqtt["openWB/optional/ocpp/config"].active===!0?(l(),f(y,{key:1,title:"OCPP-Chargebox ID","model-value":r.ocpp_chargebox_id,"onUpdate:modelValue":i=>t.updateState(u,i,"ocpp_chargebox_id")},{help:o(()=>[...e[8]||(e[8]=[s(" Bitte geben Sie hier die Chargebox ID ein, die im OCPP-Backend für diesen Ladepunkt verwendet wird. Sollen die Daten dieses Ladepunktes nicht an ein OCPP-Backend übertragen werden, lasse dieses Feld leer. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):c("",!0),e[14]||(e[14]=m("hr",null,null,-1)),a(I,{"charge-point":r,"onUpdate:configuration":i=>n.updateConfiguration(u,i)},null,8,["charge-point","onUpdate:configuration"]),(r.type!=="internal_openwb"||t.$store.state.mqtt["openWB/general/extern"]===!1)&&r.charging_type!=="DC"?(l(),d("div",Ie,[e[13]||(e[13]=m("hr",null,null,-1)),a(p,null,{default:o(()=>[...e[9]||(e[9]=[s(" Hardware-Optionen ",-1)])]),_:1,__:[9]}),a(k,{title:"automatische Phasenumschaltung vorhanden",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":r.auto_phase_switch_hw,"onUpdate:modelValue":i=>t.updateState(u,i,"auto_phase_switch_hw")},null,8,["model-value","onUpdate:modelValue"]),a(k,{title:"Control-Pilot-Unterbrechung vorhanden",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":r.control_pilot_interruption_hw,"onUpdate:modelValue":i=>t.updateState(u,i,"control_pilot_interruption_hw")},{help:o(()=>[...e[10]||(e[10]=[s(' Die Control-Pilot-Leitung ist im Ladekabel integriert und dient der Steuerung der Fahrzeugladung (An/Aus/Stromvorgaben). Bei einigen Fahrzeugen können durch die Regelung erzwungene, längere Ladestopps (z.B. beim PV-Laden) zu unerwünschten "Einschlaf"-Effekten des Fahrzeuges führen. Mit diesem Feature, welches hardwareseitig verbaut sein muss, kann ein Abstecken des Ladesteckers simuliert werden, um ein Aufwecken des Fahrzeuges zu ermöglichen. Die Funktion hängt immer auch vom Fahrzeugtyp ab. ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),a(p,null,{default:o(()=>[...e[11]||(e[11]=[s(" Elektrischer Anschluss ",-1)])]),_:1,__:[11]}),a(k,{title:"Anzahl angeschlossener Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:2,text:"2"},{buttonValue:3,text:"3"}],"model-value":r.connected_phases,"onUpdate:modelValue":i=>t.updateState(u,i,"connected_phases")},null,8,["model-value","onUpdate:modelValue"]),a(k,{title:"Phase 1 des Ladekabels",buttons:[{buttonValue:1,text:"EVU L1"},{buttonValue:2,text:"EVU L2"},{buttonValue:3,text:"EVU L3"}],"model-value":r.phase_1,"onUpdate:modelValue":i=>t.updateState(u,i,"phase_1")},{help:o(()=>[...e[12]||(e[12]=[s(" Hier ist anzugeben, an welcher Phase des Hausanschlusses (EVU-Punkt) die Phase 1 dieses Ladepunktes angeschlossen ist. Diese Information wird für das Lastmanagement benötigt, um bei einer Schieflast gezielt einzelne Ladepunkte zu drosseln.",-1),m("br",null,null,-1),s(' Bei mehreren Ladepunkten macht es Sinn, die Phasen der LP rotierend anzuschließen, damit mehrere "nicht-dreiphasig" ladende Fahrzeuge mit optimaler Leistung laden können, bevor das Lastmanagement eingreift.',-1),m("br",null,null,-1),s(" Es wird vorausgesetzt, dass das Drehfeld innerhalb der Installation gleich bleibt. Wenn z.B. L1 des Ladepunktes auf EVU-L2 liegt, muss L2 des Ladepunktes auf EVU-L3 aufgelegt sein (und L3 des Ladepunktes auf EVU-L1).",-1),m("br",null,null,-1),s(" Eine Möglichkeit, die zur Ladepunktphase L1 zugehörige EVU-Phase zu ermitteln, ist eine einphasige Ladung zu starten und die Phasenströme am EVU-Zähler zu beobachten. Mit einem zweiphasig ladenden Fahrzeug kann danach auch der Anschluss von L2 ermittelt und so das Drehfeld kontrolliert werden.",-1),m("br",null,null,-1),s(" Im Zweifel bitte das Drehfeld von einer Fachkraft prüfen und korrigieren lassen. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])])):c("",!0)]),_:2,__:[14]},1032,["title"]))),128)),Object.keys(n.installedChargePoints).length>0?(l(),d("hr",xe)):c("",!0),a(A,{title:"Verfügbare Ladepunkte","not-selected":"Bitte auswählen",options:n.getChargePointList(),"model-value":_.chargePointToAdd,"add-button":!0,"onUpdate:modelValue":e[2]||(e[2]=r=>_.chargePointToAdd=r),"onInput:add":n.addChargePoint},{help:o(()=>e[15]||(e[15]=[s(" Bitte einen Ladepunkt auswählen, der der openWB-Regelung hinzugefügt werden soll.",-1),m("br",null,null,-1),m("ul",null,[m("li",null," Interne openWB - wenn diese openWB über einen verbauten Ladepunkt mit Regelcontroller verfügt (z.B. Standard(+), Custom, Duo, Buchse, NICHT Standalone); ansonsten immer anlegen, egal ob diese openWB steuert = primary oder ferngesteuert wird = secondary "),m("li",null," Secondary openWB - wenn diese openWB (primary) die Fernsteuerung von weiteren openWB (secondary) übernimmt "),m("li",null,"MQTT-Ladepunkt - nur zur Nutzung des openWB-Simulators zugelassen"),m("li",null,"openWB Pro - wenn diese openWB (primary) die Fernsteuerung einer openWB Pro (secondary) übernimmt"),m("li",null," openWB series2 Satellit/Satellit Duo - wenn diese openWB (primary) die Fernsteuerung einer openWB series2 Satellit/Satellit Duo (secondary) übernimmt "),m("li",null," smartWB/EVSE-Wifi - wenn diese openWB (primary) die Fernsteuerung einer smartWB/EVSE-Wifi übernimmt ")],-1)])),_:1},8,["options","model-value","onInput:add"])]),_:1},8,["collapsed"]),e[37]||(e[37]=m("hr",{class:"border-secondary"},null,-1)),a(U,{title:"Ladepunkt-Profile",collapsible:!0,collapsed:!0},{header:o(()=>[a(H,{class:"fa-lg"},{default:o(()=>[a(h,{icon:["far","file"]}),a(h,{icon:["fas","charging-station"],transform:"shrink-8"})]),_:1}),e[16]||(e[16]=s(" Ladepunkt-Profile ",-1))]),actions:o(()=>[t.$store.state.mqtt["openWB/general/extern"]===!1?(l(),f(C,{key:0,class:"bg-success clickable",title:"Neues Ladepunkt-Profil anlegen",onClick:n.addChargePointTemplate},{default:o(()=>[a(h,{icon:["fas","plus"]})]),_:1},8,["onClick"])):c("",!0)]),default:o(()=>[t.$store.state.mqtt["openWB/general/extern"]===!0?(l(),d("div",De,[a(D,{subtype:"info"},{default:o(()=>e[17]||(e[17]=[s(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])),_:1,__:[17]})])):(l(),d("div",Ee,[(l(!0),d(B,null,z(n.chargePointTemplates,(r,u)=>(l(),f(U,{key:u,title:`${r.name} (ID: ${n.getChargePointTemplateIndex(u)})`,collapsible:!0,collapsed:!0},{actions:o(i=>[i.collapsed==!1?(l(),d("span",qe,[a(C,{class:"bg-success clickable",title:"Ladepunkt-Profil duplizieren",onClick:L=>n.addChargePointTemplate(L,u)},{default:o(()=>[a(h,{icon:["fas","copy"]})]),_:2},1032,["onClick"]),u.endsWith("/0")?c("",!0):(l(),f(C,{key:0,class:"bg-danger clickable ml-1",title:"Ladepunkt-Profil löschen",onClick:L=>n.removeChargePointTemplateModal(L,u)},{default:o(()=>[a(h,{icon:["fas","trash"]})]),_:2},1032,["onClick"]))])):c("",!0)]),default:o(()=>[a(y,{title:"Bezeichnung",subtype:"text","model-value":r.name,disabled:u.endsWith("/0"),"onUpdate:modelValue":i=>t.updateState(u,i,"name")},oe({_:2},[u.endsWith("/0")?{name:"help",fn:o(()=>[e[18]||(e[18]=s(" Das Standard-Profil kann nicht umbenannt werden. ",-1))]),key:"0"}:void 0]),1032,["model-value","disabled","onUpdate:modelValue"]),n.dcChargingEnabled===!0?(l(),f(k,{key:0,title:"Typ des Ladeprofils",buttons:[{buttonValue:"AC",text:"AC"},{buttonValue:"DC",text:"DC"}],"model-value":r.charging_type,"onUpdate:modelValue":i=>t.updateState(u,i,"charging_type")},null,8,["model-value","onUpdate:modelValue"])):c("",!0),e[35]||(e[35]=m("hr",null,null,-1)),a(p,null,{default:o(()=>[...e[19]||(e[19]=[s(" Zugangskontrolle ",-1)])]),_:1,__:[19]}),a(k,{title:"Sperre nach Abstecken",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":r.disable_after_unplug,"onUpdate:modelValue":i=>t.updateState(u,i,"disable_after_unplug")},{help:o(()=>[...e[20]||(e[20]=[s(" Sperrt den Ladepunkt nach Abstecken eines Fahrzeuges. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),t.$store.state.mqtt["openWB/optional/rfid/active"]===!0&&!b.installAssistantActive?(l(),d("div",Me,[r.disable_after_unplug?(l(),f(G,{key:0,title:"Zugeordnete ID-Tags","no-elements-message":"Keine ID-Tags zugeordnet.","model-value":r.valid_tags,"onUpdate:modelValue":i=>t.updateState(u,i,"valid_tags")},{help:o(()=>[...e[21]||(e[21]=[s(" Die hier eingetragenen ID-Tags dienen ausschließlich zum Entsperren des Ladepunktes. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"])):c("",!0)])):c("",!0),e[36]||(e[36]=m("hr",null,null,-1)),a(p,null,{default:o(()=>[...e[22]||(e[22]=[s(" Angaben zum konfigurierten Ladestrom der openWB ",-1)])]),_:1,__:[22]}),a(D,{subtype:"info"},{default:o(()=>[e[23]||(e[23]=s(" Hier werden die maximalen Ladeströme entsprechend der in dem zugeordneten Ladepunkt genutzten Phasen eingestellt.",-1)),e[24]||(e[24]=m("br",null,null,-1)),e[25]||(e[25]=s(" Generell gilt, dass diese Werte in Übereinstimmung mit der Ausführung des Ladepunktes und des elektrischen Anschlusses bzw. der Absicherung zu wählen sind. ",-1)),r.charging_type==="AC"?(l(),d("span",Fe," Bei einer openWB mit 22kW Maximalleistung sind hier jeweils 32A einzustellen. Ist die openWB beispielsweise auf 11kW begrenzt (KfW-Förderung oder die Zuleitung ist mit 16A abgesichert), dann sind hier jeweils 16A einzustellen. ")):c("",!0),e[26]||(e[26]=m("br",null,null,-1)),e[27]||(e[27]=s(" Komplexere Installationen mit mehreren Ladepunkten werden im ",-1)),e[28]||(e[28]=m("a",{href:"https://github.com/openWB/core/wiki/Lastmanagement-und-kaskadierte-Z%C3%A4hler",target:"_blank",rel:"noopener noreferrer"},"Wiki zum Lastmanagement",-1)),e[29]||(e[29]=s(" beschrieben. ",-1))]),_:2,__:[23,24,25,26,27,28,29]},1024),r.charging_type==="AC"||n.dcChargingEnabled!==!0?(l(),d("div",Oe,[a(E,{title:"Maximalstrom bei einer Phase",min:6,max:32,step:1,unit:"A","model-value":r.max_current_single_phase,"onUpdate:modelValue":i=>t.updateState(u,i,"max_current_single_phase")},null,8,["model-value","onUpdate:modelValue"]),a(E,{title:"Maximalstrom mehrere Phasen",min:6,max:32,step:1,unit:"A","model-value":r.max_current_multi_phases,"onUpdate:modelValue":i=>t.updateState(u,i,"max_current_multi_phases")},null,8,["model-value","onUpdate:modelValue"])])):(l(),f(Q,{key:3,title:"Maximalleistung",min:22,max:420,step:1,unit:"kW",precision:5,"model-value":t.ac_current2dc_power(r.dc_max_current),"onUpdate:modelValue":i=>t.updateState(u,t.dc_power2ac_current(i),"dc_max_current")},null,8,["model-value","onUpdate:modelValue"])),b.installAssistantActive?c("",!0):(l(),d("div",Te,[e[34]||(e[34]=m("hr",null,null,-1)),a(p,null,{default:o(()=>[...e[30]||(e[30]=[s(" Sperren nach Uhrzeit (Komplettsperrung - keine Freischaltung per ID-Tag möglich) ",-1)])]),_:1,__:[30]}),a(k,{title:"Sperren nach Uhrzeit aktiv",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":r.autolock.active,"onUpdate:modelValue":i=>t.updateState(u,i,"autolock.active")},{help:o(()=>[...e[31]||(e[31]=[s(" WirdSperren nach Uhrzeit aktiviert, können Fahrzeugladungen mittels Zeitplan auf gewünschte Zeitbereiche eingeschränkt werden. Dies kann z.B. bei Zugänglichkeiten zu Ladepunkten in öffentlichen oder halb-öffentlichen Bereichen sinnvoll sein. In dieser Zeit ist keine Freischaltung per RFID, Fahrzeugerkennung oder Pin möglich. ",-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),a(k,{title:"Erst nach Ladeende sperren",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":r.autolock.wait_for_charging_end,"onUpdate:modelValue":i=>t.updateState(u,i,"autolock.wait_for_charging_end")},{help:o(()=>[...e[32]||(e[32]=[s(' Wenn ein Zeitplan Sperren nach Uhrzeit aktiviert, werden alle Ladepunkte direkt gesperrt und laufende Ladevorgänge beendet. Wird hier "Ja" ausgewählt, dann werden laufende Ladevorgänge NICHT beendet und diese Ladepunkte erst nach abgeschlossener Ladung gesperrt. ',-1)])]),_:2},1032,["model-value","onUpdate:modelValue"]),a(p,null,{actions:o(()=>[a(C,{class:"bg-success clickable",title:"Neuen Autolock Zeitplan anlegen",onClick:S(i=>n.addChargePointTemplateAutolockPlan(u),["stop"])},{default:o(()=>[a(h,{icon:["fas","plus"]})]),_:2},1032,["onClick"])]),default:o(()=>[e[33]||(e[33]=s(" Zeitpläne für Sperren nach Uhrzeit ",-1))]),_:2,__:[33]},1024)])),(l(!0),d(B,null,z(r.autolock.plans,(i,L)=>(l(),f(X,{key:L,"model-value":i,"template-id":r.id,"onUpdate:modelValue":x=>t.updateState(u,x,`autolock.plans.${L}`),onSendCommand:e[3]||(e[3]=x=>t.$emit("sendCommand",x))},null,8,["model-value","template-id","onUpdate:modelValue"]))),128))]),_:2,__:[35,36]},1032,["title"]))),128))]))]),_:1}),a(Y,{"form-name":"chargePointInstallationForm",onSave:e[4]||(e[4]=r=>t.$emit("save")),onReset:e[5]||(e[5]=r=>t.$emit("reset")),onDefaults:e[6]||(e[6]=r=>t.$emit("defaults"))})])])],64)}const Re=W(Ae,[["render",Ne],["__scopeId","data-v-75fe5743"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/ChargePointInstallation.vue"]]),He=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{ie as C,ge as a,Re as b,He as c};
