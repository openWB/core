const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Status-D2eYlOUg.js","assets/vendor-fortawesome-CaZSeuAc.js","assets/vendor-BoRpwYSS.js","assets/vendor-sortablejs-B7wL87hN.js","assets/vendor-D1GV4U4l.css","assets/vendor-chartjs-CpJYMu3X.js","assets/vendor-luxon-BDx6lZXm.js","assets/vendor-bootstrap-C_iHcwa3.js","assets/vendor-jquery-CEMonh9Y.js","assets/vendor-bootstrap-Ct-dCSDz.css","assets/vendor-axios-B0SCfrz2.js","assets/Status-C2EBkHqs.css","assets/ChargeLog-5SmEtQE4.js","assets/ChargeLog-D2ZLixbI.css","assets/Chart-CvLzzNvF.js","assets/Chart-BggLkBbQ.css","assets/GeneralConfiguration-CUfcGQSf.js","assets/dynamic-import-helper-BheWnx7M.js","assets/IdentificationConfiguration-Dp9YNwp3.js","assets/DisplayConfiguration-BHI0XUUi.js","assets/GeneralChargeConfiguration-DPYPi5iC.js","assets/SurplusChargeConfiguration-EIhZbCCU.js","assets/ActiveBatControlConfiguration-K09KmeFY.js","assets/HardwareInstallation-BfK4Khot.js","assets/LoadManagementConfiguration-H9Ayhf8L.js","assets/OpenwbSortableList-7mToBKP5.js","assets/OpenwbSortableList-C11EhIQj.css","assets/ChargePointInstallation-CeVgqT33.js","assets/ChargePointInstallation-37TSBtDo.css","assets/VehicleConfiguration-DRaEW1yJ.js","assets/IoConfiguration-DklF2iWd.js","assets/CloudConfiguration-Dp_Tm1ht.js","assets/MqttBridgeConfiguration-BoR0LkTi.js","assets/DebugConfiguration-D1hNNCrX.js","assets/DebugConfiguration-CN753w98.css","assets/Support-jyrPASeP.js","assets/LegalSettings-ftmhlWOj.js","assets/SystemConfiguration-DWUnffg2.js","assets/SystemConfiguration-BWslT2W-.css","assets/SecurityConfiguration-DJ_4CK7h.js","assets/DataManagement-DGXXowbm.js","assets/InstallAssistant-8StM5Uo6.js","assets/Error-C69P4rxH.js","assets/TestingStore-RCjW77Dg.js"])))=>i.map(i=>d[i]);
import{_ as w,f as u,j as h,k as S,l as o,m as b,q as d,u as l,x as _,y as m,z as f,A as E,D as g,E as q,F as O,G as $,I as H,J as V,K as y,L as T,M as P,N as Z,O as re,P as de,Q as ue,R as ce,T as R,S as G,n as pe,U as me,V as fe,W as ge,X as be,Y as he,Z as _e,$ as ve,a0 as ye}from"./vendor-BoRpwYSS.js";import{l as I,f as Q,a as Y,F as M,b as we,c as ke,d as N,e as Se,g as z,h as Ce,i as Be,j as $e,k as Oe,m as Ae,n as Ie,o as Me,p as Te,q as Ve,r as Pe,s as qe,t as De,u as Le,v as Ee,w as X,x as xe,y as We,z as je,A as Re,B as Ne,C as ee,D as ze,E as Ue,G as Fe,H as He,I as Ge,J as Ke,K as Je,L as Ze,M as Qe,N as Ye,O as Xe,P as te,Q as et,R as tt,S as st}from"./vendor-fortawesome-CaZSeuAc.js";import"./vendor-bootstrap-C_iHcwa3.js";import{p as nt,a as ot}from"./vendor-axios-B0SCfrz2.js";import"./vendor-sortablejs-B7wL87hN.js";import"./vendor-jquery-CEMonh9Y.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();const at={name:"OpenwbAlert",props:{subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}}};function it(e,t,s,c,i,n){return o(),u("div",{class:S(["card-text alert","alert-"+s.subtype])},[h(e.$slots,"default",{},void 0,!0)],2)}const lt=w(at,[["render",it],["__scopeId","data-v-055c15aa"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAlert.vue"]]),rt=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"}));I.add(Q,Y);const dt={name:"OpenwbBaseSettingElement",components:{FontAwesomeIcon:M},data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},ut={key:0,class:"col-md-4 col-form-label"},ct={class:"form-row"},pt={key:0,class:"form-text alert alert-info my-1 small flex-fill"};function mt(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-tooltip");return o(),u("div",{class:S(["form-row",e.$slots.title?"mb-1":"mx-0"])},[e.$slots.title?(o(),u("div",ut,[h(e.$slots,"title",{},void 0,!0),_(p,{description:`Hilfe ${i.showHelp?"verbergen":"anzeigen"}`},{default:m(()=>[e.$slots.help?(o(),f(a,{key:0,icon:i.showHelp?["fas","question-circle"]:["far","question-circle"],class:S(["clickable ml-1",i.showHelp?"text-info":""]),onClick:E(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):d("",!0)]),_:1},8,["description"])])):d("",!0),l("div",{class:S(e.$slots.title?"col-md-8":"col px-0")},[l("div",{class:S({"form-row":e.$slots.title})},[h(e.$slots,"default",{},()=>[t[0]||(t[0]=g("*ELEMENT MISSING*",-1))],!0)],2),l("div",ct,[i.showHelp?(o(),u("span",pt,[h(e.$slots,"help",{},void 0,!0)])):d("",!0)])],2)],2)}const D=w(dt,[["render",mt],["__scopeId","data-v-33864f66"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSettingElement.vue"]]),ft=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"})),gt={name:"BaseSettingComponents",data(){return{uid:Math.random().toString(36).substring(2,15)}}},L=w(gt,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/BaseSettingComponents.vue"]]);I.add(we,ke,N,Se);const bt={name:"OpenwbArrayInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!0},modelValue:{type:Array,default:()=>[]},validElements:{type:Array,default:()=>null},noElementsMessage:{type:String,default:()=>"Keine Elemente zugeordnet."},disabled:{type:Boolean,default:()=>!1},readonly:{type:Boolean,default:()=>!1}},emits:["update:modelValue"],data(){return{newTag:""}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},remainingElements(){return this.validElements===null?null:this.validElements.filter(e=>!this.value.includes(e.value||e))},newTagValid:{get(){return this.newTag.length>0&&!this.value.includes(this.newTag)&&(this.validElements===null||this.validElements.includes(this.newTag)||this.validElements.some(e=>e.value===this.newTag))&&this.$refs.tagInput?.checkValidity()}},tagLabel(){return e=>{if(this.validElements===null)return e;{const t=this.validElements.find(s=>(s.value||s)===e);return t?t.label||t.value||t:e}}}},methods:{addTag(){if(this.newTagValid){const e=[...this.value,this.newTag].sort();this.value=e,this.newTag=""}this.$refs.tagInput.focus()},removeTag(e){let t=[...this.value];t.splice(e,1),this.value=t}}},ht={key:0,class:"w-100"},_t={class:"input-group"},vt={class:"input-group-prepend"},yt={class:"input-group-text"},wt=["id","disabled"],kt=["id","disabled"],St={value:"",disabled:""},Ct=["value"],Bt={class:"input-group-append"},$t={class:"tagList mt-1 w-100"},Ot={key:0,class:"noTag"};function At(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[s.readonly||s.disabled?d("",!0):(o(),u("div",ht,[l("div",_t,[l("div",vt,[l("div",yt,[h(e.$slots,"input-prefix",{},()=>[_(a,{icon:["fas","tag"]})],!0)])]),s.validElements===null?O((o(),u("input",$({key:0,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[0]||(t[0]=r=>i.newTag=r),type:"text",class:"form-control"},e.$attrs,{disabled:s.disabled,onKeyup:t[1]||(t[1]=H((...r)=>n.addTag&&n.addTag(...r),["enter"]))}),null,16,wt)),[[V,i.newTag]]):O((o(),u("select",$({key:1,id:`${e.uid}-tag-input`,ref:"tagInput","onUpdate:modelValue":t[2]||(t[2]=r=>i.newTag=r),class:"form-control"},e.$attrs,{disabled:s.disabled,onKeyup:t[3]||(t[3]=H((...r)=>n.addTag&&n.addTag(...r),["enter"]))}),[l("option",St,y(n.remainingElements.length>0?"Bitte wählen...":"Keine weiteren Optionen verfügbar"),1),(o(!0),u(T,null,P(n.remainingElements,(r,v)=>(o(),u("option",{key:v,value:r.value||r},y(r.label||r.value||r),9,Ct))),128))],16,kt)),[[Z,i.newTag]]),l("div",Bt,[l("div",{class:S(["input-group-text",n.newTagValid?"bg-success clickable":"not-clickable"]),onClick:t[4]||(t[4]=(...r)=>n.addTag&&n.addTag(...r))},[h(e.$slots,"input-add",{},()=>[_(a,{icon:["fas","plus"]})],!0)],2)])])])),l("div",$t,[n.value.length==0?(o(),u("span",Ot,[_(a,{icon:["fas","info-circle"]}),g(" "+y(s.noElementsMessage),1)])):d("",!0),(o(!0),u(T,null,P(n.value,(r,v)=>(o(),u("span",{key:v,class:"tag"},[h(e.$slots,"element-prefix",{},()=>[_(a,{icon:["fas","tag"]})],!0),g(" "+y(n.tagLabel(r))+" ",1),s.readonly||s.disabled?d("",!0):(o(),f(a,{key:0,class:"clickable remove-element",icon:["fas","times-circle"],onClick:k=>n.removeTag(v)},null,8,["onClick"]))]))),128))])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const It=w(bt,[["render",At],["__scopeId","data-v-9de93d37"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseArrayInput.vue"]]),Mt=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),Tt={name:"OpenwbAvatar"},Vt={class:"avatar"};function Pt(e,t,s,c,i,n){return o(),u("div",Vt,[h(e.$slots,"default",{},()=>[t[0]||(t[0]=g("?",-1))],!0)])}const qt=w(Tt,[["render",Pt],["__scopeId","data-v-06082a1a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseAvatar.vue"]]),Dt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));I.add(z);const Lt={name:"OpenwbButtonRow",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{buttons:{type:Array,required:!0},modelValue:{type:[String,Number,Boolean],default:null},disabled:{type:Boolean,default:!1},uid:{type:String,required:!0}},emits:["update:modelValue","button-click"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Et={class:"btn-group btn-block btn-group-toggle"},xt=["for"],Wt=["id","value","disabled","onClick"];function jt(e,t,s,c,i,n){const a=b("font-awesome-icon");return o(),u("div",Et,[(o(!0),u(T,null,P(s.buttons,p=>(o(),u("label",{key:p.buttonValue,class:S(["btn btn-same-size btn-centered",[{active:s.modelValue===p.buttonValue},{disabled:s.disabled},p.class?p.class:"btn-outline-info"]]),for:`${s.uid}-${p.buttonValue}`},[l("span",null,[O(l("input",$({id:`${s.uid}-${p.buttonValue}`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"radio",value:p.buttonValue},{ref_for:!0},e.$attrs,{disabled:s.disabled,onClick:r=>e.$emit("button-click",p.buttonValue)}),null,16,Wt),[[re,n.value]]),h(e.$slots,"label-"+p.buttonValue,{},()=>[g(y(p.text),1)],!0),t[1]||(t[1]=l("span",null," ",-1)),_(a,{icon:["fas","check"],style:de([n.value==p.buttonValue?"visibility: visible":"visibility: hidden"])},null,8,["style"])])],10,xt))),128))])}const se=w(Lt,[["render",jt],["__scopeId","data-v-4bd221b6"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonRow.vue"]]),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),Nt={name:"OpenwbButtonGroupInput",components:{OpenwbBaseSettingElement:D,OpenwbBaseButtonRow:se},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Number,Boolean],default:void 0},buttons:{type:Array,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxButtonsPerRow:{type:Number,default:Number.POSITIVE_INFINITY}},emits:["update:modelValue","button-click"],data(){return{containerWidth:0}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},maxButtonsPerRowAuto(){return this.containerWidth<=200?1:this.containerWidth<=360?2:this.containerWidth<=550?3:1/0},buttonRows(){const e=[];for(let t=0;t<this.buttons.length;t+=this.maxButtonsPerRowAuto)e.push(this.buttons.slice(t,t+this.maxButtonsPerRowAuto));return e},screenSizeXs(){return this.containerWidth<=360},screenSizeSm(){return this.containerWidth<=550},screenSizeMd(){return this.containerWidth<=1024}},mounted(){this.updateContainerWidth(),window.addEventListener("resize",this.updateContainerWidth)},beforeUnmount(){window.removeEventListener("resize",this.updateContainerWidth)},methods:{updateContainerWidth(){const e=this.$refs.container;e&&(this.containerWidth=e.offsetWidth)}}},zt={ref:"container",class:"btn-group-multi"};function Ut(e,t,s,c,i,n){const a=b("openwb-base-button-row"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[l("div",zt,[(o(!0),u(T,null,P(n.buttonRows,(r,v)=>(o(),f(a,$({key:v,buttons:r,uid:e.uid,"model-value":n.value,disabled:s.disabled},{ref_for:!0},e.$attrs,{"onUpdate:modelValue":t[0]||(t[0]=k=>n.value=k),onButtonClick:t[1]||(t[1]=k=>e.$emit("button-click",k))}),q({_:2},[P(r,k=>({name:`label-${k.buttonValue}`,fn:m(B=>[h(e.$slots,`label-${k.buttonValue}`,$({ref_for:!0},B),void 0,!0)])}))]),1040,["buttons","uid","model-value","disabled"]))),128))],512)]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Ft=w(Nt,[["render",Ut],["__scopeId","data-v-31e583df"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonGroupInput.vue"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Gt={name:"OpenwbClickButton",props:{title:{type:String,required:!1,default:""},tooltip:{type:String,required:!1,default:""}},emits:["buttonClicked"],methods:{click(e){this.$emit("buttonClicked",e)}}},Kt=["title"];function Jt(e,t,s,c,i,n){return o(),u("button",{type:"button",class:"btn btn-block",title:s.tooltip,onClick:t[0]||(t[0]=E((...a)=>n.click&&n.click(...a),["prevent"]))},[h(e.$slots,"default",{},()=>[g(y(s.title),1)],!0)],8,Kt)}const ne=w(Gt,[["render",Jt],["__scopeId","data-v-2e9c095b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseClickButton.vue"]]),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),Qt={name:"OpenwbButtonInput",components:{OpenwbBaseSettingElement:D,OpenwbBaseClickButton:ne},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},buttonText:{type:String,required:!1,default:void 0},disabled:{type:Boolean,default:!1},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"}},emits:["buttonClicked"],methods:{handleClick(e){this.$emit("buttonClicked",e)}}};function Yt(e,t,s,c,i,n){const a=b("openwb-base-click-button"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)])]),default:m(()=>[_(a,$({class:(s.disabled?"btn-outline-":"btn-")+s.subtype,disabled:s.disabled},e.$attrs,{onButtonClicked:n.handleClick}),{default:m(()=>[g(y(s.buttonText),1)]),_:1},16,["class","disabled","onButtonClicked"])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const Xt=w(Qt,[["render",Yt],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseButtonInput.vue"]]),es=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));I.add(Ce,Be);const ts={name:"OpenwbCard",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{title:{type:String,default:void 0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"secondary"},bodyBg:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark","pink","white"].indexOf(e)!==-1},default:"light"},collapsible:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1}},emits:["collapsed","expanded"],data(){return{isCollapsed:this.collapsible&&this.collapsed}},methods:{toggleBody(){this.collapsible===!0&&(this.isCollapsed=!this.isCollapsed,this.$emit(this.isCollapsed?"collapsed":"expanded"))}}},ss={class:"form-group mb-0"},ns={class:"form-row vaRow mb-0 py-2"},os={class:"col"},as={class:"card-actions ml-4"},is={key:0,class:"card-actions mr-2"},ls={key:2,class:"card-footer"};function rs(e,t,s,c,i,n){const a=b("font-awesome-icon");return o(),u("div",{class:S(["card","border-"+s.subtype])},[s.title!==void 0||e.$slots.header?(o(),u("div",{key:0,class:S(["card-header py-1","bg-"+s.subtype]),onClick:t[0]||(t[0]=(...p)=>n.toggleBody&&n.toggleBody(...p))},[l("div",ss,[l("div",ns,[l("div",os,[h(e.$slots,"header",{collapsed:i.isCollapsed},()=>[g(y(s.title),1)],!0)])])]),l("div",as,[e.$slots.actions?(o(),u("div",is,[h(e.$slots,"actions",{collapsed:i.isCollapsed},void 0,!0)])):d("",!0),s.collapsible?(o(),f(a,{key:1,icon:i.isCollapsed?["fas","chevron-right"]:["fas","chevron-down"]},null,8,["icon"])):d("",!0)])],2)):d("",!0),i.isCollapsed===!1?(o(),u("div",$({key:1,class:["card-body",[s.title==null&&!e.$slots.header?"border-radius-top-inherit":"",e.$slots.footer?"":"border-radius-bottom-inherit","bg-"+s.bodyBg]]},e.$attrs),[h(e.$slots,"default",{},void 0,!0)],16)):d("",!0),e.$slots.footer&&i.isCollapsed===!1?(o(),u("div",ls,[h(e.$slots,"footer",{},void 0,!0)])):d("",!0)],2)}const ds=w(ts,[["render",rs],["__scopeId","data-v-9833c353"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCard.vue"]]),us=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),cs={name:"OpenwbCheckboxInput",components:{OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Boolean}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},ps={class:"col-md-8"},ms=["id"];function fs(e,t,s,c,i,n){const a=b("openwb-base-setting-element");return o(),f(a,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)])]),default:m(()=>[l("div",ps,[O(l("input",$({id:`${e.uid}-checkbox-input`,"onUpdate:modelValue":t[0]||(t[0]=p=>n.value=p),class:"form-control",type:"checkbox"},e.$attrs),null,16,ms),[[ue,n.value]])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const gs=w(cs,[["render",fs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCheckboxInput.vue"]]),bs=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));I.add($e);const hs={name:"OpenwbColorPicker",components:{FontAwesomeIcon:M},mixins:[L],props:{defaultColor:{type:String,required:!1,default:void 0,validator:e=>/^#[0-9A-F]{6}$/i.test(e)},modelValue:{type:String,required:!1,default:"#000000",validator:e=>/^#[0-9A-F]{6}$/i.test(e)}},emits:["update:model-value"],methods:{changed(e){this.$emit("update:model-value",e)}}},_s={class:"wrapper"},vs=["id","value","title"];function ys(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-tooltip");return o(),u("div",_s,[l("input",{id:`${e.uid}-color-input`,type:"color",class:"custom-color-picker",value:s.modelValue,title:`Farbe: ${s.modelValue}`,onInput:t[0]||(t[0]=r=>n.changed(r.target.value))},null,40,vs),s.defaultColor?(o(),f(p,{key:0,description:`Zurücksetzen auf Standardfarbe (${s.defaultColor})`},{default:m(()=>[_(a,{class:"ml-1 clickable",icon:["fas","rotate-left"],onClick:t[1]||(t[1]=r=>n.changed(s.defaultColor))})]),_:1},8,["description"])):d("",!0)])}const ws=w(hs,[["render",ys],["__scopeId","data-v-1378b599"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseColorPicker.vue"]]),ks=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),{text:K,copy:Ss,copied:Cs,isSupported:Bs}=ce({copiedDuring:3e3,legacy:!0});I.add(Oe,Ae);const $s={name:"OpenwbCopyToClipboard",components:{FontAwesomeIcon:M},props:{tooltip:{type:String,default:"Wert kopieren"}},data(){return{}},computed:{contentText(){return this.$refs.content?this.$refs.content.innerText.trim():""},isCopied(){return Cs.value&&K.value===this.contentText},copySupported(){return Bs.value}},methods:{click(){this.copySupported&&Ss(this.contentText).then(()=>{console.debug("Text copied to clipboard:",K.value)}).catch(e=>{console.error("Failed to copy text to clipboard:",e)})}}},Os=["title"],As={ref:"content"};function Is(e,t,s,c,i,n){const a=b("font-awesome-icon");return o(),u("span",{title:n.copySupported&&!n.isCopied?s.tooltip:"",class:S({"copy-me":n.copySupported&&!n.isCopied}),onClick:t[0]||(t[0]=E((...p)=>n.click&&n.click(...p),["stop"]))},[l("span",As,[h(e.$slots,"default",{},void 0,!0)],512),n.copySupported?(o(),f(a,{key:0,class:"ml-1",icon:n.isCopied?["fas","clipboard-check"]:["fas","clipboard"]},null,8,["icon"])):d("",!0)],10,Os)}const Ms=w($s,[["render",Is],["__scopeId","data-v-81826ebe"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseCopyToClipboard.vue"]]),Ts=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"}));I.add(Q,Y,z);const Vs={name:"OpenwbHeading",components:{FontAwesomeIcon:M},inheritAttrs:!1,data(){return{showHelp:!1}},methods:{toggleHelp(){this.showHelp=!this.showHelp&&this.$slots.help!==void 0}}},Ps={class:"heading-text"},qs={key:0,class:"actions"},Ds={class:""},Ls={key:0,class:"form-row alert alert-info small flex-fill"};function Es(e,t,s,c,i,n){const a=b("font-awesome-icon");return o(),u(T,null,[l("div",$({class:"card-text card-text-heading"},e.$attrs),[l("div",Ps,[h(e.$slots,"default",{},void 0,!0),e.$slots.help?(o(),f(a,{key:0,icon:i.showHelp?["fas","question-circle"]:["far","question-circle"],class:S(["clickable",i.showHelp?"text-info":""]),onClick:E(n.toggleHelp,["stop"])},null,8,["icon","class","onClick"])):d("",!0)]),e.$slots.actions?(o(),u("span",qs,[h(e.$slots,"actions",{},void 0,!0)])):d("",!0)],16),l("div",Ds,[i.showHelp?(o(),u("span",Ls,[h(e.$slots,"help",{},void 0,!0)])):d("",!0)])],64)}const xs=w(Vs,[["render",Es],["__scopeId","data-v-cbe4e96e"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseHeading.vue"]]),Ws=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));I.add(Ie,Me,Te,Ve);const W={null:{value:null,icon:["fas","question"],iconClass:"text-secondary",title:"Nicht relevant",nextValue:!0},true:{value:!0,icon:["fas","square"],iconClass:"",title:"Geschlossen",nextValue:!1},false:{value:!1,icon:["far","square"],iconClass:"",title:"Offen",nextValue:null}},js={name:"OpenwbIoPattern",components:{FontAwesomeIcon:M},inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Array,required:!1,default:()=>[]}},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{getIcon(e){return W[e].icon},getIconClass(e){return W[e].iconClass},getTitle(e){return W[e].title},toggleInput(e,t){this.value[e]=W[t].nextValue}}};function Rs(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-tooltip"),r=b("openwb-base-setting-element");return o(),f(r,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)])]),default:m(()=>[(o(!0),u(T,null,P(n.value,(v,k)=>(o(),u("span",{key:k},[_(p,{description:n.getTitle(v)},{default:m(()=>[_(a,{icon:n.getIcon(v),class:S([n.getIconClass(v),"fa-fw clickable"]),size:"2x",transform:v=="undefined"?"shrink-6":null,mask:v=="undefined"?["fas","square"]:null,onClick:E(B=>n.toggleInput(k,v),["stop","prevent"]),onMousedown:t[0]||(t[0]=E(()=>{},["stop","prevent"])),onMouseup:t[1]||(t[1]=E(()=>{},["stop","prevent"]))},null,8,["icon","class","transform","mask","onClick"])]),_:2},1032,["description"])]))),128))]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"0"}:void 0]),1024)}const Ns=w(js,[["render",Rs],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseIoPattern.vue"]]),zs=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"})),Us={name:"OpenwbModalDialog",props:{title:{type:String,required:!1,default:""},subtype:{type:String,validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},buttons:{type:Array,default:void 0},footerAlignment:{type:String,validator:function(e){return["around","between","center","end","start"].indexOf(e)!==-1},default:"end"},preventClose:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},emits:["modal-result"],computed:{myButtons(){var e=[];return this.buttons!==void 0&&(e=this.buttons),e.findIndex(t=>t.event==="close")===-1&&!this.preventClose&&e.push({text:"Schließen",event:"close"}),e}},methods:{handleClick(e){e.stopPropagation();let t=e.target.getAttribute("data-event");t===null&&(t="close"),(t!="close"||!this.preventClose)&&this.$emit("modal-result",t)}}},Fs={class:"modal-content"},Hs={class:"modal-title"},Gs={class:"modal-body"},Ks=["data-event"];function Js(e,t,s,c,i,n){return s.show?(o(),f(R,{key:0,to:"body"},[t[5]||(t[5]=l("div",{class:"modal-backdrop fade show"},null,-1)),l("div",{class:"modal fade d-block show",role:"dialog",onClick:t[3]||(t[3]=(...a)=>n.handleClick&&n.handleClick(...a))},[l("div",{class:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document",onClick:t[2]||(t[2]=E(()=>{},["stop"]))},[l("div",Fs,[l("div",{class:S(["modal-header","bg-"+s.subtype])},[l("h4",Hs,y(s.title),1),s.preventClose?d("",!0):(o(),u("button",{key:0,type:"button",class:"close",onClick:t[0]||(t[0]=(...a)=>n.handleClick&&n.handleClick(...a))}," × "))],2),l("div",Gs,[h(e.$slots,"default",{},()=>[t[4]||(t[4]=g("# Body #",-1))])]),n.myButtons.length>0?(o(),u("div",{key:0,class:S(["modal-footer d-flex","justify-content-"+s.footerAlignment])},[(o(!0),u(T,null,P(n.myButtons,a=>(o(),u("button",{key:a.text,type:"button",class:S(["btn",a.subtype?"btn-"+a.subtype:"btn-secondary"]),"data-dismiss":"modal","data-event":a.event?a.event:"close",onClick:t[1]||(t[1]=(...p)=>n.handleClick&&n.handleClick(...p))},y(a.text),11,Ks))),128))],2)):d("",!0)])])])])):d("",!0)}const Zs=w(Us,[["render",Js],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseModalDialog.vue"]]),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Zs},Symbol.toStringTag,{value:"Module"}));I.add(Pe);const Ys={name:"OpenwbNumberInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},precision:{type:Number,default:void 0},emptyValue:{type:[Number,null],required:!1,default:null}},emits:["update:modelValue"],computed:{value:{get(){return this.precision!==void 0?parseFloat(Math.round(this.modelValue*Math.pow(10,this.precision))/Math.pow(10,this.precision)):this.modelValue},set(e){(isNaN(e)||typeof e!="number")&&(e=this.emptyValue),this.$emit("update:modelValue",e)}}}},Xs={class:"input-group"},en={class:"input-group-prepend"},tn={class:"input-group-text"},sn=["id"],nn={key:0,class:"input-group-append"},on={class:"input-group-text"},an={key:1,class:"input-group-append"},ln={class:"input-group-text p-0"};function rn(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[l("div",Xs,[l("div",en,[l("div",tn,[_(a,{icon:["fas","calculator"]})])]),O(l("input",$({id:`${e.uid}-number-input`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"number",class:"form-control"},e.$attrs),null,16,sn),[[V,n.value,void 0,{number:!0}]]),s.unit?(o(),u("div",nn,[l("div",on,y(s.unit),1)])):d("",!0),e.$slots.append?(o(),u("div",an,[l("div",ln,[h(e.$slots,"append",{},void 0,!0)])])):d("",!0)])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const dn=w(Ys,[["render",rn],["__scopeId","data-v-c2fb7eef"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseNumberInput.vue"]]),un=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"}));I.add(qe,De);const cn={name:"OpenwbRangeInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:Number,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:100},step:{type:Number,required:!1,default:1},labels:{type:Array,required:!1,default:void 0}},emits:["update:modelValue"],computed:{label(){var e;return this.labels&&this.sliderValue!=null?this.sliderValue<this.labels.length?e=this.labels[this.sliderValue].label:console.error("index out of bounds: "+this.sliderValue):e=this.sliderValue,typeof e=="number"&&(e=e.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision}),this.unit&&(e+=" "+this.unit)),e},precision(){if(!isFinite(this.step))return 0;for(var e=1,t=0;Math.round(this.step*e)/e!==this.step;)e*=10,t++;return t},sliderValue:{get(){if(this.labels){var e=void 0;for(let t=0;t<this.labels.length;t++)if(this.labels[t].value==this.modelValue){e=t;break}return e===void 0&&this.modelValue!==void 0?(console.warn("sliderValue: not found in values: ",this.modelValue,"using min as default: ",this.min),this.min):e}return this.modelValue},set(e){if(this.labels){var t=this.labels[e].value;this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",e)}}},methods:{increment(){var e=Math.min(this.sliderValue+this.step,this.max);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var e=Math.max(this.sliderValue-this.step,this.min);this.sliderValue=Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}},pn={class:"w-100"},mn={class:"vaRow mb-1 w-100"},fn=["for"],gn=["id"],bn={class:"col"},hn=["min","max","step"];function _n(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[l("div",pn,[l("div",mn,[n.label?(o(),u("label",{key:0,class:"col-2 pl-0 col-form-label valueLabel",for:`${e.uid}-button`},y(n.label),9,fn)):d("",!0),l("button",{id:`${e.uid}-button`,class:"col-1 btn btn-block btn-info",type:"button",onClick:t[0]||(t[0]=(...r)=>n.decrement&&n.decrement(...r))},[_(a,{icon:["fas","step-backward"]})],8,gn),l("div",bn,[O(l("input",$({"onUpdate:modelValue":t[1]||(t[1]=r=>n.sliderValue=r),type:"range",class:"form-control-range rangeInput",min:s.min,max:s.max,step:s.step},e.$attrs),null,16,hn),[[V,n.sliderValue,void 0,{number:!0}]])]),l("button",{class:"col-1 btn btn-block btn-info",type:"button",onClick:t[2]||(t[2]=(...r)=>n.increment&&n.increment(...r))},[_(a,{icon:["fas","step-forward"]})])])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const vn=w(cn,[["render",_n],["__scopeId","data-v-449fb0a5"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseRangeInput.vue"]]),yn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"}));I.add(N);const wn={name:"OpenwbSelectInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:void 0},modelValue:{type:[String,Number,Array,null],required:!1,default:void 0},emptyValue:{type:[String,Number,Array],required:!1,default:void 0},groups:{type:Array,required:!1,default:void 0},options:{type:Array,required:!1,default:void 0},notSelected:{type:String,default:void 0},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},addDisabled:{get(){return this.value===void 0}}},methods:{addClicked(){this.addDisabled||this.$emit("input:add")}}},kn={class:"w-100"},Sn={class:"input-group"},Cn={key:0,class:"input-group-prepend"},Bn={class:"input-group-text"},$n=["id"],On=["value"],An=["value"],In=["label"],Mn=["value"],Tn={key:1,class:"input-group-append"};function Vn(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({default:m(()=>[l("div",kn,[l("div",Sn,[e.$slots.prefix?(o(),u("div",Cn,[l("div",Bn,[h(e.$slots,"prefix")])])):d("",!0),O(l("select",$({id:`${e.uid}-select`,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),class:"col form-control"},e.$attrs),[s.notSelected!==void 0?(o(),u("option",{key:0,value:s.emptyValue,disabled:""}," -- "+y(s.notSelected)+" -- ",9,On)):d("",!0),(o(!0),u(T,null,P(s.options,r=>(o(),u("option",{key:r.value,value:r.value},y(r.text),9,An))),128)),(o(!0),u(T,null,P(s.groups,r=>(o(),u("optgroup",{key:r.label,label:r.label},[(o(!0),u(T,null,P(r.options,v=>(o(),u("option",{key:v.value,value:v.value},y(v.text),9,Mn))),128))],8,In))),128))],16,$n),[[Z,n.value]]),s.addButton?(o(),u("div",Tn,[l("div",{class:S(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[1]||(t[1]=r=>n.addClicked())},[h(e.$slots,"inputAdd",{},()=>[_(a,{icon:["fas","plus"]})])],2)])):d("",!0)])])]),_:2},[e.$slots.title||s.title?{name:"title",fn:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)])]),key:"0"}:void 0,e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help")]),key:"1"}:void 0]),1024)}const Pn=w(wn,[["render",Vn],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSelectInput.vue"]]),qn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"}));I.add(z,Le,Ee);const Dn={name:"OpenwbSubmitButtons",components:{FontAwesomeIcon:M},props:{formName:{type:String,default:void 0},hideReset:{type:Boolean,default:!1},hideDefaults:{type:Boolean,default:!0},saveLabel:{type:String,default:"Speichern"},saveDisabled:{type:Boolean,default:!1},saveId:{type:String,default:"saveSettingsBtn"},resetLabel:{type:String,default:"Änderungen verwerfen"},resetDisabled:{type:Boolean,default:!1},resetId:{type:String,default:"modalResetBtn"},defaultsLabel:{type:String,default:"Werkseinstellungen"},defaultsDisabled:{type:Boolean,default:!1},defaultsId:{type:String,default:"modalDefaultsBtn"}},emits:["reset","defaults","save"],data(){return{showModalReset:!1,showModalDefaults:!1}},computed:{showModalSave(){return this.$store.state.local.savingData}},methods:{showResetModal(){this.showModalReset=!0},handleModalReset(e){this.showModalReset=!1,e=="confirm"&&this.$emit("reset")},showDefaultsModal(){this.showModalDefaults=!0},handleModalDefaults(e){this.showModalDefaults=!1,e=="confirm"&&this.$emit("defaults")},saveSettings(){if(this.formName){if(!document.forms[this.formName].reportValidity()){console.debug("form invalid");return}}else console.debug("no form to validate");this.$emit("save")}}},Ln={class:"row justify-content-center mb-1"},En={class:"col-md-4 d-flex py-1 justify-content-center"},xn=["id","disabled"],Wn={key:0,class:"col-md-4 d-flex py-1 justify-content-center"},jn=["id","disabled"],Rn={key:1,class:"col-md-4 d-flex py-1 justify-content-center"},Nn=["id","disabled"];function zn(e,t,s,c,i,n){const a=b("openwb-base-modal-dialog"),p=b("font-awesome-icon");return o(),u(T,null,[_(a,{show:n.showModalSave,title:"Speichern",subtype:"success","prevent-close":!0},{default:m(()=>[...t[3]||(t[3]=[g(" Einstellungen werden gespeichert... ",-1)])]),_:1},8,["show"]),_(a,{show:i.showModalReset,title:"Änderungen verwerfen",subtype:"warning",buttons:[{text:"Ok",event:"confirm",subtype:"warning"}],onModalResult:n.handleModalReset},{default:m(()=>[...t[4]||(t[4]=[g(" Willst Du die nicht gespeicherten Änderungen wirklich verwerfen? ",-1)])]),_:1},8,["show","onModalResult"]),_(a,{show:i.showModalDefaults,title:"Werkseinstellungen",subtype:"danger",buttons:[{text:"Ok",event:"confirm",subtype:"danger"}],onModalResult:n.handleModalDefaults},{default:m(()=>[...t[5]||(t[5]=[g(" Willst Du wirklich alle Werte dieser Seite auf die Werkseinstellungen zurücksetzen? ",-1)])]),_:1},8,["show","onModalResult"]),l("div",Ln,[l("div",En,[l("button",{id:s.saveId,type:"button",class:S(["btn btn-block",[{disabled:s.saveDisabled},s.saveDisabled?"btn-outline-success":"btn-success"]]),disabled:s.saveDisabled,onClick:t[0]||(t[0]=(...r)=>n.saveSettings&&n.saveSettings(...r))},[g(y(s.saveLabel)+" ",1),_(p,{icon:["fas","check"]})],10,xn)]),s.hideReset?d("",!0):(o(),u("div",Wn,[l("button",{id:s.resetId,type:"button",class:S(["btn btn-block",[{disabled:s.resetDisabled},s.resetDisabled?"btn-outline-warning":"btn-warning"]]),disabled:s.saveDisabled,onClick:t[1]||(t[1]=(...r)=>n.showResetModal&&n.showResetModal(...r))},[g(y(s.resetLabel)+" ",1),_(p,{icon:["fas","undo"]})],10,jn)])),s.hideDefaults?d("",!0):(o(),u("div",Rn,[l("button",{id:s.defaultsId,type:"button",class:S(["btn btn-block",[{disabled:s.defaultsDisabled},s.defaultsDisabled?"btn-outline-danger":"btn-danger"]]),disabled:s.saveDisabled,onClick:t[2]||(t[2]=(...r)=>n.showDefaultsModal&&n.showDefaultsModal(...r))},[g(y(s.defaultsLabel)+" ",1),_(p,{icon:["fas","times"]})],10,Nn)]))])],64)}const Un=w(Dn,[["render",zn],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseSubmitButtons.vue"]]),Fn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"}));I.add(X,xe,We,je,Re,Ne,ee,ze,Ue,Fe,He,N,Ge,Ke);const Hn={name:"OpenwbTextInput",components:{FontAwesomeIcon:M,OpenwbBaseSettingElement:D},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","email","host","url","user","group","json","password","time","date","month","year"].indexOf(e)!==-1},default:"text"},pattern:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},emptyValue:{type:[String,Object,null],required:!1,default:null},showQuickButtons:{type:Boolean,default:!1},addButton:{type:Boolean,default:!1}},emits:["update:modelValue","input:add"],data(){return{showPassword:!1,inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.warn("returning invalid String"),this.tempValue):JSON.stringify(this.tempValue):this.modelValue},set(e){if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.error("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else e==""&&(e=this.emptyValue),this.$emit("update:modelValue",e)}},inputRef(){switch(this.subtype){case"json":return this.$refs.jsonInput;case"password":return this.$refs.passwordInput;case"host":return this.$refs.hostInput;case"email":case"url":return this.$refs.urlInput;case"time":return this.$refs.timeInput;case"date":return this.$refs.dateInput;case"month":return this.$refs.monthInput;case"year":return this.$refs.yearInput}return this.$refs.textInput},hostPattern(){return"(^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$)|(^(?=.*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])$)|(^((?=[^.]*[a-zA-Z][^.]*\\.)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]\\.))+((?=[^.]*[a-zA-Z].*$)([a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]))$)"},addDisabled:{get(){return this.value===this.emptyValue}}},methods:{togglePassword(){this.showPassword=!this.showPassword},modify(e){var t,s=new Date(this.modelValue);switch(this.subtype){case"date":s.setDate(s.getDate()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0");break;case"month":s.setMonth(s.getMonth()+e),t=String(s.getFullYear())+"-"+String(s.getMonth()+1).padStart(2,"0");break;case"year":s.setYear(s.getFullYear()+e),t=String(s.getFullYear());break;default:console.warn(`cannot modify input of subtype '${this.subtype}'`);return}t>this.inputRef.max||t<this.inputRef.min||(this.value=t)},addClicked(){this.addDisabled||this.$emit("input:add")}}},Gn={class:"w-100"},Kn={class:"input-group"},Jn={class:"input-group-prepend"},Zn={class:"input-group-text"},Qn=["id","pattern"],Yn=["id","pattern"],Xn=["id","type","pattern"],eo=["id","pattern"],to=["id","type"],so=["id"],no=["id"],oo=["id"],ao=["id"],io={key:9,class:"input-group-append"},lo={class:"input-group-text"},ro={class:"input-group-text"},uo={key:13,class:"input-group-append"},co={key:14,class:"input-group-append"},po={class:"input-group-text p-0"};function mo(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[l("div",Gn,[l("div",Kn,[l("div",Jn,[l("div",Zn,[s.subtype=="text"?(o(),f(a,{key:0,icon:["fas","keyboard"]})):d("",!0),s.subtype=="email"?(o(),f(a,{key:1,icon:["fas","envelope"]})):d("",!0),s.subtype=="host"?(o(),f(a,{key:2,icon:["fas","network-wired"]})):d("",!0),s.subtype=="url"?(o(),f(a,{key:3,icon:["fas","globe"]})):d("",!0),s.subtype=="user"?(o(),f(a,{key:4,icon:["fas","user"]})):d("",!0),s.subtype=="group"?(o(),f(a,{key:5,icon:["fas","users"]})):d("",!0),s.subtype=="json"?(o(),f(a,{key:6,icon:["fas","code"]})):d("",!0),s.subtype=="password"?(o(),f(a,{key:7,icon:i.showPassword?["fas","unlock"]:["fas","lock"]},null,8,["icon"])):d("",!0),s.subtype=="time"?(o(),f(a,{key:8,icon:["fas","clock"]})):d("",!0),s.subtype=="date"||s.subtype=="month"||s.subtype=="year"?(o(),f(a,{key:9,icon:["fas","calendar-day"]})):d("",!0)])]),["text","user","group"].includes(s.subtype)?O((o(),u("input",$({key:0,id:`${e.uid}-text-input`,ref:"textInput","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),type:"text",class:["form-control",{invalid:i.inputInvalid}]},e.$attrs,{pattern:s.pattern}),null,16,Qn)),[[V,n.value]]):d("",!0),s.subtype=="json"?O((o(),u("input",$({key:1,id:`${e.uid}-json-input`,ref:"jsonInput","onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),type:"text",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,Yn)),[[V,n.value]]):d("",!0),s.subtype=="password"?O((o(),u("input",$({key:2,id:`${e.uid}-password-input`,ref:"passwordInput","onUpdate:modelValue":t[2]||(t[2]=r=>n.value=r),type:i.showPassword?"text":"password",class:"form-control"},e.$attrs,{pattern:s.pattern}),null,16,Xn)),[[G,n.value]]):d("",!0),s.subtype=="host"?O((o(),u("input",$({key:3,id:`${e.uid}-host-input`,ref:"hostInput","onUpdate:modelValue":t[3]||(t[3]=r=>n.value=r),type:"text",class:"form-control"},e.$attrs,{pattern:n.hostPattern}),null,16,eo)),[[V,n.value]]):d("",!0),["email","url"].includes(s.subtype)?O((o(),u("input",$({key:4,id:`${e.uid}-url-input`,"onUpdate:modelValue":t[4]||(t[4]=r=>n.value=r),refs:"urlInput",type:s.subtype,class:"form-control"},e.$attrs),null,16,to)),[[G,n.value]]):d("",!0),s.subtype=="time"?O((o(),u("input",$({key:5,id:`${e.uid}-time-input`,ref:"timeInput","onUpdate:modelValue":t[5]||(t[5]=r=>n.value=r),type:"time",class:"form-control"},e.$attrs),null,16,so)),[[V,n.value]]):d("",!0),s.subtype=="date"?O((o(),u("input",$({key:6,id:`${e.uid}-date-input`,ref:"dateInput","onUpdate:modelValue":t[6]||(t[6]=r=>n.value=r),type:"date",class:"form-control"},e.$attrs),null,16,no)),[[V,n.value]]):d("",!0),s.subtype=="month"?O((o(),u("input",$({key:7,id:`${e.uid}-month-input`,ref:"monthInput","onUpdate:modelValue":t[7]||(t[7]=r=>n.value=r),type:"month",class:"form-control"},e.$attrs),null,16,oo)),[[V,n.value]]):d("",!0),s.subtype=="year"?O((o(),u("input",$({key:8,id:`${e.uid}-year-input`,ref:"yearInput","onUpdate:modelValue":t[8]||(t[8]=r=>n.value=r),type:"number",class:"form-control"},e.$attrs),null,16,ao)),[[V,n.value]]):d("",!0),s.unit?(o(),u("div",io,[l("div",lo,y(s.unit),1)])):d("",!0),s.subtype=="password"?(o(),u("div",{key:10,class:"input-group-append clickable",onClick:t[9]||(t[9]=(...r)=>n.togglePassword&&n.togglePassword(...r))},[l("div",ro,[_(a,{icon:i.showPassword?["far","eye"]:["far","eye-slash"]},null,8,["icon"])])])):d("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(o(),u("div",{key:11,class:"input-group-append clickable",onClick:t[10]||(t[10]=r=>n.modify(-1))},[...t[13]||(t[13]=[l("div",{class:"input-group-text"},"-",-1)])])):d("",!0),s.showQuickButtons&&(s.subtype=="date"||s.subtype=="month"||s.subtype=="year")?(o(),u("div",{key:12,class:"input-group-append clickable",onClick:t[11]||(t[11]=r=>n.modify(1))},[...t[14]||(t[14]=[l("div",{class:"input-group-text"},"+",-1)])])):d("",!0),s.addButton?(o(),u("div",uo,[l("div",{class:S(["input-group-text",n.addDisabled?"not-clickable":"bg-success clickable"]),onClick:t[12]||(t[12]=r=>n.addClicked())},[h(e.$slots,"inputAdd",{},()=>[_(a,{icon:["fas","plus"]})],!0)],2)])):d("",!0),e.$slots.append?(o(),u("div",co,[l("div",po,[h(e.$slots,"append",{},void 0,!0)])])):d("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const fo=w(Hn,[["render",mo],["__scopeId","data-v-6927d479"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextInput.vue"]]),go=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"}));I.add(X,ee);const bo={name:"OpenwbTextareaInput",components:{OpenwbBaseSettingElement:D,FontAwesomeIcon:M},mixins:[L],inheritAttrs:!1,props:{title:{type:String,required:!1,default:""},modelValue:{type:[String,Object],required:!1,default:void 0},subtype:{validator:function(e){return["text","json"].indexOf(e)!==-1},default:"text"}},emits:["update:modelValue"],data(){return{inputInvalid:!1,tempValue:this.modelValue}},computed:{value:{get(){return this.subtype=="json"?this.inputInvalid?(console.debug("returning invalid JSON as String"),this.tempValue):JSON.stringify(this.tempValue,void 0,2):this.modelValue},set(e){if(this.subtype=="json")try{let t=JSON.parse(e);this.inputInvalid=!1,this.$refs.jsonInput.setCustomValidity(""),this.tempValue=t,this.$emit("update:modelValue",t)}catch(t){console.warn("parsing JSON failed: "+e,t),this.inputInvalid=!0,this.$refs.jsonInput.setCustomValidity("Ungültiger JSON Ausdruck!"),this.tempValue=e}else this.$emit("update:modelValue",e)}},length:{get(){return this.value!==void 0?this.value.length:0}}}},ho={class:"w-100"},_o={class:"input-group"},vo={class:"input-group-prepend"},yo={class:"input-group-text"},wo=["id"],ko=["id"],So={key:2,class:"input-group-append"},Co={class:"input-group-text"},Bo={class:"form-text text-muted text-right"};function $o(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("openwb-base-setting-element");return o(),f(p,null,q({title:m(()=>[h(e.$slots,"title",{},()=>[g(y(s.title),1)],!0)]),default:m(()=>[l("div",ho,[l("div",_o,[l("div",vo,[l("div",yo,[s.subtype=="text"?(o(),f(a,{key:0,icon:["fas","keyboard"]})):d("",!0),s.subtype=="json"?(o(),f(a,{key:1,icon:["fas","code"]})):d("",!0)])]),s.subtype==="json"?O((o(),u("textarea",$({key:0,id:`${e.uid}-textarea`,ref:"jsonInput","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),class:"form-control"},e.$attrs),null,16,wo)),[[V,n.value,void 0,{lazy:!0}]]):O((o(),u("textarea",$({key:1,id:`${e.uid}-textarea`,"onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),class:"form-control"},e.$attrs),null,16,ko)),[[V,n.value]]),e.$attrs.maxlength?(o(),u("div",So,[l("div",Co,[l("small",Bo,y(n.length)+" / "+y(e.$attrs.maxlength),1)])])):d("",!0)])])]),_:2},[e.$slots.help?{name:"help",fn:m(()=>[h(e.$slots,"help",{},void 0,!0)]),key:"0"}:void 0]),1024)}const Oo=w(bo,[["render",$o],["__scopeId","data-v-3d93046b"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTextarea.vue"]]),Ao=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Io={name:"OpenwbToast",props:{topic:{type:String,required:!0},subtype:{validator:function(e){return["info","success","warning","danger","primary","secondary","light","dark"].indexOf(e)!==-1},default:"secondary"},source:{type:String,required:!0,validator:function(e){return["system","client","command"].indexOf(e)!==-1}},timestamp:{type:Number,required:!0}},emits:["dismiss","hide"],data(){return{handle:void 0,relativeTime:void 0,hidden:!1}},mounted(){this.handle=window.setInterval(this.updateRelativeTime,1e3)},unmounted(){window.clearInterval(this.handle)},methods:{dismiss(){this.$emit("dismiss",{topic:this.topic})},updateRelativeTime(){const e={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3};var t=new Intl.RelativeTimeFormat("de",{numeric:"auto"});const c=new Date-this.timestamp*1e3;for(var i in e)if(Math.abs(c)>e[i]){this.relativeTime=t.format(Math.round(-c/e[i]),i);break}c>10*1e3&&!this.hidden&&(this.hidden=!0,this.$emit("hide",{topic:this.topic}))}}},Mo={key:0,class:"time-diff"},To={class:"toast-body"};function Vo(e,t,s,c,i,n){return o(),u("div",{class:S(["toast","border-"+s.subtype]),role:"alert"},[l("div",{class:S(["toast-header","bg-"+s.subtype])},[t[2]||(t[2]=l("strong",{class:"pr-2 mr-auto"},"openWB",-1)),s.timestamp?(o(),u("small",Mo,y(i.relativeTime),1)):d("",!0),l("button",{type:"button",class:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:t[0]||(t[0]=(...a)=>n.dismiss&&n.dismiss(...a))},[...t[1]||(t[1]=[l("span",{"aria-hidden":"true"},"×",-1)])])],2),l("div",To,[h(e.$slots,"default",{},void 0,!0)])],2)}const Po=w(Io,[["render",Vo],["__scopeId","data-v-c51b5764"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseToast.vue"]]),qo=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Do={name:"OpenwbTooltip",props:{description:{type:String,default:"#TOOLTIP#"},addHint:{type:Boolean,default:!1}}},Lo=["title"];function Eo(e,t,s,c,i,n){return o(),u("div",{class:S(["base-text",{dotted:s.addHint}]),title:s.description},[h(e.$slots,"default",{},void 0,!0)],10,Lo)}const xo=w(Do,[["render",Eo],["__scopeId","data-v-c65a1128"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbBaseTooltip.vue"]]),Wo=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),jo={name:"ComponentState",emits:["reset","defaults","save"],data(){return{mqttTopicsToSubscribe:[],mqttTopicsToPublish:[]}},computed:{weekdays(){return["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"]},chargeModes(){return["instant_charging","pv_charging","scheduled_charging","time_charging","eco_charging","stop"]},statusLevel(){return["success","warning","danger"]},stateIcon:{get(){switch(this.$store.state.mqtt[this.baseTopic+"/get/fault_state"]){case 0:return["fas","check-circle"];case 1:return["fas","exclamation-triangle"];case 2:return["fas","times-circle"];default:return["fas","check-circle"]}}}},mounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doSubscribe(this.mqttTopicsToSubscribe)},unmounted(){this.mqttTopicsToSubscribe.length>0&&this.$root.doUnsubscribe(this.mqttTopicsToSubscribe)},methods:{updateState(e,t,s=void 0){console.debug("updateState:",e,t,s),this.$store.commit({type:"updateTopic",topic:e,objectPath:s,payload:t})},ac_current2dc_power(e){return parseFloat((e*3*230/1e3).toFixed(0))},dc_power2ac_current(e){return parseFloat((e*1e3/230/3).toFixed(2))},getWildcardIndexList(e,t=!1){let s=e;t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$");let c=Object.keys(this.$store.state.mqtt).filter(i=>i.match(s));return c.forEach((i,n,a)=>{a[n]=parseInt(i.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""))}),c},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(c=>c.match(s)).reduce((c,i)=>({...c,[i]:this.$store.state.mqtt[i]}),{})},formatDate(e,t={year:"numeric",month:"2-digit",day:"2-digit"}){return new Date(e).toLocaleDateString(void 0,t)},formatNumber(e,t=0,s=t,c=1){if(!(e==null||isNaN(e)))return e=e*c,e.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:s})},formatNumberTopic(e,t=0,s=t,c=1){return this.$store.state.mqtt[e]?this.formatNumber(this.$store.state.mqtt[e],t,s,c):"-"},formatPhaseArrayNumberTopic(e,t=0,s=t,c=1){return this.$store.state.mqtt[e]?this.$store.state.mqtt[e].map(i=>this.formatNumber(i,t,s,c)):["-","-","-"]},translateChargeMode(e){switch(e){case"instant_charging":return"Sofort";case"pv_charging":return"PV";case"scheduled_charging":return"Zielladen";case"time_charging":return"Zeitladen";case"eco_charging":return"Eco";case"standby":return"Standby";case"stop":return"Stop";default:return console.warn("unknown charge mode:",e),e}},getFaultStateSubtype(e){const t=this.$store.state.mqtt[e+"/get/fault_state"];if(t===void 0)return"warning";switch(t){case 0:return"success";case 1:return"warning";case 2:return"danger";default:return"dark"}}}},j=w(jo,[["__file","/opt/openWB-dev/openwb-ui-settings/src/components/mixins/ComponentState.vue"]]);I.add(Je);const Ro={name:"OpenwbNavBar",components:{FontAwesomeIcon:M},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/security/access/+"]}},computed:{nodeEnv(){return"development"},accessAllowed(){return e=>this.$store.state.mqtt[`openWB/system/security/access/${e}`]===!0}},watch:{$route(){this.$refs.collapsibleNavbar.classList.remove("show"),this.$refs.navbarButton.classList.add("collapsed"),this.$refs.navbarButton.setAttribute("aria-expanded",!1)}}},No={class:"navbar navbar-expand-lg bg-dark navbar-dark fixed-top"},zo={ref:"navbarButton",class:"navbar-toggler mr-auto",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},Uo={id:"collapsibleNavbar",ref:"collapsibleNavbar",class:"collapse navbar-collapse navbar-nav-scroll"},Fo={class:"navbar-nav mr-auto"},Ho={key:0,class:"nav-item nav-separator-before"},Go={class:"nav-item dropdown nav-separator-before"},Ko={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Jo={class:"nav-item dropdown nav-separator-before"},Zo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Qo={class:"nav-item dropdown"},Yo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Xo={class:"nav-item dropdown"},ea={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ta={key:5,class:"dropdown-divider"},sa={key:6,href:"modules/legacy_smart_home/smarthomeconfig.php",class:"dropdown-item",target:"_blank"},na={class:"nav-item dropdown"},oa={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},aa={class:"nav-item nav-separator-before"},ia={class:"nav-link",href:"https://wiki.openwb.de/",target:"_blank"};function la(e,t,s,c,i,n){const a=b("router-link"),p=b("font-awesome-icon");return o(),u("nav",No,[t[30]||(t[30]=l("a",{class:"navbar-brand",href:"/openWB/web/"},[l("span",null,"openWB")],-1)),l("button",zo,[...t[0]||(t[0]=[l("span",{class:"navbar-toggler-icon"},null,-1)])],512),l("div",Uo,[l("ul",Fo,[n.accessAllowed("Status")?(o(),u("li",Ho,[_(a,{to:"/Status",class:"nav-link","active-class":"active disabled"},{default:m(()=>[...t[1]||(t[1]=[g(" Status ",-1)])]),_:1})])):d("",!0),l("li",Go,[t[4]||(t[4]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Auswertungen ",-1)),l("div",Ko,[n.accessAllowed("ChargeLog")?(o(),f(a,{key:0,to:"/Logging/ChargeLog",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[2]||(t[2]=[g(" Ladeprotokoll ",-1)])]),_:1})):d("",!0),n.accessAllowed("Chart")?(o(),f(a,{key:1,to:"/Logging/Chart",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[3]||(t[3]=[g(" Diagramme ",-1)])]),_:1})):d("",!0)])]),l("li",Jo,[t[8]||(t[8]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Einstellungen ",-1)),l("div",Zo,[n.accessAllowed("GeneralConfiguration")?(o(),f(a,{key:0,to:"/GeneralConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[5]||(t[5]=[g(" Allgemein ",-1)])]),_:1})):d("",!0),n.accessAllowed("DisplayConfiguration")?(o(),f(a,{key:1,to:"/DisplayConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[6]||(t[6]=[g(" Display ",-1)])]),_:1})):d("",!0),n.accessAllowed("IdentificationConfiguration")?(o(),f(a,{key:2,to:"/IdentificationConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[7]||(t[7]=[g(" Identifikation ",-1)])]),_:1})):d("",!0)])]),l("li",Qo,[t[12]||(t[12]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Ladeeinstellungen ",-1)),l("div",Yo,[n.accessAllowed("GeneralChargeConfiguration")?(o(),f(a,{key:0,to:"/GeneralChargeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[9]||(t[9]=[g(" Übergreifendes ",-1)])]),_:1})):d("",!0),n.accessAllowed("SurplusChargeConfiguration")?(o(),f(a,{key:1,to:"/SurplusChargeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[10]||(t[10]=[g(" Überschuss-Laden ",-1)])]),_:1})):d("",!0),n.accessAllowed("ActiveBatControlConfiguration")?(o(),f(a,{key:2,to:"/ActiveBatControlConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[11]||(t[11]=[g(" Speichersteuerung ",-1)])]),_:1})):d("",!0)])]),l("li",Xo,[t[18]||(t[18]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," Konfiguration ",-1)),l("div",ea,[n.accessAllowed("HardwareInstallation")?(o(),f(a,{key:0,to:"/HardwareInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[13]||(t[13]=[g(" Geräte und Komponenten ",-1)])]),_:1})):d("",!0),n.accessAllowed("LoadManagementConfiguration")?(o(),f(a,{key:1,to:"/LoadManagementConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[14]||(t[14]=[g(" Lastmanagement ",-1)])]),_:1})):d("",!0),n.accessAllowed("ChargePointInstallation")?(o(),f(a,{key:2,to:"/ChargePointInstallation",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[15]||(t[15]=[g(" Ladepunkte ",-1)])]),_:1})):d("",!0),n.accessAllowed("VehicleConfiguration")?(o(),f(a,{key:3,to:"/VehicleConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[16]||(t[16]=[g(" Fahrzeuge ",-1)])]),_:1})):d("",!0),n.accessAllowed("IoConfiguration")?(o(),f(a,{key:4,to:"/IoConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[17]||(t[17]=[g(" Ein-/Ausgänge ",-1)])]),_:1})):d("",!0),n.accessAllowed("LegacySmartHomeConfiguration")?(o(),u("div",ta)):d("",!0),n.accessAllowed("LegacySmartHomeConfiguration")?(o(),u("a",sa," SmartHome ")):d("",!0)])]),l("li",na,[t[28]||(t[28]=l("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-toggle":"dropdown","aria-expanded":"false"}," System ",-1)),l("div",oa,[n.accessAllowed("InstallAssistant")?(o(),f(a,{key:0,to:"/System/InstallAssistant",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[19]||(t[19]=[g(" Einrichtungsassistent ",-1)])]),_:1})):d("",!0),n.accessAllowed("CloudConfiguration")?(o(),f(a,{key:1,to:"/System/CloudConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[20]||(t[20]=[g(" openWB Cloud ",-1)])]),_:1})):d("",!0),n.accessAllowed("MqttBridgeConfiguration")?(o(),f(a,{key:2,to:"/System/MqttBridgeConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[21]||(t[21]=[g(" MQTT-Brücken ",-1)])]),_:1})):d("",!0),n.accessAllowed("DebugConfiguration")?(o(),f(a,{key:3,to:"/System/DebugConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[22]||(t[22]=[g(" Fehlersuche ",-1)])]),_:1})):d("",!0),n.accessAllowed("Support")?(o(),f(a,{key:4,to:"/System/Support",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[23]||(t[23]=[g(" Support ",-1)])]),_:1})):d("",!0),n.accessAllowed("DataManagement")?(o(),f(a,{key:5,to:"/System/DataManagement",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[24]||(t[24]=[g(" Datenverwaltung ",-1)])]),_:1})):d("",!0),n.accessAllowed("SecurityConfiguration")?(o(),f(a,{key:6,to:"/System/SecurityConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[25]||(t[25]=[g(" Sicherheit ",-1)])]),_:1})):d("",!0),n.accessAllowed("SystemConfiguration")?(o(),f(a,{key:7,to:"/System/SystemConfiguration",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[26]||(t[26]=[g(" System ",-1)])]),_:1})):d("",!0),n.accessAllowed("LegalSettings")?(o(),f(a,{key:8,to:"/System/LegalSettings",class:"dropdown-item","active-class":"active disabled"},{default:m(()=>[...t[27]||(t[27]=[g(" Rechtliches ",-1)])]),_:1})):d("",!0)])]),l("li",aa,[l("a",ia,[t[29]||(t[29]=g(" Wiki ",-1)),_(p,{icon:["fas","external-link-alt"]})])])])],512),t[31]||(t[31]=l("div",{id:"infobar",class:"ml-auto d-flex flex-row align-items-center"},null,-1))])}const ra=w(Ro,[["render",la],["__scopeId","data-v-e7a6d0c0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageNavbar.vue"]]),da={name:"OpenwbPageFooter"},ua={id:"footer",class:"footer bg-dark text-light font-small"},ca={class:"container text-center"};function pa(e,t,s,c,i,n){return o(),u("footer",ua,[l("div",ca,[l("small",null," Du befindest dich hier: Einstellungen / "+y(e.$route.meta.heading),1)])])}const ma=w(da,[["render",pa],["__scopeId","data-v-3c9a239a"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageFooter.vue"]]);I.add(Ze,Qe,Ye,Xe);const fa={name:"OpenwbPageUser",components:{FontAwesomeIcon:M,FontAwesomeLayers:te},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/security/user_management_active","openWB/system/security/access_allowed"],showLoginModal:!1,showLogoutModal:!1,username:"",password:""}},computed:{loggedInUser(){return this.$store.state.local.username||null},userManagementActive(){return this.$store.state.mqtt["openWB/system/security/user_management_active"]!==!1},accessAllowed(){return this.$store.state.mqtt["openWB/system/security/access_allowed"]===void 0?!1:this.$store.state.mqtt["openWB/system/security/access_allowed"]===!0},anonymousAccessAllowed(){return this.accessAllowed&&this.loggedInUser===null}},watch:{loggedInUser(e){e&&this.checkAutoLogin()},accessAllowed(){this.checkAutoLogin()}},mounted(){pe(()=>{this.checkAutoLogin()})},methods:{checkAutoLogin(){console.debug("Checking auto login: ",this.userManagementActive,this.accessAllowed,this.loggedInUser),this.userManagementActive&&!this.accessAllowed?this.showLoginModal=!0:this.showLoginModal=!1},doLogin(e){if(e==="login"){if(!this.username||!this.password){this.$root.postClientMessage("Benutzername und Passwort erforderlich.","danger");return}console.warn("Login with:",this.username,"/",this.password),this.$cookies.set("mqtt",`${this.username}:${this.password}`),this.$root.reconnectMqttClient(),location.reload()}console.warn("Closing login modal",e),this.showLoginModal=!1,this.username="",this.password=""},doLogout(e){this.showLogoutModal=!1,e==="confirm"&&(console.warn("Logging out user"),this.$cookies.remove("mqtt"),this.$root.reconnectMqttClient(),location.reload())}}},ga={id:"user-indicator"},ba={key:0,class:"pill bg-primary"},ha={class:"non-selectable"},_a={key:1,class:"pill bg-secondary"},va={name:"loginForm"};function ya(e,t,s,c,i,n){const a=b("FontAwesomeIcon"),p=b("openwb-base-tooltip"),r=b("FontAwesomeLayers"),v=b("openwb-base-modal-dialog"),k=b("openwb-base-text-input");return o(),u(T,null,[n.userManagementActive===!0?(o(),f(R,{key:0,defer:"",to:"#infobar"},[l("div",ga,[n.loggedInUser?(o(),u("span",ba,[_(a,{icon:["fas","circle-user"],size:"lg"}),l("span",ha,y(n.loggedInUser),1),_(p,{description:"Abmelden"},{default:m(()=>[_(a,{class:"text-light clickable px-2",icon:["fas","arrow-right-from-bracket"],size:"lg",onClick:t[0]||(t[0]=B=>i.showLogoutModal=!0)})]),_:1})])):(o(),u("span",_a,[_(p,{description:"Nicht angemeldet"},{default:m(()=>[_(r,null,{default:m(()=>[_(a,{icon:["fas","circle-user"]}),_(a,{icon:["fas","ban"],color:"red"})]),_:1})]),_:1}),_(p,{description:"Anmelden"},{default:m(()=>[_(a,{class:"text-light clickable px-2",icon:["fas","arrow-right-to-bracket"],size:"lg",onClick:t[1]||(t[1]=B=>i.showLoginModal=!0)})]),_:1})]))])])):d("",!0),n.userManagementActive?(o(),f(v,{key:1,show:i.showLogoutModal,title:"Abmelden",subtype:"warning",buttons:[{text:"Abmelden",event:"confirm",subtype:"danger"}],onModalResult:t[2]||(t[2]=B=>n.doLogout(B))},{default:m(()=>[...t[6]||(t[6]=[l("p",null,"Willst Du Dich wirklich abmelden?",-1)])]),_:1},8,["show"])):d("",!0),n.userManagementActive?(o(),f(v,{key:2,show:i.showLoginModal,"prevent-close":!n.anonymousAccessAllowed,title:"Anmelden",subtype:"success",buttons:[{text:"Anmelden",event:"login",subtype:"success"}],onModalResult:t[5]||(t[5]=B=>n.doLogin(B))},{default:m(()=>[l("form",va,[_(k,{modelValue:i.username,"onUpdate:modelValue":t[3]||(t[3]=B=>i.username=B),title:"Benutzername",subtype:"user",required:"",autocomplete:"username"},null,8,["modelValue"]),_(k,{modelValue:i.password,"onUpdate:modelValue":t[4]||(t[4]=B=>i.password=B),title:"Passwort",subtype:"password",required:"",autocomplete:"current-password"},null,8,["modelValue"])])]),_:1},8,["show","prevent-close"])):d("",!0)],64)}const wa=w(fa,[["render",ya],["__scopeId","data-v-adc196c2"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageUser.vue"]]);I.add(et,tt);const ka={name:"OpenwbPageMessages",components:{FontAwesomeIcon:M,FontAwesomeLayers:te,FontAwesomeLayersText:st},mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/messages/+","openWB/command/"+this.$root.mqttClientId+"/messages/+"],showAllMessages:!1,hiddenMessages:[]}},computed:{alertLevel(){return this.messages.reduce((t,s)=>((t=="light"&&["info","success","warning","danger"].includes(s.type)||t=="info"&&["success","warning","danger"].includes(s.type)||t=="success"&&["warning","danger"].includes(s.type)||t=="warning"&&s.type=="danger")&&(t=s.type),t),"light")},messages(){const e=[];return this.systemMessages.forEach(t=>{e.push(t)}),this.localMessages.forEach(t=>{e.push(t)}),this.clientMessages.forEach(t=>{e.push(t)}),e.sort(this.compareMessagesByTimestamp),e},recentMessages(){return this.showAllMessages?this.messages:this.messages.filter(e=>!this.hiddenMessages.includes(e.topic))},messageIndicatorClass(){return"text-"+this.alertLevel},systemMessages(){let e=this.getWildcardTopics("openWB/system/messages/+");var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t},localMessages(){const e=this.$store.state.local.messages||{};var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t},clientMessages(){let e=this.getWildcardTopics("openWB/command/"+this.$root.mqttClientId+"/messages/+");var t=[];for(const[s,c]of Object.entries(e))t.push({topic:s,...c});return t}},methods:{toggleAllMessages(){this.showAllMessages=!this.showAllMessages},compareMessagesByTimestamp(e,t){return t.timestamp-e.timestamp},clearTopic(e){this.$root.doPublish(e,void 0)},dismissMessage(e){this.localMessages.find(s=>s.topic===e.topic)?this.$store.commit("removeClientMessage",e.topic):this.clearTopic(e.topic);var t=this.hiddenMessages.indexOf(e.topic);t>-1&&this.hiddenMessages.splice(t,1)},dismissAllMessages(){this.messages.forEach(e=>{this.dismissMessage({topic:e.topic})}),this.hiddenMessages=[],this.toggleAllMessages()},hideMessage(e){this.hiddenMessages.includes(e.topic)||this.hiddenMessages.push(e.topic)}}},Sa=["title"],Ca=["innerHTML"];function Ba(e,t,s,c,i,n){const a=b("font-awesome-icon"),p=b("font-awesome-layers-text"),r=b("font-awesome-layers"),v=b("openwb-base-alert"),k=b("openwb-base-click-button"),B=b("openwb-base-toast");return o(),u(T,null,[(o(),f(R,{defer:"",to:"nav"},[l("div",{id:"message-indicator",class:S(["text-light clickable",i.showAllMessages?"active":""]),title:i.showAllMessages?"nur neue Nachrichten anzeigen":"Alle Nachrichten anzeigen",onClick:t[0]||(t[0]=(...A)=>n.toggleAllMessages&&n.toggleAllMessages(...A))},[_(r,{"full-width":""},{default:m(()=>[_(a,{icon:i.showAllMessages?["fas","bell"]:["far","bell"],class:S(n.messageIndicatorClass)},null,8,["icon","class"]),n.messages.length>0?(o(),f(p,{key:0,counter:"",value:n.messages.length,position:"top-right",class:"message-counter bg-light text-dark"},null,8,["value"])):d("",!0)]),_:1})],10,Sa)])),n.recentMessages.length>0||i.showAllMessages?(o(),u("div",{key:0,class:S(["openwb-toast-container",i.showAllMessages?"full-height":""])},[n.recentMessages.length==0?(o(),f(v,{key:0,subtype:"info"},{default:m(()=>[...t[1]||(t[1]=[g(" Keine Nachrichten vorhanden. ",-1)])]),_:1})):i.showAllMessages?(o(),f(k,{key:1,class:"btn-sm btn-secondary mb-1",onButtonClicked:n.dismissAllMessages},{default:m(()=>[...t[2]||(t[2]=[g(" Alle Nachrichten löschen ",-1)])]),_:1},8,["onButtonClicked"])):d("",!0),(o(!0),u(T,null,P(n.recentMessages,A=>(o(),f(B,{key:A.topic,topic:A.topic,source:A.source,subtype:A.type,timestamp:A.timestamp,onDismiss:n.dismissMessage,onHide:n.hideMessage},{default:m(()=>[l("span",{innerHTML:A.message},null,8,Ca)]),_:2},1032,["topic","source","subtype","timestamp","onDismiss","onHide"]))),128))],2)):d("",!0)],64)}const $a=w(ka,[["render",Ba],["__scopeId","data-v-2c25f0d0"],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageMessages.vue"]]),Oa={name:"OpenwbPageBlocker",mixins:[j],data(){return{mqttTopicsToSubscribe:["openWB/system/boot_done","openWB/system/update_in_progress"]}},computed:{title(){return this.bootInProgress||this.updateInProgress?"openWB ist noch nicht bereit":this.reloadRequired?"Neues Laden der Seite erforderlich":"???"},myButtons(){return!(this.bootInProgress||this.updateInProgress)&&this.reloadRequired?[{text:"Jetzt neu laden",subtype:"success",event:"reload"}]:[]},bootInProgress(){return this.$store.state.mqtt["openWB/system/boot_done"]==null?!0:!this.$store.state.mqtt["openWB/system/boot_done"]},updateInProgress(){return this.$store.state.mqtt["openWB/system/update_in_progress"]==null?!1:this.$store.state.mqtt["openWB/system/update_in_progress"]},reloadRequired(){return this.$store.state.local.reloadRequired},showModalBlocker(){return this.bootInProgress||this.updateInProgress||this.reloadRequired}},methods:{handleModalResult(e){e=="reload"?location.reload():console.warn("unknown event",e)}}},Aa={class:"openwb-blocker"},Ia={key:0},Ma={key:1},Ta={key:2},Va={key:3};function Pa(e,t,s,c,i,n){const a=b("openwb-base-modal-dialog");return o(),u("div",Aa,[_(a,{show:n.showModalBlocker,title:n.title,subtype:"dark","prevent-close":!0,buttons:n.myButtons,onModalResult:t[0]||(t[0]=p=>n.handleModalResult(p))},{default:m(()=>[n.bootInProgress?(o(),u("p",Ia,"Der Systemstart ist noch nicht abgeschlossen.")):d("",!0),n.updateInProgress?(o(),u("p",Ma,"Es wird eine Systemaktualisierung ausgeführt.")):d("",!0),!(n.bootInProgress||n.updateInProgress)&&n.reloadRequired?(o(),u("p",Ta,"Bitte die Seite neu laden.")):(o(),u("p",Va,"Bitte warten..."))]),_:1},8,["show","title","buttons"])])}const qa=w(Oa,[["render",Pa],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/OpenwbPageBlocker.vue"]]),Da={name:"OpenwbSettingsApp",components:{NavBar:ra,PageFooter:ma,UserInfo:wa,Messages:$a,Blocker:qa},data(){return{client:{connected:!1},connection:{protocol:location.protocol=="https:"?"wss":"ws",protocolVersion:5,host:location.hostname,port:parseInt(location.port)||(location.protocol=="https:"?443:80),path:"/ws",connectTimeout:4e3,reconnectPeriod:4e3,resubscribe:!0,properties:{requestResponseInformation:!0,requestProblemInformation:!0}}}},computed:{mqttClientId(){try{return this.client.options.clientId}catch(e){console.error("mqttClientId error",e);return}},topicList(){return Object.keys(this.$store.state.mqtt)},nodeEnv(){return"development"}},created(){this.createConnection()},methods:{async saveValues(e=void 0){function t(i){return new Promise(n=>setTimeout(n,i))}function s(i){return i.includes("#")||i.includes("+")}this.$store.state.local.savingData=!0;let c={};if(e===void 0){console.error("no topics to save defined!");return}if(Array.isArray(e))e.forEach(i=>{if(s(i)){console.debug("expanding wildcard topic:",i);const n=this.getWildcardTopics(i);Object.entries(n).forEach(([a,p])=>{console.debug("adding topic to save:",a),c[a]=p})}else console.debug("adding topic to save:",i),c[i]=this.$store.state.mqtt[i]});else{console.error("expected array, got ",typeof e);return}for(const[i,n]of Object.entries(c)){if(i.startsWith("$CONTROL")){console.debug("skipping control topic:",i);continue}let a=i.replace("openWB/","openWB/set/");console.debug("saving data:",a,n),this.doPublish(a,n),await t(50)}this.$store.state.local.savingData=!1},resetValues(e=this.topicList){console.debug("resetting values..."),console.debug("topics: ",e),this.doUnsubscribe(e),this.doSubscribe(e)},setDefaultValues(){console.debug("setting default values... (ToDo)")},sendCommand(e){console.debug("sendCommand:",e),this.doPublish(`openWB/set/command/${this.client.options.clientId}/todo/${e.command}`,e,!1)},createConnection(){const{protocol:e,host:t,port:s,path:c,...i}=this.connection,n=`${e}://${t}:${s}${c}`,[a,p]=this.$cookies.get("mqtt")?.split(":")||[null,null];a&&p||console.debug("Anonymous mqtt connection (no cookie set)"),(this.nodeEnv!=="production"||e=="wss")&&a&&p&&(console.debug("Using mqtt credentials from cookie:",a,"/",p),i.username=a,i.password=p,a==="admin"&&p==="openwb"&&(console.warn("Using default mqtt credentials! This is insecure and not recommended for production systems."),this.postClientMessage("Warnung: Es werden die Standard-Zugangsdaten für MQTT verwendet! Dies ist unsicher und wird für Produktivsysteme nicht empfohlen.","warning"))),console.debug("connecting to broker:",n),this.client=me.connect(n,i),this.client.on("connect",()=>{console.debug("Connection succeeded! ClientId: ",this.client.options.clientId),a&&(this.postClientMessage(`Angemeldet als "${a}".`,"success"),this.$store.commit("storeLocal",{name:"username",value:a})),this.doSubscribe(["openWB/system/usage_terms_acknowledged","openWB/system/installAssistantDone","openWB/system/security/access/+"])}),this.client.on("error",r=>{console.error("Connection failed",r),this.postClientMessage("Verbindungsfehler:<br />"+r.message,"danger"),this.$cookies.remove("mqtt"),this.$store.commit("storeLocal",{name:"username",value:null}),this.client.end(),this.createConnection()}),this.client.on("message",(r,v)=>{if(v.toString().length>0){let k;try{k=JSON.parse(v.toString())}catch(B){console.debug("Json parsing failed, fallback to string: ",r,B),k=v.toString()}this.$store.commit("updateTopic",{topic:r,payload:k})}else this.$store.commit("removeTopic",r)})},endConnection(){this.client?.connected?(console.warn("Ending mqtt connection..."),this.client.end(),this.$store.commit("storeLocal",{name:"username",value:null})):console.error("No mqtt connection to end.")},reconnectMqttClient(){this.client?.connected&&this.endConnection(),this.createConnection()},doSubscribe(e){e.forEach(t=>{this.$store.commit("addSubscription",t),this.$store.getters.subscriptionCount(t)==1?(t.includes("#")||t.includes("+")?console.debug("skipping init of wildcard topic:",t):this.$store.commit("addTopic",{topic:t,payload:void 0}),this.client.subscribe(t,{},s=>{if(s){this.postClientMessage(`Daten konnten nicht abonniert werden.<br />Topic: ${t}<br />${s}`,"danger");return}})):console.debug("Already subscribed to topic: ",t)})},doUnsubscribe(e){e.forEach(t=>{this.$store.commit("removeSubscription",t),this.$store.getters.subscriptionCount(t)==0?(this.client.unsubscribe(t,s=>{s&&(console.error("Unsubscribe error",s),this.postClientMessage(`Daten konnten nicht abbestellt werden.<br />Topic: ${t}<br />${s}`,"danger"))}),t.includes("#")||t.includes("+")?(console.debug("expanding wildcard topic:",t),Object.keys(this.getWildcardTopics(t)).forEach(s=>{console.debug("removing wildcardTopic:",s),this.$store.commit("removeTopic",s)})):(console.debug("removing topic:",t),this.$store.commit("removeTopic",t))):console.debug("Still subscribed to topic: ",t)})},doPublish(e,t,s=!0,c=2){let i={qos:c,retain:s};this.client.publish(e,JSON.stringify(t),i,n=>{n&&(console.error("Publish error",n),this.postClientMessage(`Daten konnten nicht geschrieben werden.<br />Topic: ${e}<br />${n}`,"danger"))})},postClientMessage(e,t="secondary"){console.debug("postMessage:",e,t);const s=Date.now();this.$store.commit({type:"addClientMessage",timestamp:s,payload:{message:e,type:t,source:"client",timestamp:Math.floor(s/1e3)}})},getWildcardTopics(e,t=!1){let s=e;return t||(s="^"+e.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$"),Object.keys(this.$store.state.mqtt).filter(c=>c.match(s)).reduce((c,i)=>({...c,[i]:this.$store.state.mqtt[i]}),{})}}},La={role:"main",class:"container"},Ea={id:"content"};function xa(e,t,s,c,i,n){const a=b("nav-bar"),p=b("router-view"),r=b("page-footer"),v=b("user-info"),k=b("messages"),B=b("blocker");return o(),u(T,null,[l("header",null,[_(a)]),l("div",La,[l("div",Ea,[l("h1",null,y(e.$route.meta.heading),1),_(p,{onSave:n.saveValues,onReset:n.resetValues,onDefaults:n.setDefaultValues,onSendCommand:n.sendCommand},null,8,["onSave","onReset","onDefaults","onSendCommand"])])]),_(r),_(v),_(k),_(B)],64)}const Wa=w(Da,[["render",xa],["__file","/opt/openWB-dev/openwb-ui-settings/src/App.vue"]]),ja="modulepreload",Ra=function(e){return"/openWB/web/settings/"+e},J={},C=function(t,s,c){let i=Promise.resolve();if(s&&s.length>0){let r=function(v){return Promise.all(v.map(k=>Promise.resolve(k).then(B=>({status:"fulfilled",value:B}),B=>({status:"rejected",reason:B}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),p=a?.nonce||a?.getAttribute("nonce");i=r(s.map(v=>{if(v=Ra(v),v in J)return;J[v]=!0;const k=v.endsWith(".css"),B=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${B}`))return;const A=document.createElement("link");if(A.rel=k?"stylesheet":ja,k||(A.as="script"),A.crossOrigin="",A.href=v,p&&A.setAttribute("nonce",p),document.head.appendChild(A),k)return new Promise((ie,le)=>{A.addEventListener("load",ie),A.addEventListener("error",()=>le(new Error(`Unable to preload CSS for ${v}`)))})}))}function n(a){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=a,window.dispatchEvent(p),!p.defaultPrevented)throw a}return i.then(a=>{for(const p of a||[])p.status==="rejected"&&n(p.reason);return t().catch(n)})},Na={namespaced:!0,state:()=>({hiddenDatasets:[]}),mutations:{toggleDataset(e,t){e.hiddenDatasets.includes(t)?e.hiddenDatasets=e.hiddenDatasets.filter(s=>s!==t):e.hiddenDatasets.push(t)},setHiddenDatasets(e,t){e.hiddenDatasets=t}}};let oe={mqtt:{},mqttSubscriptions:{},local:{reloadRequired:!1,savingData:!1,username:null}};oe.examples={text1:"Text...",text2:"mail@domain.com",text3:"openwb.local",text4:"http://www.openwb.de",text5:"Benutzername",text6:"12:34",text7:"2021-10-31",text8:"Text mit Add-Button",color1:"#ff0000",color2:"#0000ff",number1:5,number2:10,number3:28e-5,password1:"GeHeiM!",textarea1:"Langer Text...",range1:6,range2:10,select1:1,select2:void 0,buttonGroup1:1,checkbox1:!0,json1:{text:"Text",number:123},hierarchy1:[{id:0,type:"counter",children:[{id:3,type:"inverter",children:[]},{id:4,type:"bat",children:[]},{id:1,type:"cp",children:[]},{id:2,type:"cp",children:[]}]}],hierarchy1Labels:{0:"EVU",1:"Ladepunkt 1",2:"Ladepunkt 2",3:"Wechselrichter",4:"Batteriespeicher"},tags:["1234","2345","3456"],ioConfig:{active:!1,pattern:[null,!1,!0],action:{value:"stop_all",options:null}}};const x=fe({state:oe,mutations:{storeLocal(e,t){e.local[t.name]=t.value},addTopic(e,t){Object.keys(e.mqtt).includes(t.topic)?console.warn("topic already exists: ",t.topic):e.mqtt[t.topic]=t.payload},removeTopic(e,t){delete e.mqtt[t]},updateTopic(e,t){const s=(c,i,n)=>i.split(".").reduce((a,p,r)=>a[p]=i.split(".").length===++r?n:a[p]||{},c);t.topic in e.mqtt||!(t.topic in e.examples)?t.objectPath!=null?s(e.mqtt[t.topic],t.objectPath,t.payload):e.mqtt[t.topic]=t.payload:(console.debug("topic not found in state.mqtt: ",t.topic),t.topic in e.examples?t.objectPath!=null?s(e.examples[t.topic],t.objectPath,t.payload):e.examples[t.topic]=t.payload:console.warn("topic not found in state: ",t.topic," giving up"))},addClientMessage(e,t){e.local.messages||(e.local.messages={}),e.local.messages[t.timestamp]=t.payload},removeClientMessage(e,t){e.local.messages&&t in e.local.messages&&delete e.local.messages[t]},addSubscription(e,t){t in e.mqttSubscriptions?e.mqttSubscriptions[t]+=1:e.mqttSubscriptions[t]=1,console.debug("subscription count: ",t,e.mqttSubscriptions[t])},removeSubscription(e,t){t in e.mqttSubscriptions&&(e.mqttSubscriptions[t]-=1,e.mqttSubscriptions[t]<=0&&delete e.mqttSubscriptions[t])}},actions:{},modules:{chartLegend:Na},getters:{usageTermsAcknowledged(e){return new Promise(t=>{if(e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0)t(e.mqtt["openWB/system/usage_terms_acknowledged"]);else{var s,c;s=setTimeout(()=>{clearInterval(c),t(!1)},5e3),c=setInterval(()=>{e.mqtt["openWB/system/usage_terms_acknowledged"]!==void 0&&(clearTimeout(s),clearInterval(c),t(e.mqtt["openWB/system/usage_terms_acknowledged"]))},100)}})},installAssistantDone(e){return new Promise(t=>{if(e.mqtt["openWB/system/installAssistantDone"]!==void 0)t(e.mqtt["openWB/system/installAssistantDone"]);else{var s,c;s=setTimeout(()=>{clearInterval(c),t(!1)},5e3),c=setInterval(()=>{e.mqtt["openWB/system/installAssistantDone"]!==void 0&&(clearTimeout(s),clearInterval(c),t(e.mqtt["openWB/system/installAssistantDone"]))},100)}})},accessAllowed(e){return t=>new Promise(s=>{const c=`openWB/system/security/access/${t}`;if(e.mqtt[c]!==void 0)s(e.mqtt[c]);else{var i,n;i=setTimeout(()=>{clearInterval(n),s(!1)},5e3),n=setInterval(()=>{e.mqtt[c]!==void 0&&(clearTimeout(i),clearInterval(n),s(e.mqtt[c]))},100)}})},subscriptionCount:e=>t=>e.mqttSubscriptions[t]||0}}),ae=[{path:"/",redirect:"/GeneralConfiguration"},{path:"/Status",name:"Status",meta:{heading:"Status",checkPermissions:!0},component:()=>C(()=>import("./Status-D2eYlOUg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))},{path:"/Logging/ChargeLog",name:"ChargeLog",meta:{heading:"Auswertungen - Ladeprotokoll",checkPermissions:!0},component:()=>C(()=>import("./ChargeLog-5SmEtQE4.js"),__vite__mapDeps([12,1,2,3,4,7,8,9,10,13]))},{path:"/Logging/Chart/:chartRange?/:initialDate?",name:"Chart",meta:{heading:"Auswertungen - Diagramme",checkPermissions:!0},component:()=>C(()=>import("./Chart-CvLzzNvF.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,15]))},{path:"/GeneralConfiguration",name:"GeneralConfiguration",meta:{heading:"Einstellungen - Allgemein",checkPermissions:!0},component:()=>C(()=>import("./GeneralConfiguration-CUfcGQSf.js").then(e=>e.a),__vite__mapDeps([16,1,2,3,4,17]))},{path:"/IdentificationConfiguration",name:"IdentificationConfiguration",meta:{heading:"Einstellungen - Identifikation",checkPermissions:!0},component:()=>C(()=>import("./IdentificationConfiguration-Dp9YNwp3.js"),__vite__mapDeps([18,2,3,4,1,7,8,9,10]))},{path:"/DisplayConfiguration",name:"DisplayConfiguration",meta:{heading:"Einstellungen - Display",checkPermissions:!0},component:()=>C(()=>import("./DisplayConfiguration-BHI0XUUi.js").then(e=>e.a),__vite__mapDeps([19,17,1,2,3,4]))},{path:"/GeneralChargeConfiguration",name:"GeneralChargeConfiguration",meta:{heading:"Ladeeinstellungen - Übergreifendes",checkPermissions:!0},component:()=>C(()=>import("./GeneralChargeConfiguration-DPYPi5iC.js").then(e=>e.a),__vite__mapDeps([20,17,1,2,3,4]))},{path:"/SurplusChargeConfiguration",name:"SurplusChargeConfiguration",meta:{heading:"Ladeeinstellungen - Überschuss-Laden",checkPermissions:!0},component:()=>C(()=>import("./SurplusChargeConfiguration-EIhZbCCU.js"),__vite__mapDeps([21,1,2,3,4,7,8,9,10]))},{path:"/ActiveBatControlConfiguration",name:"ActiveBatControlConfiguration",meta:{heading:"Ladeeinstellungen - Speichersteuerung",checkPermissions:!0},component:()=>C(()=>import("./ActiveBatControlConfiguration-K09KmeFY.js"),__vite__mapDeps([22,1,2,3,4,7,8,9,10]))},{path:"/HardwareInstallation",name:"HardwareInstallation",meta:{heading:"Konfiguration - Geräte und Komponenten",checkPermissions:!0},component:()=>C(()=>import("./HardwareInstallation-BfK4Khot.js").then(e=>e.a),__vite__mapDeps([23,1,2,3,4,17]))},{path:"/LoadManagementConfiguration",name:"LoadManagementConfiguration",meta:{heading:"Konfiguration - Lastmanagement",checkPermissions:!0},component:()=>C(()=>import("./LoadManagementConfiguration-H9Ayhf8L.js"),__vite__mapDeps([24,1,2,3,4,25,26,7,8,9,10]))},{path:"/ChargePointInstallation",name:"ChargePointInstallation",meta:{heading:"Konfiguration - Ladepunkte",checkPermissions:!0},component:()=>C(()=>import("./ChargePointInstallation-CeVgqT33.js").then(e=>e.c),__vite__mapDeps([27,1,2,3,4,17,28]))},{path:"/VehicleConfiguration/:section?/:section_index?/:section_part?/:action?",name:"VehicleConfiguration",meta:{heading:"Konfiguration - Fahrzeuge",checkPermissions:!0},component:()=>C(()=>import("./VehicleConfiguration-DRaEW1yJ.js").then(e=>e.b),__vite__mapDeps([29,1,2,3,4,17]))},{path:"/IoConfiguration",name:"IoConfiguration",meta:{heading:"Konfiguration - Ein- und Ausgänge",checkPermissions:!0},component:()=>C(()=>import("./IoConfiguration-DklF2iWd.js").then(e=>e.b),__vite__mapDeps([30,1,2,3,4,17]))},{path:"/System/CloudConfiguration",name:"CloudConfiguration",meta:{heading:"System - openWB Cloud",checkPermissions:!0},component:()=>C(()=>import("./CloudConfiguration-Dp_Tm1ht.js"),__vite__mapDeps([31,1,2,3,4,7,8,9,10]))},{path:"/System/MqttBridgeConfiguration",name:"MqttBridgeConfiguration",meta:{heading:"System - MQTT-Brücken",checkPermissions:!0},component:()=>C(()=>import("./MqttBridgeConfiguration-BoR0LkTi.js"),__vite__mapDeps([32,1,2,3,4,7,8,9,10]))},{path:"/System/DebugConfiguration",name:"DebugConfiguration",meta:{heading:"System - Fehlersuche",checkPermissions:!0},component:()=>C(()=>import("./DebugConfiguration-D1hNNCrX.js"),__vite__mapDeps([33,1,2,3,4,10,7,8,9,34]))},{path:"/System/Support",name:"Support",meta:{heading:"System - Support",checkPermissions:!0},component:()=>C(()=>import("./Support-jyrPASeP.js"),__vite__mapDeps([35,1,2,3,4,7,8,9,10]))},{path:"/System/LegalSettings",name:"LegalSettings",meta:{heading:"System - Rechtliches",checkPermissions:!0},component:()=>C(()=>import("./LegalSettings-ftmhlWOj.js"),__vite__mapDeps([36,1,2,3,4,7,8,9,10]))},{path:"/System/SystemConfiguration",name:"SystemConfiguration",meta:{heading:"System - System",checkPermissions:!0},component:()=>C(()=>import("./SystemConfiguration-DWUnffg2.js"),__vite__mapDeps([37,1,2,3,4,7,8,9,10,38]))},{path:"/System/SecurityConfiguration",name:"SecurityConfiguration",meta:{heading:"System - Sicherheit",checkPermissions:!0},component:()=>C(()=>import("./SecurityConfiguration-DJ_4CK7h.js"),__vite__mapDeps([39,1,2,3,4,7,8,9,10]))},{path:"/System/DataManagement",name:"DataManagement",meta:{heading:"System - Datenverwaltung",checkPermissions:!0},component:()=>C(()=>import("./DataManagement-DGXXowbm.js").then(e=>e.a),__vite__mapDeps([40,1,2,3,4,17]))},{path:"/System/InstallAssistant",name:"InstallAssistant",meta:{heading:"System - Einrichtungsassistent",checkPermissions:!0},component:()=>C(()=>import("./InstallAssistant-8StM5Uo6.js"),__vite__mapDeps([41,17,2,3,4,1,7,8,9,10]))},{path:"/Error",name:"Error",meta:{heading:"Fehler",checkPermissions:!1},component:()=>C(()=>import("./Error-C69P4rxH.js"),__vite__mapDeps([42,2,3,4]))}];ae.push({path:"/TestingStore",name:"VUEX Store",meta:{heading:"Beispiele - VUEX Store",checkPermissions:!1},component:()=>C(()=>import("./TestingStore-RCjW77Dg.js"),__vite__mapDeps([43,25,2,3,4,1,26,7,8,9,10]))});const U=ge({history:be(),routes:ae});U.beforeEach(async e=>{if(await x.getters.usageTermsAcknowledged){if(!await x.getters.installAssistantDone&&e.name!=="InstallAssistant")return{name:"InstallAssistant"}}else if(e.name!=="LegalSettings")return{name:"LegalSettings"};if(e.meta.checkPermissions===!0){const s=await x.getters.accessAllowed(e.name);if(console.log("access check for",e.name,"->",s),!s)return console.warn("no permission to access",e.name),x.state.local.username?{name:"Error"}:(console.debug("not logged in, cancel navigation to",e.name),!1)}});U.afterEach(e=>{e.meta.heading?document.title="openWB | "+e.meta.heading:document.title="openWB"});const F=he(Wa);F.use(x).use(U).use(nt,ot).use(_e,{expire:"30d",path:"/",domain:"",secure:!0,sameSite:"Lax"});const za=Object.assign({"./components/OpenwbBaseAlert.vue":rt,"./components/OpenwbBaseArrayInput.vue":Mt,"./components/OpenwbBaseAvatar.vue":Dt,"./components/OpenwbBaseButtonGroupInput.vue":Ht,"./components/OpenwbBaseButtonInput.vue":es,"./components/OpenwbBaseButtonRow.vue":Rt,"./components/OpenwbBaseCard.vue":us,"./components/OpenwbBaseCheckboxInput.vue":bs,"./components/OpenwbBaseClickButton.vue":Zt,"./components/OpenwbBaseColorPicker.vue":ks,"./components/OpenwbBaseCopyToClipboard.vue":Ts,"./components/OpenwbBaseHeading.vue":Ws,"./components/OpenwbBaseIoPattern.vue":zs,"./components/OpenwbBaseModalDialog.vue":Qs,"./components/OpenwbBaseNumberInput.vue":un,"./components/OpenwbBaseRangeInput.vue":yn,"./components/OpenwbBaseSelectInput.vue":qn,"./components/OpenwbBaseSettingElement.vue":ft,"./components/OpenwbBaseSubmitButtons.vue":Fn,"./components/OpenwbBaseTextInput.vue":go,"./components/OpenwbBaseTextarea.vue":Ao,"./components/OpenwbBaseToast.vue":qo,"./components/OpenwbBaseTooltip.vue":Wo});Object.entries(za).forEach(([e,t])=>{const s=ve(ye(e.split("/").pop().replace(/\.\w+$/,"")));F.component(s,t.default)});F.mount("#app");export{j as C,D as O,C as _};
