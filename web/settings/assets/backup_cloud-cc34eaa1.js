import{_ as b,q as d,k as f,l as g,B as t,M as o,x as n,u as r}from"./vendor-033b944b.js";import"./vendor-sortablejs-01d816ac.js";const _={name:"BackupCloudOneDrive",emits:["update:configuration","sendCommand"],props:{backupCloud:{type:Object,required:!0}},data(){return{}},methods:{updateConfiguration(u,e=void 0){this.$emit("update:configuration",{value:u,object:e})},sendSystemCommand(u,e={}){this.$emit("sendCommand",{command:u,data:e})}}},h={class:"backup-cloud-one-drive"},v=r("br",null,null,-1),k=r("br",null,null,-1),w=r("br",null,null,-1),C=r("br",null,null,-1),B=r("a",{href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-device-code",target:"_blank",rel:"noopener noreferrer"},"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-device-code",-1),y=r("a",{href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications",target:"_blank",rel:"noopener noreferrer"},"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications",-1);function x(u,e,i,A,z,s){const p=d("openwb-base-alert"),a=d("openwb-base-text-input"),m=d("openwb-base-heading"),c=d("openwb-base-button-input");return f(),g("div",h,[t(p,{subtype:"info"},{default:o(()=>[n(" Zum Abruf der Zugangsberechtigung bitte die Konfiguration speichern, dann die Schritte 1-4 durchführen und danach die Konfiguration erneut speichern. "),v,n(" Auth Code und URL werden nur einmal benötigt werden nach erfolgreicher Autorisierung wieder gelöscht. ")]),_:1}),t(a,{title:"Backupverzeichnis in OneDrive",subtype:"text",required:"",pattern:"^/(.*/)*","model-value":i.backupCloud.configuration.backuppath,"onUpdate:modelValue":e[0]||(e[0]=l=>s.updateConfiguration(l,"configuration.backuppath"))},{help:o(()=>[n(" In diesem Verzeichnis werden die Backupdateien erstellt. Bitte den Pfad mit / beenden. "),k,n(" Beispiel: /openWB/Backup/ ")]),_:1},8,["model-value"]),t(a,{title:"Anmeldedaten auf openWB gespeichert",readonly:"","model-value":i.backupCloud.configuration.persistent_tokencache?"Ja":"Nein"},null,8,["model-value"]),t(m,null,{default:o(()=>[n(" Zugang zu OneDrive für diese openWB autorisieren ")]),_:1}),t(c,{title:"1. Anmeldeanforderung erstellen",buttonText:"Autorisierungs-Code anfordern",subtype:"success",onButtonClicked:e[1]||(e[1]=l=>s.sendSystemCommand("requestMSALAuthCode",{}))},{help:o(()=>[n(" Es werden Zugangstokens für OneDrive angefordert. Diese werden nur lokal auf dieser openWB gespeichert. Genutzt wird Device Flow mit public application."),w,n(" Weitere Infos:"),C,B,y]),_:1}),t(a,{title:"2. Diesen Code kopieren",subtype:"text",readonly:"","model-value":i.backupCloud.configuration.authcode},null,8,["model-value"]),t(a,{title:"3. Anmelde-URL aufrufen",subtype:"url",readonly:"","model-value":i.backupCloud.configuration.authurl},{help:o(()=>[n(" Diese URL im Browser öffnen und den Code eingeben. Dies erzeugt die notwendigen Zugangsberechtigung für diese openWB. ")]),_:1},8,["model-value"]),t(c,{title:"4. Token abrufen und speichern",buttonText:"Autorisierungs-Token abrufen",subtype:"success",onButtonClicked:e[2]||(e[2]=l=>s.sendSystemCommand("retrieveMSALTokens",{}))},{help:o(()=>[n(" Zugangstoken wird abgerufen und gespeichert, damit das Backup durchgeführt werden kann. Zugangstoken werden nur lokal auf dieser openWB gespeichert. ")]),_:1})])}const Z=b(_,[["render",x],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/backup_clouds/onedrive/backup_cloud.vue"]]);export{Z as default};
