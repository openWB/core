import{l as H,d as Q,Q as G,A as X,R as Y,S as K,J as ee,T as te,F as ne,U as ae}from"./vendor-fortawesome-221885f6.js";import{_ as L,C as oe}from"./index-c516534d.js";import{_ as E}from"./dynamic-import-helper-be004503.js";import{_ as q,p as g,k as l,l as c,A as n,L as o,u as i,x as w,q as h,a0 as z,y as v,a1 as M,G as S,z as p,I as W,n as O,a2 as N,Q as le,R as ie}from"./vendor-93bd3532.js";import"./vendor-bootstrap-9ea1ec57.js";import"./vendor-jquery-15a435dc.js";import"./vendor-axios-51187820.js";import"./vendor-sortablejs-b80cade1.js";const se={name:"ChargePointConfigFallback",emits:["update:configuration"],props:{configuration:{type:Object,required:!0},chargePointId:{default:void 0},chargePointType:String},methods:{updateConfiguration(e,a=void 0){this.$emit("update:configuration",{value:e,object:a})}}},re={class:"device-fallback"};function de(e,a,u,P,m,d){const C=g("openwb-base-alert"),b=g("openwb-base-textarea");return l(),c("div",re,[n(C,{subtype:"warning"},{default:o(()=>[i(' Es wurde keine Konfigurationsseite für den Ladepunkt-Typ "'+w(u.chargePointType)+'" gefunden. Die Einstellungen können als JSON direkt bearbeitet werden. ',1)]),_:1}),n(b,{title:"Konfiguration",subtype:"json","model-value":u.configuration,"onUpdate:modelValue":a[0]||(a[0]=x=>d.updateConfiguration(x,"configuration"))},{help:o(()=>[i(" Bitte prüfen Sie, ob die Eingaben richtig interpretiert werden. ")]),_:1},8,["model-value"]),n(C,{subtype:"info"},{default:o(()=>[h("pre",null,w(JSON.stringify(u.configuration,void 0,2)),1)]),_:1})])}const ue=q(se,[["render",de],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointConfigFallback.vue"]]),pe={name:"ChargePointCommandsFallback",props:{configuration:{type:Object,required:!0},chargePointId:{default:void 0},chargePointType:String}},me={class:"charge-point-commands-fallback"};function ce(e,a,u,P,m,d){const C=g("openwb-base-alert");return l(),c("div",me,[n(C,{subtype:"secondary"},{default:o(()=>[i(' Der Ladepunkt-Typ "'+w(u.chargePointType)+'" bietet keine Befehle an. ',1)]),_:1})])}const ge=q(pe,[["render",ce],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointCommandsFallback.vue"]]),he={name:"OpenwbChargePointProxy",emits:["update:configuration"],props:{chargePointId:{required:!0},chargePointType:{type:String,required:!0},configuration:{type:Object,required:!0},moduleName:{type:String,required:!1,default:void 0}},computed:{myChargePointSettingsComponent(){return console.debug(`loading charge point settings: ${this.chargePointType}`),z({loader:()=>E(Object.assign({"./external_openwb/chargePoint.vue":()=>L(()=>import("./chargePoint-c5a0be1e.js"),["assets/chargePoint-c5a0be1e.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"]),"./internal_openwb/chargePoint.vue":()=>L(()=>import("./chargePoint-44c7ca1f.js"),["assets/chargePoint-44c7ca1f.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"]),"./mqtt/chargePoint.vue":()=>L(()=>import("./chargePoint-d6b6bf5d.js"),["assets/chargePoint-d6b6bf5d.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"]),"./openwb_pro/chargePoint.vue":()=>L(()=>import("./chargePoint-1262d9da.js"),["assets/chargePoint-1262d9da.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"]),"./openwb_series2_satellit/chargePoint.vue":()=>L(()=>import("./chargePoint-bffb621b.js"),["assets/chargePoint-bffb621b.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"]),"./smartwb/chargePoint.vue":()=>L(()=>import("./chargePoint-6c6cb034.js"),["assets/chargePoint-6c6cb034.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"])}),`./${this.chargePointType}/chargePoint.vue`),errorComponent:ue})},myChargePointCommandsComponent(){return console.debug(`loading charge point commands: ${this.chargePointType}`),z({loader:()=>E(Object.assign({"./openwb_pro/commands.vue":()=>L(()=>import("./commands-5a8cb261.js"),["assets/commands-5a8cb261.js","assets/vendor-93bd3532.js","assets/vendor-sortablejs-b80cade1.js","assets/vendor-7b9e30aa.css"])}),`./${this.chargePointType}/commands.vue`),errorComponent:ge})}},methods:{updateConfiguration(e){this.$emit("update:configuration",e)}}},fe=h("hr",null,null,-1);function be(e,a,u,P,m,d){const C=g("openwb-base-heading");return l(),c(S,null,[n(C,null,{default:o(()=>[i(" Einstellungen für Ladepunkt "+w(u.moduleName),1)]),_:1}),(l(),v(M(d.myChargePointSettingsComponent),{configuration:u.configuration,chargePointId:u.chargePointId,chargePointType:u.chargePointType,"onUpdate:configuration":a[0]||(a[0]=b=>d.updateConfiguration(b))},null,40,["configuration","chargePointId","chargePointType"])),fe,n(C,null,{default:o(()=>[i(" Befehle für Ladepunkt "+w(u.moduleName),1)]),_:1}),(l(),v(M(d.myChargePointCommandsComponent),{configuration:u.configuration,chargePointId:u.chargePointId,chargePointType:u.chargePointType},null,8,["configuration","chargePointId","chargePointType"]))],64)}const _e=q(he,[["render",be],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/charge_points/OpenwbChargePointProxy.vue"]]);H.add(Q,G,X,Y,K,ee,te);const ve={name:"OpenwbChargePointInstallation",mixins:[oe],emits:["sendCommand"],components:{FontAwesomeIcon:ne,FontAwesomeLayers:ae,OpenwbChargePointProxy:_e},data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/optional/rfid/active","openWB/chargepoint/+/config","openWB/chargepoint/template/+","openWB/chargepoint/template/+/autolock/+","openWB/system/configurable/chargepoints","openWB/system/configurable/chargepoints_internal"],chargePointToAdd:void 0,showChargePointModal:!1,modalChargePointIndex:void 0,showChargePointTemplateModal:!1,modalChargePointTemplateIndex:void 0,showChargePointTemplateAutolockPlanModal:!1,modalChargePointTemplateAutolockPlanIndex:void 0}},computed:{installedChargePoints:{get(){let e=this.getWildcardTopics("openWB/chargepoint/+/config");console.log(e);let a={};for(const[u,P]of Object.entries(e))(P.type==="internal_openwb"||this.$store.state.mqtt["openWB/general/extern"]===!1)&&(a[u]=P);return console.log(a),a}},chargePointTemplates:{get(){return this.getWildcardTopics("openWB/chargepoint/template/+")}},chargePointTemplateList:{get(){let e=[];return Object.keys(this.chargePointTemplates).forEach(a=>{let u=parseInt(a.match(/([0-9]+)/g)[0]),P=this.$store.state.mqtt["openWB/chargepoint/template/"+u].name;e.push({value:u,text:P})}),e}}},methods:{addChargePoint(e){e.stopPropagation(),this.$emit("sendCommand",{command:"addChargepoint",data:{type:this.chargePointToAdd}})},removeChargePointModal(e,a){a.stopPropagation(),this.modalChargePointIndex=parseInt(e.match(/(?:\/)(\d+)(?=\/)/)[1]),this.showChargePointModal=!0},removeChargePoint(e,a){this.showChargePointModal=!1,a=="confirm"&&(console.debug("request removal of charge point '"+e+"'"),this.$emit("sendCommand",{command:"removeChargepoint",data:{id:e}}))},getChargePointList(){return this.$store.state.mqtt["openWB/general/extern"]===!1?this.$store.state.mqtt["openWB/system/configurable/chargepoints"]:this.$store.state.mqtt["openWB/system/configurable/chargepoints_internal"]},getChargePointName(e){return this.$store.state.mqtt["openWB/chargepoint/"+e+"/config"]?this.$store.state.mqtt["openWB/chargepoint/"+e+"/config"].name:"Ladepunkt "+e},getChargePointTemplateName(e){return this.$store.state.mqtt["openWB/chargepoint/template/"+e]?this.$store.state.mqtt["openWB/chargepoint/template/"+e].name:"Vorlage "+e},addChargePointTemplate(e){e.stopPropagation(),this.$emit("sendCommand",{command:"addChargepointTemplate",data:{}})},getChargePointTemplateIndex(e){return parseInt(e.match(/([^/]+)$/)[0])},removeChargePointTemplateModal(e,a){a.stopPropagation(),this.modalChargePointTemplateIndex=this.getChargePointTemplateIndex(e),this.showChargePointTemplateModal=!0},removeChargePointTemplate(e,a){this.showChargePointTemplateModal=!1,a=="confirm"&&(console.info("request removal of chargePoint template '"+e+"'"),this.$emit("sendCommand",{command:"removeChargepointTemplate",data:{id:e}}))},addChargePointTemplateAutolockPlan(e,a){a.stopPropagation(),console.info("requesting new charge point template autolock plan...");let u=this.getChargePointTemplateIndex(e);this.$emit("sendCommand",{command:"addAutolockPlan",data:{template:u}})},removeChargePointTemplateAutolockPlanModal(e,a,u){u.stopPropagation(),this.modalChargePointTemplateIndex=this.getChargePointTemplateIndex(e),this.modalChargePointTemplateAutolockPlanIndex=parseInt(a.match(/([^/]+)$/)[0]),this.showChargePointTemplateAutolockPlanModal=!0},removeChargePointTemplateAutolockPlan(e,a,u){this.showChargePointTemplateAutolockPlanModal=!1,u=="confirm"&&(console.info("request removal of chargePoint template '"+e+"' autolock plan '"+a+"'"),this.$emit("sendCommand",{command:"removeAutolockPlan",data:{template:e,plan:a}}))},getChargePointTemplateAutolockPlanName(e,a){return this.$store.state.mqtt["openWB/chargepoint/template/"+e+"/autolock/"+a]?this.$store.state.mqtt["openWB/chargepoint/template/"+e+"/autolock/"+a].name:"Autolock Zeitplan "+e+"/"+a},getChargePointTemplateAutolockPlans(e){let a=this.getChargePointTemplateIndex(e);return this.getWildcardTopics("openWB/chargepoint/template/"+a+"/autolock/+")},updateConfiguration(e,a){console.debug("updateConfiguration",e,a),this.updateState(e,a.value,a.object)}}},k=e=>(le("data-v-75fe5743"),e=e(),ie(),e),we={class:"chargePointInstallation"},ke={name:"chargePointInstallationForm"},Ce={key:0},ye=k(()=>h("hr",null,null,-1)),Pe={key:1},Ve=k(()=>h("hr",null,null,-1)),Le=k(()=>h("br",null,null,-1)),Te=k(()=>h("br",null,null,-1)),Se=k(()=>h("br",null,null,-1)),xe=k(()=>h("br",null,null,-1)),Ae={key:1},Ie={class:"col-1"},Ue=k(()=>h("hr",{class:"border-secondary"},null,-1)),We={key:0},qe={key:1},Be=k(()=>h("hr",null,null,-1)),De={key:0},Ee=k(()=>h("br",null,null,-1)),ze=["innerHTML"],Me=k(()=>h("hr",null,null,-1)),Oe=k(()=>h("span",{class:"highlight"},"keine",-1)),Ne=k(()=>h("br",null,null,-1)),Fe=k(()=>h("hr",null,null,-1)),Re={key:0},je={key:1},$e={key:2},Ze={key:2};function Je(e,a,u,P,m,d){const C=g("openwb-base-modal-dialog"),b=g("font-awesome-icon"),x=g("openwb-base-alert"),A=g("openwb-base-avatar"),V=g("openwb-base-text-input"),B=g("openwb-base-select-input"),F=g("openwb-charge-point-proxy"),T=g("openwb-base-heading"),y=g("openwb-base-button-group-input"),I=g("openwb-base-card"),R=g("openwb-base-click-button"),j=g("font-awesome-layers"),$=g("openwb-base-array-input"),D=g("openwb-base-range-input"),Z=g("openwb-base-submit-buttons");return l(),c(S,null,[p(" modal dialogs "),n(C,{show:m.showChargePointModal,title:"Ladepunkt löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:a[0]||(a[0]=s=>d.removeChargePoint(m.modalChargePointIndex,s))},{default:o(()=>[i(' Wollen Sie den Ladepunkt "'+w(d.getChargePointName(m.modalChargePointIndex))+'" (ID: '+w(m.modalChargePointIndex)+") wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ",1)]),_:1},8,["show"]),n(C,{show:m.showChargePointTemplateModal,title:"Ladepunkt-Vorlage löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:a[1]||(a[1]=s=>d.removeChargePointTemplate(m.modalChargePointTemplateIndex,s))},{default:o(()=>[i(' Wollen Sie die Ladepunkt-Vorlage "'+w(d.getChargePointTemplateName(m.modalChargePointTemplateIndex))+'" (ID: '+w(m.modalChargePointTemplateIndex)+") wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ",1)]),_:1},8,["show"]),n(C,{show:m.showChargePointTemplateAutolockPlanModal,title:"Autolock Zeitplan löschen",subtype:"danger",buttons:[{text:"Löschen",event:"confirm",subtype:"danger"}],onModalResult:a[2]||(a[2]=s=>d.removeChargePointTemplateAutolockPlan(m.modalChargePointTemplateIndex,m.modalChargePointTemplateAutolockPlanIndex,s))},{default:o(()=>[i(' Wollen Sie den Autolock Zeitplan "'+w(d.getChargePointTemplateAutolockPlanName(m.modalChargePointTemplateIndex,m.modalChargePointTemplateAutolockPlanIndex))+'" wirklich entfernen? Dieser Vorgang kann nicht rückgängig gemacht werden! ',1)]),_:1},8,["show"]),p(" main content "),h("div",we,[h("form",ke,[p(" charge point card "),n(I,{title:"Ladepunkte",subtype:"primary",collapsible:!0,collapsed:!0},{header:o(()=>[n(b,{"fixed-width":"",icon:["fas","charging-station"]}),i(" Ladepunkte ")]),default:o(()=>[Object.keys(d.installedChargePoints).length>1?(l(),v(x,{key:0,subtype:"danger"},{default:o(()=>[i(" Wenn das Standard-Fahrzeug auch aktiv zum Laden genutzt wird, ist es aktuell bei mehreren Ladepunkten erforderlich, dass für jeden Ladepunkt ein eigenes Standard-Fahrzeug angelegt und zugeordnet wird. Diese Abhängigkeit wird mittelfristig noch bereinigt. ")]),_:1})):p("v-if",!0),(l(!0),c(S,null,W(d.installedChargePoints,(s,r)=>(l(),v(I,{key:r,title:s.name+" (ID: "+s.id+")",collapsible:!0,collapsed:!0,subtype:"primary"},{actions:o(t=>[t.collapsed?p("v-if",!0):(l(),v(A,{key:0,class:"bg-danger clickable",onClick:_=>d.removeChargePointModal(r,_)},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"]))]),default:o(()=>[n(V,{title:"Bezeichnung",subtype:"text","model-value":s.name,"onUpdate:modelValue":t=>e.updateState(r,t,"name")},null,8,["model-value","onUpdate:modelValue"]),s.type!=="internal_openwb"||e.$store.state.mqtt["openWB/general/extern"]===!1?(l(),c("span",Ce,[n(B,{title:"Ladepunkt-Vorlage",options:d.chargePointTemplateList,"model-value":e.$store.state.mqtt[r].template,"onUpdate:modelValue":t=>e.updateState(r,t,"template")},null,8,["options","model-value","onUpdate:modelValue"])])):p("v-if",!0),ye,n(F,{chargePointId:s.id,chargePointType:e.$store.state.mqtt[r].type,moduleName:e.$store.state.mqtt[r].name,configuration:s.configuration,"onUpdate:configuration":t=>d.updateConfiguration(r,t)},null,8,["chargePointId","chargePointType","moduleName","configuration","onUpdate:configuration"]),s.type!=="internal_openwb"||e.$store.state.mqtt["openWB/general/extern"]===!1?(l(),c("div",Pe,[Ve,p(` <openwb-base-text-input
							title="Leistungsmodul"
							subtype="text"
							:model-value="installedChargePoint.power_module.type"
							@update:model-value="
								updateState(
									installedChargePointKey,
									$event,
									'power_module.type'
								)
							"
							disabled
						/>
						<hr /> `),n(T,null,{default:o(()=>[i("Hardware-Optionen")]),_:1}),n(y,{title:"automatische Phasenumschaltung vorhanden",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":s.auto_phase_switch_hw,"onUpdate:modelValue":t=>e.updateState(r,t,"auto_phase_switch_hw")},null,8,["model-value","onUpdate:modelValue"]),n(y,{title:"Control-Pilot-Unterbrechung vorhanden",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":s.control_pilot_interruption_hw,"onUpdate:modelValue":t=>e.updateState(r,t,"control_pilot_interruption_hw")},null,8,["model-value","onUpdate:modelValue"]),n(T,null,{default:o(()=>[i(" Elektrischer Anschluss ")]),_:1}),n(y,{title:"Anzahl angeschlossener Phasen",buttons:[{buttonValue:1,text:"1"},{buttonValue:2,text:"2"},{buttonValue:3,text:"3"}],"model-value":s.connected_phases,"onUpdate:modelValue":t=>e.updateState(r,t,"connected_phases")},null,8,["model-value","onUpdate:modelValue"]),n(y,{title:"Phase 1",buttons:[{buttonValue:0,text:"unbekannt",class:"btn-outline-danger"},{buttonValue:1,text:"EVU L1",class:"btn-outline-success"},{buttonValue:2,text:"EVU L2",class:"btn-outline-success"},{buttonValue:3,text:"EVU L3",class:"btn-outline-success"}],"model-value":s.phase_1,"onUpdate:modelValue":t=>e.updateState(r,t,"phase_1")},{help:o(()=>[i(" Hier ist anzugeben, an welcher Phase am Hausanschluss die Phase 1 dieses Ladepunktes angeschlossen ist. Diese Information wird für das Lastmanagement benötigt, um bei einer Schieflast gezielt einzelne Ladepunkte zu drosseln."),Le,i(" Bei mehreren Ladepunkten macht es Sinn, die Phasen rotierend anzuschließen, damit mehrere nicht dreiphasig ladende Fahrzeuge mit optimaler Leistung laden können, bevor das Lastmanagement eingreift."),Te,i(" Es wird vorausgesetzt, dass das Drehfeld innerhalb der Installation gleich bleibt. Wenn demnach L1 des Ladepunktes auf EVU L2 liegt, muss L2 des Ladepunktes auf EVU L3 aufgelegt sein."),Se,i(" Eine Möglichkeit, den Anschluss von L1 zu ermitteln, ist eine einphasige Ladung zu starten und die Phasenströme am EVU-Zähler zu beobachten. Mit einem zweiphasig ladenden Fahrzeug kann danach auch der Anschluss von L2 ermittelt und so das Drehfeld kontrolliert werden."),xe,i(" Im Zweifel bitte das Drehfeld von einer Fachkraft prüfen und korrigieren lassen. ")]),_:2},1032,["model-value","onUpdate:modelValue"])])):p("v-if",!0)]),_:2},1032,["title"]))),128)),Object.keys(d.installedChargePoints).length>0?(l(),c("hr",Ae)):p("v-if",!0),n(B,{class:"mb-2",title:"Verfügbare Ladepunkte",notSelected:"Bitte auswählen",options:d.getChargePointList(),"model-value":m.chargePointToAdd,"onUpdate:modelValue":a[3]||(a[3]=s=>m.chargePointToAdd=s)},{append:o(()=>[h("span",Ie,[n(R,{class:O(m.chargePointToAdd===void 0?"btn-outline-success":"btn-success"),disabled:m.chargePointToAdd===void 0,onButtonClicked:d.addChargePoint},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","plus"]})]),_:1},8,["class","disabled","onButtonClicked"])])]),help:o(()=>[i(" Bitte einen Ladepunkt auswählen, der hinzugefügt werden soll. ")]),_:1},8,["options","model-value"])]),_:1}),Ue,p(" charge point template card "),n(I,{title:"Ladepunkt-Vorlagen",collapsible:!0,collapsed:!0},{header:o(()=>[n(j,{"fixed-width":"",class:"fa-lg"},{default:o(()=>[n(b,{"fixed-width":"",icon:["far","file"]}),n(b,{"fixed-width":"",icon:["fas","charging-station"],transform:"shrink-8"})]),_:1}),i(" Ladepunkt-Vorlagen ")]),actions:o(()=>[e.$store.state.mqtt["openWB/general/extern"]===!1?(l(),v(A,{key:0,class:"bg-success clickable",onClick:d.addChargePointTemplate},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","plus"]})]),_:1},8,["onClick"])):p("v-if",!0)]),default:o(()=>[e.$store.state.mqtt["openWB/general/extern"]===!0?(l(),c("div",We,[n(x,{subtype:"info"},{default:o(()=>[i(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Modus "Nur Ladepunkt" befindet. ')]),_:1})])):(l(),c("div",qe,[(l(!0),c(S,null,W(d.chargePointTemplates,(s,r)=>(l(),v(I,{key:r,title:s.name+" (ID: "+d.getChargePointTemplateIndex(r)+")",collapsible:!0,collapsed:!0},N({default:o(()=>[n(V,{title:"Bezeichnung",subtype:"text","model-value":s.name,"onUpdate:modelValue":t=>e.updateState(r,t,"name"),disabled:r.endsWith("/0")},N({_:2},[r.endsWith("/0")?{name:"help",fn:o(()=>[i(" Die Standard-Vorlage kann nicht umbenannt werden. ")]),key:"0"}:void 0]),1032,["model-value","onUpdate:modelValue","disabled"]),Be,e.$store.state.mqtt["openWB/optional/rfid/active"]===!0?(l(),c("div",De,[n(T,null,{default:o(()=>[i(" Zugangskontrolle ")]),_:1}),n(y,{title:"Freigabe mit RFID",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":s.rfid_enabling,"onUpdate:modelValue":t=>e.updateState(r,t,"rfid_enabling")},null,8,["model-value","onUpdate:modelValue"]),n($,{title:"Zugeordnete Tags",noElementsMessage:"Keine Tags zugeordnet.","model-value":s.valid_tags,"onUpdate:modelValue":t=>e.updateState(r,t,"valid_tags")},{help:o(()=>[i(" An allen Ladepunkten, denen diese Ladepunkt-Vorlage zugeordnet ist, können die hier eingetragenen Tags verwendet werden."),Ee,h("span",{innerHTML:e.$store.state.text.rfidWiki},null,8,ze)]),_:2},1032,["model-value","onUpdate:modelValue"]),Me])):p("v-if",!0),n(T,null,{default:o(()=>[i("Angaben zum konfigurierten Ladestrom der openWB ")]),_:1}),n(x,{subtype:"info"},{default:o(()=>[i(" Diese Einstellung hat "),Oe,i(" Auswirkung auf das Lastmanagement! Ist die Zuleitung nicht mit der vollen Ladeleistung der openWB abgesichert, muss für den Ladepunkt ein virtueller Zähler konfiguriert werden, der den Strom im Lastmanagement begrenzt. "),Ne,i(" Bei openWBs, deren Leistung z.B. aufgrund der KfW-Förderung auf 11kW begrenzt ist, muss hier bei beiden Maximalströmen 16A eingestellt werden. ")]),_:1}),n(D,{title:"Maximalstrom bei einer Phase",min:6,max:32,step:1,unit:"A","model-value":s.max_current_single_phase,"onUpdate:modelValue":t=>e.updateState(r,t,"max_current_single_phase")},null,8,["model-value","onUpdate:modelValue"]),n(D,{title:"Maximalstrom mehrere Phasen",min:6,max:32,step:1,unit:"A","model-value":s.max_current_multi_phases,"onUpdate:modelValue":t=>e.updateState(r,t,"max_current_multi_phases")},null,8,["model-value","onUpdate:modelValue"]),Fe,n(T,null,{default:o(()=>[i("Automatische Sperre")]),_:1}),n(y,{title:"Automatische Sperre aktiv",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":s.autolock.active,"onUpdate:modelValue":t=>e.updateState(r,t,"autolock.active")},null,8,["model-value","onUpdate:modelValue"]),n(y,{title:"Erst nach Ladeende sperren",buttons:[{buttonValue:!1,text:"Nein"},{buttonValue:!0,text:"Ja"}],"model-value":s.autolock.wait_for_charging_end,"onUpdate:modelValue":t=>e.updateState(r,t,"autolock.wait_for_charging_end")},{help:o(()=>[i(' Wenn ein Zeitplan die automatische Sperre aktiviert, werden alle Ladepunkte direkt gesperrt und laufende Ladevorgänge beendet. Wird hier "Ja" ausgewählt, dann werden laufende Ladevorgänge nicht beendet, und diese Ladepunkte erst nach abgeschlossener Ladung gesperrt. ')]),_:2},1032,["model-value","onUpdate:modelValue"]),n(T,null,{actions:o(()=>[n(A,{class:"bg-success clickable",onClick:t=>d.addChargePointTemplateAutolockPlan(r,t)},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","plus"]})]),_:2},1032,["onClick"])]),default:o(()=>[i(" Zeitpläne für die automatische Sperre ")]),_:2},1024),(l(!0),c(S,null,W(d.getChargePointTemplateAutolockPlans(r),(t,_)=>(l(),v(I,{key:_,title:t.name,collapsible:!0,collapsed:!0},{actions:o(f=>[f.collapsed==!0?(l(),c("span",{key:0,class:O(["subheader pill",t.active?"bg-success":"bg-danger"])},[n(b,{"fixed-width":"",icon:["fas","clock"]}),i(" "+w(t.time[0])+" - "+w(t.time[1])+" ",1),t.frequency.selected=="once"?(l(),c("span",Re,[n(b,{"fixed-width":"",icon:["fas","calendar-day"]}),i(" "+w(e.formatDate(t.frequency.once[0])==e.formatDate(t.frequency.once[1])?e.formatDate(t.frequency.once[0]):e.formatDate(t.frequency.once[0])+" - "+e.formatDate(t.frequency.once[1])),1)])):p("v-if",!0),t.frequency.selected=="daily"?(l(),c("span",je,[n(b,{"fixed-width":"",icon:["fas","calendar-week"]})])):p("v-if",!0),t.frequency.selected=="weekly"?(l(),c("span",$e,[n(b,{"fixed-width":"",icon:["fas","calendar-alt"]})])):p("v-if",!0)],2)):p("v-if",!0),f.collapsed==!1?(l(),v(A,{key:1,class:"bg-danger clickable",onClick:U=>d.removeChargePointTemplateAutolockPlanModal(r,_,U)},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"])):p("v-if",!0)]),default:o(()=>[n(V,{title:"Bezeichnung","model-value":t.name,"onUpdate:modelValue":f=>e.updateState(_,f,"name")},null,8,["model-value","onUpdate:modelValue"]),n(y,{title:"Zeitplan aktiv",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.active,"onUpdate:modelValue":f=>e.updateState(_,f,"active")},null,8,["model-value","onUpdate:modelValue"]),n(V,{title:"Sperren um",subtype:"time","model-value":t.time[0],"onUpdate:modelValue":f=>e.updateState(_,f,"time.0")},null,8,["model-value","onUpdate:modelValue"]),n(V,{title:"Freigeben um",subtype:"time","model-value":t.time[1],"onUpdate:modelValue":f=>e.updateState(_,f,"time.1")},null,8,["model-value","onUpdate:modelValue"]),n(y,{title:"Wiederholungen",buttons:[{buttonValue:"once",text:"Einmalig",class:"btn-outline-info"},{buttonValue:"daily",text:"Täglich",class:"btn-outline-info"},{buttonValue:"weekly",text:"Wöchentlich",class:"btn-outline-info"}],"model-value":t.frequency.selected,"onUpdate:modelValue":f=>e.updateState(_,f,"frequency.selected")},null,8,["model-value","onUpdate:modelValue"]),t.frequency.selected=="once"?(l(),v(V,{key:0,title:"Sperren ab ...",subtype:"date","model-value":t.frequency.once[0],"onUpdate:modelValue":f=>e.updateState(_,f,"frequency.once.0")},null,8,["model-value","onUpdate:modelValue"])):p("v-if",!0),t.frequency.selected=="once"?(l(),v(V,{key:1,title:"... bis",subtype:"date",min:t.frequency.once[0],"model-value":t.frequency.once[1],"onUpdate:modelValue":f=>e.updateState(_,f,"frequency.once.1")},null,8,["min","model-value","onUpdate:modelValue"])):p("v-if",!0),t.frequency.selected=="weekly"?(l(),c("div",Ze,[(l(!0),c(S,null,W(e.weekdays,(f,U)=>(l(),v(y,{key:U,title:f,buttons:[{buttonValue:!1,text:"Aus",class:"btn-outline-danger"},{buttonValue:!0,text:"An",class:"btn-outline-success"}],"model-value":t.frequency.weekly[U],"onUpdate:modelValue":J=>e.updateState(_,J,"frequency.weekly."+U)},null,8,["title","model-value","onUpdate:modelValue"]))),128))])):p("v-if",!0)]),_:2},1032,["title"]))),128))]),_:2},[r.endsWith("/0")?void 0:{name:"actions",fn:o(t=>[t.collapsed?p("v-if",!0):(l(),v(A,{key:0,class:"bg-danger clickable",onClick:_=>d.removeChargePointTemplateModal(r,_)},{default:o(()=>[n(b,{"fixed-width":"",icon:["fas","trash"]})]),_:2},1032,["onClick"]))]),key:"0"}]),1032,["title"]))),128))]))]),_:1}),n(Z,{formName:"chargePointInstallationForm",onSave:a[4]||(a[4]=s=>e.$emit("save")),onReset:a[5]||(a[5]=s=>e.$emit("reset")),onDefaults:a[6]||(a[6]=s=>e.$emit("defaults"))})])])],64)}const nt=q(ve,[["render",Je],["__scopeId","data-v-75fe5743"],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/ChargePointInstallation.vue"]]);export{nt as default};
