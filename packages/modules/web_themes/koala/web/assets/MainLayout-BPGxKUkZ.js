import{c as X,a as r,h as P,d as me,g as re,i as Ie,e as ee,l as ze,r as _,w as M,o as we,f as zt,j as G,k as wt,m as he,n as pt,p as kt,q as Ze,s as et,t as tt,u as De,v as Ee,x as He,y as _t,z as qt,A as ge,B as Ct,C as Tt,D as We,E as xt,F as lt,G as Se,H as Y,I,J as l,K as W,L as i,M as Te,Q as xe,N as E,O as ie,P as F,R as D,S as je,T as Bt,U as ye}from"./index-BUYs8GfR.js";import{Q as fe,s as $t,g as At,a as Pt,b as Vt,u as at,c as ot,d as Z,e as Be,T as ve,f as Ne,h as Mt,i as Ot,j as Lt,k as Qt,l as Dt,m as It,n as $e,o as Ht,p as Ae,q as ce,r as Pe,t as Ve,v as ue,w as ne,x as Ft,C as Me,y as Rt,z as Et,A as de,B as j,D as Oe,E as Le,F as Wt,_ as jt}from"./_plugin-vue_export-helper-Bd91fMXR.js";import{a as nt,u as rt}from"./mqtt-store-DYWgcnMC.js";const Nt=X({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:q}){const f=r(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>P("div",{class:f.value},me(q.default))}}),Ut=X({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:q}){const f=r(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>P("div",{class:f.value,role:"toolbar"},me(q.default))}}),Kt=X({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:q,emit:f}){const{proxy:{$q:y}}=re(),u=Ie(ze,ee);if(u===ee)return console.error("QHeader needs to be child of QLayout"),ee;const m=_(parseInt(e.heightHint,10)),a=_(!0),t=r(()=>e.reveal===!0||u.view.value.indexOf("H")!==-1||y.platform.is.ios&&u.isContainer.value===!0),S=r(()=>{if(e.modelValue!==!0)return 0;if(t.value===!0)return a.value===!0?m.value:0;const h=m.value-u.scroll.value.position;return h>0?h:0}),k=r(()=>e.modelValue!==!0||t.value===!0&&a.value!==!0),n=r(()=>e.modelValue===!0&&k.value===!0&&e.reveal===!0),d=r(()=>"q-header q-layout__section--marginal "+(t.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(k.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),B=r(()=>{const h=u.rows.value.top,z={};return h[0]==="l"&&u.left.space===!0&&(z[y.lang.rtl===!0?"right":"left"]=`${u.left.size}px`),h[2]==="r"&&u.right.space===!0&&(z[y.lang.rtl===!0?"left":"right"]=`${u.right.size}px`),z});function s(h,z){u.update("header",h,z)}function p(h,z){h.value!==z&&(h.value=z)}function A({height:h}){p(m,h),s("size",h)}function V(h){n.value===!0&&p(a,!0),f("focusin",h)}M(()=>e.modelValue,h=>{s("space",h),p(a,!0),u.animate()}),M(S,h=>{s("offset",h)}),M(()=>e.reveal,h=>{h===!1&&p(a,e.modelValue)}),M(a,h=>{u.animate(),f("reveal",h)}),M(u.scroll,h=>{e.reveal===!0&&p(a,h.direction==="up"||h.position<=e.revealOffset||h.position-h.inflectionPoint<100)});const C={};return u.instances.header=C,e.modelValue===!0&&s("size",m.value),s("space",e.modelValue),s("offset",S.value),we(()=>{u.instances.header===C&&(u.instances.header=void 0,s("size",0),s("offset",0),s("space",!1))}),()=>{const h=zt(q.default,[]);return e.elevated===!0&&h.push(P("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),h.push(P(fe,{debounce:0,onResize:A})),P("header",{class:d.value,style:B.value,onFocusin:V},h)}}}),Gt=X({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[P("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),P("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),G(P("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),G(P("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),{passive:Ue}=wt,Xt=["both","horizontal","vertical"],it=X({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Xt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:$t},emits:["scroll"],setup(e,{emit:q}){const f={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let y=null,u,m;M(()=>e.scrollTarget,()=>{S(),t()});function a(){y?.();const d=Math.max(0,Pt(u)),B=Vt(u),s={top:d-f.position.top,left:B-f.position.left};if(e.axis==="vertical"&&s.top===0||e.axis==="horizontal"&&s.left===0)return;const p=Math.abs(s.top)>=Math.abs(s.left)?s.top<0?"up":"down":s.left<0?"left":"right";f.position={top:d,left:B},f.directionChanged=f.direction!==p,f.delta=s,f.directionChanged===!0&&(f.direction=p,f.inflectionPoint=f.position),q("scroll",{...f})}function t(){u=At(m,e.scrollTarget),u.addEventListener("scroll",k,Ue),k(!0)}function S(){u!==void 0&&(u.removeEventListener("scroll",k,Ue),u=void 0)}function k(d){if(d===!0||e.debounce===0||e.debounce==="0")a();else if(y===null){const[B,s]=e.debounce?[setTimeout(a,e.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];y=()=>{s(B),y=null}}}const{proxy:n}=re();return M(()=>n.$q.lang.rtl,a),he(()=>{m=n.$el.parentNode,t()}),we(()=>{y?.(),S()}),Object.assign(n,{trigger:k,getPosition:()=>f}),pt}}),Ke=["vertical","horizontal"],Qe={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Ge={prevent:!0,mouse:!0,mouseAllDir:!0},Xe=e=>e>=250?50:Math.ceil(e/5),Jt=X({name:"QScrollArea",props:{...at,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:q,emit:f}){const y=_(!1),u=_(!1),m=_(!1),a={vertical:_(0),horizontal:_(0)},t={vertical:{ref:_(null),position:_(0),size:_(0)},horizontal:{ref:_(null),position:_(0),size:_(0)}},{proxy:S}=re(),k=ot(e,S.$q);let n=null,d;const B=_(null),s=r(()=>"q-scrollarea"+(k.value===!0?" q-scrollarea--dark":""));Object.assign(a,{verticalInner:r(()=>a.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:r(()=>a.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),t.vertical.percentage=r(()=>{const c=t.vertical.size.value-a.vertical.value;if(c<=0)return 0;const g=Z(t.vertical.position.value/c,0,1);return Math.round(g*1e4)/1e4}),t.vertical.thumbHidden=r(()=>(e.visible===null?m.value:e.visible)!==!0&&y.value===!1&&u.value===!1||t.vertical.size.value<=a.vertical.value+1),t.vertical.thumbStart=r(()=>e.verticalOffset[0]+t.vertical.percentage.value*(a.verticalInner.value-t.vertical.thumbSize.value)),t.vertical.thumbSize=r(()=>Math.round(Z(a.verticalInner.value*a.verticalInner.value/t.vertical.size.value,Xe(a.verticalInner.value),a.verticalInner.value))),t.vertical.style=r(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${t.vertical.thumbStart.value}px`,height:`${t.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),t.vertical.thumbClass=r(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.vertical.barClass=r(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),t.horizontal.percentage=r(()=>{const c=t.horizontal.size.value-a.horizontal.value;if(c<=0)return 0;const g=Z(Math.abs(t.horizontal.position.value)/c,0,1);return Math.round(g*1e4)/1e4}),t.horizontal.thumbHidden=r(()=>(e.visible===null?m.value:e.visible)!==!0&&y.value===!1&&u.value===!1||t.horizontal.size.value<=a.horizontal.value+1),t.horizontal.thumbStart=r(()=>e.horizontalOffset[0]+t.horizontal.percentage.value*(a.horizontalInner.value-t.horizontal.thumbSize.value)),t.horizontal.thumbSize=r(()=>Math.round(Z(a.horizontalInner.value*a.horizontalInner.value/t.horizontal.size.value,Xe(a.horizontalInner.value),a.horizontalInner.value))),t.horizontal.style=r(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[S.$q.lang.rtl===!0?"right":"left"]:`${t.horizontal.thumbStart.value}px`,width:`${t.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),t.horizontal.thumbClass=r(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.horizontal.barClass=r(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const p=r(()=>t.vertical.thumbHidden.value===!0&&t.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function A(){const c={};return Ke.forEach(g=>{const $=t[g];Object.assign(c,{[g+"Position"]:$.position.value,[g+"Percentage"]:$.percentage.value,[g+"Size"]:$.size.value,[g+"ContainerSize"]:a[g].value,[g+"ContainerInnerSize"]:a[g+"Inner"].value})}),c}const V=kt(()=>{const c=A();c.ref=S,f("scroll",c)},0);function C(c,g,$){if(Ke.includes(c)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(c==="vertical"?Ne:Be)(B.value,g,$)}function h({height:c,width:g}){let $=!1;a.vertical.value!==c&&(a.vertical.value=c,$=!0),a.horizontal.value!==g&&(a.horizontal.value=g,$=!0),$===!0&&Q()}function z({position:c}){let g=!1;t.vertical.position.value!==c.top&&(t.vertical.position.value=c.top,g=!0),t.horizontal.position.value!==c.left&&(t.horizontal.position.value=c.left,g=!0),g===!0&&Q()}function b({height:c,width:g}){t.horizontal.size.value!==g&&(t.horizontal.size.value=g,Q()),t.vertical.size.value!==c&&(t.vertical.size.value=c,Q())}function T(c,g){const $=t[g];if(c.isFirst===!0){if($.thumbHidden.value===!0)return;d=$.position.value,u.value=!0}else if(u.value!==!0)return;c.isFinal===!0&&(u.value=!1);const U=Qe[g],J=($.size.value-a[g].value)/(a[g+"Inner"].value-$.thumbSize.value),K=c.distance[U.dist],se=d+(c.direction===U.dir?1:-1)*K*J;N(se,g)}function O(c,g){const $=t[g];if($.thumbHidden.value!==!0){const U=g==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],J=c[Qe[g].offset]-U,K=$.thumbStart.value-U;if(J<K||J>K+$.thumbSize.value){const se=J-$.thumbSize.value/2,pe=Z(se/(a[g+"Inner"].value-$.thumbSize.value),0,1);N(pe*Math.max(0,$.size.value-a[g].value),g)}$.ref.value!==null&&$.ref.value.dispatchEvent(new MouseEvent(c.type,c))}}function Q(){y.value=!0,n!==null&&clearTimeout(n),n=setTimeout(()=>{n=null,y.value=!1},e.delay),e.onScroll!==void 0&&V()}function N(c,g){B.value[Qe[g].scroll]=c}let L=null;function v(){L!==null&&clearTimeout(L),L=setTimeout(()=>{L=null,m.value=!0},S.$q.platform.is.ios?50:0)}function w(){L!==null&&(clearTimeout(L),L=null),m.value=!1}let oe=null;M(()=>S.$q.lang.rtl,c=>{B.value!==null&&Be(B.value,Math.abs(t.horizontal.position.value)*(c===!0?-1:1))}),Ze(()=>{oe={top:t.vertical.position.value,left:t.horizontal.position.value}}),et(()=>{if(oe===null)return;const c=B.value;c!==null&&(Be(c,oe.left),Ne(c,oe.top))}),we(V.cancel),Object.assign(S,{getScrollTarget:()=>B.value,getScroll:A,getScrollPosition:()=>({top:t.vertical.position.value,left:t.horizontal.position.value}),getScrollPercentage:()=>({top:t.vertical.percentage.value,left:t.horizontal.percentage.value}),setScrollPosition:C,setScrollPercentage(c,g,$){C(c,g*(t[c].size.value-a[c].value)*(c==="horizontal"&&S.$q.lang.rtl===!0?-1:1),$)}});const te={scroll:t,thumbVertDir:[[ve,c=>{T(c,"vertical")},void 0,{vertical:!0,...Ge}]],thumbHorizDir:[[ve,c=>{T(c,"horizontal")},void 0,{horizontal:!0,...Ge}]],onVerticalMousedown(c){O(c,"vertical")},onHorizontalMousedown(c){O(c,"horizontal")}};return()=>P("div",{class:s.value,onMouseenter:v,onMouseleave:w},[P("div",{ref:B,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[P("div",{class:"q-scrollarea__content absolute",style:p.value},tt(q.default,[P(fe,{debounce:0,onResize:b})])),P(it,{axis:"both",onScroll:z})]),P(fe,{debounce:0,onResize:h}),P(Gt,{store:te,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}}),Je=150,Yt=X({name:"QDrawer",inheritAttrs:!1,props:{...Ot,...at,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Mt,"onLayout","miniState"],setup(e,{slots:q,emit:f,attrs:y}){const u=re(),{proxy:{$q:m}}=u,a=ot(e,m),{preventBodyScroll:t}=It(),{registerTimeout:S,removeTimeout:k}=Lt(),n=Ie(ze,ee);if(n===ee)return console.error("QDrawer needs to be child of QLayout"),ee;let d,B=null,s;const p=_(e.behavior==="mobile"||e.behavior!=="desktop"&&n.totalWidth.value<=e.breakpoint),A=r(()=>e.mini===!0&&p.value!==!0),V=r(()=>A.value===!0?e.miniWidth:e.width),C=_(e.showIfAbove===!0&&p.value===!1?!0:e.modelValue===!0),h=r(()=>e.persistent!==!0&&(p.value===!0||se.value===!0));function z(o,x){if(Q(),o!==!1&&n.animate(),R(0),p.value===!0){const H=n.instances[$.value];H?.belowBreakpoint===!0&&H.hide(!1),le(1),n.isContainer.value!==!0&&t(!0)}else le(0),o!==!1&&_e(!1);S(()=>{o!==!1&&_e(!0),x!==!0&&f("show",o)},Je)}function b(o,x){N(),o!==!1&&n.animate(),le(0),R(w.value*V.value),qe(),x!==!0?S(()=>{f("hide",o)},Je):k()}const{show:T,hide:O}=Qt({showing:C,hideOnRouteChange:h,handleShow:z,handleHide:b}),{addToHistory:Q,removeFromHistory:N}=Dt(C,O,h),L={belowBreakpoint:p,hide:O},v=r(()=>e.side==="right"),w=r(()=>(m.lang.rtl===!0?-1:1)*(v.value===!0?1:-1)),oe=_(0),te=_(!1),c=_(!1),g=_(V.value*w.value),$=r(()=>v.value===!0?"left":"right"),U=r(()=>C.value===!0&&p.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:V.value:0),J=r(()=>e.overlay===!0||e.miniToOverlay===!0||n.view.value.indexOf(v.value?"R":"L")!==-1||m.platform.is.ios===!0&&n.isContainer.value===!0),K=r(()=>e.overlay===!1&&C.value===!0&&p.value===!1),se=r(()=>e.overlay===!0&&C.value===!0&&p.value===!1),pe=r(()=>"fullscreen q-drawer__backdrop"+(C.value===!1&&te.value===!1?" hidden":"")),ut=r(()=>({backgroundColor:`rgba(0,0,0,${oe.value*.4})`})),Fe=r(()=>v.value===!0?n.rows.value.top[2]==="r":n.rows.value.top[0]==="l"),st=r(()=>v.value===!0?n.rows.value.bottom[2]==="r":n.rows.value.bottom[0]==="l"),ct=r(()=>{const o={};return n.header.space===!0&&Fe.value===!1&&(J.value===!0?o.top=`${n.header.offset}px`:n.header.space===!0&&(o.top=`${n.header.size}px`)),n.footer.space===!0&&st.value===!1&&(J.value===!0?o.bottom=`${n.footer.offset}px`:n.footer.space===!0&&(o.bottom=`${n.footer.size}px`)),o}),dt=r(()=>{const o={width:`${V.value}px`,transform:`translateX(${g.value}px)`};return p.value===!0?o:Object.assign(o,ct.value)}),vt=r(()=>"q-drawer__content fit "+(n.isContainer.value!==!0?"scroll":"overflow-auto")),ft=r(()=>`q-drawer q-drawer--${e.side}`+(c.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(a.value===!0?" q-drawer--dark q-dark":"")+(te.value===!0?" no-transition":C.value===!0?"":" q-layout--prevent-focus")+(p.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${A.value===!0?"mini":"standard"}`+(J.value===!0||K.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Fe.value===!0?" q-drawer--top-padding":""))),mt=r(()=>{const o=m.lang.rtl===!0?e.side:$.value;return[[ve,yt,void 0,{[o]:!0,mouse:!0}]]}),ht=r(()=>{const o=m.lang.rtl===!0?$.value:e.side;return[[ve,Re,void 0,{[o]:!0,mouse:!0}]]}),bt=r(()=>{const o=m.lang.rtl===!0?$.value:e.side;return[[ve,Re,void 0,{[o]:!0,mouse:!0,mouseAllDir:!0}]]});function ke(){St(p,e.behavior==="mobile"||e.behavior!=="desktop"&&n.totalWidth.value<=e.breakpoint)}M(p,o=>{o===!0?(d=C.value,C.value===!0&&O(!1)):e.overlay===!1&&e.behavior!=="mobile"&&d!==!1&&(C.value===!0?(R(0),le(0),qe()):T(!1))}),M(()=>e.side,(o,x)=>{n.instances[x]===L&&(n.instances[x]=void 0,n[x].space=!1,n[x].offset=0),n.instances[o]=L,n[o].size=V.value,n[o].space=K.value,n[o].offset=U.value}),M(n.totalWidth,()=>{(n.isContainer.value===!0||document.qScrollPrevented!==!0)&&ke()}),M(()=>e.behavior+e.breakpoint,ke),M(n.isContainer,o=>{C.value===!0&&t(o!==!0),o===!0&&ke()}),M(n.scrollbarWidth,()=>{R(C.value===!0?0:void 0)}),M(U,o=>{ae("offset",o)}),M(K,o=>{f("onLayout",o),ae("space",o)}),M(v,()=>{R()}),M(V,o=>{R(),Ce(e.miniToOverlay,o)}),M(()=>e.miniToOverlay,o=>{Ce(o,V.value)}),M(()=>m.lang.rtl,()=>{R()}),M(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(gt(),n.animate())}),M(A,o=>{f("miniState",o)});function R(o){o===void 0?De(()=>{o=C.value===!0?0:V.value,R(w.value*o)}):(n.isContainer.value===!0&&v.value===!0&&(p.value===!0||Math.abs(o)===V.value)&&(o+=w.value*n.scrollbarWidth.value),g.value=o)}function le(o){oe.value=o}function _e(o){const x=o===!0?"remove":n.isContainer.value!==!0?"add":"";x!==""&&document.body.classList[x]("q-body--drawer-toggle")}function gt(){B!==null&&clearTimeout(B),u.proxy&&u.proxy.$el&&u.proxy.$el.classList.add("q-drawer--mini-animate"),c.value=!0,B=setTimeout(()=>{B=null,c.value=!1,u?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function yt(o){if(C.value!==!1)return;const x=V.value,H=Z(o.distance.x,0,x);if(o.isFinal===!0){H>=Math.min(75,x)===!0?T():(n.animate(),le(0),R(w.value*x)),te.value=!1;return}R((m.lang.rtl===!0?v.value!==!0:v.value)?Math.max(x-H,0):Math.min(0,H-x)),le(Z(H/x,0,1)),o.isFirst===!0&&(te.value=!0)}function Re(o){if(C.value!==!0)return;const x=V.value,H=o.direction===e.side,be=(m.lang.rtl===!0?H!==!0:H)?Z(o.distance.x,0,x):0;if(o.isFinal===!0){Math.abs(be)<Math.min(75,x)===!0?(n.animate(),le(1),R(0)):O(),te.value=!1;return}R(w.value*be),le(Z(1-be/x,0,1)),o.isFirst===!0&&(te.value=!0)}function qe(){t(!1),_e(!0)}function ae(o,x){n.update(e.side,o,x)}function St(o,x){o.value!==x&&(o.value=x)}function Ce(o,x){ae("size",o===!0?e.miniWidth:x)}return n.instances[e.side]=L,Ce(e.miniToOverlay,V.value),ae("space",K.value),ae("offset",U.value),e.showIfAbove===!0&&e.modelValue!==!0&&C.value===!0&&e["onUpdate:modelValue"]!==void 0&&f("update:modelValue",!0),he(()=>{f("onLayout",K.value),f("miniState",A.value),d=e.showIfAbove===!0;const o=()=>{(C.value===!0?z:b)(!1,!0)};if(n.totalWidth.value!==0){De(o);return}s=M(n.totalWidth,()=>{s(),s=void 0,C.value===!1&&e.showIfAbove===!0&&p.value===!1?T(!1):o()})}),we(()=>{s?.(),B!==null&&(clearTimeout(B),B=null),C.value===!0&&qe(),n.instances[e.side]===L&&(n.instances[e.side]=void 0,ae("size",0),ae("offset",0),ae("space",!1))}),()=>{const o=[];p.value===!0&&(e.noSwipeOpen===!1&&o.push(G(P("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),mt.value)),o.push(Ee("div",{ref:"backdrop",class:pe.value,style:ut.value,"aria-hidden":"true",onClick:O},void 0,"backdrop",e.noSwipeBackdrop!==!0&&C.value===!0,()=>bt.value)));const x=A.value===!0&&q.mini!==void 0,H=[P("div",{...y,key:""+x,class:[vt.value,y.class]},x===!0?q.mini():me(q.default))];return e.elevated===!0&&C.value===!0&&H.push(P("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(Ee("aside",{ref:"content",class:ft.value,style:dt.value},H,"contentclose",e.noSwipeClose!==!0&&p.value===!0,()=>ht.value)),P("div",{class:"q-drawer-container"},o)}}}),Zt=X({name:"QPageContainer",setup(e,{slots:q}){const{proxy:{$q:f}}=re(),y=Ie(ze,ee);if(y===ee)return console.error("QPageContainer needs to be child of QLayout"),ee;He(_t,!0);const u=r(()=>{const m={};return y.header.space===!0&&(m.paddingTop=`${y.header.size}px`),y.right.space===!0&&(m[`padding${f.lang.rtl===!0?"Left":"Right"}`]=`${y.right.size}px`),y.footer.space===!0&&(m.paddingBottom=`${y.footer.size}px`),y.left.space===!0&&(m[`padding${f.lang.rtl===!0?"Right":"Left"}`]=`${y.left.size}px`),m});return()=>P("div",{class:"q-page-container",style:u.value},me(q.default))}}),el=X({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:q,emit:f}){const{proxy:{$q:y}}=re(),u=_(null),m=_(y.screen.height),a=_(e.container===!0?0:y.screen.width),t=_({position:0,direction:"down",inflectionPoint:0}),S=_(0),k=_(qt.value===!0?0:$e()),n=r(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=r(()=>e.container===!1?{minHeight:y.screen.height+"px"}:null),B=r(()=>k.value!==0?{[y.lang.rtl===!0?"left":"right"]:`${k.value}px`}:null),s=r(()=>k.value!==0?{[y.lang.rtl===!0?"right":"left"]:0,[y.lang.rtl===!0?"left":"right"]:`-${k.value}px`,width:`calc(100% + ${k.value}px)`}:null);function p(b){if(e.container===!0||document.qScrollPrevented!==!0){const T={position:b.position.top,direction:b.direction,directionChanged:b.directionChanged,inflectionPoint:b.inflectionPoint.top,delta:b.delta.top};t.value=T,e.onScroll!==void 0&&f("scroll",T)}}function A(b){const{height:T,width:O}=b;let Q=!1;m.value!==T&&(Q=!0,m.value=T,e.onScrollHeight!==void 0&&f("scrollHeight",T),C()),a.value!==O&&(Q=!0,a.value=O),Q===!0&&e.onResize!==void 0&&f("resize",b)}function V({height:b}){S.value!==b&&(S.value=b,C())}function C(){if(e.container===!0){const b=m.value>S.value?$e():0;k.value!==b&&(k.value=b)}}let h=null;const z={instances:{},view:r(()=>e.view),isContainer:r(()=>e.container),rootRef:u,height:m,containerHeight:S,scrollbarWidth:k,totalWidth:r(()=>a.value+k.value),rows:r(()=>{const b=e.view.toLowerCase().split(" ");return{top:b[0].split(""),middle:b[1].split(""),bottom:b[2].split("")}}),header:ge({size:0,offset:0,space:!1}),right:ge({size:300,offset:0,space:!1}),footer:ge({size:0,offset:0,space:!1}),left:ge({size:300,offset:0,space:!1}),scroll:t,animate(){h!==null?clearTimeout(h):document.body.classList.add("q-body--layout-animate"),h=setTimeout(()=>{h=null,document.body.classList.remove("q-body--layout-animate")},155)},update(b,T,O){z[b][T]=O}};if(He(ze,z),$e()>0){let b=function(){Q=null,N.classList.remove("hide-scrollbar")},T=function(){if(Q===null){if(N.scrollHeight>y.screen.height)return;N.classList.add("hide-scrollbar")}else clearTimeout(Q);Q=setTimeout(b,300)},O=function(L){Q!==null&&L==="remove"&&(clearTimeout(Q),b()),window[`${L}EventListener`]("resize",T)},Q=null;const N=document.body;M(()=>e.container!==!0?"add":"remove",O),e.container!==!0&&O("add"),Ct(()=>{O("remove")})}return()=>{const b=tt(q.default,[P(it,{onScroll:p}),P(fe,{onResize:A})]),T=P("div",{class:n.value,style:d.value,ref:e.container===!0?void 0:u,tabindex:-1},b);return e.container===!0?P("div",{class:"q-layout-container overflow-hidden",ref:u},[P(fe,{onResize:V}),P("div",{class:"absolute-full",style:B.value},[P("div",{class:"scroll",style:s.value},[T])])]):T}}}),Ye=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:q,emit:f}){const y=re(),u=_(null);let m=0;const a=[];function t(s){const p=typeof s=="boolean"?s:e.noErrorFocus!==!0,A=++m,V=(z,b)=>{f(`validation${z===!0?"Success":"Error"}`,b)},C=z=>{const b=z.validate();return typeof b.then=="function"?b.then(T=>({valid:T,comp:z}),T=>({valid:!1,comp:z,err:T})):Promise.resolve({valid:b,comp:z})};return(e.greedy===!0?Promise.all(a.map(C)).then(z=>z.filter(b=>b.valid!==!0)):a.reduce((z,b)=>z.then(()=>C(b).then(T=>{if(T.valid===!1)return Promise.reject(T)})),Promise.resolve()).catch(z=>[z])).then(z=>{if(z===void 0||z.length===0)return A===m&&V(!0),!0;if(A===m){const{comp:b,err:T}=z[0];if(T!==void 0&&console.error(T),V(!1,b),p===!0){const O=z.find(({comp:Q})=>typeof Q.focus=="function"&&Tt(Q.$)===!1);O!==void 0&&O.comp.focus()}}return!1})}function S(){m++,a.forEach(s=>{typeof s.resetValidation=="function"&&s.resetValidation()})}function k(s){s!==void 0&&We(s);const p=m+1;t().then(A=>{p===m&&A===!0&&(e.onSubmit!==void 0?f("submit",s):s?.target!==void 0&&typeof s.target.submit=="function"&&s.target.submit())})}function n(s){s!==void 0&&We(s),f("reset"),De(()=>{S(),e.autofocus===!0&&e.noResetFocus!==!0&&d()})}function d(){Ht(()=>{if(u.value===null)return;(u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),p=>p.tabIndex!==-1))?.focus({preventScroll:!0})})}He(xt,{bindComponent(s){a.push(s)},unbindComponent(s){const p=a.indexOf(s);p!==-1&&a.splice(p,1)}});let B=!1;return Ze(()=>{B=!0}),et(()=>{B===!0&&e.autofocus===!0&&d()}),he(()=>{e.autofocus===!0&&d()}),Object.assign(y.proxy,{validate:t,resetValidation:S,submit:k,reset:n,focus:d,getValidationComponents:()=>a}),()=>P("form",{class:"q-form",ref:u,onSubmit:k,onReset:n},me(q.default))}}),tl={key:0,id:"user-indicator"},ll=lt({__name:"UserIndicator",setup(e){const q=nt(),f=rt(),y=_(!1),u=_(!1),m=_(!1),a=_(""),t=_(""),S=_(""),k=_(""),n=r(()=>q.screen.lt.sm),d=r(()=>f.userManagementActive===!0),B=r(()=>f.accessAllowed===!0),s=r(()=>B.value&&!A.value),p=r(()=>f.dataProtectionAcknowledged===!0),A=r(()=>q.cookies.has("mqtt")),V=r(()=>A.value?q.cookies.get("mqtt").split(":")[0]:""),C=r(()=>z(a.value)),h=r(()=>z(a.value)||z(k.value)||z(t.value)||z(S.value)||t.value!==S.value),z=L=>!L||L.length===0,b=()=>{q.cookies.has("mqtt")?(q.cookies.remove("mqtt",{path:"/"}),location.reload()):console.warn("No mqtt cookie found to remove")},T=()=>{if(!a.value||a.value.length===0){u.value=!1;return}const L=`${a.value}:${t.value}`;q.cookies.set("mqtt",L,{expires:"30d",path:"/",secure:!0,sameSite:"Lax"}),u.value=!1,location.reload()},O=()=>{a.value="",t.value="",S.value="",k.value=""},Q=()=>{if(!a.value||a.value.length===0){console.error("Benutzername erforderlich.");return}f.sendSystemCommand("createPasswordResetToken",{username:a.value}),q.notify({type:"info",message:`Falls der Benutzer "${a.value}" existiert und eine E-Mail-Adresse hinterlegt ist, wurde ein Token per E-Mail versendet.`,progress:!0})},N=()=>{if(!a.value||a.value.length===0||!k.value||k.value.length===0||!t.value||t.value.length===0||!S.value||S.value.length===0){if(t.value!==S.value){q.notify({type:"negative",message:"Kennwörter stimmen nicht überein.",progress:!0});return}q.notify({type:"negative",message:"Benutzername, Token und neues Kennwort erforderlich.",progress:!0});return}f.sendSystemCommand("resetUserPassword",{username:a.value,token:k.value,newPassword:t.value}),q.notify({type:"info",message:`Falls der Benutzer "${a.value}" existiert und der Token korrekt ist, wurde das Kennwort zurückgesetzt.`,progress:!0})};return M(s,L=>{d.value&&!L&&!A.value?u.value=!0:u.value=!1}),he(()=>{d.value&&!s.value&&!A.value&&(u.value=!0)}),(L,v)=>d.value?(I(),Se("div",tl,[l(Ve,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=w=>y.value=w),persistent:""},{default:i(()=>[l(Ae,null,{default:i(()=>[l(ce,{class:"row items-center"},{default:i(()=>[l(xe,{icon:"logout",color:"negative","text-color":"white"}),v[14]||(v[14]=Te("span",{class:"q-ml-sm"},"Willst Du Dich wirklich abmelden?",-1))]),_:1,__:[14]}),l(Pe,{align:"right"},{default:i(()=>[G(l(E,{flat:"",label:"Abmelden",color:"negative",onClick:b},null,512),[[Me]]),G(l(E,{flat:"",label:"Schließen",color:"primary"},null,512),[[Me]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ve,{modelValue:u.value,"onUpdate:modelValue":v[4]||(v[4]=w=>u.value=w),persistent:"",onHide:O},{default:i(()=>[l(Ae,null,{default:i(()=>[l(ce,{class:"row items-center"},{default:i(()=>[l(xe,{icon:"login",color:"positive","text-color":"white"}),v[15]||(v[15]=Te("span",{class:"q-ml-sm"},"Gib Deine Anmeldedaten ein.",-1))]),_:1,__:[15]}),l(Ye,{onSubmit:T},{default:i(()=>[l(ce,null,{default:i(()=>[l(ie(ue),{modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=w=>a.value=w),label:"Benutzername",type:"text",dense:"",autofocus:"",rules:[w=>w&&w.length>0||"Benutzername erforderlich"]},{prepend:i(()=>[l(F,{name:"account_circle"})]),_:1},8,["modelValue","rules"]),l(ie(ue),{modelValue:t.value,"onUpdate:modelValue":v[2]||(v[2]=w=>t.value=w),label:"Kennwort",type:"password",dense:"",rules:[w=>w&&w.length>0||"Passwort erforderlich"]},{prepend:i(()=>[l(F,{name:"key"})]),_:1},8,["modelValue","rules"])]),_:1}),l(Pe,{align:"right"},{default:i(()=>[l(E,{flat:"",label:"Anmelden",color:"positive",type:"submit",disable:z(a.value)||z(t.value)},null,8,["disable"]),p.value?(I(),W(E,{key:0,flat:"",label:"Kennwort vergessen",color:"warning",type:"button",onClick:v[3]||(v[3]=w=>{u.value=!1,m.value=!0})})):Y("",!0),s.value?G((I(),W(E,{key:1,flat:"",label:"Schließen",color:"primary"},null,512)),[[Me]]):Y("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p.value?(I(),W(Ve,{key:0,modelValue:m.value,"onUpdate:modelValue":v[12]||(v[12]=w=>m.value=w),persistent:"",onHide:O},{default:i(()=>[l(Ae,null,{default:i(()=>[l(ce,{class:"row items-center"},{default:i(()=>[l(xe,{icon:"login",color:"warning","text-color":"white"}),v[16]||(v[16]=Te("span",{class:"q-ml-sm"},"Kennwort vergessen",-1))]),_:1,__:[16]}),l(Ye,{onSubmit:T},{default:i(()=>[l(ce,null,{default:i(()=>[l(ie(ue),{modelValue:a.value,"onUpdate:modelValue":v[5]||(v[5]=w=>a.value=w),label:"Benutzername",type:"text",dense:"",autofocus:"",rules:[w=>w&&w.length>0||"Benutzername erforderlich"]},{prepend:i(()=>[l(F,{name:"account_circle"})]),_:1},8,["modelValue","rules"]),l(ie(ue),{modelValue:k.value,"onUpdate:modelValue":v[6]||(v[6]=w=>k.value=w),label:"Token",type:"password",dense:""},{prepend:i(()=>[l(F,{name:"key"})]),_:1},8,["modelValue"]),l(ie(ue),{modelValue:t.value,"onUpdate:modelValue":v[7]||(v[7]=w=>t.value=w),label:"Neues Kennwort",type:"password",dense:""},{prepend:i(()=>[l(F,{name:"key"})]),_:1},8,["modelValue"]),l(ie(ue),{modelValue:S.value,"onUpdate:modelValue":v[8]||(v[8]=w=>S.value=w),label:"Neues Kennwort bestätigen",type:"password",dense:"",rules:[w=>w==t.value||"Kennwörter stimmen nicht überein"]},{prepend:i(()=>[l(F,{name:"key"})]),_:1},8,["modelValue","rules"])]),_:1}),l(Pe,{align:"right"},{default:i(()=>[l(E,{flat:"",label:"Token anfordern",color:"positive",type:"button",disabled:C.value,onClick:v[9]||(v[9]=w=>Q())},null,8,["disabled"]),l(E,{flat:"",label:"Kennwort zurücksetzen",color:"primary",type:"button",disabled:h.value,onClick:v[10]||(v[10]=w=>N())},null,8,["disabled"]),l(E,{flat:"",label:"Zurück",color:"negative",onClick:v[11]||(v[11]=w=>{m.value=!1,u.value=!0})})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Y("",!0),l(Ft,{rounded:"",align:"middle",color:A.value?"positive":"negative",class:"non-selectable"},{default:i(()=>[l(F,{name:A.value?"account_circle":"no_accounts",size:"sm",left:!n.value},{default:i(()=>[A.value?(I(),W(ne,{key:0},{default:i(()=>[D('Angemeldet als "'+je(V.value)+'"',1)]),_:1})):(I(),W(ne,{key:1},{default:i(()=>v[17]||(v[17]=[D("Anmelden",-1)])),_:1,__:[17]}))]),_:1},8,["name","left"]),D(" "+je(!n.value&&A.value?V.value:"")+" ",1),l(F,{name:A.value?"logout":"login",size:"sm",right:!n.value,class:"cursor-pointer",onClick:v[13]||(v[13]=w=>A.value?y.value=!0:u.value=!0)},{default:i(()=>[A.value?(I(),W(ne,{key:0},{default:i(()=>v[18]||(v[18]=[D("Abmelden",-1)])),_:1,__:[18]})):(I(),W(ne,{key:1},{default:i(()=>v[19]||(v[19]=[D("Anmelden",-1)])),_:1,__:[19]}))]),_:1},8,["name","right"])]),_:1},8,["color"])])):Y("",!0)}}),al={key:0},ol={key:1},nl={key:2},rl=lt({name:"MainLayout",__name:"MainLayout",setup(e){const q=rt(),f=nt(),y=r(()=>q.accessSettingsAllowed),u=r(()=>q.accessStatusAllowed),m=r(()=>q.accessChargeLogAllowed),a=r(()=>q.accessChartAllowed),t=_(!1),S=_("auto"),k=n=>{S.value=n,n==="auto"?(localStorage.removeItem("theme"),f.dark.set("auto")):(f.dark.set(n==="dark"),localStorage.setItem("theme",n))};return he(()=>{const n=localStorage.getItem("theme");n?(S.value=n,f.dark.set(n==="dark")):(S.value="auto",f.dark.set("auto"))}),(n,d)=>{const B=Bt("router-view");return I(),W(el,{view:"hHh lpr lFf"},{default:i(()=>[l(Kt,{elevated:""},{default:i(()=>[l(Ut,null,{default:i(()=>[l(E,{dense:"",flat:"",round:"",icon:"menu",onClick:d[0]||(d[0]=s=>t.value=!t.value)}),l(Nt,null,{default:i(()=>d[5]||(d[5]=[D("openWB",-1)])),_:1,__:[5]}),l(Rt),l(ll)]),_:1})]),_:1}),l(Yt,{modelValue:t.value,"onUpdate:modelValue":d[4]||(d[4]=s=>t.value=s),side:"left",overlay:"",elevated:"",breakpoint:500},{default:i(()=>[l(Jt,{class:"fit","horizontal-thumb-style":{opacity:"0"}},{default:i(()=>[l(Et,{padding:""},{default:i(()=>[u.value?(I(),Se("div",al,[G((I(),W(de,{clickable:"",href:"/openWB/web/settings/#/Status"},{default:i(()=>[l(j,{avatar:""},{default:i(()=>[l(F,{name:"dashboard"})]),_:1}),l(j,null,{default:i(()=>d[6]||(d[6]=[D(" Status ",-1)])),_:1,__:[6]})]),_:1})),[[ye]]),l(Oe)])):Y("",!0),m.value||a.value?(I(),Se("div",ol,[l(Le,{header:""},{default:i(()=>d[7]||(d[7]=[D("Auswertungen",-1)])),_:1,__:[7]}),m.value?G((I(),W(de,{key:0,clickable:"",href:"/openWB/web/settings/#/Logging/ChargeLog"},{default:i(()=>[l(j,{avatar:""},{default:i(()=>[l(F,{name:"table_chart"})]),_:1}),l(j,null,{default:i(()=>d[8]||(d[8]=[D(" Ladeprotokoll ",-1)])),_:1,__:[8]})]),_:1})),[[ye]]):Y("",!0),a.value?G((I(),W(de,{key:1,clickable:"",href:"/openWB/web/settings/#/Logging/Chart"},{default:i(()=>[l(j,{avatar:""},{default:i(()=>[l(F,{name:"area_chart"})]),_:1}),l(j,null,{default:i(()=>d[9]||(d[9]=[D(" Diagramme ",-1)])),_:1,__:[9]})]),_:1})),[[ye]]):Y("",!0),l(Oe)])):Y("",!0),y.value?(I(),Se("div",nl,[G((I(),W(de,{clickable:"",href:"/openWB/web/settings/"},{default:i(()=>[l(j,{avatar:""},{default:i(()=>[l(F,{name:"settings"})]),_:1}),l(j,null,{default:i(()=>d[10]||(d[10]=[D(" Einstellungen ",-1)])),_:1,__:[10]})]),_:1})),[[ye]]),l(Oe)])):Y("",!0),l(Le,{header:""},{default:i(()=>d[11]||(d[11]=[D("Anzeigeeinstellungen",-1)])),_:1,__:[11]}),l(de,null,{default:i(()=>[l(j,{avatar:""},{default:i(()=>[l(F,{name:"light_mode"})]),_:1}),l(j,null,{default:i(()=>[l(Le,null,{default:i(()=>d[12]||(d[12]=[D("Darstellungsmodus",-1)])),_:1,__:[12]})]),_:1}),l(j,{side:""},{default:i(()=>[l(Wt,{flat:""},{default:i(()=>[l(E,{flat:"",round:"",color:S.value==="light"?"primary":"",icon:"light_mode",onClick:d[1]||(d[1]=s=>k("light")),size:"sm",disable:S.value==="light","aria-label":"Light Mode"},{default:i(()=>[l(ne,null,{default:i(()=>d[13]||(d[13]=[D("Hell",-1)])),_:1,__:[13]})]),_:1},8,["color","disable"]),l(E,{flat:"",round:"",color:S.value==="dark"?"primary":"",icon:"dark_mode",onClick:d[2]||(d[2]=s=>k("dark")),size:"sm",disable:S.value==="dark","aria-label":"Dark Mode"},{default:i(()=>[l(ne,null,{default:i(()=>d[14]||(d[14]=[D("Dunkel",-1)])),_:1,__:[14]})]),_:1},8,["color","disable"]),l(E,{flat:"",round:"",color:S.value==="auto"?"primary":"",icon:"devices",onClick:d[3]||(d[3]=s=>k("auto")),size:"sm",disable:S.value==="auto","aria-label":"System Mode"},{default:i(()=>[l(ne,null,{default:i(()=>d[15]||(d[15]=[D("Systemeinstellung",-1)])),_:1,__:[15]})]),_:1},8,["color","disable"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Zt,{class:"column flex centered-container"},{default:i(()=>[l(B)]),_:1})]),_:1})}}}),dl=jt(rl,[["__scopeId","data-v-2f32434e"]]);export{dl as default};
