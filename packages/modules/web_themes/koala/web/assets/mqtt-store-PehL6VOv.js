var au=Object.defineProperty;var To=f=>{throw TypeError(f)};var lu=(f,h,s)=>h in f?au(f,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[h]=s;var ot=(f,h,s)=>lu(f,typeof h!="symbol"?h+"":h,s),an=(f,h,s)=>h.has(f)||To("Cannot "+s);var D=(f,h,s)=>(an(f,h,"read from private field"),s?s.call(f):h.get(f)),Ke=(f,h,s)=>h.has(f)?To("Cannot add the same private member more than once"):h instanceof WeakSet?h.add(f):h.set(f,s),Le=(f,h,s,a)=>(an(f,h,"write to private field"),a?a.call(f,s):h.set(f,s),s),Be=(f,h,s)=>(an(f,h,"access private method"),s);var Sr=(f,h,s,a)=>({set _(c){Le(f,h,c,s)},get _(){return D(f,h,a)}});import{ae as uu,r as Co,a as Se}from"./index-DGOuvJr6.js";var ho=Object.defineProperty,cu=Object.getOwnPropertyDescriptor,hu=Object.getOwnPropertyNames,fu=Object.prototype.hasOwnProperty,vt=(f,h)=>()=>(f&&(h=f(f=0)),h),Ae=(f,h)=>()=>(h||f((h={exports:{}}).exports,h),h.exports),lr=(f,h)=>{for(var s in h)ho(f,s,{get:h[s],enumerable:!0})},pu=(f,h,s,a)=>{if(h&&typeof h=="object"||typeof h=="function")for(let c of hu(h))!fu.call(f,c)&&c!==s&&ho(f,c,{get:()=>h[c],enumerable:!(a=cu(h,c))||a.enumerable});return f},Ge=f=>pu(ho({},"__esModule",{value:!0}),f),ye=vt(()=>{}),Ye={};lr(Ye,{_debugEnd:()=>Vn,_debugProcess:()=>qn,_events:()=>oi,_eventsCount:()=>si,_exiting:()=>kn,_fatalExceptions:()=>Wn,_getActiveHandles:()=>Hs,_getActiveRequests:()=>Ks,_kill:()=>jn,_linkedBinding:()=>Vs,_maxListeners:()=>ii,_preload_modules:()=>ri,_rawDebug:()=>On,_startProfilerIdleNotifier:()=>zn,_stopProfilerIdleNotifier:()=>Kn,_tickCallback:()=>$n,abort:()=>Yn,addListener:()=>ai,allowedNodeEnvironmentFlags:()=>Ln,arch:()=>fn,argv:()=>gn,argv0:()=>ti,assert:()=>Gs,binding:()=>wn,browser:()=>xn,chdir:()=>En,config:()=>Tn,cpuUsage:()=>fr,cwd:()=>Sn,debugPort:()=>ei,default:()=>po,dlopen:()=>zs,domain:()=>Pn,emit:()=>fi,emitWarning:()=>vn,env:()=>dn,execArgv:()=>yn,execPath:()=>Zn,exit:()=>Nn,features:()=>Dn,hasUncaughtExceptionCaptureCallback:()=>Qs,hrtime:()=>xr,kill:()=>Bn,listeners:()=>Js,memoryUsage:()=>Mn,moduleLoadList:()=>In,nextTick:()=>$s,off:()=>ui,on:()=>kt,once:()=>li,openStdin:()=>Un,pid:()=>Jn,platform:()=>pn,ppid:()=>Xn,prependListener:()=>pi,prependOnceListener:()=>di,reallyExit:()=>Cn,release:()=>An,removeAllListeners:()=>hi,removeListener:()=>ci,resourceUsage:()=>Rn,setSourceMapsEnabled:()=>ni,setUncaughtExceptionCaptureCallback:()=>Fn,stderr:()=>Gn,stdin:()=>Qn,stdout:()=>Hn,title:()=>hn,umask:()=>_n,uptime:()=>Ys,version:()=>mn,versions:()=>bn});function fo(f){throw new Error("Node.js process "+f+" is not supported by JSPM core outside of Node.js")}function du(){!Zt||!Jt||(Zt=!1,Jt.length?Ot=Jt.concat(Ot):yr=-1,Ot.length&&Fs())}function Fs(){if(!Zt){var f=setTimeout(du,0);Zt=!0;for(var h=Ot.length;h;){for(Jt=Ot,Ot=[];++yr<h;)Jt&&Jt[yr].run();yr=-1,h=Ot.length}Jt=null,Zt=!1,clearTimeout(f)}}function $s(f){var h=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)h[s-1]=arguments[s];Ot.push(new qs(f,h)),Ot.length===1&&!Zt&&setTimeout(Fs,0)}function qs(f,h){this.fun=f,this.array=h}function pt(){}function Vs(f){fo("_linkedBinding")}function zs(f){fo("dlopen")}function Ks(){return[]}function Hs(){return[]}function Gs(f,h){if(!f)throw new Error(h||"assertion error")}function Qs(){return!1}function Ys(){return Ct.now()/1e3}function xr(f){var h=Math.floor((Date.now()-Ct.now())*.001),s=Ct.now()*.001,a=Math.floor(s)+h,c=Math.floor(s%1*1e9);return f&&(a=a-f[0],c=c-f[1],c<0&&(a--,c+=Or)),[a,c]}function kt(){return po}function Js(f){return[]}var Ot,Zt,Jt,yr,hn,fn,pn,dn,gn,yn,mn,bn,vn,wn,_n,Sn,En,An,xn,On,In,Pn,kn,Tn,Cn,jn,fr,Rn,Mn,Bn,Nn,Un,Ln,Dn,Wn,Fn,$n,qn,Vn,zn,Kn,Hn,Gn,Qn,Yn,Jn,Xn,Zn,ei,ti,ri,ni,Ct,ln,Or,ii,oi,si,ai,li,ui,ci,hi,fi,pi,di,po,gu=vt(()=>{ye(),be(),me(),Ot=[],Zt=!1,yr=-1,qs.prototype.run=function(){this.fun.apply(null,this.array)},hn="browser",fn="x64",pn="browser",dn={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},gn=["/usr/bin/node"],yn=[],mn="v16.8.0",bn={},vn=function(f,h){console.warn((h?h+": ":"")+f)},wn=function(f){fo("binding")},_n=function(f){return 0},Sn=function(){return"/"},En=function(f){},An={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},xn=!0,On=pt,In=[],Pn={},kn=!1,Tn={},Cn=pt,jn=pt,fr=function(){return{}},Rn=fr,Mn=fr,Bn=pt,Nn=pt,Un=pt,Ln={},Dn={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Wn=pt,Fn=pt,$n=pt,qn=pt,Vn=pt,zn=pt,Kn=pt,Hn=void 0,Gn=void 0,Qn=void 0,Yn=pt,Jn=2,Xn=1,Zn="/bin/usr/node",ei=9229,ti="node",ri=[],ni=pt,Ct={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Ct.now===void 0&&(ln=Date.now(),Ct.timing&&Ct.timing.navigationStart&&(ln=Ct.timing.navigationStart),Ct.now=()=>Date.now()-ln),Or=1e9,xr.bigint=function(f){var h=xr(f);return typeof BigInt>"u"?h[0]*Or+h[1]:BigInt(h[0]*Or)+BigInt(h[1])},ii=10,oi={},si=0,ai=kt,li=kt,ui=kt,ci=kt,hi=kt,fi=pt,pi=kt,di=kt,po={version:mn,versions:bn,arch:fn,platform:pn,browser:xn,release:An,_rawDebug:On,moduleLoadList:In,binding:wn,_linkedBinding:Vs,_events:oi,_eventsCount:si,_maxListeners:ii,on:kt,addListener:ai,once:li,off:ui,removeListener:ci,removeAllListeners:hi,emit:fi,prependListener:pi,prependOnceListener:di,listeners:Js,domain:Pn,_exiting:kn,config:Tn,dlopen:zs,uptime:Ys,_getActiveRequests:Ks,_getActiveHandles:Hs,reallyExit:Cn,_kill:jn,cpuUsage:fr,resourceUsage:Rn,memoryUsage:Mn,kill:Bn,exit:Nn,openStdin:Un,allowedNodeEnvironmentFlags:Ln,assert:Gs,features:Dn,_fatalExceptions:Wn,setUncaughtExceptionCaptureCallback:Fn,hasUncaughtExceptionCaptureCallback:Qs,emitWarning:vn,nextTick:$s,_tickCallback:$n,_debugProcess:qn,_debugEnd:Vn,_startProfilerIdleNotifier:zn,_stopProfilerIdleNotifier:Kn,stdout:Hn,stdin:Qn,stderr:Gn,abort:Yn,umask:_n,chdir:En,cwd:Sn,env:dn,title:hn,argv:gn,execArgv:yn,pid:Jn,ppid:Xn,execPath:Zn,debugPort:ei,hrtime:xr,argv0:ti,_preload_modules:ri,setSourceMapsEnabled:ni}}),me=vt(()=>{gu()});function yu(){if(gi)return or;gi=!0,or.byteLength=t,or.toByteArray=i,or.fromByteArray=p;for(var f=[],h=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,n=a.length;c<n;++c)f[c]=a[c],h[a.charCodeAt(c)]=c;h[45]=62,h[95]=63;function r(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=g.indexOf("=");A===-1&&(A=b);var S=A===b?0:4-A%4;return[A,S]}function t(g){var b=r(g),A=b[0],S=b[1];return(A+S)*3/4-S}function e(g,b,A){return(b+A)*3/4-A}function i(g){var b,A=r(g),S=A[0],O=A[1],y=new s(e(g,S,O)),v=0,E=O>0?S-4:S,_;for(_=0;_<E;_+=4)b=h[g.charCodeAt(_)]<<18|h[g.charCodeAt(_+1)]<<12|h[g.charCodeAt(_+2)]<<6|h[g.charCodeAt(_+3)],y[v++]=b>>16&255,y[v++]=b>>8&255,y[v++]=b&255;return O===2&&(b=h[g.charCodeAt(_)]<<2|h[g.charCodeAt(_+1)]>>4,y[v++]=b&255),O===1&&(b=h[g.charCodeAt(_)]<<10|h[g.charCodeAt(_+1)]<<4|h[g.charCodeAt(_+2)]>>2,y[v++]=b>>8&255,y[v++]=b&255),y}function l(g){return f[g>>18&63]+f[g>>12&63]+f[g>>6&63]+f[g&63]}function d(g,b,A){for(var S,O=[],y=b;y<A;y+=3)S=(g[y]<<16&16711680)+(g[y+1]<<8&65280)+(g[y+2]&255),O.push(l(S));return O.join("")}function p(g){for(var b,A=g.length,S=A%3,O=[],y=16383,v=0,E=A-S;v<E;v+=y)O.push(d(g,v,v+y>E?E:v+y));return S===1?(b=g[A-1],O.push(f[b>>2]+f[b<<4&63]+"==")):S===2&&(b=(g[A-2]<<8)+g[A-1],O.push(f[b>>10]+f[b>>4&63]+f[b<<2&63]+"=")),O.join("")}return or}function mu(){return yi?pr:(yi=!0,pr.read=function(f,h,s,a,c){var n,r,t=c*8-a-1,e=(1<<t)-1,i=e>>1,l=-7,d=s?c-1:0,p=s?-1:1,g=f[h+d];for(d+=p,n=g&(1<<-l)-1,g>>=-l,l+=t;l>0;n=n*256+f[h+d],d+=p,l-=8);for(r=n&(1<<-l)-1,n>>=-l,l+=a;l>0;r=r*256+f[h+d],d+=p,l-=8);if(n===0)n=1-i;else{if(n===e)return r?NaN:(g?-1:1)*(1/0);r=r+Math.pow(2,a),n=n-i}return(g?-1:1)*r*Math.pow(2,n-a)},pr.write=function(f,h,s,a,c,n){var r,t,e,i=n*8-c-1,l=(1<<i)-1,d=l>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=a?0:n-1,b=a?1:-1,A=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(t=isNaN(h)?1:0,r=l):(r=Math.floor(Math.log(h)/Math.LN2),h*(e=Math.pow(2,-r))<1&&(r--,e*=2),r+d>=1?h+=p/e:h+=p*Math.pow(2,1-d),h*e>=2&&(r++,e/=2),r+d>=l?(t=0,r=l):r+d>=1?(t=(h*e-1)*Math.pow(2,c),r=r+d):(t=h*Math.pow(2,d-1)*Math.pow(2,c),r=0));c>=8;f[s+g]=t&255,g+=b,t/=256,c-=8);for(r=r<<c|t,i+=c;i>0;f[s+g]=r&255,g+=b,r/=256,i-=8);f[s+g-b]|=A*128},pr)}function bu(){if(mi)return Wt;mi=!0;let f=yu(),h=mu(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wt.Buffer=r,Wt.SlowBuffer=O,Wt.INSPECT_MAX_BYTES=50;let a=2147483647;Wt.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=c(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let o=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(o,u),o.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function n(o){if(o>a)throw new RangeError('The value "'+o+'" is invalid for option "size"');let u=new Uint8Array(o);return Object.setPrototypeOf(u,r.prototype),u}function r(o,u,m){if(typeof o=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(o)}return t(o,u,m)}r.poolSize=8192;function t(o,u,m){if(typeof o=="string")return d(o,u);if(ArrayBuffer.isView(o))return g(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(Y(o,ArrayBuffer)||o&&Y(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(o,SharedArrayBuffer)||o&&Y(o.buffer,SharedArrayBuffer)))return b(o,u,m);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let C=o.valueOf&&o.valueOf();if(C!=null&&C!==o)return r.from(C,u,m);let N=A(o);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return r.from(o[Symbol.toPrimitive]("string"),u,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}r.from=function(o,u,m){return t(o,u,m)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function e(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function i(o,u,m){return e(o),o<=0?n(o):u!==void 0?typeof m=="string"?n(o).fill(u,m):n(o).fill(u):n(o)}r.alloc=function(o,u,m){return i(o,u,m)};function l(o){return e(o),n(o<0?0:S(o)|0)}r.allocUnsafe=function(o){return l(o)},r.allocUnsafeSlow=function(o){return l(o)};function d(o,u){if((typeof u!="string"||u==="")&&(u="utf8"),!r.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let m=y(o,u)|0,C=n(m),N=C.write(o,u);return N!==m&&(C=C.slice(0,N)),C}function p(o){let u=o.length<0?0:S(o.length)|0,m=n(u);for(let C=0;C<u;C+=1)m[C]=o[C]&255;return m}function g(o){if(Y(o,Uint8Array)){let u=new Uint8Array(o);return b(u.buffer,u.byteOffset,u.byteLength)}return p(o)}function b(o,u,m){if(u<0||o.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<u+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return u===void 0&&m===void 0?C=new Uint8Array(o):m===void 0?C=new Uint8Array(o,u):C=new Uint8Array(o,u,m),Object.setPrototypeOf(C,r.prototype),C}function A(o){if(r.isBuffer(o)){let u=S(o.length)|0,m=n(u);return m.length===0||o.copy(m,0,0,u),m}if(o.length!==void 0)return typeof o.length!="number"||Ee(o.length)?n(0):p(o);if(o.type==="Buffer"&&Array.isArray(o.data))return p(o.data)}function S(o){if(o>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return o|0}function O(o){return+o!=o&&(o=0),r.alloc(+o)}r.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==r.prototype},r.compare=function(o,u){if(Y(o,Uint8Array)&&(o=r.from(o,o.offset,o.byteLength)),Y(u,Uint8Array)&&(u=r.from(u,u.offset,u.byteLength)),!r.isBuffer(o)||!r.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;let m=o.length,C=u.length;for(let N=0,H=Math.min(m,C);N<H;++N)if(o[N]!==u[N]){m=o[N],C=u[N];break}return m<C?-1:C<m?1:0},r.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return r.alloc(0);let m;if(u===void 0)for(u=0,m=0;m<o.length;++m)u+=o[m].length;let C=r.allocUnsafe(u),N=0;for(m=0;m<o.length;++m){let H=o[m];if(Y(H,Uint8Array))N+H.length>C.length?(r.isBuffer(H)||(H=r.from(H)),H.copy(C,N)):Uint8Array.prototype.set.call(C,H,N);else if(r.isBuffer(H))H.copy(C,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=H.length}return C};function y(o,u){if(r.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||Y(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);let m=o.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let N=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return G(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return _e(o).length;default:if(N)return C?-1:G(o).length;u=(""+u).toLowerCase(),N=!0}}r.byteLength=y;function v(o,u,m){let C=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,u>>>=0,m<=u))return"";for(o||(o="utf8");;)switch(o){case"hex":return ne(this,u,m);case"utf8":case"utf-8":return K(this,u,m);case"ascii":return he(this,u,m);case"latin1":case"binary":return ie(this,u,m);case"base64":return k(this,u,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,u,m);default:if(C)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),C=!0}}r.prototype._isBuffer=!0;function E(o,u,m){let C=o[u];o[u]=o[m],o[m]=C}r.prototype.swap16=function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<o;u+=2)E(this,u,u+1);return this},r.prototype.swap32=function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<o;u+=4)E(this,u,u+3),E(this,u+1,u+2);return this},r.prototype.swap64=function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<o;u+=8)E(this,u,u+7),E(this,u+1,u+6),E(this,u+2,u+5),E(this,u+3,u+4);return this},r.prototype.toString=function(){let o=this.length;return o===0?"":arguments.length===0?K(this,0,o):v.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(o){if(!r.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:r.compare(this,o)===0},r.prototype.inspect=function(){let o="",u=Wt.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},s&&(r.prototype[s]=r.prototype.inspect),r.prototype.compare=function(o,u,m,C,N){if(Y(o,Uint8Array)&&(o=r.from(o,o.offset,o.byteLength)),!r.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(u===void 0&&(u=0),m===void 0&&(m=o?o.length:0),C===void 0&&(C=0),N===void 0&&(N=this.length),u<0||m>o.length||C<0||N>this.length)throw new RangeError("out of range index");if(C>=N&&u>=m)return 0;if(C>=N)return-1;if(u>=m)return 1;if(u>>>=0,m>>>=0,C>>>=0,N>>>=0,this===o)return 0;let H=N-C,ge=m-u,q=Math.min(H,ge),oe=this.slice(C,N),je=o.slice(u,m);for(let Te=0;Te<q;++Te)if(oe[Te]!==je[Te]){H=oe[Te],ge=je[Te];break}return H<ge?-1:ge<H?1:0};function _(o,u,m,C,N){if(o.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Ee(m)&&(m=N?0:o.length-1),m<0&&(m=o.length+m),m>=o.length){if(N)return-1;m=o.length-1}else if(m<0)if(N)m=0;else return-1;if(typeof u=="string"&&(u=r.from(u,C)),r.isBuffer(u))return u.length===0?-1:j(o,u,m,C,N);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(o,u,m):Uint8Array.prototype.lastIndexOf.call(o,u,m):j(o,[u],m,C,N);throw new TypeError("val must be string, number or Buffer")}function j(o,u,m,C,N){let H=1,ge=o.length,q=u.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(o.length<2||u.length<2)return-1;H=2,ge/=2,q/=2,m/=2}function oe(Te,Ne){return H===1?Te[Ne]:Te.readUInt16BE(Ne*H)}let je;if(N){let Te=-1;for(je=m;je<ge;je++)if(oe(o,je)===oe(u,Te===-1?0:je-Te)){if(Te===-1&&(Te=je),je-Te+1===q)return Te*H}else Te!==-1&&(je-=je-Te),Te=-1}else for(m+q>ge&&(m=ge-q),je=m;je>=0;je--){let Te=!0;for(let Ne=0;Ne<q;Ne++)if(oe(o,je+Ne)!==oe(u,Ne)){Te=!1;break}if(Te)return je}return-1}r.prototype.includes=function(o,u,m){return this.indexOf(o,u,m)!==-1},r.prototype.indexOf=function(o,u,m){return _(this,o,u,m,!0)},r.prototype.lastIndexOf=function(o,u,m){return _(this,o,u,m,!1)};function w(o,u,m,C){m=Number(m)||0;let N=o.length-m;C?(C=Number(C),C>N&&(C=N)):C=N;let H=u.length;C>H/2&&(C=H/2);let ge;for(ge=0;ge<C;++ge){let q=parseInt(u.substr(ge*2,2),16);if(Ee(q))return ge;o[m+ge]=q}return ge}function P(o,u,m,C){return xe(G(u,o.length-m),o,m,C)}function T(o,u,m,C){return xe(ae(u),o,m,C)}function M(o,u,m,C){return xe(_e(u),o,m,C)}function U(o,u,m,C){return xe(ve(u,o.length-m),o,m,C)}r.prototype.write=function(o,u,m,C){if(u===void 0)C="utf8",m=this.length,u=0;else if(m===void 0&&typeof u=="string")C=u,m=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(m)?(m=m>>>0,C===void 0&&(C="utf8")):(C=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let N=this.length-u;if((m===void 0||m>N)&&(m=N),o.length>0&&(m<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let H=!1;for(;;)switch(C){case"hex":return w(this,o,u,m);case"utf8":case"utf-8":return P(this,o,u,m);case"ascii":case"latin1":case"binary":return T(this,o,u,m);case"base64":return M(this,o,u,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,o,u,m);default:if(H)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),H=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(o,u,m){return u===0&&m===o.length?f.fromByteArray(o):f.fromByteArray(o.slice(u,m))}function K(o,u,m){m=Math.min(o.length,m);let C=[],N=u;for(;N<m;){let H=o[N],ge=null,q=H>239?4:H>223?3:H>191?2:1;if(N+q<=m){let oe,je,Te,Ne;switch(q){case 1:H<128&&(ge=H);break;case 2:oe=o[N+1],(oe&192)===128&&(Ne=(H&31)<<6|oe&63,Ne>127&&(ge=Ne));break;case 3:oe=o[N+1],je=o[N+2],(oe&192)===128&&(je&192)===128&&(Ne=(H&15)<<12|(oe&63)<<6|je&63,Ne>2047&&(Ne<55296||Ne>57343)&&(ge=Ne));break;case 4:oe=o[N+1],je=o[N+2],Te=o[N+3],(oe&192)===128&&(je&192)===128&&(Te&192)===128&&(Ne=(H&15)<<18|(oe&63)<<12|(je&63)<<6|Te&63,Ne>65535&&Ne<1114112&&(ge=Ne))}}ge===null?(ge=65533,q=1):ge>65535&&(ge-=65536,C.push(ge>>>10&1023|55296),ge=56320|ge&1023),C.push(ge),N+=q}return V(C)}let Q=4096;function V(o){let u=o.length;if(u<=Q)return String.fromCharCode.apply(String,o);let m="",C=0;for(;C<u;)m+=String.fromCharCode.apply(String,o.slice(C,C+=Q));return m}function he(o,u,m){let C="";m=Math.min(o.length,m);for(let N=u;N<m;++N)C+=String.fromCharCode(o[N]&127);return C}function ie(o,u,m){let C="";m=Math.min(o.length,m);for(let N=u;N<m;++N)C+=String.fromCharCode(o[N]);return C}function ne(o,u,m){let C=o.length;(!u||u<0)&&(u=0),(!m||m<0||m>C)&&(m=C);let N="";for(let H=u;H<m;++H)N+=Pe[o[H]];return N}function ce(o,u,m){let C=o.slice(u,m),N="";for(let H=0;H<C.length-1;H+=2)N+=String.fromCharCode(C[H]+C[H+1]*256);return N}r.prototype.slice=function(o,u){let m=this.length;o=~~o,u=u===void 0?m:~~u,o<0?(o+=m,o<0&&(o=0)):o>m&&(o=m),u<0?(u+=m,u<0&&(u=0)):u>m&&(u=m),u<o&&(u=o);let C=this.subarray(o,u);return Object.setPrototypeOf(C,r.prototype),C};function z(o,u,m){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+u>m)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(o,u,m){o=o>>>0,u=u>>>0,m||z(o,u,this.length);let C=this[o],N=1,H=0;for(;++H<u&&(N*=256);)C+=this[o+H]*N;return C},r.prototype.readUintBE=r.prototype.readUIntBE=function(o,u,m){o=o>>>0,u=u>>>0,m||z(o,u,this.length);let C=this[o+--u],N=1;for(;u>0&&(N*=256);)C+=this[o+--u]*N;return C},r.prototype.readUint8=r.prototype.readUInt8=function(o,u){return o=o>>>0,u||z(o,1,this.length),this[o]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(o,u){return o=o>>>0,u||z(o,2,this.length),this[o]|this[o+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(o,u){return o=o>>>0,u||z(o,2,this.length),this[o]<<8|this[o+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(o,u){return o=o>>>0,u||z(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(o,u){return o=o>>>0,u||z(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},r.prototype.readBigUInt64LE=fe(function(o){o=o>>>0,re(o,"offset");let u=this[o],m=this[o+7];(u===void 0||m===void 0)&&we(o,this.length-8);let C=u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,N=this[++o]+this[++o]*2**8+this[++o]*2**16+m*2**24;return BigInt(C)+(BigInt(N)<<BigInt(32))}),r.prototype.readBigUInt64BE=fe(function(o){o=o>>>0,re(o,"offset");let u=this[o],m=this[o+7];(u===void 0||m===void 0)&&we(o,this.length-8);let C=u*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],N=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m;return(BigInt(C)<<BigInt(32))+BigInt(N)}),r.prototype.readIntLE=function(o,u,m){o=o>>>0,u=u>>>0,m||z(o,u,this.length);let C=this[o],N=1,H=0;for(;++H<u&&(N*=256);)C+=this[o+H]*N;return N*=128,C>=N&&(C-=Math.pow(2,8*u)),C},r.prototype.readIntBE=function(o,u,m){o=o>>>0,u=u>>>0,m||z(o,u,this.length);let C=u,N=1,H=this[o+--C];for(;C>0&&(N*=256);)H+=this[o+--C]*N;return N*=128,H>=N&&(H-=Math.pow(2,8*u)),H},r.prototype.readInt8=function(o,u){return o=o>>>0,u||z(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},r.prototype.readInt16LE=function(o,u){o=o>>>0,u||z(o,2,this.length);let m=this[o]|this[o+1]<<8;return m&32768?m|4294901760:m},r.prototype.readInt16BE=function(o,u){o=o>>>0,u||z(o,2,this.length);let m=this[o+1]|this[o]<<8;return m&32768?m|4294901760:m},r.prototype.readInt32LE=function(o,u){return o=o>>>0,u||z(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},r.prototype.readInt32BE=function(o,u){return o=o>>>0,u||z(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},r.prototype.readBigInt64LE=fe(function(o){o=o>>>0,re(o,"offset");let u=this[o],m=this[o+7];(u===void 0||m===void 0)&&we(o,this.length-8);let C=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(m<<24);return(BigInt(C)<<BigInt(32))+BigInt(u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),r.prototype.readBigInt64BE=fe(function(o){o=o>>>0,re(o,"offset");let u=this[o],m=this[o+7];(u===void 0||m===void 0)&&we(o,this.length-8);let C=(u<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(C)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m)}),r.prototype.readFloatLE=function(o,u){return o=o>>>0,u||z(o,4,this.length),h.read(this,o,!0,23,4)},r.prototype.readFloatBE=function(o,u){return o=o>>>0,u||z(o,4,this.length),h.read(this,o,!1,23,4)},r.prototype.readDoubleLE=function(o,u){return o=o>>>0,u||z(o,8,this.length),h.read(this,o,!0,52,8)},r.prototype.readDoubleBE=function(o,u){return o=o>>>0,u||z(o,8,this.length),h.read(this,o,!1,52,8)};function le(o,u,m,C,N,H){if(!r.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>N||u<H)throw new RangeError('"value" argument is out of bounds');if(m+C>o.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(o,u,m,C){if(o=+o,u=u>>>0,m=m>>>0,!C){let ge=Math.pow(2,8*m)-1;le(this,o,u,m,ge,0)}let N=1,H=0;for(this[u]=o&255;++H<m&&(N*=256);)this[u+H]=o/N&255;return u+m},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(o,u,m,C){if(o=+o,u=u>>>0,m=m>>>0,!C){let ge=Math.pow(2,8*m)-1;le(this,o,u,m,ge,0)}let N=m-1,H=1;for(this[u+N]=o&255;--N>=0&&(H*=256);)this[u+N]=o/H&255;return u+m},r.prototype.writeUint8=r.prototype.writeUInt8=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,1,255,0),this[u]=o&255,u+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,2,65535,0),this[u]=o&255,this[u+1]=o>>>8,u+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=o&255,u+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=o&255,u+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4};function B(o,u,m,C,N){X(u,C,N,o,m,7);let H=Number(u&BigInt(4294967295));o[m++]=H,H=H>>8,o[m++]=H,H=H>>8,o[m++]=H,H=H>>8,o[m++]=H;let ge=Number(u>>BigInt(32)&BigInt(4294967295));return o[m++]=ge,ge=ge>>8,o[m++]=ge,ge=ge>>8,o[m++]=ge,ge=ge>>8,o[m++]=ge,m}function te(o,u,m,C,N){X(u,C,N,o,m,7);let H=Number(u&BigInt(4294967295));o[m+7]=H,H=H>>8,o[m+6]=H,H=H>>8,o[m+5]=H,H=H>>8,o[m+4]=H;let ge=Number(u>>BigInt(32)&BigInt(4294967295));return o[m+3]=ge,ge=ge>>8,o[m+2]=ge,ge=ge>>8,o[m+1]=ge,ge=ge>>8,o[m]=ge,m+8}r.prototype.writeBigUInt64LE=fe(function(o,u=0){return B(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=fe(function(o,u=0){return te(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(o,u,m,C){if(o=+o,u=u>>>0,!C){let q=Math.pow(2,8*m-1);le(this,o,u,m,q-1,-q)}let N=0,H=1,ge=0;for(this[u]=o&255;++N<m&&(H*=256);)o<0&&ge===0&&this[u+N-1]!==0&&(ge=1),this[u+N]=(o/H>>0)-ge&255;return u+m},r.prototype.writeIntBE=function(o,u,m,C){if(o=+o,u=u>>>0,!C){let q=Math.pow(2,8*m-1);le(this,o,u,m,q-1,-q)}let N=m-1,H=1,ge=0;for(this[u+N]=o&255;--N>=0&&(H*=256);)o<0&&ge===0&&this[u+N+1]!==0&&(ge=1),this[u+N]=(o/H>>0)-ge&255;return u+m},r.prototype.writeInt8=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=o&255,u+1},r.prototype.writeInt16LE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,2,32767,-32768),this[u]=o&255,this[u+1]=o>>>8,u+2},r.prototype.writeInt16BE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=o&255,u+2},r.prototype.writeInt32LE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,4,2147483647,-2147483648),this[u]=o&255,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},r.prototype.writeInt32BE=function(o,u,m){return o=+o,u=u>>>0,m||le(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},r.prototype.writeBigInt64LE=fe(function(o,u=0){return B(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=fe(function(o,u=0){return te(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(o,u,m,C,N,H){if(m+C>o.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function ue(o,u,m,C,N){return u=+u,m=m>>>0,N||Z(o,u,m,4),h.write(o,u,m,C,23,4),m+4}r.prototype.writeFloatLE=function(o,u,m){return ue(this,o,u,!0,m)},r.prototype.writeFloatBE=function(o,u,m){return ue(this,o,u,!1,m)};function Oe(o,u,m,C,N){return u=+u,m=m>>>0,N||Z(o,u,m,8),h.write(o,u,m,C,52,8),m+8}r.prototype.writeDoubleLE=function(o,u,m){return Oe(this,o,u,!0,m)},r.prototype.writeDoubleBE=function(o,u,m){return Oe(this,o,u,!1,m)},r.prototype.copy=function(o,u,m,C){if(!r.isBuffer(o))throw new TypeError("argument should be a Buffer");if(m||(m=0),!C&&C!==0&&(C=this.length),u>=o.length&&(u=o.length),u||(u=0),C>0&&C<m&&(C=m),C===m||o.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),o.length-u<C-m&&(C=o.length-u+m);let N=C-m;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,m,C):Uint8Array.prototype.set.call(o,this.subarray(m,C),u),N},r.prototype.fill=function(o,u,m,C){if(typeof o=="string"){if(typeof u=="string"?(C=u,u=0,m=this.length):typeof m=="string"&&(C=m,m=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!r.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(o.length===1){let H=o.charCodeAt(0);(C==="utf8"&&H<128||C==="latin1")&&(o=H)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(u<0||this.length<u||this.length<m)throw new RangeError("Out of range index");if(m<=u)return this;u=u>>>0,m=m===void 0?this.length:m>>>0,o||(o=0);let N;if(typeof o=="number")for(N=u;N<m;++N)this[N]=o;else{let H=r.isBuffer(o)?o:r.from(o,C),ge=H.length;if(ge===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(N=0;N<m-u;++N)this[N+u]=H[N%ge]}return this};let J={};function W(o,u,m){J[o]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(o,u){return`The "${o}" argument must be of type number. Received type ${typeof u}`},TypeError),W("ERR_OUT_OF_RANGE",function(o,u,m){let C=`The value of "${o}" is out of range.`,N=m;return Number.isInteger(m)&&Math.abs(m)>2**32?N=se(String(m)):typeof m=="bigint"&&(N=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(N=se(N)),N+="n"),C+=` It must be ${u}. Received ${N}`,C},RangeError);function se(o){let u="",m=o.length,C=o[0]==="-"?1:0;for(;m>=C+4;m-=3)u=`_${o.slice(m-3,m)}${u}`;return`${o.slice(0,m)}${u}`}function ee(o,u,m){re(u,"offset"),(o[u]===void 0||o[u+m]===void 0)&&we(u,o.length-(m+1))}function X(o,u,m,C,N,H){if(o>m||o<u){let ge=typeof u=="bigint"?"n":"",q;throw u===0||u===BigInt(0)?q=`>= 0${ge} and < 2${ge} ** ${(H+1)*8}${ge}`:q=`>= -(2${ge} ** ${(H+1)*8-1}${ge}) and < 2 ** ${(H+1)*8-1}${ge}`,new J.ERR_OUT_OF_RANGE("value",q,o)}ee(C,N,H)}function re(o,u){if(typeof o!="number")throw new J.ERR_INVALID_ARG_TYPE(u,"number",o)}function we(o,u,m){throw Math.floor(o)!==o?(re(o,m),new J.ERR_OUT_OF_RANGE("offset","an integer",o)):u<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,o)}let de=/[^+/0-9A-Za-z-_]/g;function L(o){if(o=o.split("=")[0],o=o.trim().replace(de,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function G(o,u){u=u||1/0;let m,C=o.length,N=null,H=[];for(let ge=0;ge<C;++ge){if(m=o.charCodeAt(ge),m>55295&&m<57344){if(!N){if(m>56319){(u-=3)>-1&&H.push(239,191,189);continue}else if(ge+1===C){(u-=3)>-1&&H.push(239,191,189);continue}N=m;continue}if(m<56320){(u-=3)>-1&&H.push(239,191,189),N=m;continue}m=(N-55296<<10|m-56320)+65536}else N&&(u-=3)>-1&&H.push(239,191,189);if(N=null,m<128){if((u-=1)<0)break;H.push(m)}else if(m<2048){if((u-=2)<0)break;H.push(m>>6|192,m&63|128)}else if(m<65536){if((u-=3)<0)break;H.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((u-=4)<0)break;H.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return H}function ae(o){let u=[];for(let m=0;m<o.length;++m)u.push(o.charCodeAt(m)&255);return u}function ve(o,u){let m,C,N,H=[];for(let ge=0;ge<o.length&&!((u-=2)<0);++ge)m=o.charCodeAt(ge),C=m>>8,N=m%256,H.push(N),H.push(C);return H}function _e(o){return f.toByteArray(L(o))}function xe(o,u,m,C){let N;for(N=0;N<C&&!(N+m>=u.length||N>=o.length);++N)u[N+m]=o[N];return N}function Y(o,u){return o instanceof u||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===u.name}function Ee(o){return o!==o}let Pe=(function(){let o="0123456789abcdef",u=new Array(256);for(let m=0;m<16;++m){let C=m*16;for(let N=0;N<16;++N)u[C+N]=o[m]+o[N]}return u})();function fe(o){return typeof BigInt>"u"?Me:o}function Me(){throw new Error("BigInt not supported")}return Wt}var or,gi,pr,yi,Wt,mi,vu=vt(()=>{ye(),be(),me(),or={},gi=!1,pr={},yi=!1,Wt={},mi=!1}),st={};lr(st,{Buffer:()=>Xr,INSPECT_MAX_BYTES:()=>Xs,default:()=>Tt,kMaxLength:()=>Zs});var Tt,Xr,Xs,Zs,at=vt(()=>{ye(),be(),me(),vu(),Tt=bu(),Tt.Buffer,Tt.SlowBuffer,Tt.INSPECT_MAX_BYTES,Tt.kMaxLength,Xr=Tt.Buffer,Xs=Tt.INSPECT_MAX_BYTES,Zs=Tt.kMaxLength}),be=vt(()=>{at()}),et=Ae((f,h)=>{ye(),be(),me();var s=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let c="";for(let n=0;n<a.length;n++)c+=`    ${a[n].stack}
`;super(c),this.name="AggregateError",this.errors=a}};h.exports={AggregateError:s,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,c){return a.includes(c)},ArrayPrototypeIndexOf(a,c){return a.indexOf(c)},ArrayPrototypeJoin(a,c){return a.join(c)},ArrayPrototypeMap(a,c){return a.map(c)},ArrayPrototypePop(a,c){return a.pop(c)},ArrayPrototypePush(a,c){return a.push(c)},ArrayPrototypeSlice(a,c,n){return a.slice(c,n)},Error,FunctionPrototypeCall(a,c,...n){return a.call(c,...n)},FunctionPrototypeSymbolHasInstance(a,c){return Function.prototype[Symbol.hasInstance].call(a,c)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,c){return Object.defineProperties(a,c)},ObjectDefineProperty(a,c,n){return Object.defineProperty(a,c,n)},ObjectGetOwnPropertyDescriptor(a,c){return Object.getOwnPropertyDescriptor(a,c)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,c){return Object.setPrototypeOf(a,c)},Promise,PromisePrototypeCatch(a,c){return a.catch(c)},PromisePrototypeThen(a,c,n){return a.then(c,n)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,c){return a.test(c)},SafeSet:Set,String,StringPrototypeSlice(a,c,n){return a.slice(c,n)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,c,n){return a.set(c,n)},Boolean,Uint8Array}}),ea=Ae((f,h)=>{ye(),be(),me(),h.exports={format(s,...a){return s.replace(/%([sdifj])/g,function(...[c,n]){let r=a.shift();return n==="f"?r.toFixed(6):n==="j"?JSON.stringify(r):n==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}}}}),yt=Ae((f,h)=>{ye(),be(),me();var{format:s,inspect:a}=ea(),{AggregateError:c}=et(),n=globalThis.AggregateError||c,r=Symbol("kIsNodeError"),t=["string","function","number","object","Function","Object","boolean","bigint","symbol"],e=/^([A-Z][a-z0-9]*)+$/,i="__node_internal_",l={};function d(y,v){if(!y)throw new l.ERR_INTERNAL_ASSERTION(v)}function p(y){let v="",E=y.length,_=y[0]==="-"?1:0;for(;E>=_+4;E-=3)v=`_${y.slice(E-3,E)}${v}`;return`${y.slice(0,E)}${v}`}function g(y,v,E){if(typeof v=="function")return d(v.length<=E.length,`Code: ${y}; The provided arguments length (${E.length}) does not match the required ones (${v.length}).`),v(...E);let _=(v.match(/%[dfijoOs]/g)||[]).length;return d(_===E.length,`Code: ${y}; The provided arguments length (${E.length}) does not match the required ones (${_}).`),E.length===0?v:s(v,...E)}function b(y,v,E){E||(E=Error);class _ extends E{constructor(...w){super(g(y,v,w))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(_.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),_.prototype.code=y,_.prototype[r]=!0,l[y]=_}function A(y){let v=i+y.name;return Object.defineProperty(y,"name",{value:v}),y}function S(y,v){if(y&&v&&y!==v){if(Array.isArray(v.errors))return v.errors.push(y),v;let E=new n([v,y],v.message);return E.code=v.code,E}return y||v}var O=class extends Error{constructor(y="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",v);super(y,v),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(y,v,E)=>{d(typeof y=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let _="The ";y.endsWith(" argument")?_+=`${y} `:_+=`"${y}" ${y.includes(".")?"property":"argument"} `,_+="must be ";let j=[],w=[],P=[];for(let M of v)d(typeof M=="string","All expected entries have to be of type string"),t.includes(M)?j.push(M.toLowerCase()):e.test(M)?w.push(M):(d(M!=="object",'The value "object" should be written as "Object"'),P.push(M));if(w.length>0){let M=j.indexOf("object");M!==-1&&(j.splice(j,M,1),w.push("Object"))}if(j.length>0){switch(j.length){case 1:_+=`of type ${j[0]}`;break;case 2:_+=`one of type ${j[0]} or ${j[1]}`;break;default:{let M=j.pop();_+=`one of type ${j.join(", ")}, or ${M}`}}(w.length>0||P.length>0)&&(_+=" or ")}if(w.length>0){switch(w.length){case 1:_+=`an instance of ${w[0]}`;break;case 2:_+=`an instance of ${w[0]} or ${w[1]}`;break;default:{let M=w.pop();_+=`an instance of ${w.join(", ")}, or ${M}`}}P.length>0&&(_+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(_+="an "),_+=`${P[0]}`;break;case 2:_+=`one of ${P[0]} or ${P[1]}`;break;default:{let M=P.pop();_+=`one of ${P.join(", ")}, or ${M}`}}if(E==null)_+=`. Received ${E}`;else if(typeof E=="function"&&E.name)_+=`. Received function ${E.name}`;else if(typeof E=="object"){var T;if((T=E.constructor)!==null&&T!==void 0&&T.name)_+=`. Received an instance of ${E.constructor.name}`;else{let M=a(E,{depth:-1});_+=`. Received ${M}`}}else{let M=a(E,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),_+=`. Received type ${typeof E} (${M})`}return _},TypeError),b("ERR_INVALID_ARG_VALUE",(y,v,E="is invalid")=>{let _=a(v);return _.length>128&&(_=_.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${E}. Received ${_}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(y,v,E)=>{var _;let j=E!=null&&(_=E.constructor)!==null&&_!==void 0&&_.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${y} to be returned from the "${v}" function but got ${j}.`},TypeError),b("ERR_MISSING_ARGS",(...y)=>{d(y.length>0,"At least one arg needs to be specified");let v,E=y.length;switch(y=(Array.isArray(y)?y:[y]).map(_=>`"${_}"`).join(" or "),E){case 1:v+=`The ${y[0]} argument`;break;case 2:v+=`The ${y[0]} and ${y[1]} arguments`;break;default:{let _=y.pop();v+=`The ${y.join(", ")}, and ${_} arguments`}break}return`${v} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(y,v,E)=>{d(v,'Missing "range" argument');let _;if(Number.isInteger(E)&&Math.abs(E)>2**32)_=p(String(E));else if(typeof E=="bigint"){_=String(E);let j=BigInt(2)**BigInt(32);(E>j||E<-j)&&(_=p(_)),_+="n"}else _=a(E);return`The value of "${y}" is out of range. It must be ${v}. Received ${_}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),h.exports={AbortError:O,aggregateTwoErrors:A(S),hideStackFrames:A,codes:l}}),br=Ae((f,h)=>{ye(),be(),me();var{AbortController:s,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;h.exports=s,h.exports.AbortSignal=a,h.exports.default=s}),Kt={};lr(Kt,{EventEmitter:()=>ta,default:()=>sr,defaultMaxListeners:()=>ra,init:()=>na,listenerCount:()=>ia,on:()=>oa,once:()=>sa});function wu(){if(bi)return dr;bi=!0;var f=typeof Reflect=="object"?Reflect:null,h=f&&typeof f.apply=="function"?f.apply:function(E,_,j){return Function.prototype.apply.call(E,_,j)},s;f&&typeof f.ownKeys=="function"?s=f.ownKeys:Object.getOwnPropertySymbols?s=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:s=function(E){return Object.getOwnPropertyNames(E)};function a(E){console&&console.warn&&console.warn(E)}var c=Number.isNaN||function(E){return E!==E};function n(){n.init.call(this)}dr=n,dr.once=O,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var r=10;function t(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(E){if(typeof E!="number"||E<0||c(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");r=E}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||c(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function e(E){return E._maxListeners===void 0?n.defaultMaxListeners:E._maxListeners}n.prototype.getMaxListeners=function(){return e(this)},n.prototype.emit=function(E){for(var _=[],j=1;j<arguments.length;j++)_.push(arguments[j]);var w=E==="error",P=this._events;if(P!==void 0)w=w&&P.error===void 0;else if(!w)return!1;if(w){var T;if(_.length>0&&(T=_[0]),T instanceof Error)throw T;var M=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw M.context=T,M}var U=P[E];if(U===void 0)return!1;if(typeof U=="function")h(U,this,_);else for(var k=U.length,K=b(U,k),j=0;j<k;++j)h(K[j],this,_);return!0};function i(E,_,j,w){var P,T,M;if(t(j),T=E._events,T===void 0?(T=E._events=Object.create(null),E._eventsCount=0):(T.newListener!==void 0&&(E.emit("newListener",_,j.listener?j.listener:j),T=E._events),M=T[_]),M===void 0)M=T[_]=j,++E._eventsCount;else if(typeof M=="function"?M=T[_]=w?[j,M]:[M,j]:w?M.unshift(j):M.push(j),P=e(E),P>0&&M.length>P&&!M.warned){M.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=E,U.type=_,U.count=M.length,a(U)}return E}n.prototype.addListener=function(E,_){return i(this,E,_,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(E,_){return i(this,E,_,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,_,j){var w={fired:!1,wrapFn:void 0,target:E,type:_,listener:j},P=l.bind(w);return P.listener=j,w.wrapFn=P,P}n.prototype.once=function(E,_){return t(_),this.on(E,d(this,E,_)),this},n.prototype.prependOnceListener=function(E,_){return t(_),this.prependListener(E,d(this,E,_)),this},n.prototype.removeListener=function(E,_){var j,w,P,T,M;if(t(_),w=this._events,w===void 0)return this;if(j=w[E],j===void 0)return this;if(j===_||j.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete w[E],w.removeListener&&this.emit("removeListener",E,j.listener||_));else if(typeof j!="function"){for(P=-1,T=j.length-1;T>=0;T--)if(j[T]===_||j[T].listener===_){M=j[T].listener,P=T;break}if(P<0)return this;P===0?j.shift():A(j,P),j.length===1&&(w[E]=j[0]),w.removeListener!==void 0&&this.emit("removeListener",E,M||_)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(E){var _,j,w;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[E]),this;if(arguments.length===0){var P=Object.keys(j),T;for(w=0;w<P.length;++w)T=P[w],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=j[E],typeof _=="function")this.removeListener(E,_);else if(_!==void 0)for(w=_.length-1;w>=0;w--)this.removeListener(E,_[w]);return this};function p(E,_,j){var w=E._events;if(w===void 0)return[];var P=w[_];return P===void 0?[]:typeof P=="function"?j?[P.listener||P]:[P]:j?S(P):b(P,P.length)}n.prototype.listeners=function(E){return p(this,E,!0)},n.prototype.rawListeners=function(E){return p(this,E,!1)},n.listenerCount=function(E,_){return typeof E.listenerCount=="function"?E.listenerCount(_):g.call(E,_)},n.prototype.listenerCount=g;function g(E){var _=this._events;if(_!==void 0){var j=_[E];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function b(E,_){for(var j=new Array(_),w=0;w<_;++w)j[w]=E[w];return j}function A(E,_){for(;_+1<E.length;_++)E[_]=E[_+1];E.pop()}function S(E){for(var _=new Array(E.length),j=0;j<_.length;++j)_[j]=E[j].listener||E[j];return _}function O(E,_){return new Promise(function(j,w){function P(M){E.removeListener(_,T),w(M)}function T(){typeof E.removeListener=="function"&&E.removeListener("error",P),j([].slice.call(arguments))}v(E,_,T,{once:!0}),_!=="error"&&y(E,P,{once:!0})})}function y(E,_,j){typeof E.on=="function"&&v(E,"error",_,j)}function v(E,_,j,w){if(typeof E.on=="function")w.once?E.once(_,j):E.on(_,j);else if(typeof E.addEventListener=="function")E.addEventListener(_,function P(T){w.once&&E.removeEventListener(_,P),j(T)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return dr}var dr,bi,sr,ta,ra,na,ia,oa,sa,tr=vt(()=>{ye(),be(),me(),dr={},bi=!1,sr=wu(),sr.once,sr.once=function(f,h){return new Promise((s,a)=>{function c(...r){n!==void 0&&f.removeListener("error",n),s(r)}let n;h!=="error"&&(n=r=>{f.removeListener(name,c),a(r)},f.once("error",n)),f.once(h,c)})},sr.on=function(f,h){let s=[],a=[],c=null,n=!1,r={async next(){let i=s.shift();if(i)return createIterResult(i,!1);if(c){let l=Promise.reject(c);return c=null,l}return n?createIterResult(void 0,!0):new Promise((l,d)=>a.push({resolve:l,reject:d}))},async return(){f.removeListener(h,t),f.removeListener("error",e),n=!0;for(let i of a)i.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(i){c=i,f.removeListener(h,t),f.removeListener("error",e)},[Symbol.asyncIterator](){return this}};return f.on(h,t),f.on("error",e),r;function t(...i){let l=a.shift();l?l.resolve(createIterResult(i,!1)):s.push(i)}function e(i){n=!0;let l=a.shift();l?l.reject(i):c=i,r.return()}},{EventEmitter:ta,defaultMaxListeners:ra,init:na,listenerCount:ia,on:oa,once:sa}=sr}),bt=Ae((f,h)=>{ye(),be(),me();var s=(at(),Ge(st)),{format:a,inspect:c}=ea(),{codes:{ERR_INVALID_ARG_TYPE:n}}=yt(),{kResistStopPropagation:r,AggregateError:t,SymbolDispose:e}=et(),i=globalThis.AbortSignal||br().AbortSignal,l=globalThis.AbortController||br().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||s.Blob,g=typeof p<"u"?function(S){return S instanceof p}:function(S){return!1},b=(S,O)=>{if(S!==void 0&&(S===null||typeof S!="object"||!("aborted"in S)))throw new n(O,"AbortSignal",S)},A=(S,O)=>{if(typeof S!="function")throw new n(O,"Function",S)};h.exports={AggregateError:t,kEmptyObject:Object.freeze({}),once(S){let O=!1;return function(...y){O||(O=!0,S.apply(this,y))}},createDeferredPromise:function(){let S,O;return{promise:new Promise((y,v)=>{S=y,O=v}),resolve:S,reject:O}},promisify(S){return new Promise((O,y)=>{S((v,...E)=>v?y(v):O(...E))})},debuglog(){return function(){}},format:a,inspect:c,types:{isAsyncFunction(S){return S instanceof d},isArrayBufferView(S){return ArrayBuffer.isView(S)}},isBlob:g,deprecate(S,O){return S},addAbortListener:(tr(),Ge(Kt)).addAbortListener||function(S,O){if(S===void 0)throw new n("signal","AbortSignal",S);b(S,"signal"),A(O,"listener");let y;return S.aborted?queueMicrotask(()=>O()):(S.addEventListener("abort",O,{__proto__:null,once:!0,[r]:!0}),y=()=>{S.removeEventListener("abort",O)}),{__proto__:null,[e](){var v;(v=y)===null||v===void 0||v()}}},AbortSignalAny:i.any||function(S){if(S.length===1)return S[0];let O=new l,y=()=>O.abort();return S.forEach(v=>{b(v,"signals"),v.addEventListener("abort",y,{once:!0})}),O.signal.addEventListener("abort",()=>{S.forEach(v=>v.removeEventListener("abort",y))},{once:!0}),O.signal}},h.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),vr=Ae((f,h)=>{ye(),be(),me();var{ArrayIsArray:s,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:c,ArrayPrototypeMap:n,NumberIsInteger:r,NumberIsNaN:t,NumberMAX_SAFE_INTEGER:e,NumberMIN_SAFE_INTEGER:i,NumberParseInt:l,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:g,StringPrototypeToUpperCase:b,StringPrototypeTrim:A}=et(),{hideStackFrames:S,codes:{ERR_SOCKET_BAD_PORT:O,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:_}}=yt(),{normalizeEncoding:j}=bt(),{isAsyncFunction:w,isArrayBufferView:P}=bt().types,T={};function M(Y){return Y===(Y|0)}function U(Y){return Y===Y>>>0}var k=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function Q(Y,Ee,Pe){if(typeof Y>"u"&&(Y=Pe),typeof Y=="string"){if(p(k,Y)===null)throw new v(Ee,Y,K);Y=l(Y,8)}return ie(Y,Ee),Y}var V=S((Y,Ee,Pe=i,fe=e)=>{if(typeof Y!="number")throw new y(Ee,"number",Y);if(!r(Y))throw new E(Ee,"an integer",Y);if(Y<Pe||Y>fe)throw new E(Ee,`>= ${Pe} && <= ${fe}`,Y)}),he=S((Y,Ee,Pe=-2147483648,fe=2147483647)=>{if(typeof Y!="number")throw new y(Ee,"number",Y);if(!r(Y))throw new E(Ee,"an integer",Y);if(Y<Pe||Y>fe)throw new E(Ee,`>= ${Pe} && <= ${fe}`,Y)}),ie=S((Y,Ee,Pe=!1)=>{if(typeof Y!="number")throw new y(Ee,"number",Y);if(!r(Y))throw new E(Ee,"an integer",Y);let fe=Pe?1:0,Me=4294967295;if(Y<fe||Y>Me)throw new E(Ee,`>= ${fe} && <= ${Me}`,Y)});function ne(Y,Ee){if(typeof Y!="string")throw new y(Ee,"string",Y)}function ce(Y,Ee,Pe=void 0,fe){if(typeof Y!="number")throw new y(Ee,"number",Y);if(Pe!=null&&Y<Pe||fe!=null&&Y>fe||(Pe!=null||fe!=null)&&t(Y))throw new E(Ee,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&fe!=null?" && ":""}${fe!=null?`<= ${fe}`:""}`,Y)}var z=S((Y,Ee,Pe)=>{if(!a(Pe,Y)){let fe="must be one of: "+c(n(Pe,Me=>typeof Me=="string"?`'${Me}'`:g(Me)),", ");throw new v(Ee,Y,fe)}});function le(Y,Ee){if(typeof Y!="boolean")throw new y(Ee,"boolean",Y)}function B(Y,Ee,Pe){return Y==null||!d(Y,Ee)?Pe:Y[Ee]}var te=S((Y,Ee,Pe=null)=>{let fe=B(Pe,"allowArray",!1),Me=B(Pe,"allowFunction",!1);if(!B(Pe,"nullable",!1)&&Y===null||!fe&&s(Y)||typeof Y!="object"&&(!Me||typeof Y!="function"))throw new y(Ee,"Object",Y)}),Z=S((Y,Ee)=>{if(Y!=null&&typeof Y!="object"&&typeof Y!="function")throw new y(Ee,"a dictionary",Y)}),ue=S((Y,Ee,Pe=0)=>{if(!s(Y))throw new y(Ee,"Array",Y);if(Y.length<Pe){let fe=`must be longer than ${Pe}`;throw new v(Ee,Y,fe)}});function Oe(Y,Ee){ue(Y,Ee);for(let Pe=0;Pe<Y.length;Pe++)ne(Y[Pe],`${Ee}[${Pe}]`)}function J(Y,Ee){ue(Y,Ee);for(let Pe=0;Pe<Y.length;Pe++)le(Y[Pe],`${Ee}[${Pe}]`)}function W(Y,Ee){ue(Y,Ee);for(let Pe=0;Pe<Y.length;Pe++){let fe=Y[Pe],Me=`${Ee}[${Pe}]`;if(fe==null)throw new y(Me,"AbortSignal",fe);we(fe,Me)}}function se(Y,Ee="signal"){if(ne(Y,Ee),T[Y]===void 0)throw T[b(Y)]!==void 0?new _(Y+" (signals must use all capital letters)"):new _(Y)}var ee=S((Y,Ee="buffer")=>{if(!P(Y))throw new y(Ee,["Buffer","TypedArray","DataView"],Y)});function X(Y,Ee){let Pe=j(Ee),fe=Y.length;if(Pe==="hex"&&fe%2!==0)throw new v("encoding",Ee,`is invalid for data of length ${fe}`)}function re(Y,Ee="Port",Pe=!0){if(typeof Y!="number"&&typeof Y!="string"||typeof Y=="string"&&A(Y).length===0||+Y!==+Y>>>0||Y>65535||Y===0&&!Pe)throw new O(Ee,Y,Pe);return Y|0}var we=S((Y,Ee)=>{if(Y!==void 0&&(Y===null||typeof Y!="object"||!("aborted"in Y)))throw new y(Ee,"AbortSignal",Y)}),de=S((Y,Ee)=>{if(typeof Y!="function")throw new y(Ee,"Function",Y)}),L=S((Y,Ee)=>{if(typeof Y!="function"||w(Y))throw new y(Ee,"Function",Y)}),G=S((Y,Ee)=>{if(Y!==void 0)throw new y(Ee,"undefined",Y)});function ae(Y,Ee,Pe){if(!a(Pe,Y))throw new y(Ee,`('${c(Pe,"|")}')`,Y)}var ve=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function _e(Y,Ee){if(typeof Y>"u"||!p(ve,Y))throw new v(Ee,Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function xe(Y){if(typeof Y=="string")return _e(Y,"hints"),Y;if(s(Y)){let Ee=Y.length,Pe="";if(Ee===0)return Pe;for(let fe=0;fe<Ee;fe++){let Me=Y[fe];_e(Me,"hints"),Pe+=Me,fe!==Ee-1&&(Pe+=", ")}return Pe}throw new v("hints",Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}h.exports={isInt32:M,isUint32:U,parseFileMode:Q,validateArray:ue,validateStringArray:Oe,validateBooleanArray:J,validateAbortSignalArray:W,validateBoolean:le,validateBuffer:ee,validateDictionary:Z,validateEncoding:X,validateFunction:de,validateInt32:he,validateInteger:V,validateNumber:ce,validateObject:te,validateOneOf:z,validatePlainFunction:L,validatePort:re,validateSignalName:se,validateString:ne,validateUint32:ie,validateUndefined:G,validateUnion:ae,validateAbortSignal:we,validateLinkHeaderValue:xe}}),rr=Ae((f,h)=>{ye(),be(),me();var s=h.exports={},a,c;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?c=clearTimeout:c=r}catch{c=r}})();function t(O){if(a===setTimeout)return setTimeout(O,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(O,0);try{return a(O,0)}catch{try{return a.call(null,O,0)}catch{return a.call(this,O,0)}}}function e(O){if(c===clearTimeout)return clearTimeout(O);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(O);try{return c(O)}catch{try{return c.call(null,O)}catch{return c.call(this,O)}}}var i=[],l=!1,d,p=-1;function g(){!l||!d||(l=!1,d.length?i=d.concat(i):p=-1,i.length&&b())}function b(){if(!l){var O=t(g);l=!0;for(var y=i.length;y;){for(d=i,i=[];++p<y;)d&&d[p].run();p=-1,y=i.length}d=null,l=!1,e(O)}}s.nextTick=function(O){var y=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)y[v-1]=arguments[v];i.push(new A(O,y)),i.length===1&&!l&&t(b)};function A(O,y){this.fun=O,this.array=y}A.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function S(){}s.on=S,s.addListener=S,s.once=S,s.off=S,s.removeListener=S,s.removeAllListeners=S,s.emit=S,s.prependListener=S,s.prependOnceListener=S,s.listeners=function(O){return[]},s.binding=function(O){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(O){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}),Bt=Ae((f,h)=>{ye(),be(),me();var{SymbolAsyncIterator:s,SymbolIterator:a,SymbolFor:c}=et(),n=c("nodejs.stream.destroyed"),r=c("nodejs.stream.errored"),t=c("nodejs.stream.readable"),e=c("nodejs.stream.writable"),i=c("nodejs.stream.disturbed"),l=c("nodejs.webstream.isClosedPromise"),d=c("nodejs.webstream.controllerErrorFunction");function p(B,te=!1){var Z;return!!(B&&typeof B.pipe=="function"&&typeof B.on=="function"&&(!te||typeof B.pause=="function"&&typeof B.resume=="function")&&(!B._writableState||((Z=B._readableState)===null||Z===void 0?void 0:Z.readable)!==!1)&&(!B._writableState||B._readableState))}function g(B){var te;return!!(B&&typeof B.write=="function"&&typeof B.on=="function"&&(!B._readableState||((te=B._writableState)===null||te===void 0?void 0:te.writable)!==!1))}function b(B){return!!(B&&typeof B.pipe=="function"&&B._readableState&&typeof B.on=="function"&&typeof B.write=="function")}function A(B){return B&&(B._readableState||B._writableState||typeof B.write=="function"&&typeof B.on=="function"||typeof B.pipe=="function"&&typeof B.on=="function")}function S(B){return!!(B&&!A(B)&&typeof B.pipeThrough=="function"&&typeof B.getReader=="function"&&typeof B.cancel=="function")}function O(B){return!!(B&&!A(B)&&typeof B.getWriter=="function"&&typeof B.abort=="function")}function y(B){return!!(B&&!A(B)&&typeof B.readable=="object"&&typeof B.writable=="object")}function v(B){return S(B)||O(B)||y(B)}function E(B,te){return B==null?!1:te===!0?typeof B[s]=="function":te===!1?typeof B[a]=="function":typeof B[s]=="function"||typeof B[a]=="function"}function _(B){if(!A(B))return null;let te=B._writableState,Z=B._readableState,ue=te||Z;return!!(B.destroyed||B[n]||ue!=null&&ue.destroyed)}function j(B){if(!g(B))return null;if(B.writableEnded===!0)return!0;let te=B._writableState;return te!=null&&te.errored?!1:typeof te?.ended!="boolean"?null:te.ended}function w(B,te){if(!g(B))return null;if(B.writableFinished===!0)return!0;let Z=B._writableState;return Z!=null&&Z.errored?!1:typeof Z?.finished!="boolean"?null:!!(Z.finished||te===!1&&Z.ended===!0&&Z.length===0)}function P(B){if(!p(B))return null;if(B.readableEnded===!0)return!0;let te=B._readableState;return!te||te.errored?!1:typeof te?.ended!="boolean"?null:te.ended}function T(B,te){if(!p(B))return null;let Z=B._readableState;return Z!=null&&Z.errored?!1:typeof Z?.endEmitted!="boolean"?null:!!(Z.endEmitted||te===!1&&Z.ended===!0&&Z.length===0)}function M(B){return B&&B[t]!=null?B[t]:typeof B?.readable!="boolean"?null:_(B)?!1:p(B)&&B.readable&&!T(B)}function U(B){return B&&B[e]!=null?B[e]:typeof B?.writable!="boolean"?null:_(B)?!1:g(B)&&B.writable&&!j(B)}function k(B,te){return A(B)?_(B)?!0:!(te?.readable!==!1&&M(B)||te?.writable!==!1&&U(B)):null}function K(B){var te,Z;return A(B)?B.writableErrored?B.writableErrored:(te=(Z=B._writableState)===null||Z===void 0?void 0:Z.errored)!==null&&te!==void 0?te:null:null}function Q(B){var te,Z;return A(B)?B.readableErrored?B.readableErrored:(te=(Z=B._readableState)===null||Z===void 0?void 0:Z.errored)!==null&&te!==void 0?te:null:null}function V(B){if(!A(B))return null;if(typeof B.closed=="boolean")return B.closed;let te=B._writableState,Z=B._readableState;return typeof te?.closed=="boolean"||typeof Z?.closed=="boolean"?te?.closed||Z?.closed:typeof B._closed=="boolean"&&he(B)?B._closed:null}function he(B){return typeof B._closed=="boolean"&&typeof B._defaultKeepAlive=="boolean"&&typeof B._removedConnection=="boolean"&&typeof B._removedContLen=="boolean"}function ie(B){return typeof B._sent100=="boolean"&&he(B)}function ne(B){var te;return typeof B._consuming=="boolean"&&typeof B._dumped=="boolean"&&((te=B.req)===null||te===void 0?void 0:te.upgradeOrConnect)===void 0}function ce(B){if(!A(B))return null;let te=B._writableState,Z=B._readableState,ue=te||Z;return!ue&&ie(B)||!!(ue&&ue.autoDestroy&&ue.emitClose&&ue.closed===!1)}function z(B){var te;return!!(B&&((te=B[i])!==null&&te!==void 0?te:B.readableDidRead||B.readableAborted))}function le(B){var te,Z,ue,Oe,J,W,se,ee,X,re;return!!(B&&((te=(Z=(ue=(Oe=(J=(W=B[r])!==null&&W!==void 0?W:B.readableErrored)!==null&&J!==void 0?J:B.writableErrored)!==null&&Oe!==void 0?Oe:(se=B._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&ue!==void 0?ue:(ee=B._writableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&Z!==void 0?Z:(X=B._readableState)===null||X===void 0?void 0:X.errored)!==null&&te!==void 0?te:!((re=B._writableState)===null||re===void 0)&&re.errored))}h.exports={isDestroyed:_,kIsDestroyed:n,isDisturbed:z,kIsDisturbed:i,isErrored:le,kIsErrored:r,isReadable:M,kIsReadable:t,kIsClosedPromise:l,kControllerErrorFunction:d,kIsWritable:e,isClosed:V,isDuplexNodeStream:b,isFinished:k,isIterable:E,isReadableNodeStream:p,isReadableStream:S,isReadableEnded:P,isReadableFinished:T,isReadableErrored:Q,isNodeStream:A,isWebStream:v,isWritable:U,isWritableNodeStream:g,isWritableStream:O,isWritableEnded:j,isWritableFinished:w,isWritableErrored:K,isServerRequest:ne,isServerResponse:ie,willEmitClose:ce,isTransformStream:y}}),Ht=Ae((f,h)=>{ye(),be(),me();var s=rr(),{AbortError:a,codes:c}=yt(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:r}=c,{kEmptyObject:t,once:e}=bt(),{validateAbortSignal:i,validateFunction:l,validateObject:d,validateBoolean:p}=vr(),{Promise:g,PromisePrototypeThen:b,SymbolDispose:A}=et(),{isClosed:S,isReadable:O,isReadableNodeStream:y,isReadableStream:v,isReadableFinished:E,isReadableErrored:_,isWritable:j,isWritableNodeStream:w,isWritableStream:P,isWritableFinished:T,isWritableErrored:M,isNodeStream:U,willEmitClose:k,kIsClosedPromise:K}=Bt(),Q;function V(z){return z.setHeader&&typeof z.abort=="function"}var he=()=>{};function ie(z,le,B){var te,Z;if(arguments.length===2?(B=le,le=t):le==null?le=t:d(le,"options"),l(B,"callback"),i(le.signal,"options.signal"),B=e(B),v(z)||P(z))return ne(z,le,B);if(!U(z))throw new n("stream",["ReadableStream","WritableStream","Stream"],z);let ue=(te=le.readable)!==null&&te!==void 0?te:y(z),Oe=(Z=le.writable)!==null&&Z!==void 0?Z:w(z),J=z._writableState,W=z._readableState,se=()=>{z.writable||re()},ee=k(z)&&y(z)===ue&&w(z)===Oe,X=T(z,!1),re=()=>{X=!0,z.destroyed&&(ee=!1),!(ee&&(!z.readable||ue))&&(!ue||we)&&B.call(z)},we=E(z,!1),de=()=>{we=!0,z.destroyed&&(ee=!1),!(ee&&(!z.writable||Oe))&&(!Oe||X)&&B.call(z)},L=Y=>{B.call(z,Y)},G=S(z),ae=()=>{G=!0;let Y=M(z)||_(z);if(Y&&typeof Y!="boolean")return B.call(z,Y);if(ue&&!we&&y(z,!0)&&!E(z,!1))return B.call(z,new r);if(Oe&&!X&&!T(z,!1))return B.call(z,new r);B.call(z)},ve=()=>{G=!0;let Y=M(z)||_(z);if(Y&&typeof Y!="boolean")return B.call(z,Y);B.call(z)},_e=()=>{z.req.on("finish",re)};V(z)?(z.on("complete",re),ee||z.on("abort",ae),z.req?_e():z.on("request",_e)):Oe&&!J&&(z.on("end",se),z.on("close",se)),!ee&&typeof z.aborted=="boolean"&&z.on("aborted",ae),z.on("end",de),z.on("finish",re),le.error!==!1&&z.on("error",L),z.on("close",ae),G?s.nextTick(ae):J!=null&&J.errorEmitted||W!=null&&W.errorEmitted?ee||s.nextTick(ve):(!ue&&(!ee||O(z))&&(X||j(z)===!1)||!Oe&&(!ee||j(z))&&(we||O(z)===!1)||W&&z.req&&z.aborted)&&s.nextTick(ve);let xe=()=>{B=he,z.removeListener("aborted",ae),z.removeListener("complete",re),z.removeListener("abort",ae),z.removeListener("request",_e),z.req&&z.req.removeListener("finish",re),z.removeListener("end",se),z.removeListener("close",se),z.removeListener("finish",re),z.removeListener("end",de),z.removeListener("error",L),z.removeListener("close",ae)};if(le.signal&&!G){let Y=()=>{let Ee=B;xe(),Ee.call(z,new a(void 0,{cause:le.signal.reason}))};if(le.signal.aborted)s.nextTick(Y);else{Q=Q||bt().addAbortListener;let Ee=Q(le.signal,Y),Pe=B;B=e((...fe)=>{Ee[A](),Pe.apply(z,fe)})}}return xe}function ne(z,le,B){let te=!1,Z=he;if(le.signal)if(Z=()=>{te=!0,B.call(z,new a(void 0,{cause:le.signal.reason}))},le.signal.aborted)s.nextTick(Z);else{Q=Q||bt().addAbortListener;let Oe=Q(le.signal,Z),J=B;B=e((...W)=>{Oe[A](),J.apply(z,W)})}let ue=(...Oe)=>{te||s.nextTick(()=>B.apply(z,Oe))};return b(z[K].promise,ue,ue),he}function ce(z,le){var B;let te=!1;return le===null&&(le=t),(B=le)!==null&&B!==void 0&&B.cleanup&&(p(le.cleanup,"cleanup"),te=le.cleanup),new g((Z,ue)=>{let Oe=ie(z,le,J=>{te&&Oe(),J?ue(J):Z()})})}h.exports=ie,h.exports.finished=ce}),ur=Ae((f,h)=>{ye(),be(),me();var s=rr(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:n}=yt(),{Symbol:r}=et(),{kIsDestroyed:t,isDestroyed:e,isFinished:i,isServerRequest:l}=Bt(),d=r("kDestroy"),p=r("kConstruct");function g(k,K,Q){k&&(k.stack,K&&!K.errored&&(K.errored=k),Q&&!Q.errored&&(Q.errored=k))}function b(k,K){let Q=this._readableState,V=this._writableState,he=V||Q;return V!=null&&V.destroyed||Q!=null&&Q.destroyed?(typeof K=="function"&&K(),this):(g(k,V,Q),V&&(V.destroyed=!0),Q&&(Q.destroyed=!0),he.constructed?A(this,k,K):this.once(d,function(ie){A(this,a(ie,k),K)}),this)}function A(k,K,Q){let V=!1;function he(ie){if(V)return;V=!0;let ne=k._readableState,ce=k._writableState;g(ie,ce,ne),ce&&(ce.closed=!0),ne&&(ne.closed=!0),typeof Q=="function"&&Q(ie),ie?s.nextTick(S,k,ie):s.nextTick(O,k)}try{k._destroy(K||null,he)}catch(ie){he(ie)}}function S(k,K){y(k,K),O(k)}function O(k){let K=k._readableState,Q=k._writableState;Q&&(Q.closeEmitted=!0),K&&(K.closeEmitted=!0),(Q!=null&&Q.emitClose||K!=null&&K.emitClose)&&k.emit("close")}function y(k,K){let Q=k._readableState,V=k._writableState;V!=null&&V.errorEmitted||Q!=null&&Q.errorEmitted||(V&&(V.errorEmitted=!0),Q&&(Q.errorEmitted=!0),k.emit("error",K))}function v(){let k=this._readableState,K=this._writableState;k&&(k.constructed=!0,k.closed=!1,k.closeEmitted=!1,k.destroyed=!1,k.errored=null,k.errorEmitted=!1,k.reading=!1,k.ended=k.readable===!1,k.endEmitted=k.readable===!1),K&&(K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1)}function E(k,K,Q){let V=k._readableState,he=k._writableState;if(he!=null&&he.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||he!=null&&he.autoDestroy?k.destroy(K):K&&(K.stack,he&&!he.errored&&(he.errored=K),V&&!V.errored&&(V.errored=K),Q?s.nextTick(y,k,K):y(k,K))}function _(k,K){if(typeof k._construct!="function")return;let Q=k._readableState,V=k._writableState;Q&&(Q.constructed=!1),V&&(V.constructed=!1),k.once(p,K),!(k.listenerCount(p)>1)&&s.nextTick(j,k)}function j(k){let K=!1;function Q(V){if(K){E(k,V??new c);return}K=!0;let he=k._readableState,ie=k._writableState,ne=ie||he;he&&(he.constructed=!0),ie&&(ie.constructed=!0),ne.destroyed?k.emit(d,V):V?E(k,V,!0):s.nextTick(w,k)}try{k._construct(V=>{s.nextTick(Q,V)})}catch(V){s.nextTick(Q,V)}}function w(k){k.emit(p)}function P(k){return k?.setHeader&&typeof k.abort=="function"}function T(k){k.emit("close")}function M(k,K){k.emit("error",K),s.nextTick(T,k)}function U(k,K){!k||e(k)||(!K&&!i(k)&&(K=new n),l(k)?(k.socket=null,k.destroy(K)):P(k)?k.abort():P(k.req)?k.req.abort():typeof k.destroy=="function"?k.destroy(K):typeof k.close=="function"?k.close():K?s.nextTick(M,k,K):s.nextTick(T,k),k.destroyed||(k[t]=!0))}h.exports={construct:_,destroyer:U,destroy:b,undestroy:v,errorOrDestroy:E}}),go=Ae((f,h)=>{ye(),be(),me();var{ArrayIsArray:s,ObjectSetPrototypeOf:a}=et(),{EventEmitter:c}=(tr(),Ge(Kt));function n(t){c.call(this,t)}a(n.prototype,c.prototype),a(n,c),n.prototype.pipe=function(t,e){let i=this;function l(O){t.writable&&t.write(O)===!1&&i.pause&&i.pause()}i.on("data",l);function d(){i.readable&&i.resume&&i.resume()}t.on("drain",d),!t._isStdio&&(!e||e.end!==!1)&&(i.on("end",g),i.on("close",b));let p=!1;function g(){p||(p=!0,t.end())}function b(){p||(p=!0,typeof t.destroy=="function"&&t.destroy())}function A(O){S(),c.listenerCount(this,"error")===0&&this.emit("error",O)}r(i,"error",A),r(t,"error",A);function S(){i.removeListener("data",l),t.removeListener("drain",d),i.removeListener("end",g),i.removeListener("close",b),i.removeListener("error",A),t.removeListener("error",A),i.removeListener("end",S),i.removeListener("close",S),t.removeListener("close",S)}return i.on("end",S),i.on("close",S),t.on("close",S),t.emit("pipe",i),t};function r(t,e,i){if(typeof t.prependListener=="function")return t.prependListener(e,i);!t._events||!t._events[e]?t.on(e,i):s(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]}h.exports={Stream:n,prependListener:r}}),en=Ae((f,h)=>{ye(),be(),me();var{SymbolDispose:s}=et(),{AbortError:a,codes:c}=yt(),{isNodeStream:n,isWebStream:r,kControllerErrorFunction:t}=Bt(),e=Ht(),{ERR_INVALID_ARG_TYPE:i}=c,l,d=(p,g)=>{if(typeof p!="object"||!("aborted"in p))throw new i(g,"AbortSignal",p)};h.exports.addAbortSignal=function(p,g){if(d(p,"signal"),!n(g)&&!r(g))throw new i("stream",["ReadableStream","WritableStream","Stream"],g);return h.exports.addAbortSignalNoValidate(p,g)},h.exports.addAbortSignalNoValidate=function(p,g){if(typeof p!="object"||!("aborted"in p))return g;let b=n(g)?()=>{g.destroy(new a(void 0,{cause:p.reason}))}:()=>{g[t](new a(void 0,{cause:p.reason}))};if(p.aborted)b();else{l=l||bt().addAbortListener;let A=l(p,b);e(g,A[s])}return g}}),_u=Ae((f,h)=>{ye(),be(),me();var{StringPrototypeSlice:s,SymbolIterator:a,TypedArrayPrototypeSet:c,Uint8Array:n}=et(),{Buffer:r}=(at(),Ge(st)),{inspect:t}=bt();h.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let i={data:e,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}unshift(e){let i={data:e,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let i=this.head,l=""+i.data;for(;(i=i.next)!==null;)l+=e+i.data;return l}concat(e){if(this.length===0)return r.alloc(0);let i=r.allocUnsafe(e>>>0),l=this.head,d=0;for(;l;)c(i,l.data,d),d+=l.data.length,l=l.next;return i}consume(e,i){let l=this.head.data;if(e<l.length){let d=l.slice(0,e);return this.head.data=l.slice(e),d}return e===l.length?this.shift():i?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[a](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let i="",l=this.head,d=0;do{let p=l.data;if(e>p.length)i+=p,e-=p.length;else{e===p.length?(i+=p,++d,l.next?this.head=l.next:this.head=this.tail=null):(i+=s(p,0,e),this.head=l,l.data=s(p,e));break}++d}while((l=l.next)!==null);return this.length-=d,i}_getBuffer(e){let i=r.allocUnsafe(e),l=e,d=this.head,p=0;do{let g=d.data;if(e>g.length)c(i,g,l-e),e-=g.length;else{e===g.length?(c(i,g,l-e),++p,d.next?this.head=d.next:this.head=this.tail=null):(c(i,new n(g.buffer,g.byteOffset,e),l-e),this.head=d,d.data=g.slice(e));break}++p}while((d=d.next)!==null);return this.length-=p,i}[Symbol.for("nodejs.util.inspect.custom")](e,i){return t(this,{...i,depth:0,customInspect:!1})}}}),tn=Ae((f,h)=>{ye(),be(),me();var{MathFloor:s,NumberIsInteger:a}=et(),{validateInteger:c}=vr(),{ERR_INVALID_ARG_VALUE:n}=yt().codes,r=16*1024,t=16;function e(p,g,b){return p.highWaterMark!=null?p.highWaterMark:g?p[b]:null}function i(p){return p?t:r}function l(p,g){c(g,"value",0),p?t=g:r=g}function d(p,g,b,A){let S=e(g,A,b);if(S!=null){if(!a(S)||S<0){let O=A?`options.${b}`:"options.highWaterMark";throw new n(O,S)}return s(S)}return i(p.objectMode)}h.exports={getHighWaterMark:d,getDefaultHighWaterMark:i,setDefaultHighWaterMark:l}}),Su=Ae((f,h)=>{ye(),be(),me();var s=(at(),Ge(st)),a=s.Buffer;function c(r,t){for(var e in r)t[e]=r[e]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?h.exports=s:(c(s,f),f.Buffer=n);function n(r,t,e){return a(r,t,e)}n.prototype=Object.create(a.prototype),c(a,n),n.from=function(r,t,e){if(typeof r=="number")throw new TypeError("Argument must not be a number");return a(r,t,e)},n.alloc=function(r,t,e){if(typeof r!="number")throw new TypeError("Argument must be a number");var i=a(r);return t!==void 0?typeof e=="string"?i.fill(t,e):i.fill(t):i.fill(0),i},n.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return a(r)},n.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(r)}}),Eu=Ae(f=>{ye(),be(),me();var h=Su().Buffer,s=h.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function c(y){var v=a(y);if(typeof v!="string"&&(h.isEncoding===s||!s(y)))throw new Error("Unknown encoding: "+y);return v||y}f.StringDecoder=n;function n(y){this.encoding=c(y);var v;switch(this.encoding){case"utf16le":this.text=p,this.end=g,v=4;break;case"utf8":this.fillLast=i,v=4;break;case"base64":this.text=b,this.end=A,v=3;break;default:this.write=S,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(v)}n.prototype.write=function(y){if(y.length===0)return"";var v,E;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?v?v+this.text(y,E):this.text(y,E):v||""},n.prototype.end=d,n.prototype.text=l,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function r(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function t(y,v,E){var _=v.length-1;if(_<E)return 0;var j=r(v[_]);return j>=0?(j>0&&(y.lastNeed=j-1),j):--_<E||j===-2?0:(j=r(v[_]),j>=0?(j>0&&(y.lastNeed=j-2),j):--_<E||j===-2?0:(j=r(v[_]),j>=0?(j>0&&(j===2?j=0:y.lastNeed=j-3),j):0))}function e(y,v,E){if((v[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,""}}function i(y){var v=this.lastTotal-this.lastNeed,E=e(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function l(y,v){var E=t(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=E;var _=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,_),y.toString("utf8",v,_)}function d(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"":v}function p(y,v){if((y.length-v)%2===0){var E=y.toString("utf16le",v);if(E){var _=E.charCodeAt(E.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function g(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,E)}return v}function b(y,v){var E=(y.length-v)%3;return E===0?y.toString("base64",v):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-E))}function A(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function S(y){return y.toString(this.encoding)}function O(y){return y&&y.length?this.write(y):""}}),aa=Ae((f,h)=>{ye(),be(),me();var s=rr(),{PromisePrototypeThen:a,SymbolAsyncIterator:c,SymbolIterator:n}=et(),{Buffer:r}=(at(),Ge(st)),{ERR_INVALID_ARG_TYPE:t,ERR_STREAM_NULL_VALUES:e}=yt().codes;function i(l,d,p){let g;if(typeof d=="string"||d instanceof r)return new l({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let b;if(d&&d[c])b=!0,g=d[c]();else if(d&&d[n])b=!1,g=d[n]();else throw new t("iterable",["Iterable"],d);let A=new l({objectMode:!0,highWaterMark:1,...p}),S=!1;A._read=function(){S||(S=!0,y())},A._destroy=function(v,E){a(O(v),()=>s.nextTick(E,v),_=>s.nextTick(E,_||v))};async function O(v){let E=v!=null,_=typeof g.throw=="function";if(E&&_){let{value:j,done:w}=await g.throw(v);if(await j,w)return}if(typeof g.return=="function"){let{value:j}=await g.return();await j}}async function y(){for(;;){try{let{value:v,done:E}=b?await g.next():g.next();if(E)A.push(null);else{let _=v&&typeof v.then=="function"?await v:v;if(_===null)throw S=!1,new e;if(A.push(_))continue;S=!1}}catch(v){A.destroy(v)}break}}return A}h.exports=i}),rn=Ae((f,h)=>{ye(),be(),me();var s=rr(),{ArrayPrototypeIndexOf:a,NumberIsInteger:c,NumberIsNaN:n,NumberParseInt:r,ObjectDefineProperties:t,ObjectKeys:e,ObjectSetPrototypeOf:i,Promise:l,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:b}=et();h.exports=fe,fe.ReadableState=Pe;var{EventEmitter:A}=(tr(),Ge(Kt)),{Stream:S,prependListener:O}=go(),{Buffer:y}=(at(),Ge(st)),{addAbortSignal:v}=en(),E=Ht(),_=bt().debuglog("stream",R=>{_=R}),j=_u(),w=ur(),{getHighWaterMark:P,getDefaultHighWaterMark:T}=tn(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_OUT_OF_RANGE:K,ERR_STREAM_PUSH_AFTER_EOF:Q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:he}=yt(),{validateObject:ie}=vr(),ne=b("kPaused"),{StringDecoder:ce}=Eu(),z=aa();i(fe.prototype,S.prototype),i(fe,S);var le=()=>{},{errorOrDestroy:B}=w,te=1,Z=2,ue=4,Oe=8,J=16,W=32,se=64,ee=128,X=256,re=512,we=1024,de=2048,L=4096,G=8192,ae=16384,ve=32768,_e=65536,xe=1<<17,Y=1<<18;function Ee(R){return{enumerable:!1,get(){return(this.state&R)!==0},set(F){F?this.state|=R:this.state&=~R}}}t(Pe.prototype,{objectMode:Ee(te),ended:Ee(Z),endEmitted:Ee(ue),reading:Ee(Oe),constructed:Ee(J),sync:Ee(W),needReadable:Ee(se),emittedReadable:Ee(ee),readableListening:Ee(X),resumeScheduled:Ee(re),errorEmitted:Ee(we),emitClose:Ee(de),autoDestroy:Ee(L),destroyed:Ee(G),closed:Ee(ae),closeEmitted:Ee(ve),multiAwaitDrain:Ee(_e),readingMore:Ee(xe),dataEmitted:Ee(Y)});function Pe(R,F,ke){typeof ke!="boolean"&&(ke=F instanceof Rt()),this.state=de|L|J|W,R&&R.objectMode&&(this.state|=te),ke&&R&&R.readableObjectMode&&(this.state|=te),this.highWaterMark=R?P(this,R,"readableHighWaterMark",ke):T(!1),this.buffer=new j,this.length=0,this.pipes=[],this.flowing=null,this[ne]=null,R&&R.emitClose===!1&&(this.state&=~de),R&&R.autoDestroy===!1&&(this.state&=~L),this.errored=null,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,R&&R.encoding&&(this.decoder=new ce(R.encoding),this.encoding=R.encoding)}function fe(R){if(!(this instanceof fe))return new fe(R);let F=this instanceof Rt();this._readableState=new Pe(R,this,F),R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&!F&&v(R.signal,this)),S.call(this,R),w.construct(this,()=>{this._readableState.needReadable&&q(this,this._readableState)})}fe.prototype.destroy=w.destroy,fe.prototype._undestroy=w.undestroy,fe.prototype._destroy=function(R,F){F(R)},fe.prototype[A.captureRejectionSymbol]=function(R){this.destroy(R)},fe.prototype[p]=function(){let R;return this.destroyed||(R=this.readableEnded?null:new he,this.destroy(R)),new l((F,ke)=>E(this,Ce=>Ce&&Ce!==R?ke(Ce):F(null)))},fe.prototype.push=function(R,F){return Me(this,R,F,!1)},fe.prototype.unshift=function(R,F){return Me(this,R,F,!0)};function Me(R,F,ke,Ce){_("readableAddChunk",F);let Re=R._readableState,tt;if((Re.state&te)===0&&(typeof F=="string"?(ke=ke||Re.defaultEncoding,Re.encoding!==ke&&(Ce&&Re.encoding?F=y.from(F,ke).toString(Re.encoding):(F=y.from(F,ke),ke=""))):F instanceof y?ke="":S._isUint8Array(F)?(F=S._uint8ArrayToBuffer(F),ke=""):F!=null&&(tt=new U("chunk",["string","Buffer","Uint8Array"],F))),tt)B(R,tt);else if(F===null)Re.state&=~Oe,N(R,Re);else if((Re.state&te)!==0||F&&F.length>0)if(Ce)if((Re.state&ue)!==0)B(R,new V);else{if(Re.destroyed||Re.errored)return!1;o(R,Re,F,!0)}else if(Re.ended)B(R,new Q);else{if(Re.destroyed||Re.errored)return!1;Re.state&=~Oe,Re.decoder&&!ke?(F=Re.decoder.write(F),Re.objectMode||F.length!==0?o(R,Re,F,!1):q(R,Re)):o(R,Re,F,!1)}else Ce||(Re.state&=~Oe,q(R,Re));return!Re.ended&&(Re.length<Re.highWaterMark||Re.length===0)}function o(R,F,ke,Ce){F.flowing&&F.length===0&&!F.sync&&R.listenerCount("data")>0?((F.state&_e)!==0?F.awaitDrainWriters.clear():F.awaitDrainWriters=null,F.dataEmitted=!0,R.emit("data",ke)):(F.length+=F.objectMode?1:ke.length,Ce?F.buffer.unshift(ke):F.buffer.push(ke),(F.state&se)!==0&&H(R)),q(R,F)}fe.prototype.isPaused=function(){let R=this._readableState;return R[ne]===!0||R.flowing===!1},fe.prototype.setEncoding=function(R){let F=new ce(R);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;let ke=this._readableState.buffer,Ce="";for(let Re of ke)Ce+=F.write(Re);return ke.clear(),Ce!==""&&ke.push(Ce),this._readableState.length=Ce.length,this};var u=1073741824;function m(R){if(R>u)throw new K("size","<= 1GiB",R);return R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++,R}function C(R,F){return R<=0||F.length===0&&F.ended?0:(F.state&te)!==0?1:n(R)?F.flowing&&F.length?F.buffer.first().length:F.length:R<=F.length?R:F.ended?F.length:0}fe.prototype.read=function(R){_("read",R),R===void 0?R=NaN:c(R)||(R=r(R,10));let F=this._readableState,ke=R;if(R>F.highWaterMark&&(F.highWaterMark=m(R)),R!==0&&(F.state&=~ee),R===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return _("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?Qe(this):H(this),null;if(R=C(R,F),R===0&&F.ended)return F.length===0&&Qe(this),null;let Ce=(F.state&se)!==0;if(_("need readable",Ce),(F.length===0||F.length-R<F.highWaterMark)&&(Ce=!0,_("length less than watermark",Ce)),F.ended||F.reading||F.destroyed||F.errored||!F.constructed)Ce=!1,_("reading, ended or constructing",Ce);else if(Ce){_("do read"),F.state|=Oe|W,F.length===0&&(F.state|=se);try{this._read(F.highWaterMark)}catch(tt){B(this,tt)}F.state&=~W,F.reading||(R=C(ke,F))}let Re;return R>0?Re=Ve(R,F):Re=null,Re===null?(F.needReadable=F.length<=F.highWaterMark,R=0):(F.length-=R,F.multiAwaitDrain?F.awaitDrainWriters.clear():F.awaitDrainWriters=null),F.length===0&&(F.ended||(F.needReadable=!0),ke!==R&&F.ended&&Qe(this)),Re!==null&&!F.errorEmitted&&!F.closeEmitted&&(F.dataEmitted=!0,this.emit("data",Re)),Re};function N(R,F){if(_("onEofChunk"),!F.ended){if(F.decoder){let ke=F.decoder.end();ke&&ke.length&&(F.buffer.push(ke),F.length+=F.objectMode?1:ke.length)}F.ended=!0,F.sync?H(R):(F.needReadable=!1,F.emittedReadable=!0,ge(R))}}function H(R){let F=R._readableState;_("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(_("emitReadable",F.flowing),F.emittedReadable=!0,s.nextTick(ge,R))}function ge(R){let F=R._readableState;_("emitReadable_",F.destroyed,F.length,F.ended),!F.destroyed&&!F.errored&&(F.length||F.ended)&&(R.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,De(R)}function q(R,F){!F.readingMore&&F.constructed&&(F.readingMore=!0,s.nextTick(oe,R,F))}function oe(R,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){let ke=F.length;if(_("maybeReadMore read 0"),R.read(0),ke===F.length)break}F.readingMore=!1}fe.prototype._read=function(R){throw new k("_read()")},fe.prototype.pipe=function(R,F){let ke=this,Ce=this._readableState;Ce.pipes.length===1&&(Ce.multiAwaitDrain||(Ce.multiAwaitDrain=!0,Ce.awaitDrainWriters=new d(Ce.awaitDrainWriters?[Ce.awaitDrainWriters]:[]))),Ce.pipes.push(R),_("pipe count=%d opts=%j",Ce.pipes.length,F);let Re=(!F||F.end!==!1)&&R!==s.stdout&&R!==s.stderr?lt:Pt;Ce.endEmitted?s.nextTick(Re):ke.once("end",Re),R.on("unpipe",tt);function tt(St,At){_("onunpipe"),St===ke&&At&&At.hasUnpiped===!1&&(At.hasUnpiped=!0,Gt())}function lt(){_("onend"),R.end()}let wt,Et=!1;function Gt(){_("cleanup"),R.removeListener("close",_t),R.removeListener("finish",xt),wt&&R.removeListener("drain",wt),R.removeListener("error",$e),R.removeListener("unpipe",tt),ke.removeListener("end",lt),ke.removeListener("end",Pt),ke.removeListener("data",ir),Et=!0,wt&&Ce.awaitDrainWriters&&(!R._writableState||R._writableState.needDrain)&&wt()}function Qt(){Et||(Ce.pipes.length===1&&Ce.pipes[0]===R?(_("false write response, pause",0),Ce.awaitDrainWriters=R,Ce.multiAwaitDrain=!1):Ce.pipes.length>1&&Ce.pipes.includes(R)&&(_("false write response, pause",Ce.awaitDrainWriters.size),Ce.awaitDrainWriters.add(R)),ke.pause()),wt||(wt=je(ke,R),R.on("drain",wt))}ke.on("data",ir);function ir(St){_("ondata");let At=R.write(St);_("dest.write",At),At===!1&&Qt()}function $e(St){if(_("onerror",St),Pt(),R.removeListener("error",$e),R.listenerCount("error")===0){let At=R._writableState||R._readableState;At&&!At.errorEmitted?B(R,St):R.emit("error",St)}}O(R,"error",$e);function _t(){R.removeListener("finish",xt),Pt()}R.once("close",_t);function xt(){_("onfinish"),R.removeListener("close",_t),Pt()}R.once("finish",xt);function Pt(){_("unpipe"),ke.unpipe(R)}return R.emit("pipe",ke),R.writableNeedDrain===!0?Qt():Ce.flowing||(_("pipe resume"),ke.resume()),R};function je(R,F){return function(){let ke=R._readableState;ke.awaitDrainWriters===F?(_("pipeOnDrain",1),ke.awaitDrainWriters=null):ke.multiAwaitDrain&&(_("pipeOnDrain",ke.awaitDrainWriters.size),ke.awaitDrainWriters.delete(F)),(!ke.awaitDrainWriters||ke.awaitDrainWriters.size===0)&&R.listenerCount("data")&&R.resume()}}fe.prototype.unpipe=function(R){let F=this._readableState,ke={hasUnpiped:!1};if(F.pipes.length===0)return this;if(!R){let Re=F.pipes;F.pipes=[],this.pause();for(let tt=0;tt<Re.length;tt++)Re[tt].emit("unpipe",this,{hasUnpiped:!1});return this}let Ce=a(F.pipes,R);return Ce===-1?this:(F.pipes.splice(Ce,1),F.pipes.length===0&&this.pause(),R.emit("unpipe",this,ke),this)},fe.prototype.on=function(R,F){let ke=S.prototype.on.call(this,R,F),Ce=this._readableState;return R==="data"?(Ce.readableListening=this.listenerCount("readable")>0,Ce.flowing!==!1&&this.resume()):R==="readable"&&!Ce.endEmitted&&!Ce.readableListening&&(Ce.readableListening=Ce.needReadable=!0,Ce.flowing=!1,Ce.emittedReadable=!1,_("on readable",Ce.length,Ce.reading),Ce.length?H(this):Ce.reading||s.nextTick(Ne,this)),ke},fe.prototype.addListener=fe.prototype.on,fe.prototype.removeListener=function(R,F){let ke=S.prototype.removeListener.call(this,R,F);return R==="readable"&&s.nextTick(Te,this),ke},fe.prototype.off=fe.prototype.removeListener,fe.prototype.removeAllListeners=function(R){let F=S.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&s.nextTick(Te,this),F};function Te(R){let F=R._readableState;F.readableListening=R.listenerCount("readable")>0,F.resumeScheduled&&F[ne]===!1?F.flowing=!0:R.listenerCount("data")>0?R.resume():F.readableListening||(F.flowing=null)}function Ne(R){_("readable nexttick read 0"),R.read(0)}fe.prototype.resume=function(){let R=this._readableState;return R.flowing||(_("resume"),R.flowing=!R.readableListening,Ue(this,R)),R[ne]=!1,this};function Ue(R,F){F.resumeScheduled||(F.resumeScheduled=!0,s.nextTick(Ze,R,F))}function Ze(R,F){_("resume",F.reading),F.reading||R.read(0),F.resumeScheduled=!1,R.emit("resume"),De(R),F.flowing&&!F.reading&&R.read(0)}fe.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ne]=!0,this};function De(R){let F=R._readableState;for(_("flow",F.flowing);F.flowing&&R.read()!==null;);}fe.prototype.wrap=function(R){let F=!1;R.on("data",Ce=>{!this.push(Ce)&&R.pause&&(F=!0,R.pause())}),R.on("end",()=>{this.push(null)}),R.on("error",Ce=>{B(this,Ce)}),R.on("close",()=>{this.destroy()}),R.on("destroy",()=>{this.destroy()}),this._read=()=>{F&&R.resume&&(F=!1,R.resume())};let ke=e(R);for(let Ce=1;Ce<ke.length;Ce++){let Re=ke[Ce];this[Re]===void 0&&typeof R[Re]=="function"&&(this[Re]=R[Re].bind(R))}return this},fe.prototype[g]=function(){return Fe(this)},fe.prototype.iterator=function(R){return R!==void 0&&ie(R,"options"),Fe(this,R)};function Fe(R,F){typeof R.read!="function"&&(R=fe.wrap(R,{objectMode:!0}));let ke=We(R,F);return ke.stream=R,ke}async function*We(R,F){let ke=le;function Ce(lt){this===R?(ke(),ke=le):ke=lt}R.on("readable",Ce);let Re,tt=E(R,{writable:!1},lt=>{Re=lt?M(Re,lt):null,ke(),ke=le});try{for(;;){let lt=R.destroyed?null:R.read();if(lt!==null)yield lt;else{if(Re)throw Re;if(Re===null)return;await new l(Ce)}}}catch(lt){throw Re=M(Re,lt),Re}finally{(Re||F?.destroyOnReturn!==!1)&&(Re===void 0||R._readableState.autoDestroy)?w.destroyer(R,null):(R.off("readable",Ce),tt())}}t(fe.prototype,{readable:{__proto__:null,get(){let R=this._readableState;return!!R&&R.readable!==!1&&!R.destroyed&&!R.errorEmitted&&!R.endEmitted},set(R){this._readableState&&(this._readableState.readable=!!R)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(R){this._readableState&&(this._readableState.destroyed=R)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),t(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ne]!==!1},set(R){this[ne]=!!R}}}),fe._fromList=Ve;function Ve(R,F){if(F.length===0)return null;let ke;return F.objectMode?ke=F.buffer.shift():!R||R>=F.length?(F.decoder?ke=F.buffer.join(""):F.buffer.length===1?ke=F.buffer.first():ke=F.buffer.concat(F.length),F.buffer.clear()):ke=F.buffer.consume(R,F.decoder),ke}function Qe(R){let F=R._readableState;_("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,s.nextTick(ze,F,R))}function ze(R,F){if(_("endReadableNT",R.endEmitted,R.length),!R.errored&&!R.closeEmitted&&!R.endEmitted&&R.length===0){if(R.endEmitted=!0,F.emit("end"),F.writable&&F.allowHalfOpen===!1)s.nextTick(nt,F);else if(R.autoDestroy){let ke=F._writableState;(!ke||ke.autoDestroy&&(ke.finished||ke.writable===!1))&&F.destroy()}}}function nt(R){R.writable&&!R.writableEnded&&!R.destroyed&&R.end()}fe.from=function(R,F){return z(fe,R,F)};var mt;function ht(){return mt===void 0&&(mt={}),mt}fe.fromWeb=function(R,F){return ht().newStreamReadableFromReadableStream(R,F)},fe.toWeb=function(R,F){return ht().newReadableStreamFromStreamReadable(R,F)},fe.wrap=function(R,F){var ke,Ce;return new fe({objectMode:(ke=(Ce=R.readableObjectMode)!==null&&Ce!==void 0?Ce:R.objectMode)!==null&&ke!==void 0?ke:!0,...F,destroy(Re,tt){w.destroyer(R,Re),tt(Re)}}).wrap(R)}}),yo=Ae((f,h)=>{ye(),be(),me();var s=rr(),{ArrayPrototypeSlice:a,Error:c,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:r,ObjectDefineProperties:t,ObjectSetPrototypeOf:e,StringPrototypeToLowerCase:i,Symbol:l,SymbolHasInstance:d}=et();h.exports=ie,ie.WritableState=V;var{EventEmitter:p}=(tr(),Ge(Kt)),g=go().Stream,{Buffer:b}=(at(),Ge(st)),A=ur(),{addAbortSignal:S}=en(),{getHighWaterMark:O,getDefaultHighWaterMark:y}=tn(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:j,ERR_STREAM_DESTROYED:w,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:U}=yt().codes,{errorOrDestroy:k}=A;e(ie.prototype,g.prototype),e(ie,g);function K(){}var Q=l("kOnFinished");function V(L,G,ae){typeof ae!="boolean"&&(ae=G instanceof Rt()),this.objectMode=!!(L&&L.objectMode),ae&&(this.objectMode=this.objectMode||!!(L&&L.writableObjectMode)),this.highWaterMark=L?O(this,L,"writableHighWaterMark",ae):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ve=!!(L&&L.decodeStrings===!1);this.decodeStrings=!ve,this.defaultEncoding=L&&L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,he(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!L||L.emitClose!==!1,this.autoDestroy=!L||L.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Q]=[]}function he(L){L.buffered=[],L.bufferedIndex=0,L.allBuffers=!0,L.allNoop=!0}V.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},r(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ie(L){let G=this instanceof Rt();if(!G&&!n(ie,this))return new ie(L);this._writableState=new V(L,this,G),L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final),typeof L.construct=="function"&&(this._construct=L.construct),L.signal&&S(L.signal,this)),g.call(this,L),A.construct(this,()=>{let ae=this._writableState;ae.writing||Oe(this,ae),ee(this,ae)})}r(ie,d,{__proto__:null,value:function(L){return n(this,L)?!0:this!==ie?!1:L&&L._writableState instanceof V}}),ie.prototype.pipe=function(){k(this,new j)};function ne(L,G,ae,ve){let _e=L._writableState;if(typeof ae=="function")ve=ae,ae=_e.defaultEncoding;else{if(!ae)ae=_e.defaultEncoding;else if(ae!=="buffer"&&!b.isEncoding(ae))throw new U(ae);typeof ve!="function"&&(ve=K)}if(G===null)throw new T;if(!_e.objectMode)if(typeof G=="string")_e.decodeStrings!==!1&&(G=b.from(G,ae),ae="buffer");else if(G instanceof b)ae="buffer";else if(g._isUint8Array(G))G=g._uint8ArrayToBuffer(G),ae="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],G);let xe;return _e.ending?xe=new M:_e.destroyed&&(xe=new w("write")),xe?(s.nextTick(ve,xe),k(L,xe,!0),xe):(_e.pendingcb++,ce(L,_e,G,ae,ve))}ie.prototype.write=function(L,G,ae){return ne(this,L,G,ae)===!0},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){let L=this._writableState;L.corked&&(L.corked--,L.writing||Oe(this,L))},ie.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=i(L)),!b.isEncoding(L))throw new U(L);return this._writableState.defaultEncoding=L,this};function ce(L,G,ae,ve,_e){let xe=G.objectMode?1:ae.length;G.length+=xe;let Y=G.length<G.highWaterMark;return Y||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:ae,encoding:ve,callback:_e}),G.allBuffers&&ve!=="buffer"&&(G.allBuffers=!1),G.allNoop&&_e!==K&&(G.allNoop=!1)):(G.writelen=xe,G.writecb=_e,G.writing=!0,G.sync=!0,L._write(ae,ve,G.onwrite),G.sync=!1),Y&&!G.errored&&!G.destroyed}function z(L,G,ae,ve,_e,xe,Y){G.writelen=ve,G.writecb=Y,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new w("write")):ae?L._writev(_e,G.onwrite):L._write(_e,xe,G.onwrite),G.sync=!1}function le(L,G,ae,ve){--G.pendingcb,ve(ae),ue(G),k(L,ae)}function B(L,G){let ae=L._writableState,ve=ae.sync,_e=ae.writecb;if(typeof _e!="function"){k(L,new _);return}ae.writing=!1,ae.writecb=null,ae.length-=ae.writelen,ae.writelen=0,G?(G.stack,ae.errored||(ae.errored=G),L._readableState&&!L._readableState.errored&&(L._readableState.errored=G),ve?s.nextTick(le,L,ae,G,_e):le(L,ae,G,_e)):(ae.buffered.length>ae.bufferedIndex&&Oe(L,ae),ve?ae.afterWriteTickInfo!==null&&ae.afterWriteTickInfo.cb===_e?ae.afterWriteTickInfo.count++:(ae.afterWriteTickInfo={count:1,cb:_e,stream:L,state:ae},s.nextTick(te,ae.afterWriteTickInfo)):Z(L,ae,1,_e))}function te({stream:L,state:G,count:ae,cb:ve}){return G.afterWriteTickInfo=null,Z(L,G,ae,ve)}function Z(L,G,ae,ve){for(!G.ending&&!L.destroyed&&G.length===0&&G.needDrain&&(G.needDrain=!1,L.emit("drain"));ae-- >0;)G.pendingcb--,ve();G.destroyed&&ue(G),ee(L,G)}function ue(L){if(L.writing)return;for(let _e=L.bufferedIndex;_e<L.buffered.length;++_e){var G;let{chunk:xe,callback:Y}=L.buffered[_e],Ee=L.objectMode?1:xe.length;L.length-=Ee,Y((G=L.errored)!==null&&G!==void 0?G:new w("write"))}let ae=L[Q].splice(0);for(let _e=0;_e<ae.length;_e++){var ve;ae[_e]((ve=L.errored)!==null&&ve!==void 0?ve:new w("end"))}he(L)}function Oe(L,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;let{buffered:ae,bufferedIndex:ve,objectMode:_e}=G,xe=ae.length-ve;if(!xe)return;let Y=ve;if(G.bufferProcessing=!0,xe>1&&L._writev){G.pendingcb-=xe-1;let Ee=G.allNoop?K:fe=>{for(let Me=Y;Me<ae.length;++Me)ae[Me].callback(fe)},Pe=G.allNoop&&Y===0?ae:a(ae,Y);Pe.allBuffers=G.allBuffers,z(L,G,!0,G.length,Pe,"",Ee),he(G)}else{do{let{chunk:Ee,encoding:Pe,callback:fe}=ae[Y];ae[Y++]=null;let Me=_e?1:Ee.length;z(L,G,!1,Me,Ee,Pe,fe)}while(Y<ae.length&&!G.writing);Y===ae.length?he(G):Y>256?(ae.splice(0,Y),G.bufferedIndex=0):G.bufferedIndex=Y}G.bufferProcessing=!1}ie.prototype._write=function(L,G,ae){if(this._writev)this._writev([{chunk:L,encoding:G}],ae);else throw new E("_write()")},ie.prototype._writev=null,ie.prototype.end=function(L,G,ae){let ve=this._writableState;typeof L=="function"?(ae=L,L=null,G=null):typeof G=="function"&&(ae=G,G=null);let _e;if(L!=null){let xe=ne(this,L,G);xe instanceof c&&(_e=xe)}return ve.corked&&(ve.corked=1,this.uncork()),_e||(!ve.errored&&!ve.ending?(ve.ending=!0,ee(this,ve,!0),ve.ended=!0):ve.finished?_e=new P("end"):ve.destroyed&&(_e=new w("end"))),typeof ae=="function"&&(_e||ve.finished?s.nextTick(ae,_e):ve[Q].push(ae)),this};function J(L){return L.ending&&!L.destroyed&&L.constructed&&L.length===0&&!L.errored&&L.buffered.length===0&&!L.finished&&!L.writing&&!L.errorEmitted&&!L.closeEmitted}function W(L,G){let ae=!1;function ve(_e){if(ae){k(L,_e??_());return}if(ae=!0,G.pendingcb--,_e){let xe=G[Q].splice(0);for(let Y=0;Y<xe.length;Y++)xe[Y](_e);k(L,_e,G.sync)}else J(G)&&(G.prefinished=!0,L.emit("prefinish"),G.pendingcb++,s.nextTick(X,L,G))}G.sync=!0,G.pendingcb++;try{L._final(ve)}catch(_e){ve(_e)}G.sync=!1}function se(L,G){!G.prefinished&&!G.finalCalled&&(typeof L._final=="function"&&!G.destroyed?(G.finalCalled=!0,W(L,G)):(G.prefinished=!0,L.emit("prefinish")))}function ee(L,G,ae){J(G)&&(se(L,G),G.pendingcb===0&&(ae?(G.pendingcb++,s.nextTick((ve,_e)=>{J(_e)?X(ve,_e):_e.pendingcb--},L,G)):J(G)&&(G.pendingcb++,X(L,G))))}function X(L,G){G.pendingcb--,G.finished=!0;let ae=G[Q].splice(0);for(let ve=0;ve<ae.length;ve++)ae[ve]();if(L.emit("finish"),G.autoDestroy){let ve=L._readableState;(!ve||ve.autoDestroy&&(ve.endEmitted||ve.readable===!1))&&L.destroy()}}t(ie.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(L){this._writableState&&(this._writableState.destroyed=L)}},writable:{__proto__:null,get(){let L=this._writableState;return!!L&&L.writable!==!1&&!L.destroyed&&!L.errored&&!L.ending&&!L.ended},set(L){this._writableState&&(this._writableState.writable=!!L)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let L=this._writableState;return L?!L.destroyed&&!L.ending&&L.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var re=A.destroy;ie.prototype.destroy=function(L,G){let ae=this._writableState;return!ae.destroyed&&(ae.bufferedIndex<ae.buffered.length||ae[Q].length)&&s.nextTick(ue,ae),re.call(this,L,G),this},ie.prototype._undestroy=A.undestroy,ie.prototype._destroy=function(L,G){G(L)},ie.prototype[p.captureRejectionSymbol]=function(L){this.destroy(L)};var we;function de(){return we===void 0&&(we={}),we}ie.fromWeb=function(L,G){return de().newStreamWritableFromWritableStream(L,G)},ie.toWeb=function(L){return de().newWritableStreamFromStreamWritable(L)}}),Au=Ae((f,h)=>{ye(),be(),me();var s=rr(),a=(at(),Ge(st)),{isReadable:c,isWritable:n,isIterable:r,isNodeStream:t,isReadableNodeStream:e,isWritableNodeStream:i,isDuplexNodeStream:l,isReadableStream:d,isWritableStream:p}=Bt(),g=Ht(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:S}}=yt(),{destroyer:O}=ur(),y=Rt(),v=rn(),E=yo(),{createDeferredPromise:_}=bt(),j=aa(),w=globalThis.Blob||a.Blob,P=typeof w<"u"?function(Q){return Q instanceof w}:function(Q){return!1},T=globalThis.AbortController||br().AbortController,{FunctionPrototypeCall:M}=et(),U=class extends y{constructor(Q){super(Q),Q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};h.exports=function Q(V,he){if(l(V))return V;if(e(V))return K({readable:V});if(i(V))return K({writable:V});if(t(V))return K({writable:!1,readable:!1});if(d(V))return K({readable:v.fromWeb(V)});if(p(V))return K({writable:E.fromWeb(V)});if(typeof V=="function"){let{value:ne,write:ce,final:z,destroy:le}=k(V);if(r(ne))return j(U,ne,{objectMode:!0,write:ce,final:z,destroy:le});let B=ne?.then;if(typeof B=="function"){let te,Z=M(B,ne,ue=>{if(ue!=null)throw new S("nully","body",ue)},ue=>{O(te,ue)});return te=new U({objectMode:!0,readable:!1,write:ce,final(ue){z(async()=>{try{await Z,s.nextTick(ue,null)}catch(Oe){s.nextTick(ue,Oe)}})},destroy:le})}throw new S("Iterable, AsyncIterable or AsyncFunction",he,ne)}if(P(V))return Q(V.arrayBuffer());if(r(V))return j(U,V,{objectMode:!0,writable:!1});if(d(V?.readable)&&p(V?.writable))return U.fromWeb(V);if(typeof V?.writable=="object"||typeof V?.readable=="object"){let ne=V!=null&&V.readable?e(V?.readable)?V?.readable:Q(V.readable):void 0,ce=V!=null&&V.writable?i(V?.writable)?V?.writable:Q(V.writable):void 0;return K({readable:ne,writable:ce})}let ie=V?.then;if(typeof ie=="function"){let ne;return M(ie,V,ce=>{ce!=null&&ne.push(ce),ne.push(null)},ce=>{O(ne,ce)}),ne=new U({objectMode:!0,writable:!1,read(){}})}throw new A(he,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function k(Q){let{promise:V,resolve:he}=_(),ie=new T,ne=ie.signal;return{value:Q((async function*(){for(;;){let ce=V;V=null;let{chunk:z,done:le,cb:B}=await ce;if(s.nextTick(B),le)return;if(ne.aborted)throw new b(void 0,{cause:ne.reason});({promise:V,resolve:he}=_()),yield z}})(),{signal:ne}),write(ce,z,le){let B=he;he=null,B({chunk:ce,done:!1,cb:le})},final(ce){let z=he;he=null,z({done:!0,cb:ce})},destroy(ce,z){ie.abort(),z(ce)}}}function K(Q){let V=Q.readable&&typeof Q.readable.read!="function"?v.wrap(Q.readable):Q.readable,he=Q.writable,ie=!!c(V),ne=!!n(he),ce,z,le,B,te;function Z(ue){let Oe=B;B=null,Oe?Oe(ue):ue&&te.destroy(ue)}return te=new U({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(he!=null&&he.writableObjectMode),readable:ie,writable:ne}),ne&&(g(he,ue=>{ne=!1,ue&&O(V,ue),Z(ue)}),te._write=function(ue,Oe,J){he.write(ue,Oe)?J():ce=J},te._final=function(ue){he.end(),z=ue},he.on("drain",function(){if(ce){let ue=ce;ce=null,ue()}}),he.on("finish",function(){if(z){let ue=z;z=null,ue()}})),ie&&(g(V,ue=>{ie=!1,ue&&O(V,ue),Z(ue)}),V.on("readable",function(){if(le){let ue=le;le=null,ue()}}),V.on("end",function(){te.push(null)}),te._read=function(){for(;;){let ue=V.read();if(ue===null){le=te._read;return}if(!te.push(ue))return}}),te._destroy=function(ue,Oe){!ue&&B!==null&&(ue=new b),le=null,ce=null,z=null,B===null?Oe(ue):(B=Oe,O(he,ue),O(V,ue))},te}}),Rt=Ae((f,h)=>{ye(),be(),me();var{ObjectDefineProperties:s,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:c,ObjectSetPrototypeOf:n}=et();h.exports=e;var r=rn(),t=yo();n(e.prototype,r.prototype),n(e,r);{let p=c(t.prototype);for(let g=0;g<p.length;g++){let b=p[g];e.prototype[b]||(e.prototype[b]=t.prototype[b])}}function e(p){if(!(this instanceof e))return new e(p);r.call(this,p),t.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}s(e.prototype,{writable:{__proto__:null,...a(t.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(t.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(t.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(t.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(t.prototype,"writableLength")},writableFinished:{__proto__:null,...a(t.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(t.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(t.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(t.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var i;function l(){return i===void 0&&(i={}),i}e.fromWeb=function(p,g){return l().newStreamDuplexFromReadableWritablePair(p,g)},e.toWeb=function(p){return l().newReadableWritablePairFromDuplex(p)};var d;e.from=function(p){return d||(d=Au()),d(p,"body")}}),la=Ae((f,h)=>{ye(),be(),me();var{ObjectSetPrototypeOf:s,Symbol:a}=et();h.exports=e;var{ERR_METHOD_NOT_IMPLEMENTED:c}=yt().codes,n=Rt(),{getHighWaterMark:r}=tn();s(e.prototype,n.prototype),s(e,n);var t=a("kCallback");function e(d){if(!(this instanceof e))return new e(d);let p=d?r(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),n.call(this,d),this._readableState.sync=!1,this[t]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",l)}function i(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,g)=>{if(p){d?d(p):this.destroy(p);return}g!=null&&this.push(g),this.push(null),d&&d()}):(this.push(null),d&&d())}function l(){this._final!==i&&i.call(this)}e.prototype._final=i,e.prototype._transform=function(d,p,g){throw new c("_transform()")},e.prototype._write=function(d,p,g){let b=this._readableState,A=this._writableState,S=b.length;this._transform(d,p,(O,y)=>{if(O){g(O);return}y!=null&&this.push(y),A.ended||S===b.length||b.length<b.highWaterMark?g():this[t]=g})},e.prototype._read=function(){if(this[t]){let d=this[t];this[t]=null,d()}}}),ua=Ae((f,h)=>{ye(),be(),me();var{ObjectSetPrototypeOf:s}=et();h.exports=c;var a=la();s(c.prototype,a.prototype),s(c,a);function c(n){if(!(this instanceof c))return new c(n);a.call(this,n)}c.prototype._transform=function(n,r,t){t(null,n)}}),mo=Ae((f,h)=>{ye(),be(),me();var s=rr(),{ArrayIsArray:a,Promise:c,SymbolAsyncIterator:n,SymbolDispose:r}=et(),t=Ht(),{once:e}=bt(),i=ur(),l=Rt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:A,ERR_STREAM_PREMATURE_CLOSE:S},AbortError:O}=yt(),{validateFunction:y,validateAbortSignal:v}=vr(),{isIterable:E,isReadable:_,isReadableNodeStream:j,isNodeStream:w,isTransformStream:P,isWebStream:T,isReadableStream:M,isReadableFinished:U}=Bt(),k=globalThis.AbortController||br().AbortController,K,Q,V;function he(ue,Oe,J){let W=!1;ue.on("close",()=>{W=!0});let se=t(ue,{readable:Oe,writable:J},ee=>{W=!ee});return{destroy:ee=>{W||(W=!0,i.destroyer(ue,ee||new A("pipe")))},cleanup:se}}function ie(ue){return y(ue[ue.length-1],"streams[stream.length - 1]"),ue.pop()}function ne(ue){if(E(ue))return ue;if(j(ue))return ce(ue);throw new p("val",["Readable","Iterable","AsyncIterable"],ue)}async function*ce(ue){Q||(Q=rn()),yield*Q.prototype[n].call(ue)}async function z(ue,Oe,J,{end:W}){let se,ee=null,X=de=>{if(de&&(se=de),ee){let L=ee;ee=null,L()}},re=()=>new c((de,L)=>{se?L(se):ee=()=>{se?L(se):de()}});Oe.on("drain",X);let we=t(Oe,{readable:!1},X);try{Oe.writableNeedDrain&&await re();for await(let de of ue)Oe.write(de)||await re();W&&(Oe.end(),await re()),J()}catch(de){J(se!==de?d(se,de):de)}finally{we(),Oe.off("drain",X)}}async function le(ue,Oe,J,{end:W}){P(Oe)&&(Oe=Oe.writable);let se=Oe.getWriter();try{for await(let ee of ue)await se.ready,se.write(ee).catch(()=>{});await se.ready,W&&await se.close(),J()}catch(ee){try{await se.abort(ee),J(ee)}catch(X){J(X)}}}function B(...ue){return te(ue,e(ie(ue)))}function te(ue,Oe,J){if(ue.length===1&&a(ue[0])&&(ue=ue[0]),ue.length<2)throw new b("streams");let W=new k,se=W.signal,ee=J?.signal,X=[];v(ee,"options.signal");function re(){_e(new O)}V=V||bt().addAbortListener;let we;ee&&(we=V(ee,re));let de,L,G=[],ae=0;function ve(Pe){_e(Pe,--ae===0)}function _e(Pe,fe){var Me;if(Pe&&(!de||de.code==="ERR_STREAM_PREMATURE_CLOSE")&&(de=Pe),!(!de&&!fe)){for(;G.length;)G.shift()(de);(Me=we)===null||Me===void 0||Me[r](),W.abort(),fe&&(de||X.forEach(o=>o()),s.nextTick(Oe,de,L))}}let xe;for(let Pe=0;Pe<ue.length;Pe++){let fe=ue[Pe],Me=Pe<ue.length-1,o=Pe>0,u=Me||J?.end!==!1,m=Pe===ue.length-1;if(w(fe)){let C=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ve(N)};if(u){let{destroy:N,cleanup:H}=he(fe,Me,o);G.push(N),_(fe)&&m&&X.push(H)}fe.on("error",C),_(fe)&&m&&X.push(()=>{fe.removeListener("error",C)})}if(Pe===0)if(typeof fe=="function"){if(xe=fe({signal:se}),!E(xe))throw new g("Iterable, AsyncIterable or Stream","source",xe)}else E(fe)||j(fe)||P(fe)?xe=fe:xe=l.from(fe);else if(typeof fe=="function"){if(P(xe)){var Y;xe=ne((Y=xe)===null||Y===void 0?void 0:Y.readable)}else xe=ne(xe);if(xe=fe(xe,{signal:se}),Me){if(!E(xe,!0))throw new g("AsyncIterable",`transform[${Pe-1}]`,xe)}else{var Ee;K||(K=ua());let C=new K({objectMode:!0}),N=(Ee=xe)===null||Ee===void 0?void 0:Ee.then;if(typeof N=="function")ae++,N.call(xe,q=>{L=q,q!=null&&C.write(q),u&&C.end(),s.nextTick(ve)},q=>{C.destroy(q),s.nextTick(ve,q)});else if(E(xe,!0))ae++,z(xe,C,ve,{end:u});else if(M(xe)||P(xe)){let q=xe.readable||xe;ae++,z(q,C,ve,{end:u})}else throw new g("AsyncIterable or Promise","destination",xe);xe=C;let{destroy:H,cleanup:ge}=he(xe,!1,!0);G.push(H),m&&X.push(ge)}}else if(w(fe)){if(j(xe)){ae+=2;let C=Z(xe,fe,ve,{end:u});_(fe)&&m&&X.push(C)}else if(P(xe)||M(xe)){let C=xe.readable||xe;ae++,z(C,fe,ve,{end:u})}else if(E(xe))ae++,z(xe,fe,ve,{end:u});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],xe);xe=fe}else if(T(fe)){if(j(xe))ae++,le(ne(xe),fe,ve,{end:u});else if(M(xe)||E(xe))ae++,le(xe,fe,ve,{end:u});else if(P(xe))ae++,le(xe.readable,fe,ve,{end:u});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],xe);xe=fe}else xe=l.from(fe)}return(se!=null&&se.aborted||ee!=null&&ee.aborted)&&s.nextTick(re),xe}function Z(ue,Oe,J,{end:W}){let se=!1;if(Oe.on("close",()=>{se||J(new S)}),ue.pipe(Oe,{end:!1}),W){let ee=function(){se=!0,Oe.end()};U(ue)?s.nextTick(ee):ue.once("end",ee)}else J();return t(ue,{readable:!0,writable:!1},ee=>{let X=ue._readableState;ee&&ee.code==="ERR_STREAM_PREMATURE_CLOSE"&&X&&X.ended&&!X.errored&&!X.errorEmitted?ue.once("end",J).once("error",J):J(ee)}),t(Oe,{readable:!1,writable:!0},J)}h.exports={pipelineImpl:te,pipeline:B}}),ca=Ae((f,h)=>{ye(),be(),me();var{pipeline:s}=mo(),a=Rt(),{destroyer:c}=ur(),{isNodeStream:n,isReadable:r,isWritable:t,isWebStream:e,isTransformStream:i,isWritableStream:l,isReadableStream:d}=Bt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:b}}=yt(),A=Ht();h.exports=function(...S){if(S.length===0)throw new b("streams");if(S.length===1)return a.from(S[0]);let O=[...S];if(typeof S[0]=="function"&&(S[0]=a.from(S[0])),typeof S[S.length-1]=="function"){let k=S.length-1;S[k]=a.from(S[k])}for(let k=0;k<S.length;++k)if(!(!n(S[k])&&!e(S[k]))){if(k<S.length-1&&!(r(S[k])||d(S[k])||i(S[k])))throw new g(`streams[${k}]`,O[k],"must be readable");if(k>0&&!(t(S[k])||l(S[k])||i(S[k])))throw new g(`streams[${k}]`,O[k],"must be writable")}let y,v,E,_,j;function w(k){let K=_;_=null,K?K(k):k?j.destroy(k):!U&&!M&&j.destroy()}let P=S[0],T=s(S,w),M=!!(t(P)||l(P)||i(P)),U=!!(r(T)||d(T)||i(T));if(j=new a({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(T!=null&&T.readableObjectMode),writable:M,readable:U}),M){if(n(P))j._write=function(K,Q,V){P.write(K,Q)?V():y=V},j._final=function(K){P.end(),v=K},P.on("drain",function(){if(y){let K=y;y=null,K()}});else if(e(P)){let K=(i(P)?P.writable:P).getWriter();j._write=async function(Q,V,he){try{await K.ready,K.write(Q).catch(()=>{}),he()}catch(ie){he(ie)}},j._final=async function(Q){try{await K.ready,K.close().catch(()=>{}),v=Q}catch(V){Q(V)}}}let k=i(T)?T.readable:T;A(k,()=>{if(v){let K=v;v=null,K()}})}if(U){if(n(T))T.on("readable",function(){if(E){let k=E;E=null,k()}}),T.on("end",function(){j.push(null)}),j._read=function(){for(;;){let k=T.read();if(k===null){E=j._read;return}if(!j.push(k))return}};else if(e(T)){let k=(i(T)?T.readable:T).getReader();j._read=async function(){for(;;)try{let{value:K,done:Q}=await k.read();if(!j.push(K))return;if(Q){j.push(null);return}}catch{return}}}}return j._destroy=function(k,K){!k&&_!==null&&(k=new p),E=null,y=null,v=null,_===null?K(k):(_=K,n(T)&&c(T,k))},j}}),xu=Ae((f,h)=>{ye(),be(),me();var s=globalThis.AbortController||br().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:r},AbortError:t}=yt(),{validateAbortSignal:e,validateInteger:i,validateObject:l}=vr(),d=et().Symbol("kWeak"),p=et().Symbol("kResistStopPropagation"),{finished:g}=Ht(),b=ca(),{addAbortSignalNoValidate:A}=en(),{isWritable:S,isNodeStream:O}=Bt(),{deprecate:y}=bt(),{ArrayPrototypePush:v,Boolean:E,MathFloor:_,Number:j,NumberIsNaN:w,Promise:P,PromiseReject:T,PromiseResolve:M,PromisePrototypeThen:U,Symbol:k}=et(),K=k("kEmpty"),Q=k("kEof");function V(ee,X){if(X!=null&&l(X,"options"),X?.signal!=null&&e(X.signal,"options.signal"),O(ee)&&!S(ee))throw new a("stream",ee,"must be writable");let re=b(this,ee);return X!=null&&X.signal&&A(X.signal,re),re}function he(ee,X){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);X!=null&&l(X,"options"),X?.signal!=null&&e(X.signal,"options.signal");let re=1;X?.concurrency!=null&&(re=_(X.concurrency));let we=re-1;return X?.highWaterMark!=null&&(we=_(X.highWaterMark)),i(re,"options.concurrency",1),i(we,"options.highWaterMark",0),we+=re,(async function*(){let de=bt().AbortSignalAny([X?.signal].filter(E)),L=this,G=[],ae={signal:de},ve,_e,xe=!1,Y=0;function Ee(){xe=!0,Pe()}function Pe(){Y-=1,fe()}function fe(){_e&&!xe&&Y<re&&G.length<we&&(_e(),_e=null)}async function Me(){try{for await(let o of L){if(xe)return;if(de.aborted)throw new t;try{if(o=ee(o,ae),o===K)continue;o=M(o)}catch(u){o=T(u)}Y+=1,U(o,Pe,Ee),G.push(o),ve&&(ve(),ve=null),!xe&&(G.length>=we||Y>=re)&&await new P(u=>{_e=u})}G.push(Q)}catch(o){let u=T(o);U(u,Pe,Ee),G.push(u)}finally{xe=!0,ve&&(ve(),ve=null)}}Me();try{for(;;){for(;G.length>0;){let o=await G[0];if(o===Q)return;if(de.aborted)throw new t;o!==K&&(yield o),G.shift(),fe()}await new P(o=>{ve=o})}}finally{xe=!0,_e&&(_e(),_e=null)}}).call(this)}function ie(ee=void 0){return ee!=null&&l(ee,"options"),ee?.signal!=null&&e(ee.signal,"options.signal"),(async function*(){let X=0;for await(let we of this){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new t({cause:ee.signal.reason});yield[X++,we]}}).call(this)}async function ne(ee,X=void 0){for await(let re of B.call(this,ee,X))return!0;return!1}async function ce(ee,X=void 0){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);return!await ne.call(this,async(...re)=>!await ee(...re),X)}async function z(ee,X){for await(let re of B.call(this,ee,X))return re}async function le(ee,X){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);async function re(we,de){return await ee(we,de),K}for await(let we of he.call(this,re,X));}function B(ee,X){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);async function re(we,de){return await ee(we,de)?we:K}return he.call(this,re,X)}var te=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Z(ee,X,re){var we;if(typeof ee!="function")throw new c("reducer",["Function","AsyncFunction"],ee);re!=null&&l(re,"options"),re?.signal!=null&&e(re.signal,"options.signal");let de=arguments.length>1;if(re!=null&&(we=re.signal)!==null&&we!==void 0&&we.aborted){let _e=new t(void 0,{cause:re.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(_e)),_e}let L=new s,G=L.signal;if(re!=null&&re.signal){let _e={once:!0,[d]:this,[p]:!0};re.signal.addEventListener("abort",()=>L.abort(),_e)}let ae=!1;try{for await(let _e of this){var ve;if(ae=!0,re!=null&&(ve=re.signal)!==null&&ve!==void 0&&ve.aborted)throw new t;de?X=await ee(X,_e,{signal:G}):(X=_e,de=!0)}if(!ae&&!de)throw new te}finally{L.abort()}return X}async function ue(ee){ee!=null&&l(ee,"options"),ee?.signal!=null&&e(ee.signal,"options.signal");let X=[];for await(let we of this){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new t(void 0,{cause:ee.signal.reason});v(X,we)}return X}function Oe(ee,X){let re=he.call(this,ee,X);return(async function*(){for await(let we of re)yield*we}).call(this)}function J(ee){if(ee=j(ee),w(ee))return 0;if(ee<0)throw new r("number",">= 0",ee);return ee}function W(ee,X=void 0){return X!=null&&l(X,"options"),X?.signal!=null&&e(X.signal,"options.signal"),ee=J(ee),(async function*(){var re;if(X!=null&&(re=X.signal)!==null&&re!==void 0&&re.aborted)throw new t;for await(let de of this){var we;if(X!=null&&(we=X.signal)!==null&&we!==void 0&&we.aborted)throw new t;ee--<=0&&(yield de)}}).call(this)}function se(ee,X=void 0){return X!=null&&l(X,"options"),X?.signal!=null&&e(X.signal,"options.signal"),ee=J(ee),(async function*(){var re;if(X!=null&&(re=X.signal)!==null&&re!==void 0&&re.aborted)throw new t;for await(let de of this){var we;if(X!=null&&(we=X.signal)!==null&&we!==void 0&&we.aborted)throw new t;if(ee-- >0&&(yield de),ee<=0)return}}).call(this)}h.exports.streamReturningOperators={asIndexedPairs:y(ie,"readable.asIndexedPairs will be removed in a future version."),drop:W,filter:B,flatMap:Oe,map:he,take:se,compose:V},h.exports.promiseReturningOperators={every:ce,forEach:le,reduce:Z,toArray:ue,some:ne,find:z}}),ha=Ae((f,h)=>{ye(),be(),me();var{ArrayPrototypePop:s,Promise:a}=et(),{isIterable:c,isNodeStream:n,isWebStream:r}=Bt(),{pipelineImpl:t}=mo(),{finished:e}=Ht();fa();function i(...l){return new a((d,p)=>{let g,b,A=l[l.length-1];if(A&&typeof A=="object"&&!n(A)&&!c(A)&&!r(A)){let S=s(l);g=S.signal,b=S.end}t(l,(S,O)=>{S?p(S):d(O)},{signal:g,end:b})})}h.exports={finished:e,pipeline:i}}),fa=Ae((f,h)=>{ye(),be(),me();var{Buffer:s}=(at(),Ge(st)),{ObjectDefineProperty:a,ObjectKeys:c,ReflectApply:n}=et(),{promisify:{custom:r}}=bt(),{streamReturningOperators:t,promiseReturningOperators:e}=xu(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:i}}=yt(),l=ca(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=tn(),{pipeline:g}=mo(),{destroyer:b}=ur(),A=Ht(),S=ha(),O=Bt(),y=h.exports=go().Stream;y.isDestroyed=O.isDestroyed,y.isDisturbed=O.isDisturbed,y.isErrored=O.isErrored,y.isReadable=O.isReadable,y.isWritable=O.isWritable,y.Readable=rn();for(let E of c(t)){let _=function(...w){if(new.target)throw i();return y.Readable.from(n(j,this,w))},j=t[E];a(_,"name",{__proto__:null,value:j.name}),a(_,"length",{__proto__:null,value:j.length}),a(y.Readable.prototype,E,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let E of c(e)){let _=function(...w){if(new.target)throw i();return n(j,this,w)},j=e[E];a(_,"name",{__proto__:null,value:j.name}),a(_,"length",{__proto__:null,value:j.length}),a(y.Readable.prototype,E,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}y.Writable=yo(),y.Duplex=Rt(),y.Transform=la(),y.PassThrough=ua(),y.pipeline=g;var{addAbortSignal:v}=en();y.addAbortSignal=v,y.finished=A,y.destroy=b,y.compose=l,y.setDefaultHighWaterMark=d,y.getDefaultHighWaterMark=p,a(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S}}),a(g,r,{__proto__:null,enumerable:!0,get(){return S.pipeline}}),a(A,r,{__proto__:null,enumerable:!0,get(){return S.finished}}),y.Stream=y,y._isUint8Array=function(E){return E instanceof Uint8Array},y._uint8ArrayToBuffer=function(E){return s.from(E.buffer,E.byteOffset,E.byteLength)}}),nr=Ae((f,h)=>{ye(),be(),me();var s=fa(),a=ha(),c=s.Readable.destroy;h.exports=s.Readable,h.exports._uint8ArrayToBuffer=s._uint8ArrayToBuffer,h.exports._isUint8Array=s._isUint8Array,h.exports.isDisturbed=s.isDisturbed,h.exports.isErrored=s.isErrored,h.exports.isReadable=s.isReadable,h.exports.Readable=s.Readable,h.exports.Writable=s.Writable,h.exports.Duplex=s.Duplex,h.exports.Transform=s.Transform,h.exports.PassThrough=s.PassThrough,h.exports.addAbortSignal=s.addAbortSignal,h.exports.finished=s.finished,h.exports.destroy=s.destroy,h.exports.destroy=c,h.exports.pipeline=s.pipeline,h.exports.compose=s.compose,Object.defineProperty(s,"promises",{configurable:!0,enumerable:!0,get(){return a}}),h.exports.Stream=s.Stream,h.exports.default=h.exports}),Ou=Ae((f,h)=>{ye(),be(),me(),typeof Object.create=="function"?h.exports=function(s,a){a&&(s.super_=a,s.prototype=Object.create(a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(s,a){if(a){s.super_=a;var c=function(){};c.prototype=a.prototype,s.prototype=new c,s.prototype.constructor=s}}}),Iu=Ae((f,h)=>{ye(),be(),me();var{Buffer:s}=(at(),Ge(st)),a=Symbol.for("BufferList");function c(n){if(!(this instanceof c))return new c(n);c._init.call(this,n)}c._init=function(n){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},c.prototype._new=function(n){return new c(n)},c.prototype._offset=function(n){if(n===0)return[0,0];let r=0;for(let t=0;t<this._bufs.length;t++){let e=r+this._bufs[t].length;if(n<e||t===this._bufs.length-1)return[t,n-r];r=e}},c.prototype._reverseOffset=function(n){let r=n[0],t=n[1];for(let e=0;e<r;e++)t+=this._bufs[e].length;return t},c.prototype.getBuffers=function(){return this._bufs},c.prototype.get=function(n){if(n>this.length||n<0)return;let r=this._offset(n);return this._bufs[r[0]][r[1]]},c.prototype.slice=function(n,r){return typeof n=="number"&&n<0&&(n+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,n,r)},c.prototype.copy=function(n,r,t,e){if((typeof t!="number"||t<0)&&(t=0),(typeof e!="number"||e>this.length)&&(e=this.length),t>=this.length||e<=0)return n||s.alloc(0);let i=!!n,l=this._offset(t),d=e-t,p=d,g=i&&r||0,b=l[1];if(t===0&&e===this.length){if(!i)return this._bufs.length===1?this._bufs[0]:s.concat(this._bufs,this.length);for(let A=0;A<this._bufs.length;A++)this._bufs[A].copy(n,g),g+=this._bufs[A].length;return n}if(p<=this._bufs[l[0]].length-b)return i?this._bufs[l[0]].copy(n,r,b,b+p):this._bufs[l[0]].slice(b,b+p);i||(n=s.allocUnsafe(d));for(let A=l[0];A<this._bufs.length;A++){let S=this._bufs[A].length-b;if(p>S)this._bufs[A].copy(n,g,b),g+=S;else{this._bufs[A].copy(n,g,b,b+p),g+=S;break}p-=S,b&&(b=0)}return n.length>g?n.slice(0,g):n},c.prototype.shallowSlice=function(n,r){if(n=n||0,r=typeof r!="number"?this.length:r,n<0&&(n+=this.length),r<0&&(r+=this.length),n===r)return this._new();let t=this._offset(n),e=this._offset(r),i=this._bufs.slice(t[0],e[0]+1);return e[1]===0?i.pop():i[i.length-1]=i[i.length-1].slice(0,e[1]),t[1]!==0&&(i[0]=i[0].slice(t[1])),this._new(i)},c.prototype.toString=function(n,r,t){return this.slice(r,t).toString(n)},c.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},c.prototype.duplicate=function(){let n=this._new();for(let r=0;r<this._bufs.length;r++)n.append(this._bufs[r]);return n},c.prototype.append=function(n){return this._attach(n,c.prototype._appendBuffer)},c.prototype.prepend=function(n){return this._attach(n,c.prototype._prependBuffer,!0)},c.prototype._attach=function(n,r,t){if(n==null)return this;if(n.buffer)r.call(this,s.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n)){let[e,i]=t?[n.length-1,-1]:[0,1];for(let l=e;l>=0&&l<n.length;l+=i)this._attach(n[l],r,t)}else if(this._isBufferList(n)){let[e,i]=t?[n._bufs.length-1,-1]:[0,1];for(let l=e;l>=0&&l<n._bufs.length;l+=i)this._attach(n._bufs[l],r,t)}else typeof n=="number"&&(n=n.toString()),r.call(this,s.from(n));return this},c.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},c.prototype._prependBuffer=function(n){this._bufs.unshift(n),this.length+=n.length},c.prototype.indexOf=function(n,r,t){if(t===void 0&&typeof r=="string"&&(t=r,r=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=s.from([n]):typeof n=="string"?n=s.from(n,t):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=s.from(n.buffer,n.byteOffset,n.byteLength):s.isBuffer(n)||(n=s.from(n)),r=Number(r||0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),n.length===0)return r>this.length?this.length:r;let e=this._offset(r),i=e[0],l=e[1];for(;i<this._bufs.length;i++){let d=this._bufs[i];for(;l<d.length;)if(d.length-l>=n.length){let p=d.indexOf(n,l);if(p!==-1)return this._reverseOffset([i,p]);l=d.length-n.length+1}else{let p=this._reverseOffset([i,l]);if(this._match(p,n))return p;l++}l=0}return-1},c.prototype._match=function(n,r){if(this.length-n<r.length)return!1;for(let t=0;t<r.length;t++)if(this.get(n+t)!==r[t])return!1;return!0},(function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let r in n)(function(t){n[t]===null?c.prototype[t]=function(e,i){return this.slice(e,e+i)[t](0,i)}:c.prototype[t]=function(e=0){return this.slice(e,e+n[t])[t](0)}})(r)})(),c.prototype._isBufferList=function(n){return n instanceof c||c.isBufferList(n)},c.isBufferList=function(n){return n!=null&&n[a]},h.exports=c}),Pu=Ae((f,h)=>{ye(),be(),me();var s=nr().Duplex,a=Ou(),c=Iu();function n(r){if(!(this instanceof n))return new n(r);if(typeof r=="function"){this._callback=r;let t=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),r=null}c._init.call(this,r),s.call(this)}a(n,s),Object.assign(n.prototype,c.prototype),n.prototype._new=function(r){return new n(r)},n.prototype._write=function(r,t,e){this._appendBuffer(r),typeof e=="function"&&e()},n.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},n.prototype.end=function(r){s.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(r,t){this._bufs.length=0,this.length=0,t(r)},n.prototype._isBufferList=function(r){return r instanceof n||r instanceof c||n.isBufferList(r)},n.isBufferList=c.isBufferList,h.exports=n,h.exports.BufferListStream=n,h.exports.BufferList=c}),ku=Ae((f,h)=>{ye(),be(),me();var s=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};h.exports=s}),pa=Ae((f,h)=>{ye(),be(),me();var s=h.exports,{Buffer:a}=(at(),Ge(st));s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},s.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},s.requiredHeaderFlagsErrors={};for(let n in s.requiredHeaderFlags){let r=s.requiredHeaderFlags[n];s.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+r.toString(16)+" for "+s.types[n]+" packet"}s.codes={};for(let n in s.types){let r=s.types[n];s.codes[r]=n}s.CMD_SHIFT=4,s.CMD_MASK=240,s.DUP_MASK=8,s.QOS_MASK=3,s.QOS_SHIFT=1,s.RETAIN_MASK=1,s.VARBYTEINT_MASK=127,s.VARBYTEINT_FIN_MASK=128,s.VARBYTEINT_MAX=268435455,s.SESSIONPRESENT_MASK=1,s.SESSIONPRESENT_HEADER=a.from([s.SESSIONPRESENT_MASK]),s.CONNACK_HEADER=a.from([s.codes.connack<<s.CMD_SHIFT]),s.USERNAME_MASK=128,s.PASSWORD_MASK=64,s.WILL_RETAIN_MASK=32,s.WILL_QOS_MASK=24,s.WILL_QOS_SHIFT=3,s.WILL_FLAG_MASK=4,s.CLEAN_SESSION_MASK=2,s.CONNECT_HEADER=a.from([s.codes.connect<<s.CMD_SHIFT]),s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},s.propertiesCodes={};for(let n in s.properties){let r=s.properties[n];s.propertiesCodes[r]=n}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(n){return[0,1,2].map(r=>[0,1].map(t=>[0,1].map(e=>{let i=a.alloc(1);return i.writeUInt8(s.codes[n]<<s.CMD_SHIFT|(t?s.DUP_MASK:0)|r<<s.QOS_SHIFT|e,0,!0),i})))}s.PUBLISH_HEADER=c("publish"),s.SUBSCRIBE_HEADER=c("subscribe"),s.SUBSCRIBE_OPTIONS_QOS_MASK=3,s.SUBSCRIBE_OPTIONS_NL_MASK=1,s.SUBSCRIBE_OPTIONS_NL_SHIFT=2,s.SUBSCRIBE_OPTIONS_RAP_MASK=1,s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,s.SUBSCRIBE_OPTIONS_RH_MASK=3,s.SUBSCRIBE_OPTIONS_RH_SHIFT=4,s.SUBSCRIBE_OPTIONS_RH=[0,16,32],s.SUBSCRIBE_OPTIONS_NL=4,s.SUBSCRIBE_OPTIONS_RAP=8,s.SUBSCRIBE_OPTIONS_QOS=[0,1,2],s.UNSUBSCRIBE_HEADER=c("unsubscribe"),s.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},s.SUBACK_HEADER=a.from([s.codes.suback<<s.CMD_SHIFT]),s.VERSION3=a.from([3]),s.VERSION4=a.from([4]),s.VERSION5=a.from([5]),s.VERSION131=a.from([131]),s.VERSION132=a.from([132]),s.QOS=[0,1,2].map(n=>a.from([n])),s.EMPTY={pingreq:a.from([s.codes.pingreq<<4,0]),pingresp:a.from([s.codes.pingresp<<4,0]),disconnect:a.from([s.codes.disconnect<<4,0])},s.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},s.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},s.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},s.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Tu=Ae((f,h)=>{ye(),be(),me();var s=1e3,a=s*60,c=a*60,n=c*24,r=n*7,t=n*365.25;h.exports=function(p,g){g=g||{};var b=typeof p;if(b==="string"&&p.length>0)return e(p);if(b==="number"&&isFinite(p))return g.long?l(p):i(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function e(p){if(p=String(p),!(p.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var b=parseFloat(g[1]),A=(g[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return b*t;case"weeks":case"week":case"w":return b*r;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*c;case"minutes":case"minute":case"mins":case"min":case"m":return b*a;case"seconds":case"second":case"secs":case"sec":case"s":return b*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function i(p){var g=Math.abs(p);return g>=n?Math.round(p/n)+"d":g>=c?Math.round(p/c)+"h":g>=a?Math.round(p/a)+"m":g>=s?Math.round(p/s)+"s":p+"ms"}function l(p){var g=Math.abs(p);return g>=n?d(p,g,n,"day"):g>=c?d(p,g,c,"hour"):g>=a?d(p,g,a,"minute"):g>=s?d(p,g,s,"second"):p+" ms"}function d(p,g,b,A){var S=g>=b*1.5;return Math.round(p/b)+" "+A+(S?"s":"")}}),Cu=Ae((f,h)=>{ye(),be(),me();function s(a){n.debug=n,n.default=n,n.coerce=d,n.disable=i,n.enable=t,n.enabled=l,n.humanize=Tu(),n.destroy=p,Object.keys(a).forEach(g=>{n[g]=a[g]}),n.names=[],n.skips=[],n.formatters={};function c(g){let b=0;for(let A=0;A<g.length;A++)b=(b<<5)-b+g.charCodeAt(A),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=c;function n(g){let b,A=null,S,O;function y(...v){if(!y.enabled)return;let E=y,_=Number(new Date),j=_-(b||_);E.diff=j,E.prev=b,E.curr=_,b=_,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(P,T)=>{if(P==="%%")return"%";w++;let M=n.formatters[T];if(typeof M=="function"){let U=v[w];P=M.call(E,U),v.splice(w,1),w--}return P}),n.formatArgs.call(E,v),(E.log||n.log).apply(E,v)}return y.namespace=g,y.useColors=n.useColors(),y.color=n.selectColor(g),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(S!==n.namespaces&&(S=n.namespaces,O=n.enabled(g)),O),set:v=>{A=v}}),typeof n.init=="function"&&n.init(y),y}function r(g,b){let A=n(this.namespace+(typeof b>"u"?":":b)+g);return A.log=this.log,A}function t(g){n.save(g),n.namespaces=g,n.names=[],n.skips=[];let b=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let A of b)A[0]==="-"?n.skips.push(A.slice(1)):n.names.push(A)}function e(g,b){let A=0,S=0,O=-1,y=0;for(;A<g.length;)if(S<b.length&&(b[S]===g[A]||b[S]==="*"))b[S]==="*"?(O=S,y=A,S++):(A++,S++);else if(O!==-1)S=O+1,y++,A=y;else return!1;for(;S<b.length&&b[S]==="*";)S++;return S===b.length}function i(){let g=[...n.names,...n.skips.map(b=>"-"+b)].join(",");return n.enable(""),g}function l(g){for(let b of n.skips)if(e(g,b))return!1;for(let b of n.names)if(e(g,b))return!0;return!1}function d(g){return g instanceof Error?g.stack||g.message:g}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}h.exports=s}),Mt=Ae((f,h)=>{ye(),be(),me(),f.formatArgs=a,f.save=c,f.load=n,f.useColors=s,f.storage=r(),f.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+h.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;e.splice(1,0,i,"color: inherit");let l=0,d=0;e[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(l++,p==="%c"&&(d=l))}),e.splice(d,0,i)}f.log=console.debug||console.log||(()=>{});function c(e){try{e?f.storage.setItem("debug",e):f.storage.removeItem("debug")}catch{}}function n(){let e;try{e=f.storage.getItem("debug")||f.storage.getItem("DEBUG")}catch{}return!e&&typeof Ye<"u"&&"env"in Ye&&(e=Ye.env.DEBUG),e}function r(){try{return localStorage}catch{}}h.exports=Cu()(f);var{formatters:t}=h.exports;t.j=function(e){try{return JSON.stringify(e)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}),ju=Ae((f,h)=>{ye(),be(),me();var s=Pu(),{EventEmitter:a}=(tr(),Ge(Kt)),c=ku(),n=pa(),r=Mt()("mqtt-packet:parser"),t=class vi extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof vi?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new vi().parser(i)}_resetState(){r("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=s(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),r("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,r("parse: state complete. _stateCounter is now: %d",this._stateCounter),r("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return r("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let i=this._list.readUInt8(0),l=i>>n.CMD_SHIFT;this.packet.cmd=n.types[l];let d=i&15,p=n.requiredHeaderFlags[l];return p!=null&&d!==p?this._emitError(new Error(n.requiredHeaderFlagsErrors[l])):(this.packet.retain=(i&n.RETAIN_MASK)!==0,this.packet.qos=i>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(i&n.DUP_MASK)!==0,r("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),r("_parseLength %d",i.value),!!i}_parsePayload(){r("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return r("_parsePayload complete result: %s",i),i}_parseConnect(){r("_parseConnect");let i,l,d,p,g={},b=this.packet,A=this._parseString();if(A===null)return this._emitError(new Error("Cannot parse protocolId"));if(A!=="MQTT"&&A!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=A,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let S=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),O=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(g.will)b.will={},b.will.retain=S,b.will.qos=O;else{if(S)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(O)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.properties=v)}let y=this._parseString();if(y===null)return this._emitError(new Error("Packet too short"));if(b.clientId=y,r("_parseConnect: packet.clientId: %s",b.clientId),g.will){if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.will.properties=v)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=i,r("_parseConnect: packet.will.topic: %s",b.will.topic),l=this._parseBuffer(),l===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=l,r("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(g.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));b.username=p,r("_parseConnect: packet.username: %s",b.username)}if(g.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));b.password=d}return this.settings=b,r("_parseConnect: complete"),b}_parseConnack(){r("_parseConnack");let i=this.packet;if(this._list.length<1)return null;let l=this._list.readUInt8(this._pos++);if(l>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(i.sessionPresent=!!(l&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(i.properties=d)}r("_parseConnack: complete")}_parsePublish(){r("_parsePublish");let i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(i.properties=l)}i.payload=this._list.slice(this._pos,i.length),r("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){r("_parseSubscribe");let i=this.packet,l,d,p,g,b,A,S;if(i.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let O=this._parseProperties();Object.getOwnPropertyNames(O).length&&(i.properties=O)}if(i.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<i.length;){if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=i.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&n.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(A=(d>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(d>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=d>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));S={topic:l,qos:p},this.settings.protocolVersion===5?(S.nl=A,S.rap=b,S.rh=g):this.settings.bridgeMode&&(S.rh=0,S.rap=!0,S.nl=!0),r("_parseSubscribe: push subscription `%s` to subscription",S),i.subscriptions.push(S)}}}_parseSuback(){r("_parseSuback");let i=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(i.properties=l)}if(i.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[l])return this._emitError(new Error("Invalid suback code"))}else if(l>2&&l!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){r("_parseUnsubscribe");let i=this.packet;if(i.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(i.properties=l)}if(i.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<i.length;){let l=this._parseString();if(l===null)return this._emitError(new Error("Cannot parse topic"));r("_parseUnsubscribe: push topic `%s` to unsubscriptions",l),i.unsubscriptions.push(l)}}}_parseUnsuback(){r("_parseUnsuback");let i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&i.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(i.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let l=this._parseProperties();for(Object.getOwnPropertyNames(l).length&&(i.properties=l),i.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){r("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(i.length>2){switch(i.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}r("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)}else i.reasonCode=0;if(i.length>3){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(i.properties=l)}}return!0}_parseDisconnect(){let i=this.packet;if(r("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(i.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[i.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):i.reasonCode=0;let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(i.properties=l)}return r("_parseDisconnect result: true"),!0}_parseAuth(){r("_parseAuth");let i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(i.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[i.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let l=this._parseProperties();return Object.getOwnPropertyNames(l).length&&(i.properties=l),r("_parseAuth: result: true"),!0}_parseMessageId(){let i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(r("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){let l=this._parseNum(),d=l+this._pos;if(l===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=l,r("_parseString: result: %s",p),p}_parseStringPair(){return r("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let i=this._parseNum(),l=i+this._pos;if(i===-1||l>this._list.length||l>this.packet.length)return null;let d=this._list.slice(this._pos,l);return this._pos+=i,r("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let i=this._list.readUInt16BE(this._pos);return this._pos+=2,r("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let i=this._list.readUInt32BE(this._pos);return this._pos+=4,r("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){r("_parseVarByteNum");let l=4,d=0,p=1,g=0,b=!1,A,S=this._pos?this._pos:0;for(;d<l&&S+d<this._list.length;){if(A=this._list.readUInt8(S+d++),g+=p*(A&n.VARBYTEINT_MASK),p*=128,(A&n.VARBYTEINT_FIN_MASK)===0){b=!0;break}if(this._list.length<=d)break}return!b&&d===l&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),S&&(this._pos+=d),b?i?b={bytes:d,value:g}:b=g:b=!1,r("_parseVarByteNum: result: %o",b),b}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),r("_parseByte: result: %o",i),i}_parseByType(i){switch(r("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){r("_parseProperties");let i=this._parseVarByteNum(),l=this._pos+i,d={};for(;this._pos<l;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let g=n.propertiesCodes[p];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){d[g]||(d[g]=Object.create(null));let b=this._parseByType(n.propertiesTypes[g]);if(d[g][b.name])if(Array.isArray(d[g][b.name]))d[g][b.name].push(b.value);else{let A=d[g][b.name];d[g][b.name]=[A],d[g][b.name].push(b.value)}else d[g][b.name]=b.value;continue}d[g]?Array.isArray(d[g])?d[g].push(this._parseByType(n.propertiesTypes[g])):(d[g]=[d[g]],d[g].push(this._parseByType(n.propertiesTypes[g]))):d[g]=this._parseByType(n.propertiesTypes[g])}return d}_newPacket(){return r("_newPacket"),this.packet&&(this._list.consume(this.packet.length),r("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),r("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(i){r("_emitError",i),this.error=i,this.emit("error",i)}};h.exports=t}),Ru=Ae((f,h)=>{ye(),be(),me();var{Buffer:s}=(at(),Ge(st)),a=65536,c={},n=s.isBuffer(s.from([1,2]).subarray(0,1));function r(l){let d=s.allocUnsafe(2);return d.writeUInt8(l>>8,0),d.writeUInt8(l&255,1),d}function t(){for(let l=0;l<a;l++)c[l]=r(l)}function e(l){let d=0,p=0,g=s.allocUnsafe(4);do d=l%128|0,l=l/128|0,l>0&&(d=d|128),g.writeUInt8(d,p++);while(l>0&&p<4);return l>0&&(p=0),n?g.subarray(0,p):g.slice(0,p)}function i(l){let d=s.allocUnsafe(4);return d.writeUInt32BE(l,0),d}h.exports={cache:c,generateCache:t,generateNumber:r,genBufVariableByteInt:e,generate4ByteBuffer:i}}),Mu=Ae((f,h)=>{ye(),be(),me(),typeof Ye>"u"||!Ye.version||Ye.version.indexOf("v0.")===0||Ye.version.indexOf("v1.")===0&&Ye.version.indexOf("v1.8.")!==0?h.exports={nextTick:s}:h.exports=Ye;function s(a,c,n,r){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var t=arguments.length,e,i;switch(t){case 0:case 1:return Ye.nextTick(a);case 2:return Ye.nextTick(function(){a.call(null,c)});case 3:return Ye.nextTick(function(){a.call(null,c,n)});case 4:return Ye.nextTick(function(){a.call(null,c,n,r)});default:for(e=new Array(t-1),i=0;i<e.length;)e[i++]=arguments[i];return Ye.nextTick(function(){a.apply(null,e)})}}}),da=Ae((f,h)=>{ye(),be(),me();var s=pa(),{Buffer:a}=(at(),Ge(st)),c=a.allocUnsafe(0),n=a.from([0]),r=Ru(),t=Mu().nextTick,e=Mt()("mqtt-packet:writeToStream"),i=r.cache,l=r.generateNumber,d=r.generateCache,p=r.genBufVariableByteInt,g=r.generate4ByteBuffer,b=ie,A=!0;function S(J,W,se){switch(e("generate called"),W.cork&&(W.cork(),t(O,W)),A&&(A=!1,d()),e("generate: packet.cmd: %s",J.cmd),J.cmd){case"connect":return y(J,W);case"connack":return v(J,W,se);case"publish":return E(J,W,se);case"puback":case"pubrec":case"pubrel":case"pubcomp":return _(J,W,se);case"subscribe":return j(J,W,se);case"suback":return w(J,W,se);case"unsubscribe":return P(J,W,se);case"unsuback":return T(J,W,se);case"pingreq":case"pingresp":return M(J,W);case"disconnect":return U(J,W,se);case"auth":return k(J,W,se);default:return W.destroy(new Error("Unknown command")),!1}}Object.defineProperty(S,"cacheNumbers",{get(){return b===ie},set(J){J?((!i||Object.keys(i).length===0)&&(A=!0),b=ie):(A=!1,b=ne)}});function O(J){J.uncork()}function y(J,W,se){let ee=J||{},X=ee.protocolId||"MQTT",re=ee.protocolVersion||4,we=ee.will,de=ee.clean,L=ee.keepalive||0,G=ee.clientId||"",ae=ee.username,ve=ee.password,_e=ee.properties;de===void 0&&(de=!0);let xe=0;if(typeof X!="string"&&!a.isBuffer(X))return W.destroy(new Error("Invalid protocolId")),!1;if(xe+=X.length+2,re!==3&&re!==4&&re!==5)return W.destroy(new Error("Invalid protocol version")),!1;if(xe+=1,(typeof G=="string"||a.isBuffer(G))&&(G||re>=4)&&(G||de))xe+=a.byteLength(G)+2;else{if(re<4)return W.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(de*1===0)return W.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof L!="number"||L<0||L>65535||L%1!==0)return W.destroy(new Error("Invalid keepalive")),!1;xe+=2,xe+=1;let Y,Ee;if(re===5){if(Y=le(W,_e),!Y)return!1;xe+=Y.length}if(we){if(typeof we!="object")return W.destroy(new Error("Invalid will")),!1;if(!we.topic||typeof we.topic!="string")return W.destroy(new Error("Invalid will topic")),!1;if(xe+=a.byteLength(we.topic)+2,xe+=2,we.payload)if(we.payload.length>=0)typeof we.payload=="string"?xe+=a.byteLength(we.payload):xe+=we.payload.length;else return W.destroy(new Error("Invalid will payload")),!1;if(Ee={},re===5){if(Ee=le(W,we.properties),!Ee)return!1;xe+=Ee.length}}let Pe=!1;if(ae!=null)if(Oe(ae))Pe=!0,xe+=a.byteLength(ae)+2;else return W.destroy(new Error("Invalid username")),!1;if(ve!=null){if(!Pe)return W.destroy(new Error("Username is required to use password")),!1;if(Oe(ve))xe+=ue(ve)+2;else return W.destroy(new Error("Invalid password")),!1}W.write(s.CONNECT_HEADER),Q(W,xe),z(W,X),ee.bridgeMode&&(re+=128),W.write(re===131?s.VERSION131:re===132?s.VERSION132:re===4?s.VERSION4:re===5?s.VERSION5:s.VERSION3);let fe=0;return fe|=ae!=null?s.USERNAME_MASK:0,fe|=ve!=null?s.PASSWORD_MASK:0,fe|=we&&we.retain?s.WILL_RETAIN_MASK:0,fe|=we&&we.qos?we.qos<<s.WILL_QOS_SHIFT:0,fe|=we?s.WILL_FLAG_MASK:0,fe|=de?s.CLEAN_SESSION_MASK:0,W.write(a.from([fe])),b(W,L),re===5&&Y.write(),z(W,G),we&&(re===5&&Ee.write(),V(W,we.topic),z(W,we.payload)),ae!=null&&z(W,ae),ve!=null&&z(W,ve),!0}function v(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=ee===5?X.reasonCode:X.returnCode,we=X.properties,de=2;if(typeof re!="number")return W.destroy(new Error("Invalid return code")),!1;let L=null;if(ee===5){if(L=le(W,we),!L)return!1;de+=L.length}return W.write(s.CONNACK_HEADER),Q(W,de),W.write(X.sessionPresent?s.SESSIONPRESENT_HEADER:n),W.write(a.from([re])),L?.write(),!0}function E(J,W,se){e("publish: packet: %o",J);let ee=se?se.protocolVersion:4,X=J||{},re=X.qos||0,we=X.retain?s.RETAIN_MASK:0,de=X.topic,L=X.payload||c,G=X.messageId,ae=X.properties,ve=0;if(typeof de=="string")ve+=a.byteLength(de)+2;else if(a.isBuffer(de))ve+=de.length+2;else return W.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(L)?ve+=L.length:ve+=a.byteLength(L),re&&typeof G!="number")return W.destroy(new Error("Invalid messageId")),!1;re&&(ve+=2);let _e=null;if(ee===5){if(_e=le(W,ae),!_e)return!1;ve+=_e.length}return W.write(s.PUBLISH_HEADER[re][X.dup?1:0][we?1:0]),Q(W,ve),b(W,ue(de)),W.write(de),re>0&&b(W,G),_e?.write(),e("publish: payload: %o",L),W.write(L)}function _(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.cmd||"puback",we=X.messageId,de=X.dup&&re==="pubrel"?s.DUP_MASK:0,L=0,G=X.reasonCode,ae=X.properties,ve=ee===5?3:2;if(re==="pubrel"&&(L=1),typeof we!="number")return W.destroy(new Error("Invalid messageId")),!1;let _e=null;if(ee===5&&typeof ae=="object"){if(_e=B(W,ae,se,ve),!_e)return!1;ve+=_e.length}return W.write(s.ACKS[re][L][de][0]),ve===3&&(ve+=G!==0?1:-1),Q(W,ve),b(W,we),ee===5&&ve!==2&&W.write(a.from([G])),_e!==null?_e.write():ve===4&&W.write(a.from([0])),!0}function j(J,W,se){e("subscribe: packet: ");let ee=se?se.protocolVersion:4,X=J||{},re=X.dup?s.DUP_MASK:0,we=X.messageId,de=X.subscriptions,L=X.properties,G=0;if(typeof we!="number")return W.destroy(new Error("Invalid messageId")),!1;G+=2;let ae=null;if(ee===5){if(ae=le(W,L),!ae)return!1;G+=ae.length}if(typeof de=="object"&&de.length)for(let _e=0;_e<de.length;_e+=1){let xe=de[_e].topic,Y=de[_e].qos;if(typeof xe!="string")return W.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof Y!="number")return W.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ee===5){if(typeof(de[_e].nl||!1)!="boolean")return W.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(de[_e].rap||!1)!="boolean")return W.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let Ee=de[_e].rh||0;if(typeof Ee!="number"||Ee>2)return W.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}G+=a.byteLength(xe)+2+1}else return W.destroy(new Error("Invalid subscriptions")),!1;e("subscribe: writing to stream: %o",s.SUBSCRIBE_HEADER),W.write(s.SUBSCRIBE_HEADER[1][re?1:0][0]),Q(W,G),b(W,we),ae!==null&&ae.write();let ve=!0;for(let _e of de){let xe=_e.topic,Y=_e.qos,Ee=+_e.nl,Pe=+_e.rap,fe=_e.rh,Me;V(W,xe),Me=s.SUBSCRIBE_OPTIONS_QOS[Y],ee===5&&(Me|=Ee?s.SUBSCRIBE_OPTIONS_NL:0,Me|=Pe?s.SUBSCRIBE_OPTIONS_RAP:0,Me|=fe?s.SUBSCRIBE_OPTIONS_RH[fe]:0),ve=W.write(a.from([Me]))}return ve}function w(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.messageId,we=X.granted,de=X.properties,L=0;if(typeof re!="number")return W.destroy(new Error("Invalid messageId")),!1;if(L+=2,typeof we=="object"&&we.length)for(let ae=0;ae<we.length;ae+=1){if(typeof we[ae]!="number")return W.destroy(new Error("Invalid qos vector")),!1;L+=1}else return W.destroy(new Error("Invalid qos vector")),!1;let G=null;if(ee===5){if(G=B(W,de,se,L),!G)return!1;L+=G.length}return W.write(s.SUBACK_HEADER),Q(W,L),b(W,re),G!==null&&G.write(),W.write(a.from(we))}function P(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.messageId,we=X.dup?s.DUP_MASK:0,de=X.unsubscriptions,L=X.properties,G=0;if(typeof re!="number")return W.destroy(new Error("Invalid messageId")),!1;if(G+=2,typeof de=="object"&&de.length)for(let _e=0;_e<de.length;_e+=1){if(typeof de[_e]!="string")return W.destroy(new Error("Invalid unsubscriptions")),!1;G+=a.byteLength(de[_e])+2}else return W.destroy(new Error("Invalid unsubscriptions")),!1;let ae=null;if(ee===5){if(ae=le(W,L),!ae)return!1;G+=ae.length}W.write(s.UNSUBSCRIBE_HEADER[1][we?1:0][0]),Q(W,G),b(W,re),ae!==null&&ae.write();let ve=!0;for(let _e=0;_e<de.length;_e++)ve=V(W,de[_e]);return ve}function T(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.messageId,we=X.dup?s.DUP_MASK:0,de=X.granted,L=X.properties,G=X.cmd,ae=0,ve=2;if(typeof re!="number")return W.destroy(new Error("Invalid messageId")),!1;if(ee===5)if(typeof de=="object"&&de.length)for(let xe=0;xe<de.length;xe+=1){if(typeof de[xe]!="number")return W.destroy(new Error("Invalid qos vector")),!1;ve+=1}else return W.destroy(new Error("Invalid qos vector")),!1;let _e=null;if(ee===5){if(_e=B(W,L,se,ve),!_e)return!1;ve+=_e.length}return W.write(s.ACKS[G][ae][we][0]),Q(W,ve),b(W,re),_e!==null&&_e.write(),ee===5&&W.write(a.from(de)),!0}function M(J,W,se){return W.write(s.EMPTY[J.cmd])}function U(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.reasonCode,we=X.properties,de=ee===5?1:0,L=null;if(ee===5){if(L=B(W,we,se,de),!L)return!1;de+=L.length}return W.write(a.from([s.codes.disconnect<<4])),Q(W,de),ee===5&&W.write(a.from([re])),L!==null&&L.write(),!0}function k(J,W,se){let ee=se?se.protocolVersion:4,X=J||{},re=X.reasonCode,we=X.properties,de=ee===5?1:0;ee!==5&&W.destroy(new Error("Invalid mqtt version for auth packet"));let L=B(W,we,se,de);return L?(de+=L.length,W.write(a.from([s.codes.auth<<4])),Q(W,de),W.write(a.from([re])),L!==null&&L.write(),!0):!1}var K={};function Q(J,W){if(W>s.VARBYTEINT_MAX)return J.destroy(new Error(`Invalid variable byte integer: ${W}`)),!1;let se=K[W];return se||(se=p(W),W<16384&&(K[W]=se)),e("writeVarByteInt: writing to stream: %o",se),J.write(se)}function V(J,W){let se=a.byteLength(W);return b(J,se),e("writeString: %s",W),J.write(W,"utf8")}function he(J,W,se){V(J,W),V(J,se)}function ie(J,W){return e("writeNumberCached: number: %d",W),e("writeNumberCached: %o",i[W]),J.write(i[W])}function ne(J,W){let se=l(W);return e("writeNumberGenerated: %o",se),J.write(se)}function ce(J,W){let se=g(W);return e("write4ByteNumber: %o",se),J.write(se)}function z(J,W){typeof W=="string"?V(J,W):W?(b(J,W.length),J.write(W)):b(J,0)}function le(J,W){if(typeof W!="object"||W.length!=null)return{length:1,write(){Z(J,{},0)}};let se=0;function ee(X,re){let we=s.propertiesTypes[X],de=0;switch(we){case"byte":{if(typeof re!="boolean")return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=2;break}case"int8":{if(typeof re!="number"||re<0||re>255)return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=2;break}case"binary":{if(re&&re===null)return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=1+a.byteLength(re)+2;break}case"int16":{if(typeof re!="number"||re<0||re>65535)return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=3;break}case"int32":{if(typeof re!="number"||re<0||re>4294967295)return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=5;break}case"var":{if(typeof re!="number"||re<0||re>268435455)return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=1+a.byteLength(p(re));break}case"string":{if(typeof re!="string")return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=3+a.byteLength(re.toString());break}case"pair":{if(typeof re!="object")return J.destroy(new Error(`Invalid ${X}: ${re}`)),!1;de+=Object.getOwnPropertyNames(re).reduce((L,G)=>{let ae=re[G];return Array.isArray(ae)?L+=ae.reduce((ve,_e)=>(ve+=3+a.byteLength(G.toString())+2+a.byteLength(_e.toString()),ve),0):L+=3+a.byteLength(G.toString())+2+a.byteLength(re[G].toString()),L},0);break}default:return J.destroy(new Error(`Invalid property ${X}: ${re}`)),!1}return de}if(W)for(let X in W){let re=0,we=0,de=W[X];if(de!==void 0){if(Array.isArray(de))for(let L=0;L<de.length;L++){if(we=ee(X,de[L]),!we)return!1;re+=we}else{if(we=ee(X,de),!we)return!1;re=we}if(!re)return!1;se+=re}}return{length:a.byteLength(p(se))+se,write(){Z(J,W,se)}}}function B(J,W,se,ee){let X=["reasonString","userProperties"],re=se&&se.properties&&se.properties.maximumPacketSize?se.properties.maximumPacketSize:0,we=le(J,W);if(re)for(;ee+we.length>re;){let de=X.shift();if(de&&W[de])delete W[de],we=le(J,W);else return!1}return we}function te(J,W,se){switch(s.propertiesTypes[W]){case"byte":{J.write(a.from([s.properties[W]])),J.write(a.from([+se]));break}case"int8":{J.write(a.from([s.properties[W]])),J.write(a.from([se]));break}case"binary":{J.write(a.from([s.properties[W]])),z(J,se);break}case"int16":{J.write(a.from([s.properties[W]])),b(J,se);break}case"int32":{J.write(a.from([s.properties[W]])),ce(J,se);break}case"var":{J.write(a.from([s.properties[W]])),Q(J,se);break}case"string":{J.write(a.from([s.properties[W]])),V(J,se);break}case"pair":{Object.getOwnPropertyNames(se).forEach(ee=>{let X=se[ee];Array.isArray(X)?X.forEach(re=>{J.write(a.from([s.properties[W]])),he(J,ee.toString(),re.toString())}):(J.write(a.from([s.properties[W]])),he(J,ee.toString(),X.toString()))});break}default:return J.destroy(new Error(`Invalid property ${W} value: ${se}`)),!1}}function Z(J,W,se){Q(J,se);for(let ee in W)if(Object.prototype.hasOwnProperty.call(W,ee)&&W[ee]!=null){let X=W[ee];if(Array.isArray(X))for(let re=0;re<X.length;re++)te(J,ee,X[re]);else te(J,ee,X)}}function ue(J){return J?J instanceof a?J.length:a.byteLength(J):0}function Oe(J){return typeof J=="string"||J instanceof a}h.exports=S}),Bu=Ae((f,h)=>{ye(),be(),me();var s=da(),{EventEmitter:a}=(tr(),Ge(Kt)),{Buffer:c}=(at(),Ge(st));function n(t,e){let i=new r;return s(t,i,e),i.concat()}var r=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0,e=new Array(this._array.length),i=this._array,l=0,d;for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?e[d]=i[d].length:e[d]=c.byteLength(i[d]),t+=e[d];let p=c.allocUnsafe(t);for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?(i[d].copy(p,l),l+=e[d]):(p.write(i[d],l),l+=e[d]);return p}destroy(t){t&&this.emit("error",t)}};h.exports=n}),Nu=Ae(f=>{ye(),be(),me(),f.parser=ju().parser,f.generate=Bu(),f.writeToStream=da()}),Uu=Ae((f,h)=>{ye(),be(),me(),h.exports=a;function s(n){return n instanceof Xr?Xr.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function a(n){if(n=n||{},n.circles)return c(n);let r=new Map;if(r.set(Date,d=>new Date(d)),r.set(Map,(d,p)=>new Map(e(Array.from(d),p))),r.set(Set,(d,p)=>new Set(e(Array.from(d),p))),n.constructorHandlers)for(let d of n.constructorHandlers)r.set(d[0],d[1]);let t=null;return n.proto?l:i;function e(d,p){let g=Object.keys(d),b=new Array(g.length);for(let A=0;A<g.length;A++){let S=g[A],O=d[S];typeof O!="object"||O===null?b[S]=O:O.constructor!==Object&&(t=r.get(O.constructor))?b[S]=t(O,p):ArrayBuffer.isView(O)?b[S]=s(O):b[S]=p(O)}return b}function i(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,i);if(d.constructor!==Object&&(t=r.get(d.constructor)))return t(d,i);let p={};for(let g in d){if(Object.hasOwnProperty.call(d,g)===!1)continue;let b=d[g];typeof b!="object"||b===null?p[g]=b:b.constructor!==Object&&(t=r.get(b.constructor))?p[g]=t(b,i):ArrayBuffer.isView(b)?p[g]=s(b):p[g]=i(b)}return p}function l(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,l);if(d.constructor!==Object&&(t=r.get(d.constructor)))return t(d,l);let p={};for(let g in d){let b=d[g];typeof b!="object"||b===null?p[g]=b:b.constructor!==Object&&(t=r.get(b.constructor))?p[g]=t(b,l):ArrayBuffer.isView(b)?p[g]=s(b):p[g]=l(b)}return p}}function c(n){let r=[],t=[],e=new Map;if(e.set(Date,g=>new Date(g)),e.set(Map,(g,b)=>new Map(l(Array.from(g),b))),e.set(Set,(g,b)=>new Set(l(Array.from(g),b))),n.constructorHandlers)for(let g of n.constructorHandlers)e.set(g[0],g[1]);let i=null;return n.proto?p:d;function l(g,b){let A=Object.keys(g),S=new Array(A.length);for(let O=0;O<A.length;O++){let y=A[O],v=g[y];if(typeof v!="object"||v===null)S[y]=v;else if(v.constructor!==Object&&(i=e.get(v.constructor)))S[y]=i(v,b);else if(ArrayBuffer.isView(v))S[y]=s(v);else{let E=r.indexOf(v);E!==-1?S[y]=t[E]:S[y]=b(v)}}return S}function d(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return l(g,d);if(g.constructor!==Object&&(i=e.get(g.constructor)))return i(g,d);let b={};r.push(g),t.push(b);for(let A in g){if(Object.hasOwnProperty.call(g,A)===!1)continue;let S=g[A];if(typeof S!="object"||S===null)b[A]=S;else if(S.constructor!==Object&&(i=e.get(S.constructor)))b[A]=i(S,d);else if(ArrayBuffer.isView(S))b[A]=s(S);else{let O=r.indexOf(S);O!==-1?b[A]=t[O]:b[A]=d(S)}}return r.pop(),t.pop(),b}function p(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return l(g,p);if(g.constructor!==Object&&(i=e.get(g.constructor)))return i(g,p);let b={};r.push(g),t.push(b);for(let A in g){let S=g[A];if(typeof S!="object"||S===null)b[A]=S;else if(S.constructor!==Object&&(i=e.get(S.constructor)))b[A]=i(S,p);else if(ArrayBuffer.isView(S))b[A]=s(S);else{let O=r.indexOf(S);O!==-1?b[A]=t[O]:b[A]=p(S)}}return r.pop(),t.pop(),b}}}),Lu=Ae((f,h)=>{ye(),be(),me(),h.exports=Uu()()}),Du=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.validateTopic=h,f.validateTopics=s;function h(a){let c=a.split("/");for(let n=0;n<c.length;n++)if(c[n]!=="+"){if(c[n]==="#")return n===c.length-1;if(c[n].indexOf("+")!==-1||c[n].indexOf("#")!==-1)return!1}return!0}function s(a){if(a.length===0)return"empty_topic_list";for(let c=0;c<a.length;c++)if(!h(a[c]))return a[c];return null}}),ga=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=nr(),s={objectMode:!0},a={clean:!0},c=class{options;_inflights;constructor(n){this.options=n||{},this.options={...a,...n},this._inflights=new Map}put(n,r){return this._inflights.set(n.messageId,n),r&&r(),this}createStream(){let n=new h.Readable(s),r=[],t=!1,e=0;return this._inflights.forEach((i,l)=>{r.push(i)}),n._read=()=>{!t&&e<r.length?n.push(r[e++]):n.push(null)},n.destroy=i=>{if(!t)return t=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,r){let t=this._inflights.get(n.messageId);return t?(this._inflights.delete(n.messageId),r(null,t)):r&&r(new Error("missing packet")),this}get(n,r){let t=this._inflights.get(n.messageId);return t?r(null,t):r&&r(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};f.default=c}),Wu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=[0,16,128,131,135,144,145,151,153],s=(a,c,n)=>{a.log("handlePublish: packet %o",c),n=typeof n<"u"?n:a.noop;let r=c.topic.toString(),t=c.payload,{qos:e}=c,{messageId:i}=c,{options:l}=a;if(a.options.protocolVersion===5){let d;if(c.properties&&(d=c.properties.topicAlias),typeof d<"u")if(r.length===0)if(d>0&&d<=65535){let p=a.topicAliasRecv.getTopicByAlias(d);if(p)r=p,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",r,d);else{a.log("handlePublish :: unregistered topic alias. alias: %d",d),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(r,d))a.log("handlePublish :: registered topic: %s - alias: %d",r,d);else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",e),e){case 2:{l.customHandleAcks(r,t,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return a.emit("error",d);if(h.indexOf(p)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));p?a._sendPacket({cmd:"pubrec",messageId:i,reasonCode:p},n):a.incomingStore.put(c,()=>{a._sendPacket({cmd:"pubrec",messageId:i},n)})});break}case 1:{l.customHandleAcks(r,t,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return a.emit("error",d);if(h.indexOf(p)===-1)return a.emit("error",new Error("Wrong reason code for puback"));p||a.emit("message",r,t,c),a.handleMessage(c,g=>{if(g)return n&&n(g);a._sendPacket({cmd:"puback",messageId:i,reasonCode:p},n)})});break}case 0:a.emit("message",r,t,c),a.handleMessage(c,n);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};f.default=s}),Fu=Ae((f,h)=>{h.exports={version:"5.14.0"}}),cr=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.MQTTJS_VERSION=f.nextTick=f.ErrorWithSubackPacket=f.ErrorWithReasonCode=void 0,f.applyMixin=a;var h=class ya extends Error{code;constructor(n,r){super(n),this.code=r,Object.setPrototypeOf(this,ya.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};f.ErrorWithReasonCode=h;var s=class ma extends Error{packet;constructor(n,r){super(n),this.packet=r,Object.setPrototypeOf(this,ma.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};f.ErrorWithSubackPacket=s;function a(c,n,r=!1){let t=[n];for(;;){let e=t[0],i=Object.getPrototypeOf(e);if(i?.prototype)t.unshift(i);else break}for(let e of t)for(let i of Object.getOwnPropertyNames(e.prototype))(r||i!=="constructor")&&Object.defineProperty(c.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)??Object.create(null))}f.nextTick=typeof Ye?.nextTick=="function"?Ye.nextTick:c=>{setTimeout(c,0)},f.MQTTJS_VERSION=Fu().version}),nn=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.ReasonCodes=void 0;var h=cr();f.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var s=(a,c)=>{let{messageId:n}=c,r=c.cmd,t=null,e=a.outgoing[n]?a.outgoing[n].cb:null,i=null;if(!e){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",r),r){case"pubcomp":case"puback":{let l=c.reasonCode;l&&l>0&&l!==16?(i=new h.ErrorWithReasonCode(`Publish error: ${f.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(n,()=>{e(i,c)})):a._removeOutgoingAndStoreMessage(n,e);break}case"pubrec":{t={cmd:"pubrel",qos:2,messageId:n};let l=c.reasonCode;l&&l>0&&l!==16?(i=new h.ErrorWithReasonCode(`Publish error: ${f.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(n,()=>{e(i,c)})):a._sendPacket(t);break}case"suback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n);let l=c.granted;for(let d=0;d<l.length;d++){let p=l[d];if((p&128)!==0){i=new Error(`Subscribe error: ${f.ReasonCodes[p]}`),i.code=p;let g=a.messageIdToTopic[n];g&&g.forEach(b=>{delete a._resubscribeTopics[b]})}}delete a.messageIdToTopic[n],a._invokeStoreProcessingQueue(),e(i,c);break}case"unsuback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n),a._invokeStoreProcessingQueue(),e(null,c);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};f.default=s}),$u=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=cr(),s=nn(),a=(c,n)=>{let{options:r}=c,t=r.protocolVersion,e=t===5?n.reasonCode:n.returnCode;if(t!==5){let i=new h.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${t}`,e);c.emit("error",i);return}c.handleAuth(n,(i,l)=>{if(i){c.emit("error",i);return}if(e===24)c.reconnecting=!1,c._sendPacket(l);else{let d=new h.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[e]}`,e);c.emit("error",d)}})};f.default=a}),qu=Ae(f=>{var g,b,A,S,O,y,v,E,_,j,w,P,T,M,U,k,K,Q,V,he,ie,ne,ce,z,le,B,te,Z,wi,Oe,J,W,se,ba,X,re,we,Ft,$t,_i,Ir,Pr,Je,Si,gr,qt,Ei,fe;ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.LRUCache=void 0;var h=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,s=new Set,a=typeof Ye=="object"&&Ye?Ye:{},c=(Me,o,u,m)=>{typeof a.emitWarning=="function"?a.emitWarning(Me,o,u,m):console.error(`[${u}] ${o}: ${Me}`)},n=globalThis.AbortController,r=globalThis.AbortSignal;if(typeof n>"u"){r=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(u,m){this._onabort.push(m)}},n=class{constructor(){o()}signal=new r;abort(u){if(!this.signal.aborted){this.signal.reason=u,this.signal.aborted=!0;for(let m of this.signal._onabort)m(u);this.signal.onabort?.(u)}}};let Me=a.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",o=()=>{Me&&(Me=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",o))}}var t=Me=>!s.has(Me),e=Me=>Me&&Me===Math.floor(Me)&&Me>0&&isFinite(Me),i=Me=>e(Me)?Me<=Math.pow(2,8)?Uint8Array:Me<=Math.pow(2,16)?Uint16Array:Me<=Math.pow(2,32)?Uint32Array:Me<=Number.MAX_SAFE_INTEGER?l:null:null,l=class extends Array{constructor(Me){super(Me),this.fill(0)}},d=(g=class{heap;length;static create(o){let u=i(o);if(!u)return[];Le(g,b,!0);let m=new g(o,u);return Le(g,b,!1),m}constructor(o,u){if(!D(g,b))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new u(o),this.length=0}push(o){this.heap[this.length++]=o}pop(){return this.heap[--this.length]}},b=new WeakMap,Ke(g,b,!1),g),p=(fe=class{constructor(o){Ke(this,Z);Ke(this,O);Ke(this,y);Ke(this,v);Ke(this,E);Ke(this,_);Ke(this,j);ot(this,"ttl");ot(this,"ttlResolution");ot(this,"ttlAutopurge");ot(this,"updateAgeOnGet");ot(this,"updateAgeOnHas");ot(this,"allowStale");ot(this,"noDisposeOnSet");ot(this,"noUpdateTTL");ot(this,"maxEntrySize");ot(this,"sizeCalculation");ot(this,"noDeleteOnFetchRejection");ot(this,"noDeleteOnStaleGet");ot(this,"allowStaleOnFetchAbort");ot(this,"allowStaleOnFetchRejection");ot(this,"ignoreFetchAbort");Ke(this,w);Ke(this,P);Ke(this,T);Ke(this,M);Ke(this,U);Ke(this,k);Ke(this,K);Ke(this,Q);Ke(this,V);Ke(this,he);Ke(this,ie);Ke(this,ne);Ke(this,ce);Ke(this,z);Ke(this,le);Ke(this,B);Ke(this,te);Ke(this,Oe,()=>{});Ke(this,J,()=>{});Ke(this,W,()=>{});Ke(this,se,()=>!1);Ke(this,X,o=>{});Ke(this,re,(o,u,m)=>{});Ke(this,we,(o,u,m,C)=>{if(m||C)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});ot(this,A,"LRUCache");let{max:u=0,ttl:m,ttlResolution:C=1,ttlAutopurge:N,updateAgeOnGet:H,updateAgeOnHas:ge,allowStale:q,dispose:oe,disposeAfter:je,noDisposeOnSet:Te,noUpdateTTL:Ne,maxSize:Ue=0,maxEntrySize:Ze=0,sizeCalculation:De,fetchMethod:Fe,memoMethod:We,noDeleteOnFetchRejection:Ve,noDeleteOnStaleGet:Qe,allowStaleOnFetchRejection:ze,allowStaleOnFetchAbort:nt,ignoreFetchAbort:mt}=o;if(u!==0&&!e(u))throw new TypeError("max option must be a nonnegative integer");let ht=u?i(u):Array;if(!ht)throw new Error("invalid max value: "+u);if(Le(this,O,u),Le(this,y,Ue),this.maxEntrySize=Ze||D(this,y),this.sizeCalculation=De,this.sizeCalculation){if(!D(this,y)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(We!==void 0&&typeof We!="function")throw new TypeError("memoMethod must be a function if defined");if(Le(this,j,We),Fe!==void 0&&typeof Fe!="function")throw new TypeError("fetchMethod must be a function if specified");if(Le(this,_,Fe),Le(this,B,!!Fe),Le(this,T,new Map),Le(this,M,new Array(u).fill(void 0)),Le(this,U,new Array(u).fill(void 0)),Le(this,k,new ht(u)),Le(this,K,new ht(u)),Le(this,Q,0),Le(this,V,0),Le(this,he,d.create(u)),Le(this,w,0),Le(this,P,0),typeof oe=="function"&&Le(this,v,oe),typeof je=="function"?(Le(this,E,je),Le(this,ie,[])):(Le(this,E,void 0),Le(this,ie,void 0)),Le(this,le,!!D(this,v)),Le(this,te,!!D(this,E)),this.noDisposeOnSet=!!Te,this.noUpdateTTL=!!Ne,this.noDeleteOnFetchRejection=!!Ve,this.allowStaleOnFetchRejection=!!ze,this.allowStaleOnFetchAbort=!!nt,this.ignoreFetchAbort=!!mt,this.maxEntrySize!==0){if(D(this,y)!==0&&!e(D(this,y)))throw new TypeError("maxSize must be a positive integer if specified");if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Be(this,Z,ba).call(this)}if(this.allowStale=!!q,this.noDeleteOnStaleGet=!!Qe,this.updateAgeOnGet=!!H,this.updateAgeOnHas=!!ge,this.ttlResolution=e(C)||C===0?C:1,this.ttlAutopurge=!!N,this.ttl=m||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Be(this,Z,wi).call(this)}if(D(this,O)===0&&this.ttl===0&&D(this,y)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!D(this,O)&&!D(this,y)){let R="LRU_CACHE_UNBOUNDED";t(R)&&(s.add(R),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",R,fe))}}static unsafeExposeInternals(o){return{starts:D(o,ce),ttls:D(o,z),sizes:D(o,ne),keyMap:D(o,T),keyList:D(o,M),valList:D(o,U),next:D(o,k),prev:D(o,K),get head(){return D(o,Q)},get tail(){return D(o,V)},free:D(o,he),isBackgroundFetch:u=>{var m;return Be(m=o,Z,Je).call(m,u)},backgroundFetch:(u,m,C,N)=>{var H;return Be(H=o,Z,Pr).call(H,u,m,C,N)},moveToTail:u=>{var m;return Be(m=o,Z,gr).call(m,u)},indexes:u=>{var m;return Be(m=o,Z,Ft).call(m,u)},rindexes:u=>{var m;return Be(m=o,Z,$t).call(m,u)},isStale:u=>{var m;return D(m=o,se).call(m,u)}}}get max(){return D(this,O)}get maxSize(){return D(this,y)}get calculatedSize(){return D(this,P)}get size(){return D(this,w)}get fetchMethod(){return D(this,_)}get memoMethod(){return D(this,j)}get dispose(){return D(this,v)}get disposeAfter(){return D(this,E)}getRemainingTTL(o){return D(this,T).has(o)?1/0:0}*entries(){for(let o of Be(this,Z,Ft).call(this))D(this,U)[o]!==void 0&&D(this,M)[o]!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield[D(this,M)[o],D(this,U)[o]])}*rentries(){for(let o of Be(this,Z,$t).call(this))D(this,U)[o]!==void 0&&D(this,M)[o]!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield[D(this,M)[o],D(this,U)[o]])}*keys(){for(let o of Be(this,Z,Ft).call(this)){let u=D(this,M)[o];u!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield u)}}*rkeys(){for(let o of Be(this,Z,$t).call(this)){let u=D(this,M)[o];u!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield u)}}*values(){for(let o of Be(this,Z,Ft).call(this))D(this,U)[o]!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield D(this,U)[o])}*rvalues(){for(let o of Be(this,Z,$t).call(this))D(this,U)[o]!==void 0&&!Be(this,Z,Je).call(this,D(this,U)[o])&&(yield D(this,U)[o])}[(S=Symbol.iterator,A=Symbol.toStringTag,S)](){return this.entries()}find(o,u={}){for(let m of Be(this,Z,Ft).call(this)){let C=D(this,U)[m],N=Be(this,Z,Je).call(this,C)?C.__staleWhileFetching:C;if(N!==void 0&&o(N,D(this,M)[m],this))return this.get(D(this,M)[m],u)}}forEach(o,u=this){for(let m of Be(this,Z,Ft).call(this)){let C=D(this,U)[m],N=Be(this,Z,Je).call(this,C)?C.__staleWhileFetching:C;N!==void 0&&o.call(u,N,D(this,M)[m],this)}}rforEach(o,u=this){for(let m of Be(this,Z,$t).call(this)){let C=D(this,U)[m],N=Be(this,Z,Je).call(this,C)?C.__staleWhileFetching:C;N!==void 0&&o.call(u,N,D(this,M)[m],this)}}purgeStale(){let o=!1;for(let u of Be(this,Z,$t).call(this,{allowStale:!0}))D(this,se).call(this,u)&&(Be(this,Z,qt).call(this,D(this,M)[u],"expire"),o=!0);return o}info(o){let u=D(this,T).get(o);if(u===void 0)return;let m=D(this,U)[u],C=Be(this,Z,Je).call(this,m)?m.__staleWhileFetching:m;if(C===void 0)return;let N={value:C};if(D(this,z)&&D(this,ce)){let H=D(this,z)[u],ge=D(this,ce)[u];if(H&&ge){let q=H-(h.now()-ge);N.ttl=q,N.start=Date.now()}}return D(this,ne)&&(N.size=D(this,ne)[u]),N}dump(){let o=[];for(let u of Be(this,Z,Ft).call(this,{allowStale:!0})){let m=D(this,M)[u],C=D(this,U)[u],N=Be(this,Z,Je).call(this,C)?C.__staleWhileFetching:C;if(N===void 0||m===void 0)continue;let H={value:N};if(D(this,z)&&D(this,ce)){H.ttl=D(this,z)[u];let ge=h.now()-D(this,ce)[u];H.start=Math.floor(Date.now()-ge)}D(this,ne)&&(H.size=D(this,ne)[u]),o.unshift([m,H])}return o}load(o){this.clear();for(let[u,m]of o){if(m.start){let C=Date.now()-m.start;m.start=h.now()-C}this.set(u,m.value,m)}}set(o,u,m={}){var Ne,Ue,Ze;if(u===void 0)return this.delete(o),this;let{ttl:C=this.ttl,start:N,noDisposeOnSet:H=this.noDisposeOnSet,sizeCalculation:ge=this.sizeCalculation,status:q}=m,{noUpdateTTL:oe=this.noUpdateTTL}=m,je=D(this,we).call(this,o,u,m.size||0,ge);if(this.maxEntrySize&&je>this.maxEntrySize)return q&&(q.set="miss",q.maxEntrySizeExceeded=!0),Be(this,Z,qt).call(this,o,"set"),this;let Te=D(this,w)===0?void 0:D(this,T).get(o);if(Te===void 0)Te=D(this,w)===0?D(this,V):D(this,he).length!==0?D(this,he).pop():D(this,w)===D(this,O)?Be(this,Z,Ir).call(this,!1):D(this,w),D(this,M)[Te]=o,D(this,U)[Te]=u,D(this,T).set(o,Te),D(this,k)[D(this,V)]=Te,D(this,K)[Te]=D(this,V),Le(this,V,Te),Sr(this,w)._++,D(this,re).call(this,Te,je,q),q&&(q.set="add"),oe=!1;else{Be(this,Z,gr).call(this,Te);let De=D(this,U)[Te];if(u!==De){if(D(this,B)&&Be(this,Z,Je).call(this,De)){De.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Fe}=De;Fe!==void 0&&!H&&(D(this,le)&&((Ne=D(this,v))==null||Ne.call(this,Fe,o,"set")),D(this,te)&&D(this,ie)?.push([Fe,o,"set"]))}else H||(D(this,le)&&((Ue=D(this,v))==null||Ue.call(this,De,o,"set")),D(this,te)&&D(this,ie)?.push([De,o,"set"]));if(D(this,X).call(this,Te),D(this,re).call(this,Te,je,q),D(this,U)[Te]=u,q){q.set="replace";let Fe=De&&Be(this,Z,Je).call(this,De)?De.__staleWhileFetching:De;Fe!==void 0&&(q.oldValue=Fe)}}else q&&(q.set="update")}if(C!==0&&!D(this,z)&&Be(this,Z,wi).call(this),D(this,z)&&(oe||D(this,W).call(this,Te,C,N),q&&D(this,J).call(this,q,Te)),!H&&D(this,te)&&D(this,ie)){let De=D(this,ie),Fe;for(;Fe=De?.shift();)(Ze=D(this,E))==null||Ze.call(this,...Fe)}return this}pop(){var o;try{for(;D(this,w);){let u=D(this,U)[D(this,Q)];if(Be(this,Z,Ir).call(this,!0),Be(this,Z,Je).call(this,u)){if(u.__staleWhileFetching)return u.__staleWhileFetching}else if(u!==void 0)return u}}finally{if(D(this,te)&&D(this,ie)){let u=D(this,ie),m;for(;m=u?.shift();)(o=D(this,E))==null||o.call(this,...m)}}}has(o,u={}){let{updateAgeOnHas:m=this.updateAgeOnHas,status:C}=u,N=D(this,T).get(o);if(N!==void 0){let H=D(this,U)[N];if(Be(this,Z,Je).call(this,H)&&H.__staleWhileFetching===void 0)return!1;if(D(this,se).call(this,N))C&&(C.has="stale",D(this,J).call(this,C,N));else return m&&D(this,Oe).call(this,N),C&&(C.has="hit",D(this,J).call(this,C,N)),!0}else C&&(C.has="miss");return!1}peek(o,u={}){let{allowStale:m=this.allowStale}=u,C=D(this,T).get(o);if(C===void 0||!m&&D(this,se).call(this,C))return;let N=D(this,U)[C];return Be(this,Z,Je).call(this,N)?N.__staleWhileFetching:N}async fetch(o,u={}){let{allowStale:m=this.allowStale,updateAgeOnGet:C=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,ttl:H=this.ttl,noDisposeOnSet:ge=this.noDisposeOnSet,size:q=0,sizeCalculation:oe=this.sizeCalculation,noUpdateTTL:je=this.noUpdateTTL,noDeleteOnFetchRejection:Te=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ne=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ue=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ze=this.allowStaleOnFetchAbort,context:De,forceRefresh:Fe=!1,status:We,signal:Ve}=u;if(!D(this,B))return We&&(We.fetch="get"),this.get(o,{allowStale:m,updateAgeOnGet:C,noDeleteOnStaleGet:N,status:We});let Qe={allowStale:m,updateAgeOnGet:C,noDeleteOnStaleGet:N,ttl:H,noDisposeOnSet:ge,size:q,sizeCalculation:oe,noUpdateTTL:je,noDeleteOnFetchRejection:Te,allowStaleOnFetchRejection:Ne,allowStaleOnFetchAbort:Ze,ignoreFetchAbort:Ue,status:We,signal:Ve},ze=D(this,T).get(o);if(ze===void 0){We&&(We.fetch="miss");let nt=Be(this,Z,Pr).call(this,o,ze,Qe,De);return nt.__returned=nt}else{let nt=D(this,U)[ze];if(Be(this,Z,Je).call(this,nt)){let F=m&&nt.__staleWhileFetching!==void 0;return We&&(We.fetch="inflight",F&&(We.returnedStale=!0)),F?nt.__staleWhileFetching:nt.__returned=nt}let mt=D(this,se).call(this,ze);if(!Fe&&!mt)return We&&(We.fetch="hit"),Be(this,Z,gr).call(this,ze),C&&D(this,Oe).call(this,ze),We&&D(this,J).call(this,We,ze),nt;let ht=Be(this,Z,Pr).call(this,o,ze,Qe,De),R=ht.__staleWhileFetching!==void 0&&m;return We&&(We.fetch=mt?"stale":"refresh",R&&mt&&(We.returnedStale=!0)),R?ht.__staleWhileFetching:ht.__returned=ht}}async forceFetch(o,u={}){let m=await this.fetch(o,u);if(m===void 0)throw new Error("fetch() returned undefined");return m}memo(o,u={}){let m=D(this,j);if(!m)throw new Error("no memoMethod provided to constructor");let{context:C,forceRefresh:N,...H}=u,ge=this.get(o,H);if(!N&&ge!==void 0)return ge;let q=m(o,ge,{options:H,context:C});return this.set(o,q,H),q}get(o,u={}){let{allowStale:m=this.allowStale,updateAgeOnGet:C=this.updateAgeOnGet,noDeleteOnStaleGet:N=this.noDeleteOnStaleGet,status:H}=u,ge=D(this,T).get(o);if(ge!==void 0){let q=D(this,U)[ge],oe=Be(this,Z,Je).call(this,q);return H&&D(this,J).call(this,H,ge),D(this,se).call(this,ge)?(H&&(H.get="stale"),oe?(H&&m&&q.__staleWhileFetching!==void 0&&(H.returnedStale=!0),m?q.__staleWhileFetching:void 0):(N||Be(this,Z,qt).call(this,o,"expire"),H&&m&&(H.returnedStale=!0),m?q:void 0)):(H&&(H.get="hit"),oe?q.__staleWhileFetching:(Be(this,Z,gr).call(this,ge),C&&D(this,Oe).call(this,ge),q))}else H&&(H.get="miss")}delete(o){return Be(this,Z,qt).call(this,o,"delete")}clear(){return Be(this,Z,Ei).call(this,"delete")}},O=new WeakMap,y=new WeakMap,v=new WeakMap,E=new WeakMap,_=new WeakMap,j=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,M=new WeakMap,U=new WeakMap,k=new WeakMap,K=new WeakMap,Q=new WeakMap,V=new WeakMap,he=new WeakMap,ie=new WeakMap,ne=new WeakMap,ce=new WeakMap,z=new WeakMap,le=new WeakMap,B=new WeakMap,te=new WeakMap,Z=new WeakSet,wi=function(){let o=new l(D(this,O)),u=new l(D(this,O));Le(this,z,o),Le(this,ce,u),Le(this,W,(N,H,ge=h.now())=>{if(u[N]=H!==0?ge:0,o[N]=H,H!==0&&this.ttlAutopurge){let q=setTimeout(()=>{D(this,se).call(this,N)&&Be(this,Z,qt).call(this,D(this,M)[N],"expire")},H+1);q.unref&&q.unref()}}),Le(this,Oe,N=>{u[N]=o[N]!==0?h.now():0}),Le(this,J,(N,H)=>{if(o[H]){let ge=o[H],q=u[H];if(!ge||!q)return;N.ttl=ge,N.start=q,N.now=m||C();let oe=N.now-q;N.remainingTTL=ge-oe}});let m=0,C=()=>{let N=h.now();if(this.ttlResolution>0){m=N;let H=setTimeout(()=>m=0,this.ttlResolution);H.unref&&H.unref()}return N};this.getRemainingTTL=N=>{let H=D(this,T).get(N);if(H===void 0)return 0;let ge=o[H],q=u[H];if(!ge||!q)return 1/0;let oe=(m||C())-q;return ge-oe},Le(this,se,N=>{let H=u[N],ge=o[N];return!!ge&&!!H&&(m||C())-H>ge})},Oe=new WeakMap,J=new WeakMap,W=new WeakMap,se=new WeakMap,ba=function(){let o=new l(D(this,O));Le(this,P,0),Le(this,ne,o),Le(this,X,u=>{Le(this,P,D(this,P)-o[u]),o[u]=0}),Le(this,we,(u,m,C,N)=>{if(Be(this,Z,Je).call(this,m))return 0;if(!e(C))if(N){if(typeof N!="function")throw new TypeError("sizeCalculation must be a function");if(C=N(m,u),!e(C))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return C}),Le(this,re,(u,m,C)=>{if(o[u]=m,D(this,y)){let N=D(this,y)-o[u];for(;D(this,P)>N;)Be(this,Z,Ir).call(this,!0)}Le(this,P,D(this,P)+o[u]),C&&(C.entrySize=m,C.totalCalculatedSize=D(this,P))})},X=new WeakMap,re=new WeakMap,we=new WeakMap,Ft=function*({allowStale:o=this.allowStale}={}){if(D(this,w))for(let u=D(this,V);!(!Be(this,Z,_i).call(this,u)||((o||!D(this,se).call(this,u))&&(yield u),u===D(this,Q)));)u=D(this,K)[u]},$t=function*({allowStale:o=this.allowStale}={}){if(D(this,w))for(let u=D(this,Q);!(!Be(this,Z,_i).call(this,u)||((o||!D(this,se).call(this,u))&&(yield u),u===D(this,V)));)u=D(this,k)[u]},_i=function(o){return o!==void 0&&D(this,T).get(D(this,M)[o])===o},Ir=function(o){var N;let u=D(this,Q),m=D(this,M)[u],C=D(this,U)[u];return D(this,B)&&Be(this,Z,Je).call(this,C)?C.__abortController.abort(new Error("evicted")):(D(this,le)||D(this,te))&&(D(this,le)&&((N=D(this,v))==null||N.call(this,C,m,"evict")),D(this,te)&&D(this,ie)?.push([C,m,"evict"])),D(this,X).call(this,u),o&&(D(this,M)[u]=void 0,D(this,U)[u]=void 0,D(this,he).push(u)),D(this,w)===1?(Le(this,Q,Le(this,V,0)),D(this,he).length=0):Le(this,Q,D(this,k)[u]),D(this,T).delete(m),Sr(this,w)._--,u},Pr=function(o,u,m,C){let N=u===void 0?void 0:D(this,U)[u];if(Be(this,Z,Je).call(this,N))return N;let H=new n,{signal:ge}=m;ge?.addEventListener("abort",()=>H.abort(ge.reason),{signal:H.signal});let q={signal:H.signal,options:m,context:C},oe=(De,Fe=!1)=>{let{aborted:We}=H.signal,Ve=m.ignoreFetchAbort&&De!==void 0;if(m.status&&(We&&!Fe?(m.status.fetchAborted=!0,m.status.fetchError=H.signal.reason,Ve&&(m.status.fetchAbortIgnored=!0)):m.status.fetchResolved=!0),We&&!Ve&&!Fe)return Te(H.signal.reason);let Qe=Ue;return D(this,U)[u]===Ue&&(De===void 0?Qe.__staleWhileFetching?D(this,U)[u]=Qe.__staleWhileFetching:Be(this,Z,qt).call(this,o,"fetch"):(m.status&&(m.status.fetchUpdated=!0),this.set(o,De,q.options))),De},je=De=>(m.status&&(m.status.fetchRejected=!0,m.status.fetchError=De),Te(De)),Te=De=>{let{aborted:Fe}=H.signal,We=Fe&&m.allowStaleOnFetchAbort,Ve=We||m.allowStaleOnFetchRejection,Qe=Ve||m.noDeleteOnFetchRejection,ze=Ue;if(D(this,U)[u]===Ue&&(!Qe||ze.__staleWhileFetching===void 0?Be(this,Z,qt).call(this,o,"fetch"):We||(D(this,U)[u]=ze.__staleWhileFetching)),Ve)return m.status&&ze.__staleWhileFetching!==void 0&&(m.status.returnedStale=!0),ze.__staleWhileFetching;if(ze.__returned===ze)throw De},Ne=(De,Fe)=>{var Ve;let We=(Ve=D(this,_))==null?void 0:Ve.call(this,o,N,q);We&&We instanceof Promise&&We.then(Qe=>De(Qe===void 0?void 0:Qe),Fe),H.signal.addEventListener("abort",()=>{(!m.ignoreFetchAbort||m.allowStaleOnFetchAbort)&&(De(void 0),m.allowStaleOnFetchAbort&&(De=Qe=>oe(Qe,!0)))})};m.status&&(m.status.fetchDispatched=!0);let Ue=new Promise(Ne).then(oe,je),Ze=Object.assign(Ue,{__abortController:H,__staleWhileFetching:N,__returned:void 0});return u===void 0?(this.set(o,Ze,{...q.options,status:void 0}),u=D(this,T).get(o)):D(this,U)[u]=Ze,Ze},Je=function(o){if(!D(this,B))return!1;let u=o;return!!u&&u instanceof Promise&&u.hasOwnProperty("__staleWhileFetching")&&u.__abortController instanceof n},Si=function(o,u){D(this,K)[u]=o,D(this,k)[o]=u},gr=function(o){o!==D(this,V)&&(o===D(this,Q)?Le(this,Q,D(this,k)[o]):Be(this,Z,Si).call(this,D(this,K)[o],D(this,k)[o]),Be(this,Z,Si).call(this,D(this,V),o),Le(this,V,o))},qt=function(o,u){var C,N;let m=!1;if(D(this,w)!==0){let H=D(this,T).get(o);if(H!==void 0)if(m=!0,D(this,w)===1)Be(this,Z,Ei).call(this,u);else{D(this,X).call(this,H);let ge=D(this,U)[H];if(Be(this,Z,Je).call(this,ge)?ge.__abortController.abort(new Error("deleted")):(D(this,le)||D(this,te))&&(D(this,le)&&((C=D(this,v))==null||C.call(this,ge,o,u)),D(this,te)&&D(this,ie)?.push([ge,o,u])),D(this,T).delete(o),D(this,M)[H]=void 0,D(this,U)[H]=void 0,H===D(this,V))Le(this,V,D(this,K)[H]);else if(H===D(this,Q))Le(this,Q,D(this,k)[H]);else{let q=D(this,K)[H];D(this,k)[q]=D(this,k)[H];let oe=D(this,k)[H];D(this,K)[oe]=D(this,K)[H]}Sr(this,w)._--,D(this,he).push(H)}}if(D(this,te)&&D(this,ie)?.length){let H=D(this,ie),ge;for(;ge=H?.shift();)(N=D(this,E))==null||N.call(this,...ge)}return m},Ei=function(o){var u,m;for(let C of Be(this,Z,$t).call(this,{allowStale:!0})){let N=D(this,U)[C];if(Be(this,Z,Je).call(this,N))N.__abortController.abort(new Error("deleted"));else{let H=D(this,M)[C];D(this,le)&&((u=D(this,v))==null||u.call(this,N,H,o)),D(this,te)&&D(this,ie)?.push([N,H,o])}}if(D(this,T).clear(),D(this,U).fill(void 0),D(this,M).fill(void 0),D(this,z)&&D(this,ce)&&(D(this,z).fill(0),D(this,ce).fill(0)),D(this,ne)&&D(this,ne).fill(0),Le(this,Q,0),Le(this,V,0),D(this,he).length=0,Le(this,P,0),Le(this,w,0),D(this,te)&&D(this,ie)){let C=D(this,ie),N;for(;N=C?.shift();)(m=D(this,E))==null||m.call(this,...N)}},fe);f.LRUCache=p}),Nt=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.ContainerIterator=f.Container=f.Base=void 0;var h=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};f.ContainerIterator=h;var s=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};f.Base=s;var a=class extends s{};f.Container=a}),Vu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Nt(),s=class extends h.Base{constructor(c=[]){super(),this.S=[];let n=this;c.forEach(function(r){n.push(r)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=s;f.default=a}),zu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Nt(),s=class extends h.Base{constructor(c=[]){super(),this.j=0,this.q=[];let n=this;c.forEach(function(r){n.push(r)})}clear(){this.q=[],this.i=this.j=0}push(c){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let r=this.i;for(let t=0;t<r;++t)this.q[t]=this.q[this.j+t];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},a=s;f.default=a}),Ku=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Nt(),s=class extends h.Base{constructor(c=[],n=function(t,e){return t>e?-1:t<e?1:0},r=!0){if(super(),this.v=n,Array.isArray(c))this.C=r?[...c]:c;else{this.C=[];let e=this;c.forEach(function(i){e.C.push(i)})}this.i=this.C.length;let t=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,t)}m(c){let n=this.C[c];for(;c>0;){let r=c-1>>1,t=this.C[r];if(this.v(t,n)<=0)break;this.C[c]=t,c=r}this.C[c]=n}k(c,n){let r=this.C[c];for(;c<n;){let t=c<<1|1,e=t+1,i=this.C[t];if(e<this.i&&this.v(i,this.C[e])>0&&(t=e,i=this.C[e]),this.v(i,r)>=0)break;this.C[c]=i,c=t}this.C[c]=r}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let n=this.C.indexOf(c);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(c){let n=this.C.indexOf(c);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},a=s;f.default=a}),bo=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Nt(),s=class extends h.Container{},a=s;f.default=a}),Ut=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.throwIteratorAccessError=h;function h(){throw new RangeError("Iterator access denied!")}}),va=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.RandomIterator=void 0;var h=Nt(),s=Ut(),a=class extends h.ContainerIterator{constructor(c,n){super(n),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,s.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,s.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,s.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,s.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};f.RandomIterator=a}),Hu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=a(bo()),s=va();function a(t){return t&&t.t?t:{default:t}}var c=class wa extends s.RandomIterator{constructor(e,i,l){super(e,l),this.container=i}copy(){return new wa(this.o,this.container,this.iteratorType)}},n=class extends h.default{constructor(t=[],e=!0){if(super(),Array.isArray(t))this.J=e?[...t]:t,this.i=t.length;else{this.J=[];let i=this;t.forEach(function(l){i.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;return this.J[t]}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;return this.J.splice(t,1),this.i-=1,this.i}eraseElementByValue(t){let e=0;for(let i=0;i<this.i;++i)this.J[i]!==t&&(this.J[e++]=this.J[i]);return this.i=this.J.length=e,this.i}eraseElementByIterator(t){let e=t.o;return t=t.next(),this.eraseElementByPos(e),t}pushBack(t){return this.J.push(t),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(t,e){if(t<0||t>this.i-1)throw new RangeError;this.J[t]=e}insert(t,e,i=1){if(t<0||t>this.i)throw new RangeError;return this.J.splice(t,0,...new Array(i).fill(e)),this.i+=i,this.i}find(t){for(let e=0;e<this.i;++e)if(this.J[e]===t)return new c(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let t=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[t++]=this.J[e]);return this.i=this.J.length=t,this.i}sort(t){this.J.sort(t)}forEach(t){for(let e=0;e<this.i;++e)t(this.J[e],e,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},r=n;f.default=r}),Gu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=c(bo()),s=Nt(),a=Ut();function c(e){return e&&e.t?e:{default:e}}var n=class _a extends s.ContainerIterator{constructor(i,l,d,p){super(p),this.o=i,this.h=l,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(i){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=i}copy(){return new _a(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let i=this;e.forEach(function(l){i.pushBack(l)})}V(e){let{L:i,B:l}=e;i.B=l,l.L=i,e===this.p&&(this.p=l),e===this._&&(this._=i),this.i-=1}G(e,i){let l=i.B,d={l:e,L:i,B:l};i.B=d,l.L=d,i===this.h&&(this.p=d),l===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}eraseElementByValue(e){let i=this.p;for(;i!==this.h;)i.l===e&&this.V(i),i=i.B;return this.i}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,a.throwIteratorAccessError)(),e=e.next(),this.V(i),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,i){if(e<0||e>this.i-1)throw new RangeError;let l=this.p;for(;e--;)l=l.B;l.l=i}insert(e,i,l=1){if(e<0||e>this.i)throw new RangeError;if(l<=0)return this.i;if(e===0)for(;l--;)this.pushFront(i);else if(e===this.i)for(;l--;)this.pushBack(i);else{let d=this.p;for(let g=1;g<e;++g)d=d.B;let p=d.B;for(this.i+=l;l--;)d.B={l:i,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(e){let i=this.p;for(;i!==this.h;){if(i.l===e)return new n(i,this.h,this);i=i.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,i=this._,l=0;for(;l<<1<this.i;){let d=e.l;e.l=i.l,i.l=d,e=e.B,i=i.L,l+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let i=e;for(;i.B!==this.h&&i.l===i.B.l;)i=i.B,this.i-=1;e.B=i.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let i=[];this.forEach(function(d){i.push(d)}),i.sort(e);let l=this.p;i.forEach(function(d){l.l=d,l=l.B})}merge(e){let i=this;if(this.i===0)e.forEach(function(l){i.pushBack(l)});else{let l=this.p;e.forEach(function(d){for(;l!==i.h&&l.l<=d;)l=l.B;i.G(d,l.L)})}return this.i}forEach(e){let i=this.p,l=0;for(;i!==this.h;)e(i.l,l++,this),i=i.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}},t=r;f.default=t}),Qu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=a(bo()),s=va();function a(t){return t&&t.t?t:{default:t}}var c=class Sa extends s.RandomIterator{constructor(e,i,l){super(e,l),this.container=i}copy(){return new Sa(this.o,this.container,this.iteratorType)}},n=class extends h.default{constructor(t=[],e=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size;if(typeof t.size=="function")return t.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=e,this.P=Math.max(Math.ceil(i/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let l=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(l>>1),this.D=this.N=this.F-i%this.F>>1;let d=this;t.forEach(function(p){d.pushBack(p)})}T(){let t=[],e=Math.max(this.P>>1,1);for(let i=0;i<e;++i)t[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)t[t.length]=this.A[i];for(let i=0;i<this.R;++i)t[t.length]=this.A[i];t[t.length]=[...this.A[this.R]],this.j=e,this.R=t.length-1;for(let i=0;i<e;++i)t[t.length]=new Array(this.F);this.A=t,this.P=t.length}O(t){let e=this.D+t+1,i=e%this.F,l=i-1,d=this.j+(e-i)/this.F;return i===0&&(d-=1),d%=this.P,l<0&&(l+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:l}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(t){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=t,this.i}popBack(){if(this.i===0)return;let t=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,t}pushFront(t){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=t,this.i}popFront(){if(this.i===0)return;let t=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,t}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(t);return this.A[e][i]}setElementByPos(t,e){if(t<0||t>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:l}=this.O(t);this.A[i][l]=e}insert(t,e,i=1){if(t<0||t>this.i)throw new RangeError;if(t===0)for(;i--;)this.pushFront(e);else if(t===this.i)for(;i--;)this.pushBack(e);else{let l=[];for(let d=t;d<this.i;++d)l.push(this.getElementByPos(d));this.cut(t-1);for(let d=0;d<i;++d)this.pushBack(e);for(let d=0;d<l.length;++d)this.pushBack(l[d])}return this.i}cut(t){if(t<0)return this.clear(),0;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(t);return this.R=e,this.N=i,this.i=t+1,this.i}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;if(t===0)this.popFront();else if(t===this.i-1)this.popBack();else{let e=[];for(let l=t+1;l<this.i;++l)e.push(this.getElementByPos(l));this.cut(t),this.popBack();let i=this;e.forEach(function(l){i.pushBack(l)})}return this.i}eraseElementByValue(t){if(this.i===0)return 0;let e=[];for(let l=0;l<this.i;++l){let d=this.getElementByPos(l);d!==t&&e.push(d)}let i=e.length;for(let l=0;l<i;++l)this.setElementByPos(l,e[l]);return this.cut(i-1)}eraseElementByIterator(t){let e=t.o;return this.eraseElementByPos(e),t=t.next(),t}find(t){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===t)return new c(e,this);return this.end()}reverse(){let t=0,e=this.i-1;for(;t<e;){let i=this.getElementByPos(t);this.setElementByPos(t,this.getElementByPos(e)),this.setElementByPos(e,i),t+=1,e-=1}}unique(){if(this.i<=1)return this.i;let t=1,e=this.getElementByPos(0);for(let i=1;i<this.i;++i){let l=this.getElementByPos(i);l!==e&&(e=l,this.setElementByPos(t++,l))}for(;this.i>t;)this.popBack();return this.i}sort(t){let e=[];for(let i=0;i<this.i;++i)e.push(this.getElementByPos(i));e.sort(t);for(let i=0;i<this.i;++i)this.setElementByPos(i,e[i])}shrinkToFit(){if(this.i===0)return;let t=[];this.forEach(function(e){t.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<t.length;++e)this.pushBack(t[e])}forEach(t){for(let e=0;e<this.i;++e)t(this.getElementByPos(e),e,this)}[Symbol.iterator](){return(function*(){for(let t=0;t<this.i;++t)yield this.getElementByPos(t)}).bind(this)()}},r=n;f.default=r}),Yu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.TreeNodeEnableIndex=f.TreeNode=void 0;var h=class{constructor(a,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=c}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let c=a.tt;for(;c.U===a;)a=c,c=a.tt;a=c}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let c=a.tt;for(;c.W===a;)a=c,c=a.tt;return a.W!==c?c:a}}te(){let a=this.tt,c=this.W,n=c.U;return a.tt===this?a.tt=c:a.U===this?a.U=c:a.W=c,c.tt=a,c.U=this,this.tt=c,this.W=n,n&&(n.tt=this),c}se(){let a=this.tt,c=this.U,n=c.W;return a.tt===this?a.tt=c:a.U===this?a.U=c:a.W=c,c.tt=a,c.W=this,this.tt=c,this.U=n,n&&(n.tt=this),c}};f.TreeNode=h;var s=class extends h{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};f.TreeNodeEnableIndex=s}),Ea=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Yu(),s=Nt(),a=Ut(),c=class extends s.Container{constructor(r=function(e,i){return e<i?-1:e>i?1:0},t=!1){super(),this.Y=void 0,this.v=r,t?(this.re=h.TreeNodeEnableIndex,this.M=function(e,i,l){let d=this.ne(e,i,l);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let g=this.he(d);if(g){let{parentNode:b,grandParent:A,curNode:S}=g;b.ie(),A.ie(),S.ie()}}return this.i},this.V=function(e){let i=this.fe(e);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=h.TreeNode,this.M=function(e,i,l){let d=this.ne(e,i,l);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(r,t){let e=this.h;for(;r;){let i=this.v(r.u,t);if(i<0)r=r.W;else if(i>0)e=r,r=r.U;else return r}return e}Z(r,t){let e=this.h;for(;r;)this.v(r.u,t)<=0?r=r.W:(e=r,r=r.U);return e}$(r,t){let e=this.h;for(;r;){let i=this.v(r.u,t);if(i<0)e=r,r=r.W;else if(i>0)r=r.U;else return r}return e}rr(r,t){let e=this.h;for(;r;)this.v(r.u,t)<0?(e=r,r=r.W):r=r.U;return e}ue(r){for(;;){let t=r.tt;if(t===this.h)return;if(r.ee===1){r.ee=0;return}if(r===t.U){let e=t.W;if(e.ee===1)e.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else if(e.W&&e.W.ee===1){e.ee=t.ee,t.ee=0,e.W.ee=0,t===this.Y?this.Y=t.te():t.te();return}else e.U&&e.U.ee===1?(e.ee=1,e.U.ee=0,e.se()):(e.ee=1,r=t)}else{let e=t.U;if(e.ee===1)e.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else if(e.U&&e.U.ee===1){e.ee=t.ee,t.ee=0,e.U.ee=0,t===this.Y?this.Y=t.se():t.se();return}else e.W&&e.W.ee===1?(e.ee=1,e.W.ee=0,e.te()):(e.ee=1,r=t)}}}fe(r){if(this.i===1)return this.clear(),this.h;let t=r;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[r.u,t.u]=[t.u,r.u],[r.l,t.l]=[t.l,r.l],r=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);let e=t.tt;return t===e.U?e.U=void 0:e.W=void 0,this.i-=1,this.Y.ee=0,e}oe(r,t){return r===void 0?!1:this.oe(r.U,t)||t(r)?!0:this.oe(r.W,t)}he(r){for(;;){let t=r.tt;if(t.ee===0)return;let e=t.tt;if(t===e.U){let i=e.W;if(i&&i.ee===1){if(i.ee=t.ee=0,e===this.Y)return;e.ee=1,r=e;continue}else if(r===t.W){if(r.ee=0,r.U&&(r.U.tt=t),r.W&&(r.W.tt=e),t.W=r.U,e.U=r.W,r.U=t,r.W=e,e===this.Y)this.Y=r,this.h.tt=r;else{let l=e.tt;l.U===e?l.U=r:l.W=r}return r.tt=e.tt,t.tt=r,e.tt=r,e.ee=1,{parentNode:t,grandParent:e,curNode:r}}else t.ee=0,e===this.Y?this.Y=e.se():e.se(),e.ee=1}else{let i=e.U;if(i&&i.ee===1){if(i.ee=t.ee=0,e===this.Y)return;e.ee=1,r=e;continue}else if(r===t.U){if(r.ee=0,r.U&&(r.U.tt=e),r.W&&(r.W.tt=t),e.W=r.U,t.U=r.W,r.U=e,r.W=t,e===this.Y)this.Y=r,this.h.tt=r;else{let l=e.tt;l.U===e?l.U=r:l.W=r}return r.tt=e.tt,t.tt=r,e.tt=r,e.ee=1,{parentNode:t,grandParent:e,curNode:r}}else t.ee=0,e===this.Y?this.Y=e.te():e.te(),e.ee=1}return}}ne(r,t,e){if(this.Y===void 0){this.i+=1,this.Y=new this.re(r,t),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let i,l=this.h.U,d=this.v(l.u,r);if(d===0){l.l=t;return}else if(d>0)l.U=new this.re(r,t),l.U.tt=l,i=l.U,this.h.U=i;else{let p=this.h.W,g=this.v(p.u,r);if(g===0){p.l=t;return}else if(g<0)p.W=new this.re(r,t),p.W.tt=p,i=p.W,this.h.W=i;else{if(e!==void 0){let b=e.o;if(b!==this.h){let A=this.v(b.u,r);if(A===0){b.l=t;return}else if(A>0){let S=b.L(),O=this.v(S.u,r);if(O===0){S.l=t;return}else O<0&&(i=new this.re(r,t),S.W===void 0?(S.W=i,i.tt=S):(b.U=i,i.tt=b))}}}if(i===void 0)for(i=this.Y;;){let b=this.v(i.u,r);if(b>0){if(i.U===void 0){i.U=new this.re(r,t),i.U.tt=i,i=i.U;break}i=i.U}else if(b<0){if(i.W===void 0){i.W=new this.re(r,t),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=t;return}}}}return this.i+=1,i}I(r,t){for(;r;){let e=this.v(r.u,t);if(e<0)r=r.W;else if(e>0)r=r.U;else return r}return r||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(r,t){let e=r.o;if(e===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return e.u=t,!0;if(e===this.h.U)return this.v(e.B().u,t)>0?(e.u=t,!0):!1;if(e===this.h.W)return this.v(e.L().u,t)<0?(e.u=t,!0):!1;let i=e.L().u;if(this.v(i,t)>=0)return!1;let l=e.B().u;return this.v(l,t)<=0?!1:(e.u=t,!0)}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let t=0,e=this;return this.oe(this.Y,function(i){return r===t?(e.V(i),!0):(t+=1,!1)}),this.i}eraseElementByKey(r){if(this.i===0)return!1;let t=this.I(this.Y,r);return t===this.h?!1:(this.V(t),!0)}eraseElementByIterator(r){let t=r.o;t===this.h&&(0,a.throwIteratorAccessError)();let e=t.W===void 0;return r.iteratorType===0?e&&r.next():(!e||t.U===void 0)&&r.next(),this.V(t),r}forEach(r){let t=0;for(let e of this)r(e,t++,this)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let t,e=0;for(let i of this){if(e===r){t=i;break}e+=1}return t}getHeight(){if(this.i===0)return 0;let r=function(t){return t?Math.max(r(t.U),r(t.W))+1:0};return r(this.Y)}},n=c;f.default=n}),Aa=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Nt(),s=Ut(),a=class extends h.ContainerIterator{constructor(n,r,t){super(t),this.o=n,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,r=this.h.tt;if(n===this.h)return r?r.rt-1:0;let t=0;for(n.U&&(t+=n.U.rt);n!==r;){let e=n.tt;n===e.W&&(t+=1,e.U&&(t+=e.U.rt)),n=e}return t}},c=a;f.default=c}),Ju=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=c(Ea()),s=c(Aa()),a=Ut();function c(e){return e&&e.t?e:{default:e}}var n=class xa extends s.default{constructor(i,l,d,p){super(i,l,p),this.container=d}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new xa(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.default{constructor(e=[],i,l){super(i,l);let d=this;e.forEach(function(p){d.insert(p)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,i){return this.M(e,void 0,i)}find(e){let i=this.I(this.Y,e);return new n(i,this.h,this)}lowerBound(e){let i=this.X(this.Y,e);return new n(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new n(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new n(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new n(i,this.h,this)}union(e){let i=this;return e.forEach(function(l){i.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},t=r;f.default=t}),Xu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=c(Ea()),s=c(Aa()),a=Ut();function c(e){return e&&e.t?e:{default:e}}var n=class Oa extends s.default{constructor(i,l,d,p){super(i,l,p),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let i=this;return new Proxy([],{get(l,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(l,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new Oa(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.default{constructor(e=[],i,l){super(i,l);let d=this;e.forEach(function(p){d.setElement(p[0],p[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let i=this.X(this.Y,e);return new n(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new n(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new n(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new n(i,this.h,this)}setElement(e,i,l){return this.M(e,i,l)}find(e){let i=this.I(this.Y,e);return new n(i,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let i=this;return e.forEach(function(l){i.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},t=r;f.default=t}),Ia=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=h;function h(s){let a=typeof s;return a==="object"&&s!==null||a==="function"}}),Pa=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.HashContainerIterator=f.HashContainer=void 0;var h=Nt(),s=c(Ia()),a=Ut();function c(t){return t&&t.t?t:{default:t}}var n=class extends h.ContainerIterator{constructor(t,e,i){super(i),this.o=t,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};f.HashContainerIterator=n;var r=class extends h.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(t){let{L:e,B:i}=t;e.B=i,i.L=e,t===this.p&&(this.p=i),t===this._&&(this._=e),this.i-=1}M(t,e,i){i===void 0&&(i=(0,s.default)(t));let l;if(i){let d=t[this.HASH_TAG];if(d!==void 0)return this.H[d].l=e,this.i;Object.defineProperty(t,this.HASH_TAG,{value:this.H.length,configurable:!0}),l={u:t,l:e,L:this._,B:this.h},this.H.push(l)}else{let d=this.g[t];if(d)return d.l=e,this.i;l={u:t,l:e,L:this._,B:this.h},this.g[t]=l}return this.i===0?(this.p=l,this.h.B=l):this._.B=l,this._=l,this.h.L=l,++this.i}I(t,e){if(e===void 0&&(e=(0,s.default)(t)),e){let i=t[this.HASH_TAG];return i===void 0?this.h:this.H[i]}else return this.g[t]||this.h}clear(){let t=this.HASH_TAG;this.H.forEach(function(e){delete e.u[t]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(t,e){let i;if(e===void 0&&(e=(0,s.default)(t)),e){let l=t[this.HASH_TAG];if(l===void 0)return!1;delete t[this.HASH_TAG],i=this.H[l],delete this.H[l]}else{if(i=this.g[t],i===void 0)return!1;delete this.g[t]}return this.V(i),!0}eraseElementByIterator(t){let e=t.o;return e===this.h&&(0,a.throwIteratorAccessError)(),this.V(e),t.next()}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let e=this.p;for(;t--;)e=e.B;return this.V(e),this.i}};f.HashContainer=r}),Zu=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Pa(),s=Ut(),a=class ka extends h.HashContainerIterator{constructor(t,e,i,l){super(t,e,l),this.container=i}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.u}copy(){return new ka(this.o,this.h,this.container,this.iteratorType)}},c=class extends h.HashContainer{constructor(r=[]){super();let t=this;r.forEach(function(e){t.insert(e)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(r,t){return this.M(r,void 0,t)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let t=this.p;for(;r--;)t=t.B;return t.u}find(r,t){let e=this.I(r,t);return new a(e,this.h,this)}forEach(r){let t=0,e=this.p;for(;e!==this.h;)r(e.u,t++,this),e=e.B}[Symbol.iterator](){return(function*(){let r=this.p;for(;r!==this.h;)yield r.u,r=r.B}).bind(this)()}},n=c;f.default=n}),ec=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),f.default=void 0;var h=Pa(),s=c(Ia()),a=Ut();function c(e){return e&&e.t?e:{default:e}}var n=class Ta extends h.HashContainerIterator{constructor(i,l,d,p){super(i,l,p),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let i=this;return new Proxy([],{get(l,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(l,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new Ta(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(l){i.setElement(l[0],l[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,i,l){return this.M(e,i,l)}getElementByKey(e,i){if(i===void 0&&(i=(0,s.default)(e)),i){let d=e[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let l=this.g[e];return l?l.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return[i.u,i.l]}find(e,i){let l=this.I(e,i);return new n(l,this.h,this)}forEach(e){let i=0,l=this.p;for(;l!==this.h;)e([l.u,l.l],i++,this),l=l.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}},t=r;f.default=t}),tc=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"t",{value:!0}),Object.defineProperty(f,"Deque",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(f,"HashMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(f,"HashSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(f,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(f,"OrderedMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(f,"OrderedSet",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(f,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(f,"Queue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(f,"Stack",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(f,"Vector",{enumerable:!0,get:function(){return c.default}});var h=d(Vu()),s=d(zu()),a=d(Ku()),c=d(Hu()),n=d(Gu()),r=d(Qu()),t=d(Ju()),e=d(Xu()),i=d(Zu()),l=d(ec());function d(p){return p&&p.t?p:{default:p}}}),rc=Ae((f,h)=>{ye(),be(),me();var s=tc().OrderedSet,a=Mt()("number-allocator:trace"),c=Mt()("number-allocator:error");function n(t,e){this.low=t,this.high=e}n.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},n.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function r(t,e){if(!(this instanceof r))return new r(t,e);this.min=t,this.max=e,this.ss=new s([],(i,l)=>i.compare(l)),a("Create"),this.clear()}r.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},r.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let t=this.ss.begin(),e=t.pointer.low,i=t.pointer.high,l=e;return l+1<=i?this.ss.updateKeyByIterator(t,new n(e+1,i)):this.ss.eraseElementByPos(0),a("alloc():"+l),l},r.prototype.use=function(t){let e=new n(t,t),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){let l=i.pointer.low,d=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),a("use():"+t),!0):l>t?!1:l===t?(this.ss.updateKeyByIterator(i,new n(l+1,d)),a("use():"+t),!0):d===t?(this.ss.updateKeyByIterator(i,new n(l,d-1)),a("use():"+t),!0):(this.ss.updateKeyByIterator(i,new n(t+1,d)),this.ss.insert(new n(l,t-1)),a("use():"+t),!0)}return a("use():failed"),!1},r.prototype.free=function(t){if(t<this.min||t>this.max){c("free():"+t+" is out of range");return}let e=new n(t,t),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();let l=i.pointer.high;i.pointer.high+1===t?this.ss.updateKeyByIterator(i,new n(l,t)):this.ss.insert(e)}else if(i.equals(this.ss.begin()))if(t+1===i.pointer.low){let l=i.pointer.high;this.ss.updateKeyByIterator(i,new n(t,l))}else this.ss.insert(e);else{let l=i.pointer.low,d=i.pointer.high;i.pre();let p=i.pointer.low;i.pointer.high+1===t?t+1===l?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new n(p,d))):this.ss.updateKeyByIterator(i,new n(p,t)):t+1===l?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new n(t,d))):this.ss.insert(e)}a("free():"+t)},r.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},r.prototype.intervalCount=function(){return this.ss.size()},r.prototype.dump=function(){""+this.ss.size();for(let t of this.ss);},h.exports=r}),Ca=Ae((f,h)=>{ye(),be(),me();var s=rc();h.exports.NumberAllocator=s}),nc=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=qu(),s=Ca(),a=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(c){c>0&&(this.aliasToTopic=new h.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new s.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,n){if(n===0||n>this.max)return!1;let r=this.aliasToTopic.get(n);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(n,c),this.topicToAlias[c]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let n=this.topicToAlias[c];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};f.default=a}),ic=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(f,"__esModule",{value:!0});var s=nn(),a=h(nc()),c=cr(),n=(r,t)=>{r.log("_handleConnack");let{options:e}=r,i=e.protocolVersion===5?t.reasonCode:t.returnCode;if(clearTimeout(r.connackTimer),delete r.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535){r.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}t.properties.topicAliasMaximum>0&&(r.topicAliasSend=new a.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(i===0)r.reconnecting=!1,r._onConnect(t);else if(i>0){let l=new c.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[i]}`,i);r.emit("error",l),r.options.reconnectOnConnackError&&r._cleanUp(!0)}};f.default=n}),oc=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=(s,a,c)=>{s.log("handling pubrel packet");let n=typeof c<"u"?c:s.noop,{messageId:r}=a,t={cmd:"pubcomp",messageId:r};s.incomingStore.get(a,(e,i)=>{e?s._sendPacket(t,n):(s.emit("message",i.topic,i.payload,i),s.handleMessage(i,l=>{if(l)return n(l);s.incomingStore.del(i,s.noop),s._sendPacket(t,n)}))})};f.default=h}),sc=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f,"__esModule",{value:!0});var s=h(Wu()),a=h($u()),c=h(ic()),n=h(nn()),r=h(oc()),t=(e,i,l)=>{let{options:d}=e;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<i.length)return e.emit("error",new Error(`exceeding packets size ${i.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",i),i.cmd){case"publish":(0,s.default)(e,i,l);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,n.default)(e,i),l();break;case"pubrel":e.reschedulePing(),(0,r.default)(e,i,l);break;case"connack":(0,c.default)(e,i),l();break;case"auth":e.reschedulePing(),(0,a.default)(e,i),l();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),l();break;case"disconnect":e.emit("disconnect",i),l();break;default:e.log("_handlePacket :: unknown command"),l();break}};f.default=t}),ja=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let s=this.nextId++;return this.nextId===65536&&(this.nextId=1),s}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(s){return!0}deallocate(s){}clear(){}};f.default=h}),ac=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=class{aliasToTopic;max;length;constructor(s){this.aliasToTopic={},this.max=s}put(s,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=s,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(s){return this.aliasToTopic[s]}clear(){this.aliasToTopic={}}};f.default=h}),lc=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(f,"__esModule",{value:!0}),f.TypedEventEmitter=void 0;var s=h((tr(),Ge(Kt))),a=cr(),c=class{};f.TypedEventEmitter=c,(0,a.applyMixin)(c,s.default)}),on=Ae((f,h)=>{ye(),be(),me();function s(a){"@babel/helpers - typeof";return h.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},h.exports.__esModule=!0,h.exports.default=h.exports,s(a)}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),uc=Ae((f,h)=>{ye(),be(),me();var s=on().default;function a(c,n){if(s(c)!="object"||!c)return c;var r=c[Symbol.toPrimitive];if(r!==void 0){var t=r.call(c,n||"default");if(s(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(c)}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),cc=Ae((f,h)=>{ye(),be(),me();var s=on().default,a=uc();function c(n){var r=a(n,"string");return s(r)=="symbol"?r:r+""}h.exports=c,h.exports.__esModule=!0,h.exports.default=h.exports}),hc=Ae((f,h)=>{ye(),be(),me();var s=cc();function a(c,n,r){return(n=s(n))in c?Object.defineProperty(c,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):c[n]=r,c}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),fc=Ae((f,h)=>{ye(),be(),me();function s(a){if(Array.isArray(a))return a}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),pc=Ae((f,h)=>{ye(),be(),me();function s(a,c){var n=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n!=null){var r,t,e,i,l=[],d=!0,p=!1;try{if(e=(n=n.call(a)).next,c===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(r=e.call(n)).done)&&(l.push(r.value),l.length!==c);d=!0);}catch(g){p=!0,t=g}finally{try{if(!d&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(p)throw t}}return l}}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),dc=Ae((f,h)=>{ye(),be(),me();function s(a,c){(c==null||c>a.length)&&(c=a.length);for(var n=0,r=Array(c);n<c;n++)r[n]=a[n];return r}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),gc=Ae((f,h)=>{ye(),be(),me();var s=dc();function a(c,n){if(c){if(typeof c=="string")return s(c,n);var r={}.toString.call(c).slice(8,-1);return r==="Object"&&c.constructor&&(r=c.constructor.name),r==="Map"||r==="Set"?Array.from(c):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(c,n):void 0}}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),yc=Ae((f,h)=>{ye(),be(),me();function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),mc=Ae((f,h)=>{ye(),be(),me();var s=fc(),a=pc(),c=gc(),n=yc();function r(t,e){return s(t)||a(t,e)||c(t,e)||n()}h.exports=r,h.exports.__esModule=!0,h.exports.default=h.exports}),Ra=Ae((f,h)=>{ye(),be(),me(),(function(s,a){typeof f=="object"&&typeof h<"u"?a(f):typeof define=="function"&&define.amd?define(["exports"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.fastUniqueNumbers={}))})(f,function(s){var a=function(g){return function(b){var A=g(b);return b.add(A),A}},c=function(g){return function(b,A){return g.set(b,A),A}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,t=r*2,e=function(g,b){return function(A){var S=b.get(A),O=S===void 0?A.size:S<t?S+1:0;if(!A.has(O))return g(A,O);if(A.size<r){for(;A.has(O);)O=Math.floor(Math.random()*t);return g(A,O)}if(A.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;A.has(O);)O=Math.floor(Math.random()*n);return g(A,O)}},i=new WeakMap,l=c(i),d=e(l,i),p=a(d);s.addUniqueNumber=p,s.generateUniqueNumber=d})}),bc=Ae((f,h)=>{ye(),be(),me();function s(c,n,r,t,e,i,l){try{var d=c[i](l),p=d.value}catch(g){return void r(g)}d.done?n(p):Promise.resolve(p).then(t,e)}function a(c){return function(){var n=this,r=arguments;return new Promise(function(t,e){var i=c.apply(n,r);function l(p){s(i,t,e,l,d,"next",p)}function d(p){s(i,t,e,l,d,"throw",p)}l(void 0)})}}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),Ma=Ae((f,h)=>{ye(),be(),me();function s(a,c){this.v=a,this.k=c}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),Ba=Ae((f,h)=>{ye(),be(),me();function s(a,c,n,r){var t=Object.defineProperty;try{t({},"",{})}catch{t=0}h.exports=s=function(e,i,l,d){function p(g,b){s(e,g,function(A){return this._invoke(g,b,A)})}i?t?t(e,i,{value:l,enumerable:!d,configurable:!d,writable:!d}):e[i]=l:(p("next",0),p("throw",1),p("return",2))},h.exports.__esModule=!0,h.exports.default=h.exports,s(a,c,n,r)}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),Na=Ae((f,h)=>{ye(),be(),me();var s=Ba();function a(){var c,n,r=typeof Symbol=="function"?Symbol:{},t=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function i(O,y,v,E){var _=y&&y.prototype instanceof d?y:d,j=Object.create(_.prototype);return s(j,"_invoke",(function(w,P,T){var M,U,k,K=0,Q=T||[],V=!1,he={p:0,n:0,v:c,a:ie,f:ie.bind(c,4),d:function(ne,ce){return M=ne,U=0,k=c,he.n=ce,l}};function ie(ne,ce){for(U=ne,k=ce,n=0;!V&&K&&!z&&n<Q.length;n++){var z,le=Q[n],B=he.p,te=le[2];ne>3?(z=te===ce)&&(k=le[(U=le[4])?5:(U=3,3)],le[4]=le[5]=c):le[0]<=B&&((z=ne<2&&B<le[1])?(U=0,he.v=ce,he.n=le[1]):B<te&&(z=ne<3||le[0]>ce||ce>te)&&(le[4]=ne,le[5]=ce,he.n=te,U=0))}if(z||ne>1)return l;throw V=!0,ce}return function(ne,ce,z){if(K>1)throw TypeError("Generator is already running");for(V&&ce===1&&ie(ce,z),U=ce,k=z;(n=U<2?c:k)||!V;){M||(U?U<3?(U>1&&(he.n=-1),ie(U,k)):he.n=k:he.v=k);try{if(K=2,M){if(U||(ne="next"),n=M[ne]){if(!(n=n.call(M,k)))throw TypeError("iterator result is not an object");if(!n.done)return n;k=n.value,U<2&&(U=0)}else U===1&&(n=M.return)&&n.call(M),U<2&&(k=TypeError("The iterator does not provide a '"+ne+"' method"),U=1);M=c}else if((n=(V=he.n<0)?k:w.call(P,he))!==l)break}catch(le){M=c,U=1,k=le}finally{K=1}}return{value:n,done:V}}})(O,v,E),!0),j}var l={};function d(){}function p(){}function g(){}n=Object.getPrototypeOf;var b=[][t]?n(n([][t]())):(s(n={},t,function(){return this}),n),A=g.prototype=d.prototype=Object.create(b);function S(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,g):(O.__proto__=g,s(O,e,"GeneratorFunction")),O.prototype=Object.create(A),O}return p.prototype=g,s(A,"constructor",g),s(g,"constructor",p),p.displayName="GeneratorFunction",s(g,e,"GeneratorFunction"),s(A),s(A,e,"Generator"),s(A,t,function(){return this}),s(A,"toString",function(){return"[object Generator]"}),(h.exports=a=function(){return{w:i,m:S}},h.exports.__esModule=!0,h.exports.default=h.exports)()}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),Ua=Ae((f,h)=>{ye(),be(),me();var s=Ma(),a=Ba();function c(n,r){function t(i,l,d,p){try{var g=n[i](l),b=g.value;return b instanceof s?r.resolve(b.v).then(function(A){t("next",A,d,p)},function(A){t("throw",A,d,p)}):r.resolve(b).then(function(A){g.value=A,d(g)},function(A){return t("throw",A,d,p)})}catch(A){p(A)}}var e;this.next||(a(c.prototype),a(c.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),a(this,"_invoke",function(i,l,d){function p(){return new r(function(g,b){t(i,d,g,b)})}return e=e?e.then(p,p):p()},!0)}h.exports=c,h.exports.__esModule=!0,h.exports.default=h.exports}),La=Ae((f,h)=>{ye(),be(),me();var s=Na(),a=Ua();function c(n,r,t,e,i){return new a(s().w(n,r,t,e),i||Promise)}h.exports=c,h.exports.__esModule=!0,h.exports.default=h.exports}),vc=Ae((f,h)=>{ye(),be(),me();var s=La();function a(c,n,r,t,e){var i=s(c,n,r,t,e);return i.next().then(function(l){return l.done?l.value:i.next()})}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),wc=Ae((f,h)=>{ye(),be(),me();function s(a){var c=Object(a),n=[];for(var r in c)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in c)return t.value=r,t.done=!1,t;return t.done=!0,t}}h.exports=s,h.exports.__esModule=!0,h.exports.default=h.exports}),_c=Ae((f,h)=>{ye(),be(),me();var s=on().default;function a(c){if(c!=null){var n=c[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length))return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}}}throw new TypeError(s(c)+" is not iterable")}h.exports=a,h.exports.__esModule=!0,h.exports.default=h.exports}),Sc=Ae((f,h)=>{ye(),be(),me();var s=Ma(),a=Na(),c=vc(),n=La(),r=Ua(),t=wc(),e=_c();function i(){var l=a(),d=l.m(i),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function g(S){var O=typeof S=="function"&&S.constructor;return!!O&&(O===p||(O.displayName||O.name)==="GeneratorFunction")}var b={throw:1,return:2,break:3,continue:3};function A(S){var O,y;return function(v){O||(O={stop:function(){return y(v.a,2)},catch:function(){return v.v},abrupt:function(E,_){return y(v.a,b[E],_)},delegateYield:function(E,_,j){return O.resultName=_,y(v.d,e(E),j)},finish:function(E){return y(v.f,E)}},y=function(E,_,j){v.p=O.prev,v.n=O.next;try{return E(_,j)}finally{O.next=v.n}}),O.resultName&&(O[O.resultName]=v.v,O.resultName=void 0),O.sent=v.v,O.next=v.n;try{return S.call(this,O)}finally{v.p=O.prev,v.n=O.next}}}return(h.exports=i=function(){return{wrap:function(S,O,y,v){return l.w(A(S),O,y,v&&v.reverse())},isGeneratorFunction:g,mark:l.m,awrap:function(S,O){return new s(S,O)},AsyncIterator:r,async:function(S,O,y,v,E){return(g(O)?n:c)(A(S),O,y,v,E)},keys:t,values:e}},h.exports.__esModule=!0,h.exports.default=h.exports)()}h.exports=i,h.exports.__esModule=!0,h.exports.default=h.exports}),Ec=Ae((f,h)=>{ye(),be(),me();var s=Sc()();h.exports=s;try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}}),Ac=Ae((f,h)=>{ye(),be(),me(),(function(s,a){typeof f=="object"&&typeof h<"u"?a(f,hc(),mc(),Ra(),bc(),Ec()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.brokerFactory={},s._defineProperty,s._slicedToArray,s.fastUniqueNumbers,s._asyncToGenerator,s._regeneratorRuntime))})(f,function(s,a,c,n,r,t){var e=function(y){return typeof y.start=="function"},i=new WeakMap;function l(y,v){var E=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);v&&(_=_.filter(function(j){return Object.getOwnPropertyDescriptor(y,j).enumerable})),E.push.apply(E,_)}return E}function d(y){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?l(Object(E),!0).forEach(function(_){a(y,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(E)):l(Object(E)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(E,_))})}return y}var p=function(y){return d(d({},y),{},{connect:function(v){var E=v.call;return r(t.mark(function _(){var j,w,P,T;return t.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return j=new MessageChannel,w=j.port1,P=j.port2,M.next=1,E("connect",{port:w},[w]);case 1:return T=M.sent,i.set(P,T),M.abrupt("return",P);case 2:case"end":return M.stop()}},_)}))},disconnect:function(v){var E=v.call;return(function(){var _=r(t.mark(function j(w){var P;return t.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(P=i.get(w),P!==void 0){T.next=1;break}throw new Error("The given port is not connected.");case 1:return T.next=2,E("disconnect",{portId:P});case 2:case"end":return T.stop()}},j)}));return function(j){return _.apply(this,arguments)}})()},isSupported:function(v){var E=v.call;return function(){return E("isSupported")}}})};function g(y,v){var E=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);v&&(_=_.filter(function(j){return Object.getOwnPropertyDescriptor(y,j).enumerable})),E.push.apply(E,_)}return E}function b(y){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?g(Object(E),!0).forEach(function(_){a(y,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(E)):g(Object(E)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(E,_))})}return y}var A=new WeakMap,S=function(y){if(A.has(y))return A.get(y);var v=new Map;return A.set(y,v),v},O=function(y){var v=p(y);return function(E){var _=S(E);E.addEventListener("message",function(Q){var V=Q.data,he=V.id;if(he!==null&&_.has(he)){var ie=_.get(he),ne=ie.reject,ce=ie.resolve;_.delete(he),V.error===void 0?ce(V.result):ne(new Error(V.error.message))}}),e(E)&&E.start();for(var j=function(Q){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(ie,ne){var ce=n.generateUniqueNumber(_);_.set(ce,{reject:ne,resolve:ie}),V===null?E.postMessage({id:ce,method:Q},he):E.postMessage({id:ce,method:Q,params:V},he)})},w=function(Q,V){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];E.postMessage({id:null,method:Q,params:V},he)},P={},T=0,M=Object.entries(v);T<M.length;T++){var U=c(M[T],2),k=U[0],K=U[1];P=b(b({},P),{},a({},k,K({call:j,notify:w})))}return b({},P)}};s.createBroker=O})}),xc=Ae((f,h)=>{ye(),be(),me(),(function(s,a){typeof f=="object"&&typeof h<"u"?a(f,on(),Ac(),Ra()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.workerTimersBroker={},s._typeof,s.brokerFactory,s.fastUniqueNumbers))})(f,function(s,a,c,n){var r=new Map([[0,null]]),t=new Map([[0,null]]),e=c.createBroker({clearInterval:function(l){var d=l.call;return function(p){a(r.get(p))==="symbol"&&(r.set(p,null),d("clear",{timerId:p,timerType:"interval"}).then(function(){r.delete(p)}))}},clearTimeout:function(l){var d=l.call;return function(p){a(t.get(p))==="symbol"&&(t.set(p,null),d("clear",{timerId:p,timerType:"timeout"}).then(function(){t.delete(p)}))}},setInterval:function(l){var d=l.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,A=new Array(b>2?b-2:0),S=2;S<b;S++)A[S-2]=arguments[S];var O=Symbol(),y=n.generateUniqueNumber(r);r.set(y,O);var v=function(){return d("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:y,timerType:"interval"}).then(function(){var E=r.get(y);if(E===void 0)throw new Error("The timer is in an undefined state.");E===O&&(p.apply(void 0,A),r.get(y)===O&&v())})};return v(),y}},setTimeout:function(l){var d=l.call;return function(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length,A=new Array(b>2?b-2:0),S=2;S<b;S++)A[S-2]=arguments[S];var O=Symbol(),y=n.generateUniqueNumber(t);return t.set(y,O),d("set",{delay:g,now:performance.timeOrigin+performance.now(),timerId:y,timerType:"timeout"}).then(function(){var v=t.get(y);if(v===void 0)throw new Error("The timer is in an undefined state.");v===O&&(t.delete(y),p.apply(void 0,A))}),y}}}),i=function(l){var d=new Worker(l);return e(d)};s.load=i,s.wrap=e})}),Oc=Ae((f,h)=>{ye(),be(),me(),(function(s,a){typeof f=="object"&&typeof h<"u"?a(f,xc()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(s=typeof globalThis<"u"?globalThis:s||self,a(s.workerTimers={},s.workerTimersBroker))})(f,function(s,a){var c=function(d,p){var g=null;return function(){if(g!==null)return g;var b=new Blob([p],{type:"application/javascript; charset=utf-8"}),A=URL.createObjectURL(b);return g=d(A),setTimeout(function(){return URL.revokeObjectURL(A)}),g}},n=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,r=c(a.load,n),t=function(d){return r().clearInterval(d)},e=function(d){return r().clearTimeout(d)},i=function(){var d;return(d=r()).setInterval.apply(d,arguments)},l=function(){var d;return(d=r()).setTimeout.apply(d,arguments)};s.clearInterval=t,s.clearTimeout=e,s.setInterval=i,s.setTimeout=l})}),sn=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.isReactNativeBrowser=f.isWebWorker=void 0;var h=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&Ye?.versions?!Object.prototype.hasOwnProperty.call(Ye.versions,"electron"):typeof window.document<"u":!1,s=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")),a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c=h()||s()||a();f.isWebWorker=s(),f.isReactNativeBrowser=a(),f.default=c}),Ic=Ae(f=>{ye(),be(),me();var h=f&&f.__createBinding||(Object.create?function(i,l,d,p){p===void 0&&(p=d);var g=Object.getOwnPropertyDescriptor(l,d);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(i,p,g)}:function(i,l,d,p){p===void 0&&(p=d),i[p]=l[d]}),s=f&&f.__setModuleDefault||(Object.create?function(i,l){Object.defineProperty(i,"default",{enumerable:!0,value:l})}:function(i,l){i.default=l}),a=f&&f.__importStar||(function(){var i=function(l){return i=Object.getOwnPropertyNames||function(d){var p=[];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(p[p.length]=g);return p},i(l)};return function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var p=i(l),g=0;g<p.length;g++)p[g]!=="default"&&h(d,l,p[g]);return s(d,l),d}})();Object.defineProperty(f,"__esModule",{value:!0});var c=Oc(),n=a(sn()),r={set:c.setInterval,clear:c.clearInterval},t={set:(i,l)=>setInterval(i,l),clear:i=>clearInterval(i)},e=i=>{switch(i){case"native":return t;case"worker":return r;case"auto":default:return n.default&&!n.isWebWorker&&!n.isReactNativeBrowser?r:t}};f.default=e}),Da=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(f,"__esModule",{value:!0});var s=h(Ic()),a=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(c,n){this.client=c,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,s.default)(n),this.setKeepalive(c.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};f.default=a}),Ai=Ae(f=>{var _;ye(),be(),me();var h=f&&f.__createBinding||(Object.create?function(j,w,P,T){T===void 0&&(T=P);var M=Object.getOwnPropertyDescriptor(w,P);(!M||("get"in M?!w.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return w[P]}}),Object.defineProperty(j,T,M)}:function(j,w,P,T){T===void 0&&(T=P),j[T]=w[P]}),s=f&&f.__setModuleDefault||(Object.create?function(j,w){Object.defineProperty(j,"default",{enumerable:!0,value:w})}:function(j,w){j.default=w}),a=f&&f.__importStar||(function(){var j=function(w){return j=Object.getOwnPropertyNames||function(P){var T=[];for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&(T[T.length]=M);return T},j(w)};return function(w){if(w&&w.__esModule)return w;var P={};if(w!=null)for(var T=j(w),M=0;M<T.length;M++)T[M]!=="default"&&h(P,w,T[M]);return s(P,w),P}})(),c=f&&f.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(f,"__esModule",{value:!0});var n=c(Nu()),r=nr(),t=c(Lu()),e=c(Mt()),i=a(Du()),l=c(ga()),d=c(sc()),p=c(ja()),g=c(ac()),b=cr(),A=lc(),S=c(Da()),O=a(sn()),y=globalThis.setImmediate||((...j)=>{let w=j.shift();(0,b.nextTick)(()=>{w(...j)})}),v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},E=(_=class extends A.TypedEventEmitter{connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(w,P){super(),this.options=P||{};for(let T in v)typeof this.options[T]>"u"?this.options[T]=v[T]:this.options[T]=P[T];this.log=this.options.log||(0,e.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",_.VERSION),O.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",O.default?"browser":"node"),this.log("MqttClient :: options.protocol",P.protocol),this.log("MqttClient :: options.protocolVersion",P.protocolVersion),this.log("MqttClient :: options.username",P.username),this.log("MqttClient :: options.keepalive",P.keepalive),this.log("MqttClient :: options.reconnectPeriod",P.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",P.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",P.properties?P.properties.topicAliasMaximum:void 0),this.options.clientId=typeof P.clientId=="string"?P.clientId:_.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=P.protocolVersion===5&&P.customHandleAcks?P.customHandleAcks:(...T)=>{T[3](null,0)},this.options.writeCache||(n.default.writeToStream.cacheNumbers=!1),this.streamBuilder=w,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=P.outgoingStore||new l.default,this.incomingStore=P.incomingStore||new l.default,this.queueQoSZero=P.queueQoSZero===void 0?!0:P.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,P.properties&&P.properties.topicAliasMaximum>0&&(P.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new g.default(P.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:T}=this,M=()=>{let U=T.shift();this.log("deliver :: entry %o",U);let k=null;if(!U){this._resubscribe();return}k=U.packet,this.log("deliver :: call _sendPacket for %o",k);let K=!0;k.messageId&&k.messageId!==0&&(this.messageIdProvider.register(k.messageId)||(K=!1)),K?this._sendPacket(k,Q=>{U.cb&&U.cb(Q),M()}):(this.log("messageId: %d has already used. The message is skipped and removed.",k.messageId),M())};this.log("connect :: sending queued packets"),M()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(w,P){P()}handleMessage(w,P){P()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let w=new r.Writable,P=n.default.parser(this.options),T=null,M=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new l.default,this.outgoingStore=this.options.outgoingStore||new l.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),P.on("packet",V=>{this.log("parser :: on packet push to packets array."),M.push(V)});let U=()=>{this.log("work :: getting next packet in queue");let V=M.shift();if(V)this.log("work :: packet pulled from queue"),(0,d.default)(this,V,k);else{this.log("work :: no packets in queue");let he=T;T=null,this.log("work :: done flag is %s",!!he),he&&he()}},k=()=>{if(M.length)(0,b.nextTick)(U);else{let V=T;T=null,V()}};w._write=(V,he,ie)=>{T=ie,this.log("writable stream :: parsing buffer"),P.parse(V),U()};let K=V=>{this.log("streamErrorHandler :: error",V.message),V.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",V)):this.noop(V)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(w),this.stream.on("error",K),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Q={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Q.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(Q.properties||(Q.properties={}),this.topicAliasRecv&&(Q.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Q),P.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let V={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(V)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(w,P,T,M){this.log("publish :: message `%s` to topic `%s`",P,w);let{options:U}=this;typeof T=="function"&&(M=T,T=null),T=T||{},T={qos:0,retain:!1,dup:!1,...T};let{qos:k,retain:K,dup:Q,properties:V,cbStorePut:he}=T;if(this._checkDisconnecting(M))return this;let ie=()=>{let ne=0;if((k===1||k===2)&&(ne=this._nextId(),ne===null))return this.log("No messageId left"),!1;let ce={cmd:"publish",topic:w,payload:P,qos:k,retain:K,messageId:ne,dup:Q};switch(U.protocolVersion===5&&(ce.properties=V),this.log("publish :: qos",k),k){case 1:case 2:this.outgoing[ce.messageId]={volatile:!1,cb:M||this.noop},this.log("MqttClient:publish: packet cmd: %s",ce.cmd),this._sendPacket(ce,void 0,he);break;default:this.log("MqttClient:publish: packet cmd: %s",ce.cmd),this._sendPacket(ce,M,he);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ie())&&this._storeProcessingQueue.push({invoke:ie,cbStorePut:T.cbStorePut,callback:M}),this}publishAsync(w,P,T){return new Promise((M,U)=>{this.publish(w,P,T,(k,K)=>{k?U(k):M(K)})})}subscribe(w,P,T){let M=this.options.protocolVersion;typeof P=="function"&&(T=P),T=T||this.noop;let U=!1,k=[];typeof w=="string"?(w=[w],k=w):Array.isArray(w)?k=w:typeof w=="object"&&(U=w.resubscribe,delete w.resubscribe,k=Object.keys(w));let K=i.validateTopics(k);if(K!==null)return y(T,new Error(`Invalid topic ${K}`)),this;if(this._checkDisconnecting(T))return this.log("subscribe: discconecting true"),this;let Q={qos:0};M===5&&(Q.nl=!1,Q.rap=!1,Q.rh=0),P={...Q,...P};let{properties:V}=P,he=[],ie=(z,le)=>{if(le=le||P,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,z)||this._resubscribeTopics[z].qos<le.qos||U){let B={topic:z,qos:le.qos};M===5&&(B.nl=le.nl,B.rap=le.rap,B.rh=le.rh,B.properties=V),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",B.topic,B.qos),he.push(B)}};if(Array.isArray(w)?w.forEach(z=>{this.log("subscribe: array topic %s",z),ie(z)}):Object.keys(w).forEach(z=>{this.log("subscribe: object topic %s, %o",z,w[z]),ie(z,w[z])}),!he.length)return T(null,[]),this;let ne=(z,le)=>{let B={cmd:"subscribe",subscriptions:z,messageId:le};if(V&&(B.properties=V),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Z=[];z.forEach(ue=>{if(this.options.reconnectPeriod>0){let Oe={qos:ue.qos};M===5&&(Oe.nl=ue.nl||!1,Oe.rap=ue.rap||!1,Oe.rh=ue.rh||0,Oe.properties=ue.properties),this._resubscribeTopics[ue.topic]=Oe,Z.push(ue.topic)}}),this.messageIdToTopic[B.messageId]=Z}let te=new Promise((Z,ue)=>{this.outgoing[B.messageId]={volatile:!0,cb(Oe,J){if(!Oe){let{granted:W}=J;for(let se=0;se<W.length;se+=1)z[se].qos=W[se]}Oe?ue(new b.ErrorWithSubackPacket(Oe.message,J)):Z(J)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(B),te},ce=()=>{let z=this.options.subscribeBatchSize??he.length,le=[];for(let B=0;B<he.length;B+=z){let te=he.slice(B,B+z),Z=this._nextId();if(Z===null)return this.log("No messageId left"),!1;le.push(ne(te,Z))}return Promise.all(le).then(B=>{T(null,he,B.at(-1))}).catch(B=>{T(B,he,B.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ce())&&this._storeProcessingQueue.push({invoke:ce,callback:T}),this}subscribeAsync(w,P){return new Promise((T,M)=>{this.subscribe(w,P,(U,k)=>{U?M(U):T(k)})})}unsubscribe(w,P,T){typeof w=="string"&&(w=[w]),typeof P=="function"&&(T=P),T=T||this.noop;let M=i.validateTopics(w);if(M!==null)return y(T,new Error(`Invalid topic ${M}`)),this;if(this._checkDisconnecting(T))return this;let U=()=>{let k=this._nextId();if(k===null)return this.log("No messageId left"),!1;let K={cmd:"unsubscribe",messageId:k,unsubscriptions:[]};return typeof w=="string"?K.unsubscriptions=[w]:Array.isArray(w)&&(K.unsubscriptions=w),this.options.resubscribe&&K.unsubscriptions.forEach(Q=>{delete this._resubscribeTopics[Q]}),typeof P=="object"&&P.properties&&(K.properties=P.properties),this.outgoing[K.messageId]={volatile:!0,cb:T},this.log("unsubscribe: call _sendPacket"),this._sendPacket(K),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!U())&&this._storeProcessingQueue.push({invoke:U,callback:T}),this}unsubscribeAsync(w,P){return new Promise((T,M)=>{this.unsubscribe(w,P,(U,k)=>{U?M(U):T(k)})})}end(w,P,T){this.log("end :: (%s)",this.options.clientId),(w==null||typeof w!="boolean")&&(T=T||P,P=w,w=!1),typeof P!="object"&&(T=T||P,P=null),this.log("end :: cb? %s",!!T),(!T||typeof T!="function")&&(T=this.noop);let M=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(k=>{this.outgoingStore.close(K=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),T){let Q=k||K;this.log("end :: closeStores: invoking callback with args"),T(Q)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},U=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,w),this._cleanUp(w,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(M)},P)};return this.disconnecting?(T(),this):(this._clearReconnect(),this.disconnecting=!0,!w&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,U,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),U()),this)}endAsync(w,P){return new Promise((T,M)=>{this.end(w,P,U=>{U?M(U):T()})})}removeOutgoingMessage(w){if(this.outgoing[w]){let{cb:P}=this.outgoing[w];this._removeOutgoingAndStoreMessage(w,()=>{P(new Error("Message removed"))})}return this}reconnect(w){this.log("client reconnect");let P=()=>{w?(this.options.incomingStore=w.incomingStore,this.options.outgoingStore=w.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new l.default,this.outgoingStore=this.options.outgoingStore||new l.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=P:P(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(w=>{this.outgoing[w].volatile&&typeof this.outgoing[w].cb=="function"&&(this.outgoing[w].cb(new Error("Connection closed")),delete this.outgoing[w])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(w=>{typeof this.outgoing[w].cb=="function"&&(this.outgoing[w].cb(new Error("Connection closed")),delete this.outgoing[w])}))}_removeTopicAliasAndRecoverTopicName(w){let P;w.properties&&(P=w.properties.topicAlias);let T=w.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",P,T),T.length===0){if(typeof P>"u")return new Error("Unregistered Topic Alias");if(T=this.topicAliasSend.getTopicByAlias(P),typeof T>"u")return new Error("Unregistered Topic Alias");w.topic=T}P&&delete w.properties.topicAlias}_checkDisconnecting(w){return this.disconnecting&&(w&&w!==this.noop?w(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(w,P,T={}){if(P&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",P)),this.log("_cleanUp :: forced? %s",w),w)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let M={cmd:"disconnect",...T};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(M,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),y(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),P&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",P),P())}_storeAndSend(w,P,T){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",w.cmd);let M=w,U;if(M.cmd==="publish"&&(M=(0,t.default)(w),U=this._removeTopicAliasAndRecoverTopicName(M),U))return P&&P(U);this.outgoingStore.put(M,k=>{if(k)return P&&P(k);T(),this._writePacket(w,P)})}_applyTopicAlias(w){if(this.options.protocolVersion===5&&w.cmd==="publish"){let P;w.properties&&(P=w.properties.topicAlias);let T=w.topic.toString();if(this.topicAliasSend)if(P){if(T.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",T,P),!this.topicAliasSend.put(T,P)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,P),new Error("Sending Topic Alias out of range")}else T.length!==0&&(this.options.autoAssignTopicAlias?(P=this.topicAliasSend.getAliasByTopic(T),P?(w.topic="",w.properties={...w.properties,topicAlias:P},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",T,P)):(P=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(T,P),w.properties={...w.properties,topicAlias:P},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",T,P))):this.options.autoUseTopicAlias&&(P=this.topicAliasSend.getAliasByTopic(T),P&&(w.topic="",w.properties={...w.properties,topicAlias:P},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",T,P))));else if(P)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,P),new Error("Sending Topic Alias out of range")}}_noop(w){this.log("noop ::",w)}_writePacket(w,P){this.log("_writePacket :: packet: %O",w),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",w),this.log("_writePacket :: writing to stream");let T=n.default.writeToStream(w,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",T),!T&&P&&P!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",P)):P&&(this.log("_writePacket :: invoking cb"),P())}_sendPacket(w,P,T,M){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),T=T||this.noop,P=P||this.noop;let U=this._applyTopicAlias(w);if(U){P(U);return}if(!this.connected){if(w.cmd==="auth"){this._writePacket(w,P);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(w,P,T);return}if(M){this._writePacket(w,P);return}switch(w.cmd){case"publish":break;case"pubrel":this._storeAndSend(w,P,T);return;default:this._writePacket(w,P);return}switch(w.qos){case 2:case 1:this._storeAndSend(w,P,T);break;case 0:default:this._writePacket(w,P);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(w,P,T){this.log("_storePacket :: packet: %o",w),this.log("_storePacket :: cb? %s",!!P),T=T||this.noop;let M=w;if(M.cmd==="publish"){M=(0,t.default)(w);let k=this._removeTopicAliasAndRecoverTopicName(M);if(k)return P&&P(k)}let U=M.qos||0;U===0&&this.queueQoSZero||M.cmd!=="publish"?this.queue.push({packet:M,cb:P}):U>0?(P=this.outgoing[M.messageId]?this.outgoing[M.messageId].cb:null,this.outgoingStore.put(M,k=>{if(k)return P&&P(k);T()})):P&&P(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new S.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(w=!1){this.keepaliveManager&&this.options.keepalive&&(w||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let w=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&w.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let P=0;P<w.length;P++){let T={};T[w[P]]=this._resubscribeTopics[w[P]],T.resubscribe=!0,this.subscribe(T,{properties:T[w[P]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(w){if(this.disconnected){this.emit("connect",w);return}this.connackPacket=w,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let P=()=>{let T=this.outgoingStore.createStream(),M=()=>{T.destroy(),T=null,this._flushStoreProcessingQueue(),U()},U=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",M),T.on("error",K=>{U(),this._flushStoreProcessingQueue(),this.removeListener("close",M),this.emit("error",K)});let k=()=>{if(!T)return;let K=T.read(1),Q;if(!K){T.once("readable",k);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[K.messageId]){k();return}!this.disconnecting&&!this.reconnectTimer?(Q=this.outgoing[K.messageId]?this.outgoing[K.messageId].cb:null,this.outgoing[K.messageId]={volatile:!1,cb(V,he){Q&&Q(V,he),k()}},this._packetIdsDuringStoreProcessing[K.messageId]=!0,this.messageIdProvider.register(K.messageId)?this._sendPacket(K,void 0,void 0,!0):this.log("messageId: %d has already used.",K.messageId)):T.destroy&&T.destroy()};T.on("end",()=>{let K=!0;for(let Q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[Q]){K=!1;break}this.removeListener("close",M),K?(U(),this._invokeAllStoreProcessingQueue(),this.emit("connect",w)):P()}),k()};P()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let w=this._storeProcessingQueue[0];if(w&&w.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let w of this._storeProcessingQueue)w.cbStorePut&&w.cbStorePut(new Error("Connection closed")),w.callback&&w.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(w,P){delete this.outgoing[w],this.outgoingStore.del({messageId:w},(T,M)=>{P(T,M),this.messageIdProvider.deallocate(w),this._invokeStoreProcessingQueue()})}},ot(_,"VERSION",b.MQTTJS_VERSION),_);f.default=E}),Pc=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=Ca(),s=class{numberAllocator;lastId;constructor(){this.numberAllocator=new h.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};f.default=s});function kc(){if(xi)return kr;xi=!0;let f=2147483647,h=36,s=1,a=26,c=38,n=700,r=72,t=128,e="-",i=/^xn--/,l=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=h-s,b=Math.floor,A=String.fromCharCode;function S(M){throw new RangeError(p[M])}function O(M,U){let k=[],K=M.length;for(;K--;)k[K]=U(M[K]);return k}function y(M,U){let k=M.split("@"),K="";k.length>1&&(K=k[0]+"@",M=k[1]),M=M.replace(d,".");let Q=M.split("."),V=O(Q,U).join(".");return K+V}function v(M){let U=[],k=0,K=M.length;for(;k<K;){let Q=M.charCodeAt(k++);if(Q>=55296&&Q<=56319&&k<K){let V=M.charCodeAt(k++);(V&64512)==56320?U.push(((Q&1023)<<10)+(V&1023)+65536):(U.push(Q),k--)}else U.push(Q)}return U}let E=M=>String.fromCodePoint(...M),_=function(M){return M>=48&&M<58?26+(M-48):M>=65&&M<91?M-65:M>=97&&M<123?M-97:h},j=function(M,U){return M+22+75*(M<26)-((U!=0)<<5)},w=function(M,U,k){let K=0;for(M=k?b(M/n):M>>1,M+=b(M/U);M>g*a>>1;K+=h)M=b(M/g);return b(K+(g+1)*M/(M+c))},P=function(M){let U=[],k=M.length,K=0,Q=t,V=r,he=M.lastIndexOf(e);he<0&&(he=0);for(let ie=0;ie<he;++ie)M.charCodeAt(ie)>=128&&S("not-basic"),U.push(M.charCodeAt(ie));for(let ie=he>0?he+1:0;ie<k;){let ne=K;for(let z=1,le=h;;le+=h){ie>=k&&S("invalid-input");let B=_(M.charCodeAt(ie++));B>=h&&S("invalid-input"),B>b((f-K)/z)&&S("overflow"),K+=B*z;let te=le<=V?s:le>=V+a?a:le-V;if(B<te)break;let Z=h-te;z>b(f/Z)&&S("overflow"),z*=Z}let ce=U.length+1;V=w(K-ne,ce,ne==0),b(K/ce)>f-Q&&S("overflow"),Q+=b(K/ce),K%=ce,U.splice(K++,0,Q)}return String.fromCodePoint(...U)},T=function(M){let U=[];M=v(M);let k=M.length,K=t,Q=0,V=r;for(let ne of M)ne<128&&U.push(A(ne));let he=U.length,ie=he;for(he&&U.push(e);ie<k;){let ne=f;for(let z of M)z>=K&&z<ne&&(ne=z);let ce=ie+1;ne-K>b((f-Q)/ce)&&S("overflow"),Q+=(ne-K)*ce,K=ne;for(let z of M)if(z<K&&++Q>f&&S("overflow"),z===K){let le=Q;for(let B=h;;B+=h){let te=B<=V?s:B>=V+a?a:B-V;if(le<te)break;let Z=le-te,ue=h-te;U.push(A(j(te+Z%ue,0))),le=b(Z/ue)}U.push(A(j(le,0))),V=w(Q,ce,ie===he),Q=0,++ie}++Q,++K}return U.join("")};return kr={version:"2.3.1",ucs2:{decode:v,encode:E},decode:P,encode:T,toASCII:function(M){return y(M,function(U){return l.test(U)?"xn--"+T(U):U})},toUnicode:function(M){return y(M,function(U){return i.test(U)?P(U.slice(4).toLowerCase()):U})}},kr}var kr,xi,Vt,Tc=vt(()=>{ye(),be(),me(),kr={},xi=!1,Vt=kc(),Vt.decode,Vt.encode,Vt.toASCII,Vt.toUnicode,Vt.ucs2,Vt.version});function Cc(){return Ii||(Ii=!0,Oi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},h=Symbol("test"),s=Object(h);if(typeof h=="string"||Object.prototype.toString.call(h)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;f[h]=a;for(h in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var c=Object.getOwnPropertySymbols(f);if(c.length!==1||c[0]!==h||!Object.prototype.propertyIsEnumerable.call(f,h))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(f,h);if(n.value!==a||n.enumerable!==!0)return!1}return!0}),Oi}function jc(){return ki||(ki=!0,Pi=Error),Pi}function Rc(){return Ci||(Ci=!0,Ti=EvalError),Ti}function Mc(){return Ri||(Ri=!0,ji=RangeError),ji}function Bc(){return Bi||(Bi=!0,Mi=ReferenceError),Mi}function Wa(){return Ui||(Ui=!0,Ni=SyntaxError),Ni}function wr(){return Di||(Di=!0,Li=TypeError),Li}function Nc(){return Fi||(Fi=!0,Wi=URIError),Wi}function Uc(){if($i)return Tr;$i=!0;var f=typeof Symbol<"u"&&Symbol,h=Cc();return Tr=function(){return typeof f!="function"||typeof Symbol!="function"||typeof f("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:h()},Tr}function Lc(){if(qi)return Cr;qi=!0;var f={__proto__:null,foo:{}},h=Object;return Cr=function(){return{__proto__:f}.foo===f.foo&&!(f instanceof h)},Cr}function Dc(){if(Vi)return jr;Vi=!0;var f="Function.prototype.bind called on incompatible ",h=Object.prototype.toString,s=Math.max,a="[object Function]",c=function(t,e){for(var i=[],l=0;l<t.length;l+=1)i[l]=t[l];for(var d=0;d<e.length;d+=1)i[d+t.length]=e[d];return i},n=function(t,e){for(var i=[],l=e,d=0;l<t.length;l+=1,d+=1)i[d]=t[l];return i},r=function(t,e){for(var i="",l=0;l<t.length;l+=1)i+=t[l],l+1<t.length&&(i+=e);return i};return jr=function(t){var e=this;if(typeof e!="function"||h.apply(e)!==a)throw new TypeError(f+e);for(var i=n(arguments,1),l,d=function(){if(this instanceof l){var S=e.apply(this,c(i,arguments));return Object(S)===S?S:this}return e.apply(t,c(i,arguments))},p=s(0,e.length-i.length),g=[],b=0;b<p;b++)g[b]="$"+b;if(l=Function("binder","return function ("+r(g,",")+"){ return binder.apply(this,arguments); }")(d),e.prototype){var A=function(){};A.prototype=e.prototype,l.prototype=new A,A.prototype=null}return l},jr}function vo(){if(zi)return Rr;zi=!0;var f=Dc();return Rr=Function.prototype.bind||f,Rr}function Wc(){if(Ki)return Mr;Ki=!0;var f=Function.prototype.call,h=Object.prototype.hasOwnProperty,s=vo();return Mr=s.call(f,h),Mr}function hr(){if(Hi)return Br;Hi=!0;var f,h=jc(),s=Rc(),a=Mc(),c=Bc(),n=Wa(),r=wr(),t=Nc(),e=Function,i=function(ie){try{return e('"use strict"; return ('+ie+").constructor;")()}catch{}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch{l=null}var d=function(){throw new r},p=l?(function(){try{return arguments.callee,d}catch{try{return l(arguments,"callee").get}catch{return d}}})():d,g=Uc()(),b=Lc()(),A=Object.getPrototypeOf||(b?function(ie){return ie.__proto__}:null),S={},O=typeof Uint8Array>"u"||!A?f:A(Uint8Array),y={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?f:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?f:ArrayBuffer,"%ArrayIteratorPrototype%":g&&A?A([][Symbol.iterator]()):f,"%AsyncFromSyncIteratorPrototype%":f,"%AsyncFunction%":S,"%AsyncGenerator%":S,"%AsyncGeneratorFunction%":S,"%AsyncIteratorPrototype%":S,"%Atomics%":typeof Atomics>"u"?f:Atomics,"%BigInt%":typeof BigInt>"u"?f:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?f:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?f:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?f:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":h,"%eval%":eval,"%EvalError%":s,"%Float32Array%":typeof Float32Array>"u"?f:Float32Array,"%Float64Array%":typeof Float64Array>"u"?f:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?f:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":S,"%Int8Array%":typeof Int8Array>"u"?f:Int8Array,"%Int16Array%":typeof Int16Array>"u"?f:Int16Array,"%Int32Array%":typeof Int32Array>"u"?f:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&A?A(A([][Symbol.iterator]())):f,"%JSON%":typeof JSON=="object"?JSON:f,"%Map%":typeof Map>"u"?f:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!A?f:A(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?f:Promise,"%Proxy%":typeof Proxy>"u"?f:Proxy,"%RangeError%":a,"%ReferenceError%":c,"%Reflect%":typeof Reflect>"u"?f:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?f:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!A?f:A(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?f:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&A?A(""[Symbol.iterator]()):f,"%Symbol%":g?Symbol:f,"%SyntaxError%":n,"%ThrowTypeError%":p,"%TypedArray%":O,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?f:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?f:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?f:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?f:Uint32Array,"%URIError%":t,"%WeakMap%":typeof WeakMap>"u"?f:WeakMap,"%WeakRef%":typeof WeakRef>"u"?f:WeakRef,"%WeakSet%":typeof WeakSet>"u"?f:WeakSet};if(A)try{null.error}catch(ie){var v=A(A(ie));y["%Error.prototype%"]=v}var E=function ie(ne){var ce;if(ne==="%AsyncFunction%")ce=i("async function () {}");else if(ne==="%GeneratorFunction%")ce=i("function* () {}");else if(ne==="%AsyncGeneratorFunction%")ce=i("async function* () {}");else if(ne==="%AsyncGenerator%"){var z=ie("%AsyncGeneratorFunction%");z&&(ce=z.prototype)}else if(ne==="%AsyncIteratorPrototype%"){var le=ie("%AsyncGenerator%");le&&A&&(ce=A(le.prototype))}return y[ne]=ce,ce},_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},j=vo(),w=Wc(),P=j.call(Function.call,Array.prototype.concat),T=j.call(Function.apply,Array.prototype.splice),M=j.call(Function.call,String.prototype.replace),U=j.call(Function.call,String.prototype.slice),k=j.call(Function.call,RegExp.prototype.exec),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Q=/\\(\\)?/g,V=function(ie){var ne=U(ie,0,1),ce=U(ie,-1);if(ne==="%"&&ce!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(ce==="%"&&ne!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var z=[];return M(ie,K,function(le,B,te,Z){z[z.length]=te?M(Z,Q,"$1"):B||le}),z},he=function(ie,ne){var ce=ie,z;if(w(_,ce)&&(z=_[ce],ce="%"+z[0]+"%"),w(y,ce)){var le=y[ce];if(le===S&&(le=E(ce)),typeof le>"u"&&!ne)throw new r("intrinsic "+ie+" exists, but is not available. Please file an issue!");return{alias:z,name:ce,value:le}}throw new n("intrinsic "+ie+" does not exist!")};return Br=function(ie,ne){if(typeof ie!="string"||ie.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ne!="boolean")throw new r('"allowMissing" argument must be a boolean');if(k(/^%?[^%]*%?$/,ie)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ce=V(ie),z=ce.length>0?ce[0]:"",le=he("%"+z+"%",ne),B=le.name,te=le.value,Z=!1,ue=le.alias;ue&&(z=ue[0],T(ce,P([0,1],ue)));for(var Oe=1,J=!0;Oe<ce.length;Oe+=1){var W=ce[Oe],se=U(W,0,1),ee=U(W,-1);if((se==='"'||se==="'"||se==="`"||ee==='"'||ee==="'"||ee==="`")&&se!==ee)throw new n("property names with quotes must have matching quotes");if((W==="constructor"||!J)&&(Z=!0),z+="."+W,B="%"+z+"%",w(y,B))te=y[B];else if(te!=null){if(!(W in te)){if(!ne)throw new r("base intrinsic for "+ie+" exists, but the property is not available.");return}if(l&&Oe+1>=ce.length){var X=l(te,W);J=!!X,J&&"get"in X&&!("originalValue"in X.get)?te=X.get:te=te[W]}else J=w(te,W),te=te[W];J&&!Z&&(y[B]=te)}}return te},Br}function wo(){if(Gi)return Nr;Gi=!0;var f=hr(),h=f("%Object.defineProperty%",!0)||!1;if(h)try{h({},"a",{value:1})}catch{h=!1}return Nr=h,Nr}function Fa(){if(Qi)return Ur;Qi=!0;var f=hr(),h=f("%Object.getOwnPropertyDescriptor%",!0);if(h)try{h([],"length")}catch{h=null}return Ur=h,Ur}function Fc(){if(Yi)return Lr;Yi=!0;var f=wo(),h=Wa(),s=wr(),a=Fa();return Lr=function(c,n,r){if(!c||typeof c!="object"&&typeof c!="function")throw new s("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new s("`loose`, if provided, must be a boolean");var t=arguments.length>3?arguments[3]:null,e=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,d=!!a&&a(c,n);if(f)f(c,n,{configurable:i===null&&d?d.configurable:!i,enumerable:t===null&&d?d.enumerable:!t,value:r,writable:e===null&&d?d.writable:!e});else if(l||!t&&!e&&!i)c[n]=r;else throw new h("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Lr}function $c(){if(Ji)return Dr;Ji=!0;var f=wo(),h=function(){return!!f};return h.hasArrayLengthDefineBug=function(){if(!f)return null;try{return f([],"length",{value:1}).length!==1}catch{return!0}},Dr=h,Dr}function qc(){if(Xi)return Wr;Xi=!0;var f=hr(),h=Fc(),s=$c()(),a=Fa(),c=wr(),n=f("%Math.floor%");return Wr=function(r,t){if(typeof r!="function")throw new c("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||n(t)!==t)throw new c("`length` must be a positive 32-bit integer");var e=arguments.length>2&&!!arguments[2],i=!0,l=!0;if("length"in r&&a){var d=a(r,"length");d&&!d.configurable&&(i=!1),d&&!d.writable&&(l=!1)}return(i||l||!e)&&(s?h(r,"length",t,!0,!0):h(r,"length",t)),r},Wr}function Vc(){if(Zi)return ar;Zi=!0;var f=vo(),h=hr(),s=qc(),a=wr(),c=h("%Function.prototype.apply%"),n=h("%Function.prototype.call%"),r=h("%Reflect.apply%",!0)||f.call(n,c),t=wo(),e=h("%Math.max%");ar=function(l){if(typeof l!="function")throw new a("a function is required");var d=r(f,n,arguments);return s(d,1+e(0,l.length-(arguments.length-1)),!0)};var i=function(){return r(f,c,arguments)};return t?t(ar,"apply",{value:i}):ar.apply=i,ar}function zc(){if(eo)return Fr;eo=!0;var f=hr(),h=Vc(),s=h(f("String.prototype.indexOf"));return Fr=function(a,c){var n=f(a,!!c);return typeof n=="function"&&s(a,".prototype.")>-1?h(n):n},Fr}var Oi,Ii,Pi,ki,Ti,Ci,ji,Ri,Mi,Bi,Ni,Ui,Li,Di,Wi,Fi,Tr,$i,Cr,qi,jr,Vi,Rr,zi,Mr,Ki,Br,Hi,Nr,Gi,Ur,Qi,Lr,Yi,Dr,Ji,Wr,Xi,ar,Zi,Fr,eo,Kc=vt(()=>{ye(),be(),me(),Oi={},Ii=!1,Pi={},ki=!1,Ti={},Ci=!1,ji={},Ri=!1,Mi={},Bi=!1,Ni={},Ui=!1,Li={},Di=!1,Wi={},Fi=!1,Tr={},$i=!1,Cr={},qi=!1,jr={},Vi=!1,Rr={},zi=!1,Mr={},Ki=!1,Br={},Hi=!1,Nr={},Gi=!1,Ur={},Qi=!1,Lr={},Yi=!1,Dr={},Ji=!1,Wr={},Xi=!1,ar={},Zi=!1,Fr={},eo=!1});function _o(f){throw new Error("Node.js process "+f+" is not supported by JSPM core outside of Node.js")}function Hc(){!er||!Xt||(er=!1,Xt.length?It=Xt.concat(It):mr=-1,It.length&&$a())}function $a(){if(!er){var f=setTimeout(Hc,0);er=!0;for(var h=It.length;h;){for(Xt=It,It=[];++mr<h;)Xt&&Xt[mr].run();mr=-1,h=It.length}Xt=null,er=!1,clearTimeout(f)}}function Gc(f){var h=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)h[s-1]=arguments[s];It.push(new qa(f,h)),It.length===1&&!er&&setTimeout($a,0)}function qa(f,h){this.fun=f,this.array=h}function dt(){}function Qc(f){_o("_linkedBinding")}function Yc(f){_o("dlopen")}function Jc(){return[]}function Xc(){return[]}function Zc(f,h){if(!f)throw new Error(h||"assertion error")}function eh(){return!1}function th(){return jt.now()/1e3}function un(f){var h=Math.floor((Date.now()-jt.now())*.001),s=jt.now()*.001,a=Math.floor(s)+h,c=Math.floor(s%1*1e9);return f&&(a=a-f[0],c=c-f[1],c<0&&(a--,c+=$r)),[a,c]}function Dt(){return So}function rh(f){return[]}var It,er,Xt,mr,jo,Ro,Mo,Bo,No,Uo,Lo,Do,Wo,Fo,$o,qo,Vo,zo,Ko,Ho,Go,Qo,Yo,Jo,Xo,Er,Zo,es,ts,rs,ns,is,os,ss,as,ls,us,cs,hs,fs,ps,ds,gs,ys,ms,bs,vs,ws,_s,Ss,Es,jt,cn,$r,As,xs,Os,Is,Ps,ks,Ts,Cs,js,Rs,Ms,So,Va=vt(()=>{ye(),be(),me(),It=[],er=!1,mr=-1,qa.prototype.run=function(){this.fun.apply(null,this.array)},jo="browser",Ro="x64",Mo="browser",Bo={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},No=["/usr/bin/node"],Uo=[],Lo="v16.8.0",Do={},Wo=function(f,h){console.warn((h?h+": ":"")+f)},Fo=function(f){_o("binding")},$o=function(f){return 0},qo=function(){return"/"},Vo=function(f){},zo={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Ko=dt,Ho=[],Go={},Qo=!1,Yo={},Jo=dt,Xo=dt,Er=function(){return{}},Zo=Er,es=Er,ts=dt,rs=dt,ns=dt,is={},os={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ss=dt,as=dt,ls=dt,us=dt,cs=dt,hs=dt,fs=dt,ps=void 0,ds=void 0,gs=void 0,ys=dt,ms=2,bs=1,vs="/bin/usr/node",ws=9229,_s="node",Ss=[],Es=dt,jt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},jt.now===void 0&&(cn=Date.now(),jt.timing&&jt.timing.navigationStart&&(cn=jt.timing.navigationStart),jt.now=()=>Date.now()-cn),$r=1e9,un.bigint=function(f){var h=un(f);return typeof BigInt>"u"?h[0]*$r+h[1]:BigInt(h[0]*$r)+BigInt(h[1])},As=10,xs={},Os=0,Is=Dt,Ps=Dt,ks=Dt,Ts=Dt,Cs=Dt,js=dt,Rs=Dt,Ms=Dt,So={version:Lo,versions:Do,arch:Ro,platform:Mo,release:zo,_rawDebug:Ko,moduleLoadList:Ho,binding:Fo,_linkedBinding:Qc,_events:xs,_eventsCount:Os,_maxListeners:As,on:Dt,addListener:Is,once:Ps,off:ks,removeListener:Ts,removeAllListeners:Cs,emit:js,prependListener:Rs,prependOnceListener:Ms,listeners:rh,domain:Go,_exiting:Qo,config:Yo,dlopen:Yc,uptime:th,_getActiveRequests:Jc,_getActiveHandles:Xc,reallyExit:Jo,_kill:Xo,cpuUsage:Er,resourceUsage:Zo,memoryUsage:es,kill:ts,exit:rs,openStdin:ns,allowedNodeEnvironmentFlags:is,assert:Zc,features:os,_fatalExceptions:ss,setUncaughtExceptionCaptureCallback:as,hasUncaughtExceptionCaptureCallback:eh,emitWarning:Wo,nextTick:Gc,_tickCallback:ls,_debugProcess:us,_debugEnd:cs,_startProfilerIdleNotifier:hs,_stopProfilerIdleNotifier:fs,stdout:ps,stdin:gs,stderr:ds,abort:ys,umask:$o,chdir:Vo,cwd:qo,env:Bo,title:jo,argv:No,execArgv:Uo,pid:ms,ppid:bs,execPath:vs,debugPort:ws,hrtime:un,argv0:_s,_preload_modules:Ss,setSourceMapsEnabled:Es}});function nh(){if(to)return qr;to=!0;var f=So;function h(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function s(n,r){for(var t="",e=0,i=-1,l=0,d,p=0;p<=n.length;++p){if(p<n.length)d=n.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(i===p-1||l===1))if(i!==p-1&&l===2){if(t.length<2||e!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var g=t.lastIndexOf("/");if(g!==t.length-1){g===-1?(t="",e=0):(t=t.slice(0,g),e=t.length-1-t.lastIndexOf("/")),i=p,l=0;continue}}else if(t.length===2||t.length===1){t="",e=0,i=p,l=0;continue}}r&&(t.length>0?t+="/..":t="..",e=2)}else t.length>0?t+="/"+n.slice(i+1,p):t=n.slice(i+1,p),e=p-i-1;i=p,l=0}else d===46&&l!==-1?++l:l=-1}return t}function a(n,r){var t=r.dir||r.root,e=r.base||(r.name||"")+(r.ext||"");return t?t===r.root?t+e:t+n+e:e}var c={resolve:function(){for(var n="",r=!1,t,e=arguments.length-1;e>=-1&&!r;e--){var i;e>=0?i=arguments[e]:(t===void 0&&(t=f.cwd()),i=t),h(i),i.length!==0&&(n=i+"/"+n,r=i.charCodeAt(0)===47)}return n=s(n,!r),r?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(h(n),n.length===0)return".";var r=n.charCodeAt(0)===47,t=n.charCodeAt(n.length-1)===47;return n=s(n,!r),n.length===0&&!r&&(n="."),n.length>0&&t&&(n+="/"),r?"/"+n:n},isAbsolute:function(n){return h(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,r=0;r<arguments.length;++r){var t=arguments[r];h(t),t.length>0&&(n===void 0?n=t:n+="/"+t)}return n===void 0?".":c.normalize(n)},relative:function(n,r){if(h(n),h(r),n===r||(n=c.resolve(n),r=c.resolve(r),n===r))return"";for(var t=1;t<n.length&&n.charCodeAt(t)===47;++t);for(var e=n.length,i=e-t,l=1;l<r.length&&r.charCodeAt(l)===47;++l);for(var d=r.length,p=d-l,g=i<p?i:p,b=-1,A=0;A<=g;++A){if(A===g){if(p>g){if(r.charCodeAt(l+A)===47)return r.slice(l+A+1);if(A===0)return r.slice(l+A)}else i>g&&(n.charCodeAt(t+A)===47?b=A:A===0&&(b=0));break}var S=n.charCodeAt(t+A),O=r.charCodeAt(l+A);if(S!==O)break;S===47&&(b=A)}var y="";for(A=t+b+1;A<=e;++A)(A===e||n.charCodeAt(A)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+r.slice(l+b):(l+=b,r.charCodeAt(l)===47&&++l,r.slice(l))},_makeLong:function(n){return n},dirname:function(n){if(h(n),n.length===0)return".";for(var r=n.charCodeAt(0),t=r===47,e=-1,i=!0,l=n.length-1;l>=1;--l)if(r=n.charCodeAt(l),r===47){if(!i){e=l;break}}else i=!1;return e===-1?t?"/":".":t&&e===1?"//":n.slice(0,e)},basename:function(n,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');h(n);var t=0,e=-1,i=!0,l;if(r!==void 0&&r.length>0&&r.length<=n.length){if(r.length===n.length&&r===n)return"";var d=r.length-1,p=-1;for(l=n.length-1;l>=0;--l){var g=n.charCodeAt(l);if(g===47){if(!i){t=l+1;break}}else p===-1&&(i=!1,p=l+1),d>=0&&(g===r.charCodeAt(d)?--d===-1&&(e=l):(d=-1,e=p))}return t===e?e=p:e===-1&&(e=n.length),n.slice(t,e)}else{for(l=n.length-1;l>=0;--l)if(n.charCodeAt(l)===47){if(!i){t=l+1;break}}else e===-1&&(i=!1,e=l+1);return e===-1?"":n.slice(t,e)}},extname:function(n){h(n);for(var r=-1,t=0,e=-1,i=!0,l=0,d=n.length-1;d>=0;--d){var p=n.charCodeAt(d);if(p===47){if(!i){t=d+1;break}continue}e===-1&&(i=!1,e=d+1),p===46?r===-1?r=d:l!==1&&(l=1):r!==-1&&(l=-1)}return r===-1||e===-1||l===0||l===1&&r===e-1&&r===t+1?"":n.slice(r,e)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){h(n);var r={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return r;var t=n.charCodeAt(0),e=t===47,i;e?(r.root="/",i=1):i=0;for(var l=-1,d=0,p=-1,g=!0,b=n.length-1,A=0;b>=i;--b){if(t=n.charCodeAt(b),t===47){if(!g){d=b+1;break}continue}p===-1&&(g=!1,p=b+1),t===46?l===-1?l=b:A!==1&&(A=1):l!==-1&&(A=-1)}return l===-1||p===-1||A===0||A===1&&l===p-1&&l===d+1?p!==-1&&(d===0&&e?r.base=r.name=n.slice(1,p):r.base=r.name=n.slice(d,p)):(d===0&&e?(r.name=n.slice(1,l),r.base=n.slice(1,p)):(r.name=n.slice(d,l),r.base=n.slice(d,p)),r.ext=n.slice(l,p)),d>0?r.dir=n.slice(0,d-1):e&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,qr=c,qr}var qr,to,ro,ih=vt(()=>{ye(),be(),me(),Va(),qr={},to=!1,ro=nh()}),za={};lr(za,{URL:()=>tl,Url:()=>Ya,default:()=>gt,fileURLToPath:()=>Ha,format:()=>Ja,parse:()=>el,pathToFileURL:()=>Ga,resolve:()=>Xa,resolveObject:()=>Za});function oh(){if(no)return Vr;no=!0;var f=typeof Map=="function"&&Map.prototype,h=Object.getOwnPropertyDescriptor&&f?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=f&&h&&typeof h.get=="function"?h.get:null,a=f&&Map.prototype.forEach,c=typeof Set=="function"&&Set.prototype,n=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,r=c&&n&&typeof n.get=="function"?n.get:null,t=c&&Set.prototype.forEach,e=typeof WeakMap=="function"&&WeakMap.prototype,i=e?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,d=l?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,g=p?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,A=Object.prototype.toString,S=Function.prototype.toString,O=String.prototype.match,y=String.prototype.slice,v=String.prototype.replace,E=String.prototype.toUpperCase,_=String.prototype.toLowerCase,j=RegExp.prototype.test,w=Array.prototype.concat,P=Array.prototype.join,T=Array.prototype.slice,M=Math.floor,U=typeof BigInt=="function"?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="object",V=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Q||!0)?Symbol.toStringTag:null,he=Object.prototype.propertyIsEnumerable,ie=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(q){return q.__proto__}:null);function ne(q,oe){if(q===1/0||q===-1/0||q!==q||q&&q>-1e3&&q<1e3||j.call(/e/,oe))return oe;var je=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof q=="number"){var Te=q<0?-M(-q):M(q);if(Te!==q){var Ne=String(Te),Ue=y.call(oe,Ne.length+1);return v.call(Ne,je,"$&_")+"."+v.call(v.call(Ue,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(oe,je,"$&_")}var ce=Qa,z=ce.custom,le=X(z)?z:null;Vr=function q(oe,je,Te,Ne){var Ue=je||{};if(de(Ue,"quoteStyle")&&Ue.quoteStyle!=="single"&&Ue.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(de(Ue,"maxStringLength")&&(typeof Ue.maxStringLength=="number"?Ue.maxStringLength<0&&Ue.maxStringLength!==1/0:Ue.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ze=de(Ue,"customInspect")?Ue.customInspect:!0;if(typeof Ze!="boolean"&&Ze!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(de(Ue,"indent")&&Ue.indent!==null&&Ue.indent!=="	"&&!(parseInt(Ue.indent,10)===Ue.indent&&Ue.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(de(Ue,"numericSeparator")&&typeof Ue.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var De=Ue.numericSeparator;if(typeof oe>"u")return"undefined";if(oe===null)return"null";if(typeof oe=="boolean")return oe?"true":"false";if(typeof oe=="string")return fe(oe,Ue);if(typeof oe=="number"){if(oe===0)return 1/0/oe>0?"0":"-0";var Fe=String(oe);return De?ne(oe,Fe):Fe}if(typeof oe=="bigint"){var We=String(oe)+"n";return De?ne(oe,We):We}var Ve=typeof Ue.depth>"u"?5:Ue.depth;if(typeof Te>"u"&&(Te=0),Te>=Ve&&Ve>0&&typeof oe=="object")return Z(oe)?"[Array]":"[Object]";var Qe=N(Ue,Te);if(typeof Ne>"u")Ne=[];else if(ae(Ne,oe)>=0)return"[Circular]";function ze(_t,xt,Pt){if(xt&&(Ne=T.call(Ne),Ne.push(xt)),Pt){var St={depth:Ue.depth};return de(Ue,"quoteStyle")&&(St.quoteStyle=Ue.quoteStyle),q(_t,St,Te+1,Ne)}return q(_t,Ue,Te+1,Ne)}if(typeof oe=="function"&&!Oe(oe)){var nt=G(oe),mt=ge(oe,ze);return"[Function"+(nt?": "+nt:" (anonymous)")+"]"+(mt.length>0?" { "+P.call(mt,", ")+" }":"")}if(X(oe)){var ht=Q?v.call(String(oe),/^(Symbol\(.*\))_[^)]*$/,"$1"):K.call(oe);return typeof oe=="object"&&!Q?o(ht):ht}if(Pe(oe)){for(var R="<"+_.call(String(oe.nodeName)),F=oe.attributes||[],ke=0;ke<F.length;ke++)R+=" "+F[ke].name+"="+B(te(F[ke].value),"double",Ue);return R+=">",oe.childNodes&&oe.childNodes.length&&(R+="..."),R+="</"+_.call(String(oe.nodeName))+">",R}if(Z(oe)){if(oe.length===0)return"[]";var Ce=ge(oe,ze);return Qe&&!C(Ce)?"["+H(Ce,Qe)+"]":"[ "+P.call(Ce,", ")+" ]"}if(J(oe)){var Re=ge(oe,ze);return!("cause"in Error.prototype)&&"cause"in oe&&!he.call(oe,"cause")?"{ ["+String(oe)+"] "+P.call(w.call("[cause]: "+ze(oe.cause),Re),", ")+" }":Re.length===0?"["+String(oe)+"]":"{ ["+String(oe)+"] "+P.call(Re,", ")+" }"}if(typeof oe=="object"&&Ze){if(le&&typeof oe[le]=="function"&&ce)return ce(oe,{depth:Ve-Te});if(Ze!=="symbol"&&typeof oe.inspect=="function")return oe.inspect()}if(ve(oe)){var tt=[];return a&&a.call(oe,function(_t,xt){tt.push(ze(xt,oe,!0)+" => "+ze(_t,oe))}),m("Map",s.call(oe),tt,Qe)}if(Y(oe)){var lt=[];return t&&t.call(oe,function(_t){lt.push(ze(_t,oe))}),m("Set",r.call(oe),lt,Qe)}if(_e(oe))return u("WeakMap");if(Ee(oe))return u("WeakSet");if(xe(oe))return u("WeakRef");if(se(oe))return o(ze(Number(oe)));if(re(oe))return o(ze(U.call(oe)));if(ee(oe))return o(b.call(oe));if(W(oe))return o(ze(String(oe)));if(typeof window<"u"&&oe===window)return"{ [object Window] }";if(typeof globalThis<"u"&&oe===globalThis||typeof zr<"u"&&oe===zr)return"{ [object globalThis] }";if(!ue(oe)&&!Oe(oe)){var wt=ge(oe,ze),Et=ie?ie(oe)===Object.prototype:oe instanceof Object||oe.constructor===Object,Gt=oe instanceof Object?"":"null prototype",Qt=!Et&&V&&Object(oe)===oe&&V in oe?y.call(L(oe),8,-1):Gt?"Object":"",ir=Et||typeof oe.constructor!="function"?"":oe.constructor.name?oe.constructor.name+" ":"",$e=ir+(Qt||Gt?"["+P.call(w.call([],Qt||[],Gt||[]),": ")+"] ":"");return wt.length===0?$e+"{}":Qe?$e+"{"+H(wt,Qe)+"}":$e+"{ "+P.call(wt,", ")+" }"}return String(oe)};function B(q,oe,je){var Te=(je.quoteStyle||oe)==="double"?'"':"'";return Te+q+Te}function te(q){return v.call(String(q),/"/g,"&quot;")}function Z(q){return L(q)==="[object Array]"&&(!V||!(typeof q=="object"&&V in q))}function ue(q){return L(q)==="[object Date]"&&(!V||!(typeof q=="object"&&V in q))}function Oe(q){return L(q)==="[object RegExp]"&&(!V||!(typeof q=="object"&&V in q))}function J(q){return L(q)==="[object Error]"&&(!V||!(typeof q=="object"&&V in q))}function W(q){return L(q)==="[object String]"&&(!V||!(typeof q=="object"&&V in q))}function se(q){return L(q)==="[object Number]"&&(!V||!(typeof q=="object"&&V in q))}function ee(q){return L(q)==="[object Boolean]"&&(!V||!(typeof q=="object"&&V in q))}function X(q){if(Q)return q&&typeof q=="object"&&q instanceof Symbol;if(typeof q=="symbol")return!0;if(!q||typeof q!="object"||!K)return!1;try{return K.call(q),!0}catch{}return!1}function re(q){if(!q||typeof q!="object"||!U)return!1;try{return U.call(q),!0}catch{}return!1}var we=Object.prototype.hasOwnProperty||function(q){return q in(this||zr)};function de(q,oe){return we.call(q,oe)}function L(q){return A.call(q)}function G(q){if(q.name)return q.name;var oe=O.call(S.call(q),/^function\s*([\w$]+)/);return oe?oe[1]:null}function ae(q,oe){if(q.indexOf)return q.indexOf(oe);for(var je=0,Te=q.length;je<Te;je++)if(q[je]===oe)return je;return-1}function ve(q){if(!s||!q||typeof q!="object")return!1;try{s.call(q);try{r.call(q)}catch{return!0}return q instanceof Map}catch{}return!1}function _e(q){if(!i||!q||typeof q!="object")return!1;try{i.call(q,i);try{d.call(q,d)}catch{return!0}return q instanceof WeakMap}catch{}return!1}function xe(q){if(!g||!q||typeof q!="object")return!1;try{return g.call(q),!0}catch{}return!1}function Y(q){if(!r||!q||typeof q!="object")return!1;try{r.call(q);try{s.call(q)}catch{return!0}return q instanceof Set}catch{}return!1}function Ee(q){if(!d||!q||typeof q!="object")return!1;try{d.call(q,d);try{i.call(q,i)}catch{return!0}return q instanceof WeakSet}catch{}return!1}function Pe(q){return!q||typeof q!="object"?!1:typeof HTMLElement<"u"&&q instanceof HTMLElement?!0:typeof q.nodeName=="string"&&typeof q.getAttribute=="function"}function fe(q,oe){if(q.length>oe.maxStringLength){var je=q.length-oe.maxStringLength,Te="... "+je+" more character"+(je>1?"s":"");return fe(y.call(q,0,oe.maxStringLength),oe)+Te}var Ne=v.call(v.call(q,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Me);return B(Ne,"single",oe)}function Me(q){var oe=q.charCodeAt(0),je={8:"b",9:"t",10:"n",12:"f",13:"r"}[oe];return je?"\\"+je:"\\x"+(oe<16?"0":"")+E.call(oe.toString(16))}function o(q){return"Object("+q+")"}function u(q){return q+" { ? }"}function m(q,oe,je,Te){var Ne=Te?H(je,Te):P.call(je,", ");return q+" ("+oe+") {"+Ne+"}"}function C(q){for(var oe=0;oe<q.length;oe++)if(ae(q[oe],`
`)>=0)return!1;return!0}function N(q,oe){var je;if(q.indent==="	")je="	";else if(typeof q.indent=="number"&&q.indent>0)je=P.call(Array(q.indent+1)," ");else return null;return{base:je,prev:P.call(Array(oe+1),je)}}function H(q,oe){if(q.length===0)return"";var je=`
`+oe.prev+oe.base;return je+P.call(q,","+je)+`
`+oe.prev}function ge(q,oe){var je=Z(q),Te=[];if(je){Te.length=q.length;for(var Ne=0;Ne<q.length;Ne++)Te[Ne]=de(q,Ne)?oe(q[Ne],q):""}var Ue=typeof k=="function"?k(q):[],Ze;if(Q){Ze={};for(var De=0;De<Ue.length;De++)Ze["$"+Ue[De]]=Ue[De]}for(var Fe in q)de(q,Fe)&&(je&&String(Number(Fe))===Fe&&Fe<q.length||Q&&Ze["$"+Fe]instanceof Symbol||(j.call(/[^\w$]/,Fe)?Te.push(oe(Fe,q)+": "+oe(q[Fe],q)):Te.push(Fe+": "+oe(q[Fe],q))));if(typeof k=="function")for(var We=0;We<Ue.length;We++)he.call(q,Ue[We])&&Te.push("["+oe(Ue[We])+"]: "+oe(q[Ue[We]],q));return Te}return Vr}function sh(){if(io)return Kr;io=!0;var f=hr(),h=zc(),s=oh(),a=wr(),c=f("%WeakMap%",!0),n=f("%Map%",!0),r=h("WeakMap.prototype.get",!0),t=h("WeakMap.prototype.set",!0),e=h("WeakMap.prototype.has",!0),i=h("Map.prototype.get",!0),l=h("Map.prototype.set",!0),d=h("Map.prototype.has",!0),p=function(S,O){for(var y=S,v;(v=y.next)!==null;y=v)if(v.key===O)return y.next=v.next,v.next=S.next,S.next=v,v},g=function(S,O){var y=p(S,O);return y&&y.value},b=function(S,O,y){var v=p(S,O);v?v.value=y:S.next={key:O,next:S.next,value:y}},A=function(S,O){return!!p(S,O)};return Kr=function(){var S,O,y,v={assert:function(E){if(!v.has(E))throw new a("Side channel does not contain "+s(E))},get:function(E){if(c&&E&&(typeof E=="object"||typeof E=="function")){if(S)return r(S,E)}else if(n){if(O)return i(O,E)}else if(y)return g(y,E)},has:function(E){if(c&&E&&(typeof E=="object"||typeof E=="function")){if(S)return e(S,E)}else if(n){if(O)return d(O,E)}else if(y)return A(y,E);return!1},set:function(E,_){c&&E&&(typeof E=="object"||typeof E=="function")?(S||(S=new c),t(S,E,_)):n?(O||(O=new n),l(O,E,_)):(y||(y={key:{},next:null}),b(y,E,_))}};return v},Kr}function Eo(){if(oo)return Hr;oo=!0;var f=String.prototype.replace,h=/%20/g,s={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Hr={default:s.RFC3986,formatters:{RFC1738:function(a){return f.call(a,h,"+")},RFC3986:function(a){return String(a)}},RFC1738:s.RFC1738,RFC3986:s.RFC3986},Hr}function Ka(){if(so)return Gr;so=!0;var f=Eo(),h=Object.prototype.hasOwnProperty,s=Array.isArray,a=(function(){for(var S=[],O=0;O<256;++O)S.push("%"+((O<16?"0":"")+O.toString(16)).toUpperCase());return S})(),c=function(S){for(;S.length>1;){var O=S.pop(),y=O.obj[O.prop];if(s(y)){for(var v=[],E=0;E<y.length;++E)typeof y[E]<"u"&&v.push(y[E]);O.obj[O.prop]=v}}},n=function(S,O){for(var y=O&&O.plainObjects?Object.create(null):{},v=0;v<S.length;++v)typeof S[v]<"u"&&(y[v]=S[v]);return y},r=function S(O,y,v){if(!y)return O;if(typeof y!="object"){if(s(O))O.push(y);else if(O&&typeof O=="object")(v&&(v.plainObjects||v.allowPrototypes)||!h.call(Object.prototype,y))&&(O[y]=!0);else return[O,y];return O}if(!O||typeof O!="object")return[O].concat(y);var E=O;return s(O)&&!s(y)&&(E=n(O,v)),s(O)&&s(y)?(y.forEach(function(_,j){if(h.call(O,j)){var w=O[j];w&&typeof w=="object"&&_&&typeof _=="object"?O[j]=S(w,_,v):O.push(_)}else O[j]=_}),O):Object.keys(y).reduce(function(_,j){var w=y[j];return h.call(_,j)?_[j]=S(_[j],w,v):_[j]=w,_},E)},t=function(S,O){return Object.keys(O).reduce(function(y,v){return y[v]=O[v],y},S)},e=function(S,O,y){var v=S.replace(/\+/g," ");if(y==="iso-8859-1")return v.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(v)}catch{return v}},i=1024,l=function(S,O,y,v,E){if(S.length===0)return S;var _=S;if(typeof S=="symbol"?_=Symbol.prototype.toString.call(S):typeof S!="string"&&(_=String(S)),y==="iso-8859-1")return escape(_).replace(/%u[0-9a-f]{4}/gi,function(k){return"%26%23"+parseInt(k.slice(2),16)+"%3B"});for(var j="",w=0;w<_.length;w+=i){for(var P=_.length>=i?_.slice(w,w+i):_,T=[],M=0;M<P.length;++M){var U=P.charCodeAt(M);if(U===45||U===46||U===95||U===126||U>=48&&U<=57||U>=65&&U<=90||U>=97&&U<=122||E===f.RFC1738&&(U===40||U===41)){T[T.length]=P.charAt(M);continue}if(U<128){T[T.length]=a[U];continue}if(U<2048){T[T.length]=a[192|U>>6]+a[128|U&63];continue}if(U<55296||U>=57344){T[T.length]=a[224|U>>12]+a[128|U>>6&63]+a[128|U&63];continue}M+=1,U=65536+((U&1023)<<10|P.charCodeAt(M)&1023),T[T.length]=a[240|U>>18]+a[128|U>>12&63]+a[128|U>>6&63]+a[128|U&63]}j+=T.join("")}return j},d=function(S){for(var O=[{obj:{o:S},prop:"o"}],y=[],v=0;v<O.length;++v)for(var E=O[v],_=E.obj[E.prop],j=Object.keys(_),w=0;w<j.length;++w){var P=j[w],T=_[P];typeof T=="object"&&T!==null&&y.indexOf(T)===-1&&(O.push({obj:_,prop:P}),y.push(T))}return c(O),S},p=function(S){return Object.prototype.toString.call(S)==="[object RegExp]"},g=function(S){return!S||typeof S!="object"?!1:!!(S.constructor&&S.constructor.isBuffer&&S.constructor.isBuffer(S))},b=function(S,O){return[].concat(S,O)},A=function(S,O){if(s(S)){for(var y=[],v=0;v<S.length;v+=1)y.push(O(S[v]));return y}return O(S)};return Gr={arrayToObject:n,assign:t,combine:b,compact:d,decode:e,encode:l,isBuffer:g,isRegExp:p,maybeMap:A,merge:r},Gr}function ah(){if(ao)return Qr;ao=!0;var f=sh(),h=Ka(),s=Eo(),a=Object.prototype.hasOwnProperty,c={brackets:function(A){return A+"[]"},comma:"comma",indices:function(A,S){return A+"["+S+"]"},repeat:function(A){return A}},n=Array.isArray,r=Array.prototype.push,t=function(A,S){r.apply(A,n(S)?S:[S])},e=Date.prototype.toISOString,i=s.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:h.encode,encodeValuesOnly:!1,format:i,formatter:s.formatters[i],indices:!1,serializeDate:function(A){return e.call(A)},skipNulls:!1,strictNullHandling:!1},d=function(A){return typeof A=="string"||typeof A=="number"||typeof A=="boolean"||typeof A=="symbol"||typeof A=="bigint"},p={},g=function A(S,O,y,v,E,_,j,w,P,T,M,U,k,K,Q,V,he,ie){for(var ne=S,ce=ie,z=0,le=!1;(ce=ce.get(p))!==void 0&&!le;){var B=ce.get(S);if(z+=1,typeof B<"u"){if(B===z)throw new RangeError("Cyclic object value");le=!0}typeof ce.get(p)>"u"&&(z=0)}if(typeof T=="function"?ne=T(O,ne):ne instanceof Date?ne=k(ne):y==="comma"&&n(ne)&&(ne=h.maybeMap(ne,function(L){return L instanceof Date?k(L):L})),ne===null){if(_)return P&&!V?P(O,l.encoder,he,"key",K):O;ne=""}if(d(ne)||h.isBuffer(ne)){if(P){var te=V?O:P(O,l.encoder,he,"key",K);return[Q(te)+"="+Q(P(ne,l.encoder,he,"value",K))]}return[Q(O)+"="+Q(String(ne))]}var Z=[];if(typeof ne>"u")return Z;var ue;if(y==="comma"&&n(ne))V&&P&&(ne=h.maybeMap(ne,P)),ue=[{value:ne.length>0?ne.join(",")||null:void 0}];else if(n(T))ue=T;else{var Oe=Object.keys(ne);ue=M?Oe.sort(M):Oe}var J=w?O.replace(/\./g,"%2E"):O,W=v&&n(ne)&&ne.length===1?J+"[]":J;if(E&&n(ne)&&ne.length===0)return W+"[]";for(var se=0;se<ue.length;++se){var ee=ue[se],X=typeof ee=="object"&&typeof ee.value<"u"?ee.value:ne[ee];if(!(j&&X===null)){var re=U&&w?ee.replace(/\./g,"%2E"):ee,we=n(ne)?typeof y=="function"?y(W,re):W:W+(U?"."+re:"["+re+"]");ie.set(S,z);var de=f();de.set(p,ie),t(Z,A(X,we,y,v,E,_,j,w,y==="comma"&&V&&n(ne)?null:P,T,M,U,k,K,Q,V,he,de))}}return Z},b=function(A){if(!A)return l;if(typeof A.allowEmptyArrays<"u"&&typeof A.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof A.encodeDotInKeys<"u"&&typeof A.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(A.encoder!==null&&typeof A.encoder<"u"&&typeof A.encoder!="function")throw new TypeError("Encoder has to be a function.");var S=A.charset||l.charset;if(typeof A.charset<"u"&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var O=s.default;if(typeof A.format<"u"){if(!a.call(s.formatters,A.format))throw new TypeError("Unknown format option provided.");O=A.format}var y=s.formatters[O],v=l.filter;(typeof A.filter=="function"||n(A.filter))&&(v=A.filter);var E;if(A.arrayFormat in c?E=A.arrayFormat:"indices"in A?E=A.indices?"indices":"repeat":E=l.arrayFormat,"commaRoundTrip"in A&&typeof A.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var _=typeof A.allowDots>"u"?A.encodeDotInKeys===!0?!0:l.allowDots:!!A.allowDots;return{addQueryPrefix:typeof A.addQueryPrefix=="boolean"?A.addQueryPrefix:l.addQueryPrefix,allowDots:_,allowEmptyArrays:typeof A.allowEmptyArrays=="boolean"?!!A.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:E,charset:S,charsetSentinel:typeof A.charsetSentinel=="boolean"?A.charsetSentinel:l.charsetSentinel,commaRoundTrip:A.commaRoundTrip,delimiter:typeof A.delimiter>"u"?l.delimiter:A.delimiter,encode:typeof A.encode=="boolean"?A.encode:l.encode,encodeDotInKeys:typeof A.encodeDotInKeys=="boolean"?A.encodeDotInKeys:l.encodeDotInKeys,encoder:typeof A.encoder=="function"?A.encoder:l.encoder,encodeValuesOnly:typeof A.encodeValuesOnly=="boolean"?A.encodeValuesOnly:l.encodeValuesOnly,filter:v,format:O,formatter:y,serializeDate:typeof A.serializeDate=="function"?A.serializeDate:l.serializeDate,skipNulls:typeof A.skipNulls=="boolean"?A.skipNulls:l.skipNulls,sort:typeof A.sort=="function"?A.sort:null,strictNullHandling:typeof A.strictNullHandling=="boolean"?A.strictNullHandling:l.strictNullHandling}};return Qr=function(A,S){var O=A,y=b(S),v,E;typeof y.filter=="function"?(E=y.filter,O=E("",O)):n(y.filter)&&(E=y.filter,v=E);var _=[];if(typeof O!="object"||O===null)return"";var j=c[y.arrayFormat],w=j==="comma"&&y.commaRoundTrip;v||(v=Object.keys(O)),y.sort&&v.sort(y.sort);for(var P=f(),T=0;T<v.length;++T){var M=v[T];y.skipNulls&&O[M]===null||t(_,g(O[M],M,j,w,y.allowEmptyArrays,y.strictNullHandling,y.skipNulls,y.encodeDotInKeys,y.encode?y.encoder:null,y.filter,y.sort,y.allowDots,y.serializeDate,y.format,y.formatter,y.encodeValuesOnly,y.charset,P))}var U=_.join(y.delimiter),k=y.addQueryPrefix===!0?"?":"";return y.charsetSentinel&&(y.charset==="iso-8859-1"?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),U.length>0?k+U:""},Qr}function lh(){if(lo)return Yr;lo=!0;var f=Ka(),h=Object.prototype.hasOwnProperty,s=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:f.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},c=function(p){return p.replace(/&#(\d+);/g,function(g,b){return String.fromCharCode(parseInt(b,10))})},n=function(p,g){return p&&typeof p=="string"&&g.comma&&p.indexOf(",")>-1?p.split(","):p},r="utf8=%26%2310003%3B",t="utf8=%E2%9C%93",e=function(p,g){var b={__proto__:null},A=g.ignoreQueryPrefix?p.replace(/^\?/,""):p;A=A.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var S=g.parameterLimit===1/0?void 0:g.parameterLimit,O=A.split(g.delimiter,S),y=-1,v,E=g.charset;if(g.charsetSentinel)for(v=0;v<O.length;++v)O[v].indexOf("utf8=")===0&&(O[v]===t?E="utf-8":O[v]===r&&(E="iso-8859-1"),y=v,v=O.length);for(v=0;v<O.length;++v)if(v!==y){var _=O[v],j=_.indexOf("]="),w=j===-1?_.indexOf("="):j+1,P,T;w===-1?(P=g.decoder(_,a.decoder,E,"key"),T=g.strictNullHandling?null:""):(P=g.decoder(_.slice(0,w),a.decoder,E,"key"),T=f.maybeMap(n(_.slice(w+1),g),function(U){return g.decoder(U,a.decoder,E,"value")})),T&&g.interpretNumericEntities&&E==="iso-8859-1"&&(T=c(T)),_.indexOf("[]=")>-1&&(T=s(T)?[T]:T);var M=h.call(b,P);M&&g.duplicates==="combine"?b[P]=f.combine(b[P],T):(!M||g.duplicates==="last")&&(b[P]=T)}return b},i=function(p,g,b,A){for(var S=A?g:n(g,b),O=p.length-1;O>=0;--O){var y,v=p[O];if(v==="[]"&&b.parseArrays)y=b.allowEmptyArrays&&(S===""||b.strictNullHandling&&S===null)?[]:[].concat(S);else{y=b.plainObjects?Object.create(null):{};var E=v.charAt(0)==="["&&v.charAt(v.length-1)==="]"?v.slice(1,-1):v,_=b.decodeDotInKeys?E.replace(/%2E/g,"."):E,j=parseInt(_,10);!b.parseArrays&&_===""?y={0:S}:!isNaN(j)&&v!==_&&String(j)===_&&j>=0&&b.parseArrays&&j<=b.arrayLimit?(y=[],y[j]=S):_!=="__proto__"&&(y[_]=S)}S=y}return S},l=function(p,g,b,A){if(p){var S=b.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,O=/(\[[^[\]]*])/,y=/(\[[^[\]]*])/g,v=b.depth>0&&O.exec(S),E=v?S.slice(0,v.index):S,_=[];if(E){if(!b.plainObjects&&h.call(Object.prototype,E)&&!b.allowPrototypes)return;_.push(E)}for(var j=0;b.depth>0&&(v=y.exec(S))!==null&&j<b.depth;){if(j+=1,!b.plainObjects&&h.call(Object.prototype,v[1].slice(1,-1))&&!b.allowPrototypes)return;_.push(v[1])}if(v){if(b.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");_.push("["+S.slice(v.index)+"]")}return i(_,g,b,A)}},d=function(p){if(!p)return a;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof p.charset>"u"?a.charset:p.charset,b=typeof p.duplicates>"u"?a.duplicates:p.duplicates;if(b!=="combine"&&b!=="first"&&b!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var A=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:a.allowDots:!!p.allowDots;return{allowDots:A,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:a.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:a.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:a.arrayLimit,charset:g,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:a.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:a.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:a.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:a.decoder,delimiter:typeof p.delimiter=="string"||f.isRegExp(p.delimiter)?p.delimiter:a.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:a.depth,duplicates:b,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:a.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:a.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:a.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:a.strictNullHandling}};return Yr=function(p,g){var b=d(g);if(p===""||p===null||typeof p>"u")return b.plainObjects?Object.create(null):{};for(var A=typeof p=="string"?e(p,b):p,S=b.plainObjects?Object.create(null):{},O=Object.keys(A),y=0;y<O.length;++y){var v=O[y],E=l(v,A[v],b,typeof p=="string");S=f.merge(S,E,b)}return b.allowSparse===!0?S:f.compact(S)},Yr}function uh(){if(uo)return Jr;uo=!0;var f=ah(),h=lh(),s=Eo();return Jr={formats:s,parse:h,stringify:f},Jr}function ch(){if(co)return zt;co=!0;var f=Vt;function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r",`
`,"	"],r=["{","}","|","\\","^","`"].concat(n),t=["'"].concat(r),e=["%","/","?",";","#"].concat(t),i=["/","?","#"],l=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=uh();function O(_,j,w){if(_&&typeof _=="object"&&_ instanceof h)return _;var P=new h;return P.parse(_,j,w),P}h.prototype.parse=function(_,j,w){if(typeof _!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _);var P=_.indexOf("?"),T=P!==-1&&P<_.indexOf("#")?"?":"#",M=_.split(T),U=/\\/g;M[0]=M[0].replace(U,"/"),_=M.join(T);var k=_;if(k=k.trim(),!w&&_.split("#").length===1){var K=c.exec(k);if(K)return this.path=k,this.href=k,this.pathname=K[1],K[2]?(this.search=K[2],j?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):j&&(this.search="",this.query={}),this}var Q=s.exec(k);if(Q){Q=Q[0];var V=Q.toLowerCase();this.protocol=V,k=k.substr(Q.length)}if(w||Q||k.match(/^\/\/[^@/]+@[^@/]+/)){var he=k.substr(0,2)==="//";he&&!(Q&&b[Q])&&(k=k.substr(2),this.slashes=!0)}if(!b[Q]&&(he||Q&&!A[Q])){for(var ie=-1,ne=0;ne<i.length;ne++){var ce=k.indexOf(i[ne]);ce!==-1&&(ie===-1||ce<ie)&&(ie=ce)}var z,le;ie===-1?le=k.lastIndexOf("@"):le=k.lastIndexOf("@",ie),le!==-1&&(z=k.slice(0,le),k=k.slice(le+1),this.auth=decodeURIComponent(z)),ie=-1;for(var ne=0;ne<e.length;ne++){var ce=k.indexOf(e[ne]);ce!==-1&&(ie===-1||ce<ie)&&(ie=ce)}ie===-1&&(ie=k.length),this.host=k.slice(0,ie),k=k.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var B=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!B)for(var te=this.hostname.split(/\./),ne=0,Z=te.length;ne<Z;ne++){var ue=te[ne];if(ue&&!ue.match(d)){for(var Oe="",J=0,W=ue.length;J<W;J++)ue.charCodeAt(J)>127?Oe+="x":Oe+=ue[J];if(!Oe.match(d)){var se=te.slice(0,ne),ee=te.slice(ne+1),X=ue.match(p);X&&(se.push(X[1]),ee.unshift(X[2])),ee.length&&(k="/"+ee.join(".")+k),this.hostname=se.join(".");break}}}this.hostname.length>l?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=f.toASCII(this.hostname));var re=this.port?":"+this.port:"",we=this.hostname||"";this.host=we+re,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!g[V])for(var ne=0,Z=t.length;ne<Z;ne++){var de=t[ne];if(k.indexOf(de)!==-1){var L=encodeURIComponent(de);L===de&&(L=escape(de)),k=k.split(de).join(L)}}var G=k.indexOf("#");G!==-1&&(this.hash=k.substr(G),k=k.slice(0,G));var ae=k.indexOf("?");if(ae!==-1?(this.search=k.substr(ae),this.query=k.substr(ae+1),j&&(this.query=S.parse(this.query)),k=k.slice(0,ae)):j&&(this.search="",this.query={}),k&&(this.pathname=k),A[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",ve=this.search||"";this.path=re+ve}return this.href=this.format(),this};function y(_){return typeof _=="string"&&(_=O(_)),_ instanceof h?_.format():h.prototype.format.call(_)}h.prototype.format=function(){var _=this.auth||"";_&&(_=encodeURIComponent(_),_=_.replace(/%3A/i,":"),_+="@");var j=this.protocol||"",w=this.pathname||"",P=this.hash||"",T=!1,M="";this.host?T=_+this.host:this.hostname&&(T=_+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(T+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(M=S.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var U=this.search||M&&"?"+M||"";return j&&j.substr(-1)!==":"&&(j+=":"),this.slashes||(!j||A[j])&&T!==!1?(T="//"+(T||""),w&&w.charAt(0)!=="/"&&(w="/"+w)):T||(T=""),P&&P.charAt(0)!=="#"&&(P="#"+P),U&&U.charAt(0)!=="?"&&(U="?"+U),w=w.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),U=U.replace("#","%23"),j+T+w+U+P};function v(_,j){return O(_,!1,!0).resolve(j)}h.prototype.resolve=function(_){return this.resolveObject(O(_,!1,!0)).format()};function E(_,j){return _?O(_,!1,!0).resolveObject(j):j}return h.prototype.resolveObject=function(_){if(typeof _=="string"){var j=new h;j.parse(_,!1,!0),_=j}for(var w=new h,P=Object.keys(this),T=0;T<P.length;T++){var M=P[T];w[M]=this[M]}if(w.hash=_.hash,_.href==="")return w.href=w.format(),w;if(_.slashes&&!_.protocol){for(var U=Object.keys(_),k=0;k<U.length;k++){var K=U[k];K!=="protocol"&&(w[K]=_[K])}return A[w.protocol]&&w.hostname&&!w.pathname&&(w.pathname="/",w.path=w.pathname),w.href=w.format(),w}if(_.protocol&&_.protocol!==w.protocol){if(!A[_.protocol]){for(var Q=Object.keys(_),V=0;V<Q.length;V++){var he=Q[V];w[he]=_[he]}return w.href=w.format(),w}if(w.protocol=_.protocol,!_.host&&!b[_.protocol]){for(var Z=(_.pathname||"").split("/");Z.length&&!(_.host=Z.shift()););_.host||(_.host=""),_.hostname||(_.hostname=""),Z[0]!==""&&Z.unshift(""),Z.length<2&&Z.unshift(""),w.pathname=Z.join("/")}else w.pathname=_.pathname;if(w.search=_.search,w.query=_.query,w.host=_.host||"",w.auth=_.auth,w.hostname=_.hostname||_.host,w.port=_.port,w.pathname||w.search){var ie=w.pathname||"",ne=w.search||"";w.path=ie+ne}return w.slashes=w.slashes||_.slashes,w.href=w.format(),w}var ce=w.pathname&&w.pathname.charAt(0)==="/",z=_.host||_.pathname&&_.pathname.charAt(0)==="/",le=z||ce||w.host&&_.pathname,B=le,te=w.pathname&&w.pathname.split("/")||[],Z=_.pathname&&_.pathname.split("/")||[],ue=w.protocol&&!A[w.protocol];if(ue&&(w.hostname="",w.port=null,w.host&&(te[0]===""?te[0]=w.host:te.unshift(w.host)),w.host="",_.protocol&&(_.hostname=null,_.port=null,_.host&&(Z[0]===""?Z[0]=_.host:Z.unshift(_.host)),_.host=null),le=le&&(Z[0]===""||te[0]==="")),z)w.host=_.host||_.host===""?_.host:w.host,w.hostname=_.hostname||_.hostname===""?_.hostname:w.hostname,w.search=_.search,w.query=_.query,te=Z;else if(Z.length)te||(te=[]),te.pop(),te=te.concat(Z),w.search=_.search,w.query=_.query;else if(_.search!=null){if(ue){w.host=te.shift(),w.hostname=w.host;var Oe=w.host&&w.host.indexOf("@")>0?w.host.split("@"):!1;Oe&&(w.auth=Oe.shift(),w.hostname=Oe.shift(),w.host=w.hostname)}return w.search=_.search,w.query=_.query,(w.pathname!==null||w.search!==null)&&(w.path=(w.pathname?w.pathname:"")+(w.search?w.search:"")),w.href=w.format(),w}if(!te.length)return w.pathname=null,w.search?w.path="/"+w.search:w.path=null,w.href=w.format(),w;for(var J=te.slice(-1)[0],W=(w.host||_.host||te.length>1)&&(J==="."||J==="..")||J==="",se=0,ee=te.length;ee>=0;ee--)J=te[ee],J==="."?te.splice(ee,1):J===".."?(te.splice(ee,1),se++):se&&(te.splice(ee,1),se--);if(!le&&!B)for(;se--;se)te.unshift("..");le&&te[0]!==""&&(!te[0]||te[0].charAt(0)!=="/")&&te.unshift(""),W&&te.join("/").substr(-1)!=="/"&&te.push("");var X=te[0]===""||te[0]&&te[0].charAt(0)==="/";if(ue){w.hostname=X?"":te.length?te.shift():"",w.host=w.hostname;var Oe=w.host&&w.host.indexOf("@")>0?w.host.split("@"):!1;Oe&&(w.auth=Oe.shift(),w.hostname=Oe.shift(),w.host=w.hostname)}return le=le||w.host&&te.length,le&&!X&&te.unshift(""),te.length>0?w.pathname=te.join("/"):(w.pathname=null,w.path=null),(w.pathname!==null||w.search!==null)&&(w.path=(w.pathname?w.pathname:"")+(w.search?w.search:"")),w.auth=_.auth||w.auth,w.slashes=w.slashes||_.slashes,w.href=w.format(),w},h.prototype.parseHost=function(){var _=this.host,j=a.exec(_);j&&(j=j[0],j!==":"&&(this.port=j.substr(1)),_=_.substr(0,_.length-j.length)),_&&(this.hostname=_)},zt.parse=O,zt.resolve=v,zt.resolveObject=E,zt.format=y,zt.Url=h,zt}function Ha(f){if(typeof f=="string")f=new URL(f);else if(!(f instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(f.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Zr?hh(f):fh(f)}function hh(f){let h=f.hostname,s=f.pathname;for(let a=0;a<s.length;a++)if(s[a]==="%"){let c=s.codePointAt(a+2)||32;if(s[a+1]==="2"&&c===102||s[a+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(s=s.replace(sl,"\\"),s=decodeURIComponent(s),h!=="")return`\\\\${h}${s}`;{let a=s.codePointAt(1)|32,c=s[2];if(a<il||a>ol||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return s.slice(1)}}function fh(f){if(f.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let h=f.pathname;for(let s=0;s<h.length;s++)if(h[s]==="%"){let a=h.codePointAt(s+2)||32;if(h[s+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(h)}function Ga(f){let h=ro.resolve(f),s=f.charCodeAt(f.length-1);(s===nl||Zr&&s===rl)&&h[h.length-1]!==ro.sep&&(h+="/");let a=new URL("file://");return h.includes("%")&&(h=h.replace(al,"%25")),!Zr&&h.includes("\\")&&(h=h.replace(ll,"%5C")),h.includes(`
`)&&(h=h.replace(ul,"%0A")),h.includes("\r")&&(h=h.replace(cl,"%0D")),h.includes("	")&&(h=h.replace(hl,"%09")),a.pathname=h,a}var Qa,Vr,no,zr,Kr,io,Hr,oo,Gr,so,Qr,ao,Yr,lo,Jr,uo,zt,co,gt,Bs,Ya,Ja,Xa,Za,el,tl,rl,nl,il,ol,Zr,sl,al,ll,ul,cl,hl,ph=vt(()=>{ye(),be(),me(),Tc(),Kc(),ih(),Va(),Qa=Object.freeze(Object.create(null)),Vr={},no=!1,zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Kr={},io=!1,Hr={},oo=!1,Gr={},so=!1,Qr={},ao=!1,Yr={},lo=!1,Jr={},uo=!1,zt={},co=!1,gt=ch(),gt.parse,gt.resolve,gt.resolveObject,gt.format,gt.Url,Bs=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,gt.URL=typeof URL<"u"?URL:null,gt.pathToFileURL=Ga,gt.fileURLToPath=Ha,Ya=gt.Url,Ja=gt.format,Xa=gt.resolve,Za=gt.resolveObject,el=gt.parse,tl=gt.URL,rl=92,nl=47,il=97,ol=122,Zr=Bs==="win32",sl=/\//g,al=/%/g,ll=/\\/g,ul=/\n/g,cl=/\r/g,hl=/\t/g}),dh=Ae((f,h)=>{ye(),be(),me(),h.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Ao=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0}),f.BufferedDuplex=void 0,f.writev=a;var h=nr(),s=(at(),Ge(st));function a(n,r){let t=new Array(n.length);for(let e=0;e<n.length;e++)typeof n[e].chunk=="string"?t[e]=s.Buffer.from(n[e].chunk,"utf8"):t[e]=n[e].chunk;this._write(s.Buffer.concat(t),"binary",r)}var c=class extends h.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(n,r,t){super({objectMode:!0}),this.proxy=r,this.socket=t,this.writeQueue=[],n.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",e=>{!this.destroyed&&this.readable&&this.push(e)})}_read(n){this.proxy.read(n)}_write(n,r,t){this.isSocketOpen?this.writeToProxy(n,r,t):this.writeQueue.push({chunk:n,encoding:r,cb:t})}_final(n){this.writeQueue=[],this.proxy.end(n)}_destroy(n,r){this.writeQueue=[],this.proxy.destroy(),r(n)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(n,r,t){this.proxy.write(n,r)===!1?this.proxy.once("drain",t):t()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:n,encoding:r,cb:t}=this.writeQueue.shift();this.writeToProxy(n,r,t)}}};f.BufferedDuplex=c}),Ar=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(f,"__esModule",{value:!0}),f.streamBuilder=f.browserStreamBuilder=void 0;var s=(at(),Ge(st)),a=h(dh()),c=h(Mt()),n=nr(),r=h(sn()),t=Ao(),e=(0,c.default)("mqttjs:ws"),i=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function l(O,y){let v=`${O.protocol}://${O.hostname}:${O.port}${O.path}`;return typeof O.transformWsUrl=="function"&&(v=O.transformWsUrl(v,O,y)),v}function d(O){let y=O;return O.port||(O.protocol==="wss"?y.port=443:y.port=80),O.path||(y.path="/"),O.wsOptions||(y.wsOptions={}),!r.default&&!O.forceNativeWebSocket&&O.protocol==="wss"&&i.forEach(v=>{Object.prototype.hasOwnProperty.call(O,v)&&!Object.prototype.hasOwnProperty.call(O.wsOptions,v)&&(y.wsOptions[v]=O[v])}),y}function p(O){let y=d(O);if(y.hostname||(y.hostname=y.host),!y.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let v=new URL(document.URL);y.hostname=v.hostname,y.port||(y.port=Number(v.port))}return y.objectMode===void 0&&(y.objectMode=!(y.binary===!0||y.binary===void 0)),y}function g(O,y,v){e("createWebSocket"),e(`protocol: ${v.protocolId} ${v.protocolVersion}`);let E=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";e(`creating new Websocket for url: ${y} and protocol: ${E}`);let _;return v.createWebsocket?_=v.createWebsocket(y,[E],v):_=new a.default(y,[E],v.wsOptions),_}function b(O,y){let v=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt",E=l(y,O),_;return y.createWebsocket?_=y.createWebsocket(E,[v],y):_=new WebSocket(E,[v]),_.binaryType="arraybuffer",_}var A=(O,y)=>{e("streamBuilder");let v=d(y);v.hostname=v.hostname||v.host||"localhost";let E=l(v,O),_=g(O,E,v),j=a.default.createWebSocketStream(_,v.wsOptions);return j.url=E,_.on("close",()=>{j.destroy()}),j};f.streamBuilder=A;var S=(O,y)=>{e("browserStreamBuilder");let v,E=p(y).browserBufferSize||1024*512,_=y.browserBufferTimeout||1e3,j=!y.objectMode,w=b(O,y),P=M(y,V,he);y.objectMode||(P._writev=t.writev.bind(P)),P.on("close",()=>{w.close()});let T=typeof w.addEventListener<"u";w.readyState===w.OPEN?(v=P,v.socket=w):(v=new t.BufferedDuplex(y,P,w),T?w.addEventListener("open",U):w.onopen=U),T?(w.addEventListener("close",k),w.addEventListener("error",K),w.addEventListener("message",Q)):(w.onclose=k,w.onerror=K,w.onmessage=Q);function M(ie,ne,ce){let z=new n.Transform({objectMode:ie.objectMode});return z._write=ne,z._flush=ce,z}function U(){e("WebSocket onOpen"),v instanceof t.BufferedDuplex&&v.socketReady()}function k(ie){e("WebSocket onClose",ie),v.end(),v.destroy()}function K(ie){e("WebSocket onError",ie);let ne=new Error("WebSocket error");ne.event=ie,v.destroy(ne)}async function Q(ie){if(!P||P.destroyed||!P.readable)return;let{data:ne}=ie;ne instanceof ArrayBuffer?ne=s.Buffer.from(ne):ne instanceof Blob?ne=s.Buffer.from(await new Response(ne).arrayBuffer()):ne=s.Buffer.from(ne,"utf8"),P.push(ne)}function V(ie,ne,ce){if(w.bufferedAmount>E){setTimeout(V,_,ie,ne,ce);return}j&&typeof ie=="string"&&(ie=s.Buffer.from(ie,"utf8"));try{w.send(ie)}catch(z){return ce(z)}ce()}function he(ie){w.close(),ie()}return v};f.browserStreamBuilder=S}),xo={};lr(xo,{Server:()=>Xe,Socket:()=>Xe,Stream:()=>Xe,_createServerHandle:()=>Xe,_normalizeArgs:()=>Xe,_setSimultaneousAccepts:()=>Xe,connect:()=>Xe,createConnection:()=>Xe,createServer:()=>Xe,default:()=>fl,isIP:()=>Xe,isIPv4:()=>Xe,isIPv6:()=>Xe});function Xe(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var fl,pl=vt(()=>{ye(),be(),me(),fl={_createServerHandle:Xe,_normalizeArgs:Xe,_setSimultaneousAccepts:Xe,connect:Xe,createConnection:Xe,createServer:Xe,isIP:Xe,isIPv4:Xe,isIPv6:Xe,Server:Xe,Socket:Xe,Stream:Xe}}),dl=Ae((f,h)=>{ye(),be(),me(),h.exports={}}),Ns=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(f,"__esModule",{value:!0});var s=h((pl(),Ge(xo))),a=h(Mt()),c=h(dl()),n=(0,a.default)("mqttjs:tcp"),r=(t,e)=>{if(e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",e.socksProxy)return(0,c.default)(e.hostname,e.port,e.socksProxy,{timeout:e.socksTimeout});let{port:i,path:l}=e,d=e.hostname;return n("port %d and host %s",i,d),s.default.createConnection({port:i,host:d,path:l})};f.default=r}),gl={};lr(gl,{default:()=>yl});var yl,gh=vt(()=>{ye(),be(),me(),yl={}}),Us=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(f,"__esModule",{value:!0});var s=(gh(),Ge(gl)),a=h((pl(),Ge(xo))),c=h(Mt()),n=h(dl()),r=(0,c.default)("mqttjs:tls");function t(i){let{host:l,port:d,socksProxy:p,...g}=i;if(p!==void 0){let b=(0,n.default)(l,d,p,{timeout:i.socksTimeout});return(0,s.connect)({...g,socket:b})}return(0,s.connect)(i)}var e=(i,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",a.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,r("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let d=t(l);d.on("secureConnect",()=>{l.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(g){l.rejectUnauthorized&&i.emit("error",g),d.end()}return d.on("error",p),d};f.default=e}),Ls=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=(at(),Ge(st)),s=nr(),a=Ao(),c,n,r;function t(){let p=new s.Transform;return p._write=(g,b,A)=>{c.send({data:g.buffer,success(){A()},fail(S){A(new Error(S))}})},p._flush=g=>{c.close({success(){g()}})},p}function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function i(p,g){let b=p.protocol==="wxs"?"wss":"ws",A=`${b}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(A=`${b}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(A=p.transformWsUrl(A,p,g)),A}function l(){c.onOpen(()=>{r.socketReady()}),c.onMessage(p=>{let{data:g}=p;g instanceof ArrayBuffer?g=h.Buffer.from(g):g=h.Buffer.from(g,"utf8"),n.push(g)}),c.onClose(()=>{r.emit("close"),r.end(),r.destroy()}),c.onError(p=>{let g=new Error(p.errMsg);r.destroy(g)})}var d=(p,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let b=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";e(g);let A=i(g,p);c=wx.connectSocket({url:A,protocols:[b]}),n=t(),r=new a.BufferedDuplex(g,n,c),r._destroy=(O,y)=>{c.close({success(){y&&y(O)}})};let S=r.destroy;return r.destroy=(O,y)=>(r.destroy=S,setTimeout(()=>{c.close({fail(){r._destroy(O,y)}})},0),r),l(),r};f.default=d}),Ds=Ae(f=>{ye(),be(),me(),Object.defineProperty(f,"__esModule",{value:!0});var h=(at(),Ge(st)),s=nr(),a=Ao(),c,n,r,t=!1;function e(){let g=new s.Transform;return g._write=(b,A,S)=>{c.sendSocketMessage({data:b.buffer,success(){S()},fail(){S(new Error)}})},g._flush=b=>{c.closeSocket({success(){b()}})},g}function i(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function l(g,b){let A=g.protocol==="alis"?"wss":"ws",S=`${A}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(S=`${A}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(S=g.transformWsUrl(S,g,b)),S}function d(){t||(t=!0,c.onSocketOpen(()=>{r.socketReady()}),c.onSocketMessage(g=>{if(typeof g.data=="string"){let b=h.Buffer.from(g.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{if(b.result instanceof ArrayBuffer){n.push(h.Buffer.from(b.result));return}n.push(h.Buffer.from(b.result,"utf-8"))}),b.readAsArrayBuffer(g.data)}}),c.onSocketClose(()=>{r.end(),r.destroy()}),c.onSocketError(g=>{r.destroy(g)}))}var p=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let A=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";i(b);let S=l(b,g);return c=b.my,c.connectSocket({url:S,protocols:A}),n=e(),r=new a.BufferedDuplex(b,n,c),d(),r};f.default=p}),yh=Ae(f=>{ye(),be(),me();var h=f&&f.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(f,"__esModule",{value:!0}),f.connectAsync=l;var s=h(Mt()),a=h((ph(),Ge(za))),c=h(Ai()),n=h(sn());typeof Ye?.nextTick!="function"&&(Ye.nextTick=setImmediate);var r=(0,s.default)("mqttjs"),t=null;function e(d){let p;if(d.auth)if(p=d.auth.match(/^(.+):(.+)$/),p){let[,g,b]=p;d.username=g,d.password=b}else d.username=d.auth}function i(d,p){if(r("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let A=a.default.parse(d,!0),S={};if(A.port!=null&&(S.port=Number(A.port)),S.host=A.hostname,S.query=A.query,S.auth=A.auth,S.protocol=A.protocol,S.path=A.path,p={...S,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||p.protocol?.includes("+unix"),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!p.protocol?.startsWith("ws")&&!p.protocol?.startsWith("wx")&&delete p.path,e(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),n.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Ye<"u"&&(p.socksProxy=Ye.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(t||(t={},!n.default&&!p.forceNativeWebSocket?(t.ws=Ar().streamBuilder,t.wss=Ar().streamBuilder,t.mqtt=Ns().default,t.tcp=Ns().default,t.ssl=Us().default,t.tls=t.ssl,t.mqtts=Us().default):(t.ws=Ar().browserStreamBuilder,t.wss=Ar().browserStreamBuilder,t.wx=Ls().default,t.wxs=Ls().default,t.ali=Ds().default,t.alis=Ds().default)),!t[p.protocol]){let A=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((S,O)=>A&&O%2===0?!1:typeof t[S]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function g(A){return p.servers&&((!A._reconnectCount||A._reconnectCount===p.servers.length)&&(A._reconnectCount=0),p.host=p.servers[A._reconnectCount].host,p.port=p.servers[A._reconnectCount].port,p.protocol=p.servers[A._reconnectCount].protocol?p.servers[A._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,A._reconnectCount++),r("calling streambuilder for",p.protocol),t[p.protocol](A,p)}let b=new c.default(g,p);return b.on("error",()=>{}),b}function l(d,p,g=!0){return new Promise((b,A)=>{let S=i(d,p),O={connect:v=>{y(),b(S)},end:()=>{y(),b(S)},error:v=>{y(),S.end(),A(v)}};g===!1&&(O.close=()=>{O.error(new Error("Couldn't connect to server"))});function y(){Object.keys(O).forEach(v=>{S.off(v,O[v])})}Object.keys(O).forEach(v=>{S.on(v,O[v])})})}f.default=i}),Ws=Ae(f=>{ye(),be(),me();var h=f&&f.__createBinding||(Object.create?function(g,b,A,S){S===void 0&&(S=A);var O=Object.getOwnPropertyDescriptor(b,A);(!O||("get"in O?!b.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return b[A]}}),Object.defineProperty(g,S,O)}:function(g,b,A,S){S===void 0&&(S=A),g[S]=b[A]}),s=f&&f.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),a=f&&f.__importStar||(function(){var g=function(b){return g=Object.getOwnPropertyNames||function(A){var S=[];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(S[S.length]=O);return S},g(b)};return function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var S=g(b),O=0;O<S.length;O++)S[O]!=="default"&&h(A,b,S[O]);return s(A,b),A}})(),c=f&&f.__exportStar||function(g,b){for(var A in g)A!=="default"&&!Object.prototype.hasOwnProperty.call(b,A)&&h(b,g,A)},n=f&&f.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(f,"__esModule",{value:!0}),f.ReasonCodes=f.KeepaliveManager=f.UniqueMessageIdProvider=f.DefaultMessageIdProvider=f.Store=f.MqttClient=f.connectAsync=f.connect=f.Client=void 0;var r=n(Ai());f.MqttClient=r.default;var t=n(ja());f.DefaultMessageIdProvider=t.default;var e=n(Pc());f.UniqueMessageIdProvider=e.default;var i=n(ga());f.Store=i.default;var l=a(yh());f.connect=l.default,Object.defineProperty(f,"connectAsync",{enumerable:!0,get:function(){return l.connectAsync}});var d=n(Da());f.KeepaliveManager=d.default,f.Client=r.default,c(Ai(),f),c(cr(),f);var p=nn();Object.defineProperty(f,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),mh=Ae(f=>{ye(),be(),me();var h=f&&f.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e);var l=Object.getOwnPropertyDescriptor(t,e);(!l||("get"in l?!t.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,i,l)}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),s=f&&f.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),a=f&&f.__importStar||(function(){var r=function(t){return r=Object.getOwnPropertyNames||function(e){var i=[];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(i[i.length]=l);return i},r(t)};return function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=r(t),l=0;l<i.length;l++)i[l]!=="default"&&h(e,t,i[l]);return s(e,t),e}})(),c=f&&f.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&h(t,r,e)};Object.defineProperty(f,"__esModule",{value:!0});var n=a(Ws());f.default=n,c(Ws(),f)});const bh=mh();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/const _h=uu("mqtt",()=>{let f;const h={protocol:location.protocol=="https:"?"wss":"ws",host:location.hostname,port:parseInt(location.port)||(location.protocol=="https:"?443:80),endpoint:"/ws",connectTimeout:4e3,reconnectPeriod:4e3},s=Co({}),a=Co({});function c(){const{protocol:x,host:I,port:$,endpoint:pe,...Ie}=h,qe=`${x}://${I}:${$}${pe}`;try{f=bh.connect(qe,Ie),f.on("connect",()=>{}),f.on("error",He=>{console.error("Client error",He)}),f.on("message",(He,it)=>{if(`${it}${He}`,it.toString().length>0){let ft;try{ft=JSON.parse(it.toString())}catch(Lt){ft=it.toString()}r(He,ft)}else e(He)})}catch(He){console.error("error connecting to broker:",He)}}function n(x,I=void 0){x.includes("#")||x.includes("+")||r(x,I)}function r(x,I){a.value[x]=I}function t(x,I,$=void 0,pe=!1){const Ie=(qe,He,it)=>{const ft=He.split(".");ft.reduce((Lt,Yt,ko)=>ko===ft.length-1?(Lt[Yt]=it,it):Lt[Yt],qe)};x in a.value?($!=null?Ie(a.value[x],$,I):a.value[x]=I,pe&&(a.value[x],b(x,a.value[x]))):console.warn("topic not found",x)}function e(x){x.includes("#")||x.includes("+")?Object.keys(O.value(x)).forEach(I=>{delete a.value[I]}):delete a.value[x]}function i(x,I=void 0){Array.isArray(x)||(x=[x]),x.forEach($=>{d($)==1&&(n($,I),f?f.subscribe(x,{},pe=>{pe&&console.error("Subscribe to topics error",pe)}):console.error("mqttClient is not initialized"))})}function l(x){Array.isArray(x)||(x=[x]),x.forEach(I=>{p(I)<=0&&(e(I),f?f.unsubscribe(I,$=>{$&&console.error("Unsubscribe error",$)}):console.error("mqttClient is not initialized"))})}function d(x){return x in s.value?s.value[x]+=1:s.value[x]=1,s.value[x],s.value[x]}function p(x){let I=0;return x in s.value&&(I=s.value[x]-=1,s.value[x]<=0&&delete s.value[x]),s.value[x],I}function g(x,I,$=!0,pe=2){if(!f){console.error("mqttClient is not initialized");return}const Ie={qos:pe,retain:$};f.publish(x,JSON.stringify(I),Ie,qe=>{qe&&console.error("Publish error",qe)})}function b(x,I=void 0){const $=x.replace("openWB/","openWB/set/");I===void 0&&(I=a.value[x]),g($,I)}function A(x){g("openWB/set/command/"+f?.options.clientId+"/todo",x,!1)}function S(x,I={}){A({command:x,data:I})}const O=Se(()=>(x,I=!1)=>{let $=x;return I?console.warn("auto subscription of regex topic not possible",x):($="^"+x.replaceAll("/","\\/").replaceAll("+","[^+/]+").replaceAll("#","[^#/]+")+"$",Object.keys(s.value).includes(x)||i(x)),Object.keys(a.value).filter(pe=>pe.match($)).reduce((pe,Ie)=>({...pe,[Ie]:a.value[Ie]}),{})}),y=Se(()=>x=>{function I($){let pe=[];return $!==void 0&&$.forEach(Ie=>{Ie.type==x&&pe.push(Ie.id),pe=[...pe,...I(Ie.children)]}),pe}return I(v.value("openWB/counter/get/hierarchy"))}),v=Se(()=>(x,I=void 0,$=void 0)=>{x in s.value||i(x,$);let pe=a.value[x];if(I==null||pe==null)return pe;const Ie=I.split(".");for(let qe=0;qe<Ie.length;qe++){if(!Object.hasOwn(pe,Ie[qe]))return console.error("path not found",pe,Ie[qe]),$;pe=pe[Ie[qe]]}return pe}),E=Se(()=>(x,I="W",$="",pe=!0,Ie=!1,qe="---",He=0)=>{let it=!1,ft=x,Lt=qe;if(x!==void 0){for(Ie&&(ft=x*=-1),Lt=x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});pe&&(ft>999||ft<-999);)switch(ft=ft/1e3,it=!0,$){case"":$="k";break;case"k":$="M";break;case"M":$="G";break}let Yt=0;it?Yt=He>0?He:2:Yt=ft!==Math.floor(ft)?He:0,Lt=ft.toLocaleString(void 0,{minimumFractionDigits:Yt,maximumFractionDigits:Yt})}return{textValue:`${Lt} ${$}${I}`,value:x,unit:I,scaledValue:ft,scaledUnit:`${$}${I}`}}),_=Se(()=>v.value("openWB/general/web_theme","configuration")),j=Se(()=>v.value("openWB/system/version")),w=Se(()=>v.value("openWB/system/ip_address")),P=Se(()=>v.value("openWB/system/current_branch")),T=Se(()=>v.value("openWB/system/current_commit")),M=Se(()=>(x="Date")=>{const I=v.value("openWB/system/time");if(I==null)return;const $=new Date(I*1e3);switch(x){case"locale-string":return $.toLocaleString();case"number":return $.getTime();case"date":default:return $}}),U=Se(()=>y.value("cp")),k=Se(()=>x=>v.value(`openWB/chargepoint/${x}/config`,"name")),K=x=>Se({get(){return v.value(`openWB/chargepoint/${x}/set/manual_lock`)},set(I){return t(`openWB/chargepoint/${x}/set/manual_lock`,I,void 0,!0)}}),Q=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/plug_state`)||!1),V=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/charge_state`)||!1),he=Se(()=>(x="textValue")=>{const I=v.value("openWB/chargepoint/get/power",void 0,0)||0,$=E.value(I);if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),ie=Se(()=>(x="textValue")=>{const I=v.value("openWB/chargepoint/get/daily_imported",void 0,0)||0,$=E.value(I,"Wh");if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),ne=Se(()=>(x="textValue")=>{const I=v.value("openWB/chargepoint/get/daily_exported",void 0,0)||0,$=E.value(I,"Wh");if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),ce=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/chargepoint/${x}/get/power`,void 0,0)||0,pe=E.value($);if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;console.error("returnType not found!",I,$)}),z=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/chargepoint/${x}/get/energy_charged`,void 0,0)||0,pe=E.value($,"Wh");if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;console.error("returnType not found!",I,$)}),le=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/chargepoint/${x}/set/log`,"imported_since_plugged")||0,pe=E.value($,"Wh");if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;console.error("returnType not found!",I,$)}),B=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/phases_in_use`)||0),te=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/chargepoint/${x}/set/current`)||0,pe=E.value($,"A","",!0,!1,"---",2);if(Object.hasOwn(pe,I))return pe[I];console.error("returnType not found!",I,$)}),Z=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/state_str`)),ue=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/fault_str`)),Oe=Se(()=>x=>v.value(`openWB/chargepoint/${x}/get/fault_state`)||0),J=x=>{const I=W(x).value?.id;I!==void 0&&Io(I)},W=x=>Se({get(){return v.value(`openWB/chargepoint/${x}/get/connected_vehicle/info`)},set(I){t(`openWB/chargepoint/${x}/get/connected_vehicle/info`,I,void 0,!1),b(`openWB/chargepoint/${x}/config/ev`,I.id)}}),se=x=>Se({get(){return $e(x).value?.chargemode?.selected},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.selected",!0)}}),ee=x=>Se({get(){return $e(x).value?.chargemode?.instant_charging?.current},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.instant_charging.current",!0)}}),X=Se(()=>v.value("openWB/optional/dc_charging")||0),re=x=>Math.round(x*3*230/1e3),we=x=>Math.round(x*1e3/690),de=x=>Se({get(){const I=$e(x).value?.chargemode?.instant_charging?.dc_current;return I!==void 0?re(I):0},set(I){const $=we(I);return t(`openWB/chargepoint/${x}/set/charge_template`,$,"chargemode.instant_charging.dc_current",!0)}}),L=x=>Se({get(){return $e(x).value?.chargemode?.instant_charging?.phases_to_use},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.instant_charging.phases_to_use",!0)}}),G=x=>Se({get(){return $e(x).value?.chargemode?.instant_charging?.limit?.selected},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.instant_charging.limit.selected",!0)}}),ae=x=>Se({get(){return $e(x).value?.chargemode?.instant_charging?.limit?.soc},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.instant_charging.limit.soc",!0)}}),ve=x=>Se({get(){const I=$e(x).value?.chargemode?.instant_charging?.limit?.amount;return I===void 0?void 0:E.value(I,"Wh","",!0).scaledValue},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I*1e3,"chargemode.instant_charging.limit.amount",!0)}}),_e=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.min_current},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.min_current",!0)}}),xe=x=>Se({get(){const I=$e(x).value?.chargemode?.pv_charging?.dc_min_current;return I!==void 0?re(I):0},set(I){const $=we(I);return t(`openWB/chargepoint/${x}/set/charge_template`,$,"chargemode.pv_charging.dc_min_current",!0)}}),Y=x=>Se({get(){const I=$e(x).value?.chargemode?.pv_charging?.dc_min_soc_current;return I!==void 0?Math.round(I*3*230/1e3):0},set(I){const $=I*1e3/230/3;return t(`openWB/chargepoint/${x}/set/charge_template`,$,"chargemode.pv_charging.dc_min_soc_current",!0)}}),Ee=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.min_soc},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.min_soc",!0)}}),Pe=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.min_soc_current},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.min_soc_current",!0)}}),fe=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.phases_to_use},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.phases_to_use",!0)}}),Me=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.phases_to_use_min_soc},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.phases_to_use_min_soc",!0)}}),o=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.limit?.selected},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.limit.selected",!0)}}),u=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.limit?.soc},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.limit.soc",!0)}}),m=x=>Se({get(){const I=$e(x).value?.chargemode?.pv_charging?.limit?.amount;return I===void 0?void 0:E.value(I,"Wh","",!0).scaledValue},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I*1e3,"chargemode.pv_charging.limit.amount",!0)}}),C=x=>Se({get(){return $e(x).value?.chargemode?.pv_charging?.feed_in_limit},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.pv_charging.feed_in_limit",!0)}}),N=x=>Se({get(){return $e(x).value?.chargemode?.eco_charging?.current},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.eco_charging.current",!0)}}),H=x=>Se({get(){const I=$e(x).value?.chargemode?.eco_charging?.dc_current;return I!==void 0?re(I):0},set(I){const $=we(I);return t(`openWB/chargepoint/${x}/set/charge_template`,$,"chargemode.eco_charging.dc_current",!0)}}),ge=x=>Se({get(){return $e(x).value?.chargemode?.eco_charging?.phases_to_use},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.eco_charging.phases_to_use",!0)}}),q=x=>Se({get(){return $e(x).value?.chargemode?.eco_charging?.limit?.selected},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.eco_charging.limit.selected",!0)}}),oe=x=>Se({get(){return $e(x).value?.chargemode?.eco_charging?.limit?.soc},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"chargemode.eco_charging.limit.soc",!0)}}),je=x=>Se({get(){const I=$e(x).value?.chargemode?.eco_charging?.limit?.amount;return I===void 0?void 0:E.value(I,"Wh","",!0).scaledValue},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I*1e3,"chargemode.eco_charging.limit.amount",!0)}}),Te=x=>Se({get(){const I=$e(x).value?.chargemode?.eco_charging?.max_price;if(I!==void 0)return I*1e5},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,parseFloat((I/1e5).toFixed(7)),"chargemode.eco_charging.max_price",!0)}}),Ne=x=>Se({get(){return $e(x).value?.prio},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"prio",!0)}}),Ue=x=>Se({get(){return $e(x).value?.time_charging.active},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,"time_charging.active",!0)}}),Ze=x=>Se(()=>{const I=Et(x).value.ev_template;return v.value(`openWB/vehicle/template/ev_template/${I}`,"bidi")}),De=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.name},set($){Ve(x,I,"name",$)}}),Fe=x=>{const I=$e(x).value?.id;I!==void 0&&S("addChargeTemplateTimeChargingPlan",{template:I,chargepoint:x,changed_in_theme:!0})},We=(x,I)=>{const $=$e(x).value?.id;S("removeChargeTemplateTimeChargingPlan",{template:$,plan:I,chargepoint:x,changed_in_theme:!0})},Ve=(x,I,$,pe)=>{const qe=ut.value(x).findIndex(it=>it.id===I);if(qe===-1)return;const He=`time_charging.plans.${qe}.${$}`;t(`openWB/chargepoint/${x}/set/charge_template`,pe,He,!0)},Qe=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.active},set($){Ve(x,I,"active",$)}}),ze=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.time?.[0]},set($){Ve(x,I,"time.0",$)}}),nt=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.time?.[1]},set($){Ve(x,I,"time.1",$)}}),mt=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.current},set($){Ve(x,I,"current",$)}}),ht=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.limit?.selected},set($){Ve(x,I,"limit.selected",$)}}),R=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.limit?.soc},set($){Ve(x,I,"limit.soc",$)}}),F=(x,I)=>Se({get(){const Ie=ut.value(x).find(He=>He.id===I)?.limit?.amount;return Ie===void 0?void 0:E.value(Ie,"Wh","",!0).scaledValue},set($){const pe=$*1e3;Ve(x,I,"limit.amount",pe)}}),ke=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.frequency?.selected},set($){Ve(x,I,"frequency.selected",$)}}),Ce=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.frequency?.once?.[0]},set($){Ve(x,I,"frequency.once.0",$)}}),Re=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.frequency?.once?.[1]},set($){Ve(x,I,"frequency.once.1",$)}}),tt=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.phases_to_use},set($){Ve(x,I,"phases_to_use",$)}}),lt=(x,I)=>Se({get(){return ut.value(x).find(Ie=>Ie.id===I)?.frequency?.weekly??Array(7).fill(!1)},set($){Ve(x,I,"frequency.weekly",$)}}),wt=(x,I)=>Se({get(){const Ie=ut.value(x).find(it=>it.id===I)?.dc_current,qe=re(Ie);return E.value(qe,"W","",!0).scaledValue},set($){const pe=we($);Ve(x,I,"dc_current",pe)}}),Et=x=>Se(()=>v.value(`openWB/chargepoint/${x}/get/connected_vehicle/config`)),Gt=x=>Se(()=>v.value(`openWB/chargepoint/${x}/get/connected_vehicle/soc`)),Qt=x=>Se({get(){const pe=`openWB/vehicle/${W(x).value?.id}/soc_module/calculated_soc_state`,Ie=v.value(pe);return Ie?.manual_soc??Ie?.soc_start??0},set(I){const $=W(x).value;if(!$){console.warn("No vehicle connected to charge point",x);return}const pe=$.id;g(`openWB/set/vehicle/${pe}/soc_module/calculated_soc_state/manual_soc`,I);const Ie=`openWB/chargepoint/${x}/get/connected_vehicle/soc`,qe=v.value(Ie);qe&&qe.soc!==void 0&&t(Ie,I,"soc",!0)}}),ir=x=>Se(()=>{const I=W(x).value?.id;if(I!==void 0)return Oo.value(I)}),$e=x=>Se({get(){return v.value(`openWB/chargepoint/${x}/set/charge_template`)},set(I){return t(`openWB/chargepoint/${x}/set/charge_template`,I,void 0,!0)}}),_t=Se(()=>x=>{const I=O.value(`openWB/system/device/+/component/${x}/config`);return Object.keys(I).length===0?`Speicher ${x}`:Object.values(I)[0].name}),xt=Se(()=>x=>v.value(`openWB/bat/${x}/get/soc`)||0),Pt=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/bat/${x}/get/power`,void 0,0)||0,pe=E.value($);if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;if(I==="absoluteTextValue"){const Ie=Math.abs($);return E.value(Ie,"W","",!0).textValue}console.error("returnType not found!",I,$)}),St=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/bat/${x}/get/daily_imported`,void 0,0)||0,pe=E.value($,"Wh","",!0);if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;console.error("returnType not found!",I,$)}),At=Se(()=>(x,I="textValue")=>{const $=v.value(`openWB/bat/${x}/get/daily_exported`,void 0,0)||0,pe=E.value($,"Wh","",!0);if(Object.hasOwn(pe,I))return pe[I];if(I=="object")return pe;console.error("returnType not found!",I,$)}),ml=Se(()=>v.value("openWB/bat/config/configured",void 0)||!1),bl=Se(()=>y.value("bat")||[]),vl=Se(()=>(x="textValue")=>{const I=v.value("openWB/bat/get/power",void 0,0)||0,$=E.value(I);if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),wl=Se(()=>v.value("openWB/bat/get/soc")||0),_l=Se(()=>(x="textValue")=>{const I=v.value("openWB/bat/get/daily_imported")||0,$=E.value(I,"Wh","",!0);if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),Sl=Se(()=>(x="textValue")=>{const I=v.value("openWB/bat/get/daily_exported")||0,$=E.value(I,"Wh","",!0);if(Object.hasOwn($,x))return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),El=()=>Se({get(){return v.value("openWB/general/chargemode_config/pv_charging/bat_mode")||void 0},set(x){return t("openWB/general/chargemode_config/pv_charging/bat_mode",x,void 0,!0)}}),Al=Se(()=>{const x=O.value("openWB/vehicle/+/name"),$=_.value?.hide_standard_vehicle?Object.fromEntries(Object.entries(x).filter(([,pe])=>typeof pe=="string"&&pe!=="Standard-Fahrzeug")):x;return Object.keys($).map(pe=>({id:parseInt(pe.split("/")[2]),name:$[pe]}))}),xl=Se(()=>x=>v.value(`openWB/vehicle/${x}/info`)),Oo=Se(()=>x=>v.value(`openWB/vehicle/${x}/soc_module/config`)?.type),Ol=Se(()=>x=>v.value(`openWB/vehicle/${x}/get/soc`)),Il=(x,I)=>Se({get(){const $=`openWB/vehicle/${x}/soc_module/calculated_soc_state`,pe=v.value($);return pe?.manual_soc??pe?.soc_start??0},set($){if(g(`openWB/set/vehicle/${x}/soc_module/calculated_soc_state/manual_soc`,$),I!==void 0){const pe=`openWB/chargepoint/${I}/get/connected_vehicle/soc`,Ie=v.value(pe);Ie&&Ie.soc!==void 0&&t(pe,$,"soc",!0)}}}),Io=x=>{if(x!==void 0){const I=`openWB/vehicle/${x}/get/force_soc_update`;b(I,1)}},Pl=Se(()=>x=>{const I=O.value("openWB/chargepoint/+/get/connected_vehicle/info");return Object.entries(I).filter(([,pe])=>pe.id===x).map(([pe])=>{const Ie=parseInt(pe.split("/")[2]);return{id:Ie,name:k.value(Ie),plugged:Q.value(Ie),charging:V.value(Ie)}})}),rt=Se(()=>x=>{const I=v.value(`openWB/chargepoint/${x}/set/charge_template`,"chargemode.scheduled_charging.plans");return Array.isArray(I)?I:[]});function kl(x){const I=$e(x).value?.id;I!==void 0?S("addChargeTemplateSchedulePlan",{template:I,chargepoint:x,changed_in_theme:!0}):console.warn("Kein Template fr ChargePoint gefunden:",x)}function Tl(x,I){const $=$e(x).value?.id;$!==void 0?S("removeChargeTemplateSchedulePlan",{template:$,plan:I,chargepoint:x,changed_in_theme:!0}):console.warn("Kein Template fr ChargePoint gefunden:",x)}const ut=Se(()=>x=>{const I=v.value(`openWB/chargepoint/${x}/set/charge_template`,"time_charging.plans");return Array.isArray(I)?I:[]}),Cl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.active},set($){ct(x,I,"active",$)}}),ct=(x,I,$,pe)=>{const qe=rt.value(x).findIndex(it=>it.id===I);if(qe===-1)return;const He=`chargemode.scheduled_charging.plans.${qe}.${$}`;t(`openWB/chargepoint/${x}/set/charge_template`,pe,He,!0)},jl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.et_active},set($){ct(x,I,"et_active",$)}}),Po=x=>Se(()=>{const I=Et(x).value?.current_plan;if(I!==void 0)return{id:I,type:Et(x).value?.time_charging_in_use?"timeCharging":"scheduledCharging",plan:Et(x).value?.time_charging_in_use?ut.value(x).find($=>$.id===I):rt.value(x).find($=>$.id===I)}}),Rl=x=>Se(()=>{const I=Po(x).value;if(I===void 0)return{time:void 0,limit_mode:void 0,limit:void 0};if(I.type==="scheduledCharging"){const pe=I.plan;return{time:pe?.time,limit_mode:pe?.limit.selected,limit:pe?.limit.selected=="soc"?pe.limit.soc_scheduled:pe?.limit.amount}}const $=I.plan;return{time:$?.time[1],limit_mode:$?.limit.selected,limit:$?.limit.selected=="soc"?$?.limit.soc:$?.limit.amount}}),Ml=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.current},set($){ct(x,I,"current",$)}}),Bl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.limit.selected},set($){ct(x,I,"limit.selected",$)}}),Nl=(x,I)=>Se({get(){const Ie=rt.value(x).find(He=>He.id===I)?.limit.amount;return Ie===void 0?void 0:E.value(Ie,"Wh","",!0).scaledValue},set($){const pe=$*1e3;ct(x,I,"limit.amount",pe)}}),Ul=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.name},set($){ct(x,I,"name",$)}}),Ll=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.time},set($){ct(x,I,"time",$)}}),Dl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.frequency.selected},set($){ct(x,I,"frequency.selected",$)}}),Wl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.frequency.once},set($){ct(x,I,"frequency.once",$)}}),Fl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.frequency.weekly},set($){ct(x,I,"frequency.weekly",$)}}),$l=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.limit.soc_limit},set($){ct(x,I,"limit.soc_limit",$)}}),ql=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.limit.soc_scheduled},set($){ct(x,I,"limit.soc_scheduled",$)}}),Vl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.phases_to_use},set($){ct(x,I,"phases_to_use",$)}}),zl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.phases_to_use_pv},set($){ct(x,I,"phases_to_use_pv",$)}}),Kl=(x,I)=>Se({get(){return rt.value(x).find(Ie=>Ie.id===I)?.bidi_charging_enabled},set($){ct(x,I,"bidi_charging_enabled",$)}}),Hl=(x,I)=>Se({get(){const Ie=rt.value(x).find(He=>He.id===I)?.bidi_power;return E.value(Ie,"W","",!0).scaledValue},set($){const pe=Math.round($*1e3);ct(x,I,"bidi_power",pe)}}),Gl=(x,I)=>Se({get(){const Ie=rt.value(x).find(it=>it.id===I)?.dc_current,qe=re(Ie);return E.value(qe,"W","",!0).scaledValue},set($){const pe=we($);ct(x,I,"dc_current",pe)}}),_r=Se(()=>{const x=v.value("openWB/counter/get/hierarchy");if(x&&x.length>0){const I=x[0];if(I.type==="counter")return I.id}}),Ql=Se(()=>x=>{const I=O.value(`openWB/system/device/+/component/${x}/config`);return Object.keys(I).length===0?`Zhler ${x}`:Object.values(I)[0].name}),Yl=Se(()=>(x="textValue")=>{const I=_r.value;if(I===void 0)return"---";const $=v.value(`openWB/counter/${I}/get/power`,void 0,0)||0,pe=E.value($);if(x in pe)return pe[x];if(x=="object")return pe;console.error("returnType not found!",x,$)}),Jl=Se(()=>(x="textValue")=>{const I=_r.value;if(I===void 0)return"---";const $=v.value(`openWB/counter/${I}/get/daily_imported`,void 0,0)||0,pe=E.value($,"Wh");if(x in pe)return pe[x];if(x=="object")return pe;console.error("returnType not found!",x,$)}),Xl=Se(()=>(x="textValue")=>{const I=_r.value;if(I===void 0)return"---";const $=v.value(`openWB/counter/${I}/get/daily_exported`,void 0,0)||0,pe=E.value($,"Wh");if(x in pe)return pe[x];if(x=="object")return pe;console.error("returnType not found!",x,$)}),Zl=Se(()=>(x="textValue")=>{const I=v.value("openWB/counter/set/home_consumption",void 0,0)||0,$=E.value(I);if(x in $)return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),eu=Se(()=>(x="textValue")=>{const I=v.value("openWB/counter/set/daily_yield_home_consumption",void 0,0)||0,$=E.value(I,"Wh");if(x in $)return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),tu=Se(()=>v.value("openWB/pv/config/configured",void 0)||!1),ru=Se(()=>(x="textValue")=>{const I=v.value("openWB/pv/get/power",void 0,0)||0,$=E.value(I);if(x in $)return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),nu=Se(()=>(x="textValue")=>{const I=v.value("openWB/pv/get/daily_exported",void 0,0)||0,$=E.value(I,"Wh");if(x in $)return $[x];if(x=="object")return $;console.error("returnType not found!",x,I)}),iu=Se(()=>{const x=O.value("openWB/graph/+"),I=[];return Object.entries(x).forEach(([$,pe])=>{$.includes("alllivevaluesJson")&&typeof pe=="string"&&pe.split(`
`).forEach(qe=>{if(qe&&qe.startsWith("{")&&qe.endsWith("}")){const He=JSON.parse(qe);I.push(He)}})}),I.sort(($,pe)=>$.timestamp-pe.timestamp)}),ou=Se(()=>v.value("openWB/optional/ep/configured",void 0,!1)||!1),su=Se(()=>v.value("openWB/optional/ep/get/prices",void 0,{}));return{topics:a,subscriptions:s,initialize:c,updateTopic:t,updateState:t,subscribe:i,unsubscribe:l,sendTopicToBroker:b,sendSystemCommand:S,getValue:v,systemVersion:j,systemIp:w,systemBranch:P,systemCommit:T,themeConfiguration:_,systemDateTime:M,chargePointIds:U,chargePointName:k,chargePointManualLock:K,chargePointPlugState:Q,chargePointChargeState:V,chargePointSumPower:he,chargePointDailyImported:ie,chargePointDailyExported:ne,chargePointPower:ce,chargePointEnergyCharged:z,chargePointEnergyChargedPlugged:le,chargePointPhaseNumber:B,chargePointChargingCurrent:te,chargePointStateMessage:Z,chargePointFaultState:Oe,chargePointFaultMessage:ue,dcChargingEnabled:X,chargePointConnectedVehicleInfo:W,chargePointConnectedVehicleForceSocUpdate:J,chargePointConnectedVehicleChargeMode:se,chargePointConnectedVehicleInstantChargeCurrent:ee,chargePointConnectedVehicleInstantDcChargePower:de,chargePointConnectedVehicleInstantChargePhases:L,chargePointConnectedVehicleInstantChargeLimit:G,chargePointConnectedVehicleInstantChargeLimitSoC:ae,chargePointConnectedVehicleInstantChargeLimitEnergy:ve,chargePointConnectedVehiclePvChargeMinCurrent:_e,chargePointConnectedVehiclePvChargePhases:fe,chargePointConnectedVehiclePvChargeLimit:o,chargePointConnectedVehiclePvChargeLimitSoC:u,chargePointConnectedVehiclePvChargeLimitEnergy:m,chargePointConnectedVehiclePvChargeMinSoc:Ee,chargePointConnectedVehiclePvChargeMinSocCurrent:Pe,chargePointConnectedVehiclePvDcChargePower:xe,chargePointConnectedVehiclePvDcMinSocPower:Y,chargePointConnectedVehiclePvChargePhasesMinSoc:Me,chargePointConnectedVehiclePvChargeFeedInLimit:C,chargePointConnectedVehicleEcoChargeCurrent:N,chargePointConnectedVehicleEcoChargeDcPower:H,chargePointConnectedVehicleEcoChargePhases:ge,chargePointConnectedVehicleEcoChargeLimit:q,chargePointConnectedVehicleEcoChargeLimitSoC:oe,chargePointConnectedVehicleEcoChargeLimitEnergy:je,chargePointConnectedVehicleEcoChargeMaxPrice:Te,chargePointConnectedVehiclePriority:Ne,chargePointConnectedVehicleTimeCharging:Ue,chargePointConnectedVehicleChargeTemplate:$e,chargePointConnectedVehicleBidiEnabled:Ze,vehicleList:Al,chargePointConnectedVehicleConfig:Et,vehicleInfo:xl,vehicleConnectionState:Pl,vehicleSocType:Oo,vehicleSocValue:Ol,vehicleSocManualValue:Il,vehicleForceSocUpdate:Io,chargePointConnectedVehicleSoc:Gt,vehicleActivePlan:Po,vehicleChargeTarget:Rl,addScheduledChargingPlanForChargePoint:kl,removeScheduledChargingPlanForChargePoint:Tl,vehicleScheduledChargingPlans:rt,vehicleScheduledChargingPlanActive:Cl,vehicleScheduledChargingPlanEtActive:jl,vehicleScheduledChargingPlanCurrent:Ml,vehicleScheduledChargingPlanLimitSelected:Bl,vehicleScheduledChargingPlanEnergyAmount:Nl,vehicleScheduledChargingPlanName:Ul,vehicleScheduledChargingPlanTime:Ll,vehicleScheduledChargingPlanFrequencySelected:Dl,vehicleScheduledChargingPlanOnceDate:Wl,vehicleScheduledChargingPlanWeeklyDays:Fl,vehicleScheduledChargingPlanSocLimit:$l,vehicleScheduledChargingPlanSocScheduled:ql,vehicleScheduledChargingPlanPhases:Vl,vehicleScheduledChargingPlanPhasesPv:zl,vehicleScheduledChargingPlanBidiEnabled:Kl,vehicleScheduledChargingPlanBidiPower:Hl,vehicleScheduledChargingPlanDcPower:Gl,vehicleTimeChargingPlans:ut,vehicleTimeChargingPlanName:De,addTimeChargingPlanForChargePoint:Fe,removeTimeChargingPlanForChargePoint:We,vehicleTimeChargingPlanActive:Qe,vehicleTimeChargingPlanStartTime:ze,vehicleTimeChargingPlanEndTime:nt,vehicleTimeChargingPlanCurrent:mt,vehicleTimeChargingPlanLimitSelected:ht,vehicleTimeChargingPlanSocLimit:R,vehicleTimeChargingPlanEnergyAmount:F,vehicleTimeChargingPlanFrequencySelected:ke,vehicleTimeChargingPlanOnceDateStart:Ce,vehicleTimeChargingPlanOnceDateEnd:Re,vehicleTimeChargingPlanPhases:tt,vehicleTimeChargingPlanWeeklyDays:lt,vehicleTimeChargingPlanDcPower:wt,chargePointConnectedVehicleSocType:ir,chargePointConnectedVehicleSocManual:Qt,batteryConfigured:ml,batteryIds:bl,batteryName:_t,batterySoc:xt,batteryPower:Pt,batteryDailyImported:St,batteryDailyExported:At,batterySocTotal:wl,batteryDailyImportedTotal:_l,batteryDailyExportedTotal:Sl,batteryTotalPower:vl,batteryMode:El,getGridId:_r,getComponentName:Ql,getGridPower:Yl,gridDailyImported:Jl,gridDailyExported:Xl,getHomePower:Zl,homeDailyYield:eu,getPvConfigured:tu,getPvPower:ru,pvDailyExported:nu,chartData:iu,etProviderConfigured:ou,etPrices:su}});export{_h as u};
