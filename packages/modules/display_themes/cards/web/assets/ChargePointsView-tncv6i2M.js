import{u as W,C as H,N as Q}from"./index-iiy-46X3.js";import{D as Y}from"./DashBoardCard-lVS2Ezfo.js";import{S as $,C as ee}from"./ChargePointPlugBadge-2eCzUPwr.js";import{l as U,b as j,c as O,F as D,j as te,k as ne,m as oe,n as le,o as ie,p as ae,e as re,q as ce,r as se,s as de,t as he,u as ge,v as ue,w as me,x as Ce,y as fe,z as _e,A as pe,B as Pe}from"./vendor-fortawesome-70gKpjfT.js";import{_ as B}from"./vendor-inkline-V11tW55U.js";import{l as d,o as s,n as f,p as o,s as n,z as y,e as C,k as a,F as T,x as h,I as Ve,j as ve,A as M,i as m}from"./vendor-R29x0Zzc.js";U.add(j,O);const Se={name:"ChargePointLockButton",props:{chargePointId:{required:!0,type:Number},changesLocked:{required:!1,type:Boolean,default:!1}},data(){return{mqttStore:W()}},components:{FontAwesomeIcon:D},computed:{locked(){return this.mqttStore.getChargePointManualLock(this.chargePointId)},stateIcon(){return this.locked?["fas","fa-lock"]:["fas","fa-lock-open"]},stateClass(){return this.locked?["_color:danger"]:"_color:success"}},methods:{toggleChargePointManualLock(){this.changesLocked||this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`))}}};function be(i,t,c,g,e,r){const k=d("font-awesome-icon"),b=d("i-button");return s(),f(b,{size:"lg",disabled:c.changesLocked,outline:c.changesLocked},{default:o(()=>[n(k,{"fixed-width":"",icon:r.stateIcon,class:y(r.stateClass),onClick:t[0]||(t[0]=q=>r.toggleChargePointManualLock())},null,8,["icon","class"])]),_:1},8,["disabled","outline"])}const Ie=B(Se,[["render",be]]);U.add(te);const ke={name:"ChargePointCodeButton",props:{chargePointId:{type:Number,required:!0}},data(){return{mqttStore:W(),modalIdTagEntryVisible:!1,modalIdTagEntryColor:"warning",code:""}},components:{FontAwesomeIcon:D,CodeInputModal:H},computed:{tagState(){return this.mqttStore.getChargepointTagState(this.chargePointId)},tagButtonColor(){switch(this.tagState){case 2:return"success";case 1:return"warning";default:return""}},tagClass(){switch(this.tagState){case 2:return"_color:success-80";case 1:return"_color:warning-80";default:return""}}},methods:{toggleIdTagModal(){this.modalIdTagEntryVisible=!this.modalIdTagEntryVisible},sendIdTag(i){this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/get/rfid`,i),this.modalIdTagEntryVisible=!1}}};function qe(i,t,c,g,e,r){const k=d("FontAwesomeIcon"),b=d("i-button"),q=d("CodeInputModal");return s(),C(T,null,[n(b,{onClick:t[0]||(t[0]=_=>r.toggleIdTagModal()),class:"_margin-right:1",size:"lg",color:r.tagButtonColor,disabled:r.tagState==2},{default:o(()=>[n(k,{"fixed-width":"",icon:["fas","fa-calculator"],class:y(r.tagClass)},null,8,["class"])]),_:1},8,["color","disabled"]),n(q,{modelValue:e.modalIdTagEntryVisible,"onUpdate:modelValue":t[1]||(t[1]=_=>e.modalIdTagEntryVisible=_),"onUpdate:inputValue":r.sendIdTag,ref:"lockInput",minLength:4,maxLength:20},{header:o(()=>[a(" Bitte einen ID-Tag eingeben. ")]),_:1},8,["modelValue","onUpdate:inputValue"])],64)}const ye=B(ke,[["render",qe]]),we={name:"ExtendedNumberInput",inheritAttrs:!1,props:{modelValue:{type:Number},unit:{type:String},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},labels:{type:Array}},emits:["update:modelValue"],data(){return{minimum:this.labels?0:this.min,maximum:this.labels?this.labels.length-1:this.max,stepSize:this.labels?1:this.step}},computed:{label(){var i;return this.labels&&this.inputValue!=null?this.inputValue<this.labels.length?i=this.labels[this.inputValue].label:console.error("index out of bounds: "+this.inputValue):i=this.inputValue,typeof i=="number"&&(i=i.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision})),i},precision(){if(!isFinite(this.stepSize))return 0;for(var i=1,t=0;Math.round(this.stepSize*i)/i!==this.stepSize;)i*=10,t++;return t},inputValue:{get(){if(this.labels){var i=void 0;for(let t=0;t<this.labels.length;t++)if(this.labels[t].value==this.modelValue){i=t;break}return i===void 0&&this.modelValue!==void 0?(console.warn("inputValue: not found in values: ",this.modelValue,"using minimum as default: ",this.minimum),this.minimum):i}return this.modelValue},set(i){if(this.labels){var t=this.labels[i].value;this.$emit("update:modelValue",t)}else this.$emit("update:modelValue",i)}}},methods:{increment(){var i=Math.min(this.inputValue+this.stepSize,this.maximum);this.inputValue=Math.round(i*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var i=Math.max(this.inputValue-this.stepSize,this.minimum);this.inputValue=Math.round(i*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}};function Te(i,t,c,g,e,r){const k=d("i-button"),b=d("i-input");return s(),f(b,{plaintext:"",class:"_text-align:right",size:"lg",modelValue:r.label,"onUpdate:modelValue":t[0]||(t[0]=q=>r.label=q)},{prepend:o(()=>[n(k,{onClick:r.decrement},{default:o(()=>[a("-")]),_:1},8,["onClick"])]),suffix:o(()=>[a(h(c.unit),1)]),append:o(()=>[n(k,{onClick:r.increment},{default:o(()=>[a("+")]),_:1},8,["onClick"])]),_:1},8,["modelValue"])}const R=B(we,[["render",Te]]),xe={name:"ManualSocInput",props:{modelValue:{required:!0,type:Boolean,default:!1},vehicleId:{required:!0,type:Number,default:0}},data(){return{mqttStore:W(),newSoc:0}},components:{ExtendedNumberInput:R,NumberPad:Q},emits:["update:modelValue"],methods:{enter(i){let t=this.newSoc*10+parseInt(i);t>=0&&t<=100&&(this.newSoc=t)},removeDigit(){this.newSoc=Math.trunc(this.newSoc/10)},clear(){this.newSoc=0},close(){this.$emit("update:modelValue",!1),this.newSoc=0},updateManualSoc(){this.$root.sendTopicToBroker(`openWB/vehicle/${this.vehicleId}/soc_module/calculated_soc_state/manual_soc`,this.newSoc),this.close()}}};function Le(i,t,c,g,e,r){const k=d("extended-number-input"),b=d("i-column"),q=d("i-row"),_=d("NumberPad"),v=d("i-container"),A=d("i-button"),u=d("i-modal");return s(),f(Ve,{to:"body"},[n(u,{modelValue:c.modelValue,"onUpdate:modelValue":t[6]||(t[6]=S=>i.$emit("update:modelValue",S)),size:"sm"},{header:o(()=>[a(' SoC für Fahrzeug "'+h(e.mqttStore.getVehicleName(c.vehicleId))+'" ',1)]),footer:o(()=>[n(v,null,{default:o(()=>[n(q,null,{default:o(()=>[n(b,null,{default:o(()=>[n(A,{color:"danger",onClick:t[4]||(t[4]=S=>r.close())},{default:o(()=>[a(" Zurück ")]),_:1})]),_:1}),n(b,{class:"_text-align:right"},{default:o(()=>[n(A,{color:"success",onClick:t[5]||(t[5]=S=>r.updateManualSoc())},{default:o(()=>[a(" OK ")]),_:1})]),_:1})]),_:1})]),_:1})]),default:o(()=>[n(v,null,{default:o(()=>[n(q,{center:"",class:"_padding-bottom:1"},{default:o(()=>[n(b,null,{default:o(()=>[n(k,{modelValue:e.newSoc,"onUpdate:modelValue":t[0]||(t[0]=S=>e.newSoc=S),unit:"%",min:0,max:100,step:1,size:"lg",class:"_text-align:center"},null,8,["modelValue"])]),_:1})]),_:1}),n(_,{"onKey:digit":t[1]||(t[1]=S=>r.enter(S)),"onKey:clear":t[2]||(t[2]=S=>r.clear()),"onKey:delete":t[3]||(t[3]=S=>r.removeDigit())})]),_:1})]),_:1},8,["modelValue"])])}const Me=B(xe,[["render",Le]]);U.add(ne,oe,le,ie,j,O,ae,re,ce,se,de,he,ge,ue,me,Ce,fe,_e,pe,Pe);const Be={name:"ChargePointsView",data(){return{mqttStore:W(),modalChargeModeSettingVisible:!1,modalVehicleSelectVisible:!1,modalChargePointSettingsVisible:!1,modalChargePointId:0,modalVehicleId:0,modalActiveTab:"tab-general",modalManualSocInputVisible:!1}},props:{changesLocked:{required:!1,type:Boolean,default:!1}},components:{DashBoardCard:Y,SparkLine:$,ChargePointPlugBadge:ee,ChargePointLockButton:Ie,ChargePointCodeButton:ye,ExtendedNumberInput:R,ManualSocInput:Me,FontAwesomeIcon:D},watch:{changesLocked(i,t){t!==!0&&i===!0&&(this.modalChargeModeSettingVisible=!1,this.modalVehicleSelectVisible=!1,this.modalChargePointSettingsVisible=!1,this.modalManualSocInputVisible=!1)}},computed:{vehicleList(){let i=this.mqttStore.getVehicleList;var t=[];return Object.keys(i).forEach(c=>{let g=parseInt(c.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""));t.push({id:g,name:i[c]})}),t}},methods:{toggleChargePointSettings(i){switch(this.mqttStore.getChargePointConnectedVehicleChargeMode(i).mode){case"pv_charging":this.modalActiveTab="tab-pv-charging";break;case"scheduled_charging":this.modalActiveTab="tab-scheduled-charging";break;default:this.modalActiveTab="tab-instant-charging"}this.modalChargePointId=i,this.modalChargePointSettingsVisible=!0},handleChargeModeClick(i){this.changesLocked||(this.modalChargePointId=i,this.modalChargeModeSettingVisible=!0)},handleVehicleClick(i){!this.changesLocked&&this.mqttStore.getChargePointVehicleChangePermitted(i)&&(this.modalChargePointId=i,this.modalVehicleSelectVisible=!0)},handleSocClick(i){let t=this.mqttStore.getChargePointConnectedVehicleId(i);if(this.mqttStore.getVehicleSocIsManual(t)){this.modalVehicleId=t,this.modalManualSocInputVisible=!0;return}this.$root.sendTopicToBroker(`openWB/set/vehicle/${t}/get/force_soc_update`,1)},setChargePointConnectedVehicle(i,t){t.id!=this.mqttStore.getChargePointConnectedVehicleId(i)&&this.$root.sendTopicToBroker(`openWB/chargepoint/${i}/config/ev`,t.id),this.modalVehicleSelectVisible&&(this.modalVehicleSelectVisible=!1)},setChargePointConnectedVehicleChargeMode(i,t){if(t.id!=this.mqttStore.getChargePointConnectedVehicleChargeMode(i)){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/selected`,t)}},setChargePointConnectedVehiclePriority(i,t){if(t!=this.mqttStore.getChargePointConnectedVehiclePriority(i)){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/prio`,t)}},setChargePointConnectedVehicleTimeChargingActive(i,t){if(t!=this.mqttStore.getChargePointConnectedVehicleTimeChargingActive(i)){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/time_charging/active`,t)}},setChargePointConnectedVehicleInstantChargingCurrent(i,t){if(t&&t!=this.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(i)){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/instant_charging/current`,parseFloat(t))}},setChargePointConnectedVehicleInstantChargingLimit(i,t){if(t&&t!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(i).selected){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/instant_charging/limit/selected`,t)}},setChargePointConnectedVehicleInstantChargingLimitSoc(i,t){if(t&&t!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(i).soc){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/instant_charging/limit/soc`,parseInt(t))}},setChargePointConnectedVehicleInstantChargingLimitAmount(i,t){if(t&&t!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(i).amount){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/instant_charging/limit/amount`,t)}},setChargePointConnectedVehiclePvChargingFeedInLimit(i,t){if(t!=this.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(i)){var c=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${c}/chargemode/pv_charging/feed_in_limit`,t)}},setChargePointConnectedVehiclePvChargingMinCurrent(i,t){let c=this.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(i),g=parseInt(t);if(g!=c&&!isNaN(g)){var e=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${e}/chargemode/pv_charging/min_current`,g)}},setChargePointConnectedVehiclePvChargingMinSoc(i,t){let c=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(i),g=parseInt(t);if(g!=c&&!isNaN(g)){var e=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${e}/chargemode/pv_charging/min_soc`,g)}},setChargePointConnectedVehiclePvChargingMinSocCurrent(i,t){let c=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(i),g=parseInt(t);if(g!=c&&!isNaN(g)){var e=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${e}/chargemode/pv_charging/min_soc_current`,g)}},setChargePointConnectedVehiclePvChargingMaxSoc(i,t){let c=this.mqttStore.getChargePointConnectedVehiclePvChargingMaxSoc(i),g=parseInt(t);if(g!=c&&!isNaN(g)){var e=this.mqttStore.getChargePointConnectedVehicleChargeTemplateIndex(i);this.$root.sendTopicToBroker(`openWB/vehicle/template/charge_template/${e}/chargemode/pv_charging/max_soc`,g)}},setChargePointConnectedVehicleScheduledChargingPlanActive(i,t){this.$root.sendTopicToBroker(`${i}/active`,t)},setChargePointConnectedVehicleTimeChargingPlanActive(i,t){this.$root.sendTopicToBroker(`${i}/active`,t)}}},Ae={class:"charge-points-card-wrapper"},Ne={key:0},ze={key:0},We={key:1},Fe={key:2},Ee={key:3},Ue={key:4},De={key:0},Ze={key:1},je={key:0},Oe={key:1},Re={key:2},Je={key:3},Ke={key:4};function Xe(i,t,c,g,e,r){const k=d("charge-point-plug-badge"),b=d("charge-point-code-button"),q=d("charge-point-lock-button"),_=d("i-column"),v=d("i-row"),A=d("spark-line"),u=d("font-awesome-icon"),S=d("i-badge"),p=d("i-button"),F=d("i-container"),J=d("dash-board-card"),V=d("i-form-label"),x=d("i-button-group"),P=d("i-form-group"),L=d("i-form"),E=d("i-modal"),N=d("i-tab-title"),w=d("extended-number-input"),z=d("i-tab"),Z=d("i-alert"),K=d("i-tabs"),X=d("manual-soc-input");return s(),C(T,null,[ve("div",Ae,[(s(!0),C(T,null,M(e.mqttStore.getChargePointIds,l=>(s(),f(J,{key:l,color:"primary"},{headerLeft:o(()=>[a(h(e.mqttStore.getChargePointName(l)),1)]),headerRight:o(()=>[n(k,{chargePointId:[l]},null,8,["chargePointId"])]),default:o(()=>[n(F,null,{default:o(()=>[n(v,null,{default:o(()=>[n(_,null,{default:o(()=>[n(v,null,{default:o(()=>[n(_,{class:"_padding-left:0 _padding-right:0"},{default:o(()=>[e.mqttStore.getRfidEnabled?(s(),f(b,{key:0,chargePointId:l},null,8,["chargePointId"])):m("",!0),n(q,{chargePointId:l,changesLocked:c.changesLocked},null,8,["chargePointId","changesLocked"])]),_:2},1024),n(_,{class:"_text-align:right _padding-left:0"},{default:o(()=>[a(h(e.mqttStore.getChargePointPower(l))+" "+h(e.mqttStore.getChargePointPhasesInUse(l))+" "+h(e.mqttStore.getChargePointSetCurrent(l)),1)]),_:2},1024)]),_:2},1024),n(v,{class:"_padding-top:1"},{default:o(()=>[n(_,{class:"_padding-left:0"},{default:o(()=>[n(A,{color:"var(--color--primary)",data:e.mqttStore.getChargePointPowerChartData(l)},null,8,["data"])]),_:2},1024)]),_:2},1024)]),_:2},1024),n(_,{md:"6"},{default:o(()=>[n(v,{class:"_display:flex"},{default:o(()=>[n(_,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:o(()=>[n(S,{size:"lg",class:y(["full-width",c.changesLocked?"":"clickable"]),disabled:!e.mqttStore.getChargePointVehicleChangePermitted(e.modalChargePointId),onClick:I=>r.handleVehicleClick(l)},{default:o(()=>[n(u,{"fixed-width":"",icon:["fas","fa-car"]}),a(" "+h(e.mqttStore.getChargePointConnectedVehicleName(l)),1)]),_:2},1032,["class","disabled","onClick"])]),_:2},1024),e.mqttStore.getVehicleSocConfigured(e.mqttStore.getChargePointConnectedVehicleId(l))||e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))!=0?(s(),f(_,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:o(()=>[n(p,{size:"sm",disabled:c.changesLocked,class:y(c.changesLocked?"":"clickable"),onClick:I=>r.handleSocClick(l)},{default:o(()=>[e.mqttStore.getVehicleSocConfigured(e.mqttStore.getChargePointConnectedVehicleId(l))?(s(),C("span",Ne,[n(u,{"fixed-width":"",icon:e.mqttStore.getVehicleSocIsManual(e.mqttStore.getChargePointConnectedVehicleId(l))?["fas","fa-edit"]:["fas","fa-car-battery"]},null,8,["icon"]),a(" "+h(e.mqttStore.getChargePointConnectedVehicleSoc(l).soc)+"% ",1)])):m("",!0),e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))!=0?(s(),f(u,{key:1,"fixed-width":"",icon:e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:y(e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(l))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):m("",!0)]),_:2},1032,["disabled","class","onClick"])]),_:2},1024)):m("",!0)]),_:2},1024),n(v,{class:"_padding-top:1 _display:flex"},{default:o(()=>[n(_,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:o(()=>[n(S,{size:"lg",class:y(["full-width",c.changesLocked?"":"clickable"]),color:e.mqttStore.getChargePointConnectedVehicleChargeMode(l).class,onClick:I=>r.handleChargeModeClick(l)},{default:o(()=>[a(h(e.mqttStore.getChargePointConnectedVehicleChargeMode(l).label)+" ",1),n(u,{"fixed-width":"",icon:e.mqttStore.getChargePointConnectedVehiclePriority(l)?["fas","fa-star"]:["far","fa-star"],class:y(e.mqttStore.getChargePointConnectedVehiclePriority(l)?"_color:warning":"")},null,8,["icon","class"])]),_:2},1032,["class","color","onClick"])]),_:2},1024),e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(l)?(s(),f(_,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:o(()=>[n(S,{size:"lg"},{default:o(()=>[e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(l)?(s(),f(u,{key:0,"fixed-width":"",icon:e.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(l)?["fas","fa-clock"]:["far","fa-clock"],class:y(e.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(l)?"_color:success":"")},null,8,["icon","class"])):m("",!0)]),_:2},1024)]),_:2},1024)):m("",!0)]),_:2},1024),c.changesLocked?m("",!0):(s(),f(v,{key:0,class:"_padding-top:1"},{default:o(()=>[n(_,{class:"_padding-left:0 _padding-right:0"},{default:o(()=>[n(p,{block:"",onClick:I=>r.toggleChargePointSettings(l)},{default:o(()=>[n(u,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),n(E,{modelValue:e.modalChargeModeSettingVisible,"onUpdate:modelValue":t[2]||(t[2]=l=>e.modalChargeModeSettingVisible=l),size:"lg"},{header:o(()=>[a(' Lademodus für "'+h(e.mqttStore.getChargePointConnectedVehicleName(e.modalChargePointId))+'" auswählen ',1)]),default:o(()=>[n(L,null,{default:o(()=>[n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Lademodus")]),_:1}),n(x,{block:""},{default:o(()=>[(s(!0),C(T,null,M(e.mqttStore.chargeModeList(),l=>(s(),f(p,{key:l.id,outline:"",color:l.class!="dark"?l.class:"light",active:e.mqttStore.getChargePointConnectedVehicleChargeMode(e.modalChargePointId)!=null&&l.id==e.mqttStore.getChargePointConnectedVehicleChargeMode(e.modalChargePointId).mode,onClick:I=>r.setChargePointConnectedVehicleChargeMode(e.modalChargePointId,l.id)},{default:o(()=>[a(h(l.label),1)]),_:2},1032,["color","active","onClick"]))),128))]),_:1})]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Priorität")]),_:1}),n(x,{block:""},{default:o(()=>[n(p,{color:e.mqttStore.getChargePointConnectedVehiclePriority(e.modalChargePointId)!==!0?"danger":"",onClick:t[0]||(t[0]=l=>r.setChargePointConnectedVehiclePriority(e.modalChargePointId,!1))},{default:o(()=>[a(" Nein ")]),_:1},8,["color"]),n(p,{color:e.mqttStore.getChargePointConnectedVehiclePriority(e.modalChargePointId)===!0?"success":"",onClick:t[1]||(t[1]=l=>r.setChargePointConnectedVehiclePriority(e.modalChargePointId,!0))},{default:o(()=>[a(" Ja ")]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(E,{class:"modal-vehicle-select",modelValue:e.modalVehicleSelectVisible,"onUpdate:modelValue":t[3]||(t[3]=l=>e.modalVehicleSelectVisible=l),size:"lg"},{header:o(()=>[a(' Fahrzeug an "'+h(e.mqttStore.getChargePointName(e.modalChargePointId))+'" auswählen ',1)]),default:o(()=>[n(L,null,{default:o(()=>[n(P,null,{default:o(()=>[n(x,{vertical:"",block:""},{default:o(()=>[(s(!0),C(T,null,M(r.vehicleList,l=>(s(),f(p,{key:l.id,active:e.mqttStore.getChargePointConnectedVehicleId(e.modalChargePointId)==l.id,color:e.mqttStore.getChargePointConnectedVehicleId(e.modalChargePointId)==l.id?"primary":"",onClick:I=>r.setChargePointConnectedVehicle(e.modalChargePointId,l)},{default:o(()=>[a(h(l.name),1)]),_:2},1032,["active","color","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(E,{modelValue:e.modalChargePointSettingsVisible,"onUpdate:modelValue":t[19]||(t[19]=l=>e.modalChargePointSettingsVisible=l),size:"lg"},{header:o(()=>[a(' Einstellungen für Ladepunkt "'+h(e.mqttStore.getChargePointName(e.modalChargePointId))+'" ',1)]),default:o(()=>[n(K,{modelValue:e.modalActiveTab,"onUpdate:modelValue":t[18]||(t[18]=l=>e.modalActiveTab=l),stretch:""},{header:o(()=>[n(N,{for:"tab-instant-charging"},{default:o(()=>[a(" Sofort ")]),_:1}),n(N,{for:"tab-pv-charging"},{default:o(()=>[a(" PV ")]),_:1}),n(N,{for:"tab-scheduled-charging"},{default:o(()=>[a(" Zielladen ")]),_:1}),n(N,{for:"tab-time-charging"},{default:o(()=>[a(" Zeitladen ")]),_:1})]),default:o(()=>[n(z,{name:"tab-instant-charging"},{default:o(()=>[n(L,null,{default:o(()=>[n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Stromstärke")]),_:1}),n(w,{unit:"A",min:6,max:32,"model-value":e.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(e.modalChargePointId),"onUpdate:modelValue":t[4]||(t[4]=l=>r.setChargePointConnectedVehicleInstantChargingCurrent(e.modalChargePointId,l))},null,8,["model-value"])]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Begrenzung")]),_:1}),n(x,{block:""},{default:o(()=>[n(p,{color:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="none"?"primary":"",active:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="none",onClick:t[5]||(t[5]=l=>r.setChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId,"none"))},{default:o(()=>[a(" Keine ")]),_:1},8,["color","active"]),n(p,{color:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="soc"?"primary":"",active:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="soc",onClick:t[6]||(t[6]=l=>r.setChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId,"soc"))},{default:o(()=>[a(" EV-SoC ")]),_:1},8,["color","active"]),n(p,{color:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="amount"?"primary":"",active:e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="amount",onClick:t[7]||(t[7]=l=>r.setChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId,"amount"))},{default:o(()=>[a(" Energie ")]),_:1},8,["color","active"])]),_:1})]),_:1}),e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="soc"?(s(),f(P,{key:0},{default:o(()=>[n(V,null,{default:o(()=>[a("Max. SoC")]),_:1}),n(w,{unit:"%",min:5,max:100,step:5,"model-value":e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).soc,"onUpdate:modelValue":t[8]||(t[8]=l=>r.setChargePointConnectedVehicleInstantChargingLimitSoc(e.modalChargePointId,l))},null,8,["model-value"])]),_:1})):m("",!0),e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).selected=="amount"?(s(),f(P,{key:1},{default:o(()=>[n(V,null,{default:o(()=>[a("Max. Energie")]),_:1}),n(w,{unit:"kWh",min:1,max:100,"model-value":e.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(e.modalChargePointId).amount/1e3,"onUpdate:modelValue":t[9]||(t[9]=l=>r.setChargePointConnectedVehicleInstantChargingLimitAmount(e.modalChargePointId,l*1e3))},null,8,["model-value"])]),_:1})):m("",!0)]),_:1})]),_:1}),n(z,{name:"tab-pv-charging"},{default:o(()=>[n(L,null,{default:o(()=>[n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Einspeisegrenze beachten")]),_:1}),n(x,{block:""},{default:o(()=>[n(p,{color:e.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(e.modalChargePointId)!==!0?"danger":"",onClick:t[10]||(t[10]=l=>r.setChargePointConnectedVehiclePvChargingFeedInLimit(e.modalChargePointId,!1))},{default:o(()=>[a(" Nein ")]),_:1},8,["color"]),n(p,{color:e.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(e.modalChargePointId)===!0?"success":"",onClick:t[11]||(t[11]=l=>r.setChargePointConnectedVehiclePvChargingFeedInLimit(e.modalChargePointId,!0))},{default:o(()=>[a(" Ja ")]),_:1},8,["color"])]),_:1})]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Minimaler Dauerstrom")]),_:1}),n(w,{unit:"A",labels:[{label:"Aus",value:0},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16}],"model-value":e.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(e.modalChargePointId),"onUpdate:modelValue":t[12]||(t[12]=l=>r.setChargePointConnectedVehiclePvChargingMinCurrent(e.modalChargePointId,l))},null,8,["model-value"])]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Mindest-SoC")]),_:1}),n(w,{unit:"%",labels:[{label:"Aus",value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95}],"model-value":e.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(e.modalChargePointId),"onUpdate:modelValue":t[13]||(t[13]=l=>r.setChargePointConnectedVehiclePvChargingMinSoc(e.modalChargePointId,l))},null,8,["model-value"])]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Mindest-SoC Strom")]),_:1}),n(w,{min:6,max:32,unit:"A","model-value":e.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(e.modalChargePointId),"onUpdate:modelValue":t[14]||(t[14]=l=>r.setChargePointConnectedVehiclePvChargingMinSocCurrent(e.modalChargePointId,l))},null,8,["model-value"])]),_:1}),n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("SoC-Limit")]),_:1}),n(w,{unit:"%",labels:[{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95},{label:100,value:100},{label:"Aus",value:101}],"model-value":e.mqttStore.getChargePointConnectedVehiclePvChargingMaxSoc(e.modalChargePointId),"onUpdate:modelValue":t[15]||(t[15]=l=>r.setChargePointConnectedVehiclePvChargingMaxSoc(e.modalChargePointId,l))},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),n(z,{name:"tab-scheduled-charging"},{default:o(()=>[Object.keys(e.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(e.modalChargePointId)).length===0?(s(),f(Z,{key:0},{icon:o(()=>[n(u,{"fixed-width":"",icon:["fas","fa-info-circle"]})]),default:o(()=>[a(" Es wurden noch keine Zeitpläne für das Zielladen eingerichtet. ")]),_:1})):(s(),f(L,{key:1},{default:o(()=>[(s(!0),C(T,null,M(e.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(e.modalChargePointId),(l,I)=>(s(),f(P,{key:I},{default:o(()=>[n(F,null,{default:o(()=>[n(v,null,{default:o(()=>[n(V,null,{default:o(()=>[a(h(l.name),1)]),_:2},1024)]),_:2},1024),n(v,null,{default:o(()=>[n(p,{size:"lg",block:"",color:l.active?"success":"danger",onClick:G=>r.setChargePointConnectedVehicleScheduledChargingPlanActive(I,!l.active)},{default:o(()=>[l.frequency.selected=="once"?(s(),C("span",ze,[n(u,{"fixed-width":"",icon:["fas","calendar-day"]}),a(" "+h(e.mqttStore.formatDate(l.frequency.once)),1)])):m("",!0),l.frequency.selected=="daily"?(s(),C("span",We,[n(u,{"fixed-width":"",icon:["fas","calendar-week"]}),a(" täglich ")])):m("",!0),l.frequency.selected=="weekly"?(s(),C("span",Fe,[n(u,{"fixed-width":"",icon:["fas","calendar-alt"]}),a(" "+h(e.mqttStore.formatWeeklyScheduleDays(l.frequency.weekly)),1)])):m("",!0),n(u,{"fixed-width":"",icon:["fas","clock"]}),a(" "+h(l.time)+" ",1),l.limit.selected=="soc"?(s(),C("span",Ee,[n(u,{"fixed-width":"",icon:["fas","car-battery"]}),a(" "+h(l.limit.soc_scheduled)+" % ",1)])):m("",!0),l.limit.selected=="amount"?(s(),C("span",Ue,[n(u,{"fixed-width":"",icon:["fas","bolt"]}),a(" "+h(l.limit.amount/1e3)+" kWh ",1)])):m("",!0)]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),n(z,{name:"tab-time-charging"},{default:o(()=>[n(L,null,{default:o(()=>[n(P,null,{default:o(()=>[n(V,null,{default:o(()=>[a("Zeitladen aktivieren")]),_:1}),n(x,{block:""},{default:o(()=>[n(p,{color:e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(e.modalChargePointId)!==!0?"danger":"",onClick:t[16]||(t[16]=l=>r.setChargePointConnectedVehicleTimeChargingActive(e.modalChargePointId,!1))},{default:o(()=>[a(" Nein ")]),_:1},8,["color"]),n(p,{color:e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(e.modalChargePointId)===!0?"success":"",onClick:t[17]||(t[17]=l=>r.setChargePointConnectedVehicleTimeChargingActive(e.modalChargePointId,!0))},{default:o(()=>[a(" Ja ")]),_:1},8,["color"])]),_:1})]),_:1}),e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(e.modalChargePointId)===!0?(s(),C("div",De,[Object.keys(e.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(e.modalChargePointId)).length===0?(s(),f(Z,{key:0,color:"warning",class:"_margin-top:2"},{icon:o(()=>[n(u,{"fixed-width":"",icon:["fas","fa-circle-info"]})]),default:o(()=>[a(" Es wurden noch keine Zeitpläne für das Zeitladen eingerichtet. ")]),_:1})):(s(),C("div",Ze,[(s(!0),C(T,null,M(e.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(e.modalChargePointId),(l,I)=>(s(),f(P,{key:I},{default:o(()=>[n(F,null,{default:o(()=>[n(v,null,{default:o(()=>[n(V,null,{default:o(()=>[a(h(l.name),1)]),_:2},1024)]),_:2},1024),n(v,null,{default:o(()=>[n(p,{size:"lg",block:"",color:l.active?"success":"danger",onClick:G=>r.setChargePointConnectedVehicleTimeChargingPlanActive(I,!l.active)},{default:o(()=>[l.frequency.selected=="once"?(s(),C("span",je,[n(u,{"fixed-width":"",icon:["fas","calendar-day"]}),a(" "+h(e.mqttStore.formatDateRange(l.frequency.once)),1)])):m("",!0),l.frequency.selected=="daily"?(s(),C("span",Oe,[n(u,{"fixed-width":"",icon:["fas","calendar-week"]}),a(" täglich ")])):m("",!0),l.frequency.selected=="weekly"?(s(),C("span",Re,[n(u,{"fixed-width":"",icon:["fas","calendar-alt"]}),a(" "+h(e.mqttStore.formatWeeklyScheduleDays(l.frequency.weekly)),1)])):m("",!0),n(u,{"fixed-width":"",icon:["fas","clock"]}),a(" "+h(l.time.join("-"))+" ",1),l.limit.selected=="soc"?(s(),C("span",Je,[n(u,{"fixed-width":"",icon:["fas","car-battery"]}),a(" "+h(l.limit.soc)+" % ",1)])):m("",!0),l.limit.selected=="amount"?(s(),C("span",Ke,[n(u,{"fixed-width":"",icon:["fas","bolt"]}),a(" "+h(l.limit.amount/1e3)+" kWh ",1)])):m("",!0)]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]))])):m("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),n(X,{vehicleId:e.modalVehicleId,modelValue:e.modalManualSocInputVisible,"onUpdate:modelValue":t[20]||(t[20]=l=>e.modalManualSocInputVisible=l)},null,8,["vehicleId","modelValue"])],64)}const tt=B(Be,[["render",Xe],["__scopeId","data-v-508f53d2"]]);export{tt as default};
