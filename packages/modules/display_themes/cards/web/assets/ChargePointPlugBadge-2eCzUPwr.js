import{o as n,e as c,i as m,F as y,A as C,z as _,j as p,Q as x,l as d,n as S,p as w,s as k,x as u}from"./vendor-R29x0Zzc.js";import{_ as P}from"./vendor-inkline-V11tW55U.js";import{u as v}from"./index-iiy-46X3.js";import{l as N,k as D,m as b,n as I,F as q}from"./vendor-fortawesome-70gKpjfT.js";const l={props:{data:{required:!1,type:Array},socData:{required:!1,type:Array},width:{Number,default:250},height:{Number,default:70},gap:{Number,default:3},stroke:{Number,default:3},min:{Number,default:0},max:{Number,default:1},color:{String,default:"var(--color--primary)"},colorNegative:{String,default:void 0}},computed:{highestPoint(){return Math.max(1,this.max,...this.slicedData)},lowestPoint(){return Math.min(0,this.min,...this.slicedData)},maxPoints(){return Math.floor(this.width/(this.stroke+this.gap))},slicedData(){if(this.data)return this.data.slice(-this.maxPoints)},slicedSocData(){if(this.socData)return this.socData.slice(-this.maxPoints)},zeroHeight(){return this.height-(0-this.lowestPoint)/(this.highestPoint-this.lowestPoint)*this.height},coordinates(){if(this.data)return this.calculateCoordinates(this.slicedData,this.lowestPoint,this.highestPoint)},socCoordinates(){if(this.socData)return this.calculateCoordinates(this.slicedSocData,0,100)},bars(){if(this.coordinates){const t=[];return this.coordinates.forEach(s=>{const e=s.x,r=s.y,o=this.stroke,a=Math.min(r,this.zeroHeight),i=Math.abs(r-this.zeroHeight),h=r>this.zeroHeight;t.push({x:e,y:a,width:o,height:i,negative:h})}),t}},socPath(){if(this.socCoordinates&&this.socCoordinates.length>0){let s=this.socCoordinates.slice(0,1)[0],e=this.socCoordinates.slice(-1)[0];var t=`M 0,${this.height}`;return t+=` L 0,${s.y}`,this.socCoordinates.forEach(r=>{t+=` L ${r.x+this.stroke/2},${r.y}`}),t+=` L ${e.x+this.stroke},${e.y} L ${e.x+this.stroke},${this.height} Z`,t}}},methods:{calculateCoordinates(t,s,e){const r=[];return t.forEach((o,a)=>{const i=a*this.width/this.maxPoints+1,h=this.height-(o-s)/(e-s)*this.height;r.push({x:i,y:h})}),r}}},g=()=>{x(t=>({"1e352c5c":t.color,"5fa280b1":t.colorNegative}))},f=l.setup;l.setup=f?(t,s)=>(g(),f(t,s)):g;const z=["viewBox"],B=["d"],M=["x","y","width","height"],E=["y1","x2","y2"];function A(t,s,e,r,o,a){return n(),c("svg",{class:"spark-line",viewBox:`0 0 ${e.width} ${e.height}`,width:"100%",preserveAspectRatio:"xMinYMin"},[e.socData?(n(),c("path",{key:0,class:"soc-path",d:a.socPath},null,8,B)):m("",!0),(n(!0),c(y,null,C(a.bars,i=>(n(),c("rect",{key:i.x,x:i.x,y:i.y,width:i.width,height:i.height,class:_(e.colorNegative&&i.negative?"negative":"")},null,10,M))),128)),p("line",{class:"zero-line",x1:0,y1:a.zeroHeight,x2:e.width,y2:a.zeroHeight},null,8,E)],8,z)}const R=P(l,[["render",A],["__scopeId","data-v-cb2ff21c"]]);N.add(D,b,I);const H={name:"ChargePointStateBadge",props:{chargePointId:{required:!0,type:Array},showEnergyCharged:{required:!1,type:Boolean,default:!0}},data(){return{mqttStore:v()}},components:{FontAwesomeIcon:q},computed:{plugState(){var t=!1;return this.chargePointId.forEach(s=>{t|=this.mqttStore.getChargePointPlugState(s)}),t},chargeState(){var t=!1;return this.chargePointId.forEach(s=>{t|=this.mqttStore.getChargePointChargeState(s)}),t},stateIcon(){return this.plugState?this.chargeState?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"]},stateClass(){return this.plugState?this.chargeState?"_color:success":"_color:warning":"_color:gray"}}},L={key:0,class:"_padding-left:1"};function V(t,s,e,r,o,a){const i=d("font-awesome-icon"),h=d("i-badge");return n(),S(h,{size:"lg"},{default:w(()=>[k(i,{"fixed-width":"",icon:a.stateIcon,class:_(a.stateClass)},null,8,["icon","class"]),a.plugState&&e.showEnergyCharged?(n(),c("span",L,u(o.mqttStore.getChargePointImportedSincePlugged(e.chargePointId).energy)+" / "+u(o.mqttStore.getChargePointImportedSincePlugged(e.chargePointId).range),1)):m("",!0)]),_:1})}const X=P(H,[["render",V]]);export{X as C,R as S};
