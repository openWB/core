import{u as x,C as re,N as ae}from"./index-C_pedijp.js";import{D}from"./DashboardCard-DLhWU61X.js";import{C as U,S as ge}from"./ChargePointPlugBadge-BWqpAuQc.js";import{F as B,l as z,b as ce,c as de,p as he,q as R,r as O,k as j,s as Z,t as J,u as K,v as H,w as G,x as Q,y as X,z as Y,A as se,B as me,C as ue,D as Ce,E as Pe,G as fe,H as _e}from"./vendor-fortawesome-DMNGE2-K.js";import{l as d,n as C,q as i,o as c,s as n,z as b,e as S,F as T,k as g,i as P,x as f,A,I as Ve,P as pe,Q as Se,S as ve,U as Ie,W as ke,X as be,Y as qe,Z as ye,_ as we,$ as Le,j as M,p as xe}from"./vendor-ELON-1B6.js";import{_ as L}from"./vendor-inkline-Vr05PGFJ.js";import{C as Me}from"./ChargeModeModal-Dw7cgLgR.js";z.add(ce,de);const Te={name:"ChargePointLockButton",components:{FontAwesomeIcon:B},props:{chargePointId:{required:!0,type:Number},changesLocked:{required:!1,type:Boolean,default:!1}},data(){return{mqttStore:x()}},computed:{locked(){return this.mqttStore.getChargePointManualLock(this.chargePointId)},stateIcon(){return this.locked?["fas","fa-lock"]:["fas","fa-lock-open"]},stateClass(){return this.locked?["_color:danger"]:"_color:success"}},methods:{toggleChargePointManualLock(){this.changesLocked||this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`))}}};function Ee(o,e,l,s,t,r){const _=d("font-awesome-icon"),k=d("i-button");return c(),C(k,{size:"lg",disabled:l.changesLocked,outline:l.changesLocked},{default:i(()=>[n(_,{"fixed-width":"",icon:r.stateIcon,class:b(r.stateClass),onClick:e[0]||(e[0]=I=>r.toggleChargePointManualLock())},null,8,["icon","class"])]),_:1},8,["disabled","outline"])}const $=L(Te,[["render",Ee],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePointLockButton.vue"]]);z.add(he);const Ae={name:"ChargePointCodeButton",components:{FontAwesomeIcon:B,CodeInputModal:re},props:{chargePointId:{type:Number,required:!0}},data(){return{mqttStore:x(),modalIdTagEntryVisible:!1,modalIdTagEntryColor:"warning",code:""}},computed:{tagState(){return this.mqttStore.getChargepointTagState(this.chargePointId)},tagButtonColor(){switch(this.tagState){case 2:return"success";case 1:return"warning";default:return""}},tagClass(){switch(this.tagState){case 2:return"_color:success-80";case 1:return"_color:warning-80";default:return""}}},methods:{toggleIdTagModal(){this.modalIdTagEntryVisible=!this.modalIdTagEntryVisible},sendIdTag(o){this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/get/rfid`,o),this.modalIdTagEntryVisible=!1}}};function Be(o,e,l,s,t,r){const _=d("FontAwesomeIcon"),k=d("i-button"),I=d("CodeInputModal");return c(),S(T,null,[n(k,{class:"_margin-right:1",size:"lg",color:r.tagButtonColor,disabled:r.tagState==2,onClick:e[0]||(e[0]=h=>r.toggleIdTagModal())},{default:i(()=>[n(_,{"fixed-width":"",icon:["fas","fa-calculator"],class:b(r.tagClass)},null,8,["class"])]),_:1},8,["color","disabled"]),n(I,{ref:"lockInput",modelValue:t.modalIdTagEntryVisible,"onUpdate:modelValue":e[1]||(e[1]=h=>t.modalIdTagEntryVisible=h),"min-length":4,"max-length":20,"onUpdate:inputValue":r.sendIdTag},{header:i(()=>[...e[2]||(e[2]=[g(" Bitte einen ID-Tag eingeben. ",-1)])]),_:1},8,["modelValue","onUpdate:inputValue"])],64)}const ee=L(Ae,[["render",Be],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePointCodeButton.vue"]]);z.add(R,O,j,Z,J,K,H,G,Q,X,Y);const ze={name:"ChargePointCard",components:{DashboardCard:D,SparkLine:ge,ChargePointPlugBadge:U,ChargePointLockButton:$,ChargePointCodeButton:ee,FontAwesomeIcon:B},props:{chargePointId:{type:Number,required:!0},changesLocked:{type:Boolean,required:!0}},emits:["vehicle-click","soc-click","charge-mode-click","toggle-charge-point-settings"],data(){return{mqttStore:x()}},methods:{handleVehicleClick(o){this.$emit("vehicle-click",o)},handleSocClick(o){this.$emit("soc-click",o)},handleChargeModeClick(o){this.$emit("charge-mode-click",o)},toggleChargePointSettings(o){this.$emit("toggle-charge-point-settings",o)}}},Ne={key:0};function Fe(o,e,l,s,t,r){const _=d("charge-point-plug-badge"),k=d("charge-point-code-button"),I=d("charge-point-lock-button"),h=d("i-column"),V=d("i-row"),m=d("spark-line"),u=d("font-awesome-icon"),p=d("i-badge"),y=d("i-button"),w=d("i-container"),q=d("dashboard-card");return c(),C(q,{color:"primary"},{headerLeft:i(()=>[g(f(t.mqttStore.getChargePointName(l.chargePointId)),1)]),headerRight:i(()=>[n(_,{"charge-point-id":[l.chargePointId]},null,8,["charge-point-id"])]),default:i(()=>[n(w,null,{default:i(()=>[n(V,null,{default:i(()=>[n(h,null,{default:i(()=>[n(V,null,{default:i(()=>[n(h,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[t.mqttStore.getRfidEnabled?(c(),C(k,{key:0,"charge-point-id":l.chargePointId},null,8,["charge-point-id"])):P("",!0),n(I,{"charge-point-id":l.chargePointId,"changes-locked":l.changesLocked},null,8,["charge-point-id","changes-locked"])]),_:1}),n(h,{class:"_text-align:right _padding-left:0"},{default:i(()=>[g(f(t.mqttStore.getChargePointPower(l.chargePointId))+" "+f(t.mqttStore.getChargePointPhasesInUse(l.chargePointId))+" "+f(t.mqttStore.getChargePointSetCurrent(l.chargePointId)),1)]),_:1})]),_:1}),n(V,{class:"_padding-top:1"},{default:i(()=>[n(h,{class:"_padding-left:0"},{default:i(()=>[n(m,{color:"var(--color--primary)",data:t.mqttStore.getChargePointPowerChartData(l.chargePointId)},null,8,["data"])]),_:1})]),_:1})]),_:1}),n(h,{md:"6"},{default:i(()=>[n(V,{class:"_display:flex"},{default:i(()=>[n(h,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:i(()=>[n(p,{size:"lg",class:b(["_width:100%",l.changesLocked?"":"clickable"]),onClick:e[0]||(e[0]=v=>r.handleVehicleClick(l.chargePointId))},{default:i(()=>[n(u,{"fixed-width":"",icon:["fas","fa-car"]}),g(" "+f(t.mqttStore.getChargePointConnectedVehicleName(l.chargePointId)),1)]),_:1},8,["class"])]),_:1}),t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))||t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))!=0?(c(),C(h,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:i(()=>[n(y,{size:"sm",disabled:l.changesLocked,class:b(l.changesLocked?"":"clickable"),onClick:e[1]||(e[1]=v=>r.handleSocClick(l.chargePointId))},{default:i(()=>[t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))?(c(),S("span",Ne,[n(u,{"fixed-width":"",icon:t.mqttStore.getVehicleSocIsManual(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))?["fas","fa-edit"]:["fas","fa-car-battery"]},null,8,["icon"]),g(" "+f(t.mqttStore.getChargePointConnectedVehicleSoc(l.chargePointId).soc)+"% ",1)])):P("",!0),t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))!=0?(c(),C(u,{key:1,"fixed-width":"",icon:t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:b(t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):P("",!0)]),_:1},8,["disabled","class"])]),_:1})):P("",!0)]),_:1}),n(V,{class:"_padding-top:1 _display:flex"},{default:i(()=>[n(h,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:i(()=>[n(p,{size:"lg",class:b(["_width:100%",l.changesLocked?"":"clickable"]),color:t.mqttStore.getChargePointConnectedVehicleChargeMode(l.chargePointId)?.class,onClick:e[2]||(e[2]=v=>r.handleChargeModeClick(l.chargePointId))},{default:i(()=>[g(f(t.mqttStore.getChargePointConnectedVehicleChargeMode(l.chargePointId)?.label)+" ",1),n(u,{"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehiclePriority(l.chargePointId)?["fas","fa-star"]:["far","fa-star"],class:b(t.mqttStore.getChargePointConnectedVehiclePriority(l.chargePointId)?"_color:warning":"")},null,8,["icon","class"])]),_:1},8,["class","color"])]),_:1}),t.mqttStore.getChargePointConnectedVehicleTimeChargingActive(l.chargePointId)?(c(),C(h,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:i(()=>[n(p,{size:"lg"},{default:i(()=>[t.mqttStore.getChargePointConnectedVehicleTimeChargingActive(l.chargePointId)?(c(),C(u,{key:0,"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(l.chargePointId)?["fas","fa-clock"]:["far","fa-clock"],class:b(t.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(l.chargePointId)?"_color:success":"")},null,8,["icon","class"])):P("",!0)]),_:1})]),_:1})):P("",!0)]),_:1}),l.changesLocked?P("",!0):(c(),C(V,{key:0,class:"_padding-top:1"},{default:i(()=>[n(h,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[n(y,{block:"",onClick:e[3]||(e[3]=v=>r.toggleChargePointSettings(l.chargePointId))},{default:i(()=>[n(u,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}const We=L(ze,[["render",Fe],["__scopeId","data-v-20de5e49"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePoints/ChargePointCard.vue"]]);z.add(R,O,j,Z,J,K,H,G,Q,X,Y);const De={name:"ChargePointCard",components:{DashboardCard:D,ChargePointPlugBadge:U,ChargePointLockButton:$,ChargePointCodeButton:ee,FontAwesomeIcon:B},props:{chargePointId:{type:Number,required:!0},changesLocked:{type:Boolean,required:!0}},emits:["vehicle-click","soc-click","charge-mode-click","toggle-charge-point-settings","set-charge-point-connected-vehicle-charge-mode"],data(){return{mqttStore:x(),simpleChargeModes:["instant_charging","pv_charging","stop"]}},computed:{filteredChargeModes(){return this.mqttStore.getSimpleChargePointView?this.mqttStore.chargeModeList().filter(o=>this.simpleChargeModes.includes(o.id)):this.mqttStore.chargeModeList()}},methods:{handleVehicleClick(o){this.$emit("vehicle-click",o)},handleSocClick(o){this.$emit("soc-click",o)},handleChargeModeClick(o){this.$emit("charge-mode-click",o)},toggleChargePointSettings(o){this.$emit("toggle-charge-point-settings",o)},setChargePointConnectedVehicleChargeMode(o,e){this.$emit("set-charge-point-connected-vehicle-charge-mode",o,e)}}},Ue={key:0};function Re(o,e,l,s,t,r){const _=d("charge-point-plug-badge"),k=d("charge-point-code-button"),I=d("charge-point-lock-button"),h=d("i-column"),V=d("i-row"),m=d("font-awesome-icon"),u=d("i-button"),p=d("i-button-group"),y=d("i-container"),w=d("dashboard-card");return c(),C(w,{color:"primary"},{headerLeft:i(()=>[g(f(t.mqttStore.getChargePointName(l.chargePointId)),1)]),headerRight:i(()=>[n(_,{"charge-point-id":[l.chargePointId]},null,8,["charge-point-id"])]),default:i(()=>[n(y,null,{default:i(()=>[n(V,null,{default:i(()=>[n(h,null,{default:i(()=>[n(V,null,{default:i(()=>[n(h,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[t.mqttStore.getRfidEnabled?(c(),C(k,{key:0,"charge-point-id":l.chargePointId},null,8,["charge-point-id"])):P("",!0),n(I,{"charge-point-id":l.chargePointId,"changes-locked":l.changesLocked},null,8,["charge-point-id","changes-locked"])]),_:1}),n(h,{class:"_text-align:right _padding-left:0"},{default:i(()=>[g(f(t.mqttStore.getChargePointPower(l.chargePointId))+" "+f(t.mqttStore.getChargePointPhasesInUse(l.chargePointId))+" "+f(t.mqttStore.getChargePointSetCurrent(l.chargePointId)),1)]),_:1})]),_:1}),n(V,{class:"_padding-top:1"},{default:i(()=>[n(h,{class:"_padding-left:0 button-group-wrapper"},{default:i(()=>[n(p,{class:"button-group main-button-group"},{default:i(()=>[n(u,{class:b(["large-button _flex-grow:1",l.changesLocked?"":"clickable"]),disabled:l.changesLocked,onClick:e[0]||(e[0]=q=>r.handleVehicleClick(l.chargePointId))},{default:i(()=>[n(m,{"fixed-width":"",icon:["fas","fa-car"]}),g(" "+f(t.mqttStore.getChargePointConnectedVehicleName(l.chargePointId))+" ",1),n(m,{class:b(["_padding-left:1",t.mqttStore.getChargePointConnectedVehiclePriority(l.chargePointId)?"_color:warning":""]),"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehiclePriority(l.chargePointId)?["fas","fa-star"]:["far","fa-star"]},null,8,["icon","class"])]),_:1},8,["class","disabled"]),t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))||t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))!=0?(c(),C(u,{key:0,class:b(["large-button _flex-grow:0",l.changesLocked?"":"clickable"]),disabled:l.changesLocked,onClick:e[1]||(e[1]=q=>r.handleSocClick(l.chargePointId))},{default:i(()=>[t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))?(c(),S("span",Ue,[n(m,{"fixed-width":"",icon:t.mqttStore.getVehicleSocIsManual(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))?["fas","fa-edit"]:["fas","fa-car-battery"]},null,8,["icon"]),g(" "+f(t.mqttStore.getChargePointConnectedVehicleSoc(l.chargePointId).soc)+"% ",1)])):P("",!0),t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))!=0?(c(),C(m,{key:1,"fixed-width":"",icon:t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:b(t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):P("",!0)]),_:1},8,["disabled","class"])):P("",!0),n(u,{class:b(["large-button _flex-grow:0",l.changesLocked?"":"clickable"]),disabled:l.changesLocked,onClick:e[2]||(e[2]=q=>r.toggleChargePointSettings(l.chargePointId))},{default:i(()=>[n(m,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:1},8,["class","disabled"])]),_:1}),n(p,{class:"button-group _margin-top:1",disabled:l.changesLocked},{default:i(()=>[(c(!0),S(T,null,A(r.filteredChargeModes,q=>(c(),C(u,{key:q.id,outline:"",class:b(["large-button _flex-grow:1",l.changesLocked?"":"clickable"]),color:q.class!="dark"?q.class:"light",active:t.mqttStore.getChargePointConnectedVehicleChargeMode(l.chargePointId)!=null&&q.id==t.mqttStore.getChargePointConnectedVehicleChargeMode(l.chargePointId).mode,onClick:v=>r.setChargePointConnectedVehicleChargeMode(l.chargePointId,q.id)},{default:i(()=>[g(f(q.label),1)]),_:2},1032,["class","color","active","onClick"]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Oe=L(De,[["render",Re],["__scopeId","data-v-9467d747"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePoints/SimpleChargePointCard.vue"]]),je={name:"ExtendedNumberInput",inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},unit:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},labels:{type:Array,default:void 0}},emits:["update:modelValue"],data(){return{minimum:this.labels?0:this.min,maximum:this.labels?this.labels.length-1:this.max,stepSize:this.labels?1:this.step}},computed:{label(){var o;return this.labels&&this.inputValue!=null?this.inputValue<this.labels.length?o=this.labels[this.inputValue].label:console.error("index out of bounds: "+this.inputValue):o=this.inputValue,typeof o=="number"&&(o=o.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision})),o},precision(){if(!isFinite(this.stepSize))return 0;for(var o=1,e=0;Math.round(this.stepSize*o)/o!==this.stepSize;)o*=10,e++;return e},inputValue:{get(){if(this.labels){var o=void 0;for(let e=0;e<this.labels.length;e++)if(this.labels[e].value==this.modelValue){o=e;break}return o===void 0&&this.modelValue!==void 0?(console.warn("inputValue: not found in values: ",this.modelValue,"using minimum as default: ",this.minimum),this.minimum):o}return this.modelValue},set(o){if(this.labels){var e=this.labels[o].value;this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",o)}}},methods:{increment(){var o=Math.min(this.inputValue+this.stepSize,this.maximum);this.inputValue=Math.round(o*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var o=Math.max(this.inputValue-this.stepSize,this.minimum);this.inputValue=Math.round(o*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}};function Ze(o,e,l,s,t,r){const _=d("i-button"),k=d("i-input");return c(),C(k,{modelValue:r.label,"onUpdate:modelValue":e[0]||(e[0]=I=>r.label=I),plaintext:"",class:"_text-align:right",size:"lg"},{prepend:i(()=>[n(_,{onClick:r.decrement},{default:i(()=>[...e[1]||(e[1]=[g(" - ",-1)])]),_:1},8,["onClick"])]),suffix:i(()=>[g(f(l.unit),1)]),append:i(()=>[n(_,{onClick:r.increment},{default:i(()=>[...e[2]||(e[2]=[g(" + ",-1)])]),_:1},8,["onClick"])]),_:1},8,["modelValue"])}const te=L(je,[["render",Ze],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ExtendedNumberInput.vue"]]),Je={name:"ManualSocInput",components:{ExtendedNumberInput:te,NumberPad:ae},props:{modelValue:{required:!0,type:Boolean},vehicleId:{required:!0,type:Number}},emits:["update:modelValue"],data(){return{mqttStore:x(),newSoc:0}},methods:{enter(o){let e=this.newSoc*10+parseInt(o);e>=0&&e<=100&&(this.newSoc=e)},removeDigit(){this.newSoc=Math.trunc(this.newSoc/10)},clear(){this.newSoc=0},close(){this.$emit("update:modelValue",!1),this.newSoc=0},updateManualSoc(){this.$root.sendTopicToBroker(`openWB/vehicle/${this.vehicleId}/soc_module/calculated_soc_state/manual_soc`,this.newSoc),this.close()}}};function Ke(o,e,l,s,t,r){const _=d("extended-number-input"),k=d("i-column"),I=d("i-row"),h=d("NumberPad"),V=d("i-container"),m=d("i-button"),u=d("i-modal");return c(),C(Ve,{to:"body"},[n(u,{"model-value":l.modelValue,size:"sm","onUpdate:modelValue":e[6]||(e[6]=p=>o.$emit("update:modelValue",p))},{header:i(()=>[g(' SoC für Fahrzeug "'+f(t.mqttStore.getVehicleName(l.vehicleId))+'" ',1)]),footer:i(()=>[n(V,null,{default:i(()=>[n(I,null,{default:i(()=>[n(k,null,{default:i(()=>[n(m,{color:"danger",onClick:e[4]||(e[4]=p=>r.close())},{default:i(()=>[...e[7]||(e[7]=[g(" Zurück ",-1)])]),_:1})]),_:1}),n(k,{class:"_text-align:right"},{default:i(()=>[n(m,{color:"success",onClick:e[5]||(e[5]=p=>r.updateManualSoc())},{default:i(()=>[...e[8]||(e[8]=[g(" OK ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),default:i(()=>[n(V,null,{default:i(()=>[n(I,{center:"",class:"_padding-bottom:1"},{default:i(()=>[n(k,null,{default:i(()=>[n(_,{modelValue:t.newSoc,"onUpdate:modelValue":e[0]||(e[0]=p=>t.newSoc=p),unit:"%",min:0,max:100,step:1,size:"lg",class:"_text-align:center"},null,8,["modelValue"])]),_:1})]),_:1}),n(h,{"onKey:digit":e[1]||(e[1]=p=>r.enter(p)),"onKey:clear":e[2]||(e[2]=p=>r.clear()),"onKey:delete":e[3]||(e[3]=p=>r.removeDigit())})]),_:1})]),_:1},8,["model-value"])])}const He=L(Je,[["render",Ke],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePoints/ManualSocInput.vue"]]),Ge={name:"VehicleSelectModal",props:{modelValue:{required:!0,type:Boolean},chargePointId:{type:Number,required:!0}},emits:["update:modelValue"],data(){return{mqttStore:x()}},computed:{vehicleList(){return this.mqttStore.getVehicleList.map(o=>({id:o,name:this.mqttStore.getVehicleName(o)}))}},methods:{setChargePointConnectedVehicle(o){o.id!=this.mqttStore.getChargePointConnectedVehicleId(this.chargePointId)&&this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/config/ev`,o.id)}}};function Qe(o,e,l,s,t,r){const _=d("i-button"),k=d("i-button-group"),I=d("i-form-group"),h=d("i-form"),V=d("i-modal");return c(),C(V,{"model-value":l.modelValue,class:"modal-vehicle-select",size:"lg","onUpdate:modelValue":e[0]||(e[0]=m=>o.$emit("update:modelValue",m))},{header:i(()=>[g(' Fahrzeug an "'+f(t.mqttStore.getChargePointName(l.chargePointId))+'" auswählen ',1)]),default:i(()=>[n(h,null,{default:i(()=>[n(I,null,{default:i(()=>[n(k,{vertical:"",block:""},{default:i(()=>[(c(!0),S(T,null,A(r.vehicleList,m=>(c(),C(_,{key:m.id,size:"lg",class:"large-button",active:t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId)==m.id,color:t.mqttStore.getChargePointConnectedVehicleId(l.chargePointId)==m.id?"primary":"",onClick:u=>r.setChargePointConnectedVehicle(m)},{default:i(()=>[g(f(m.name),1)]),_:2},1032,["active","color","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}const Xe=L(Ge,[["render",Qe],["__scopeId","data-v-7b58bcbe"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePoints/VehicleSelectModal.vue"]]);Se.register(ve,Ie,ke,be,qe,ye,we,Le);const Ye={name:"ElectricityTariffChart",components:{ChartJsLine:pe},props:{modelValue:{type:Number,required:!1,default:void 0}},emits:["update:modelValue"],data(){return{mqttStore:x(),chartDatasets:{datasets:[{label:"Stromtarif",unit:"ct/kWh",type:"line",stepped:!0,borderColor:"rgb(18, 111, 142)",backgroundColor:"rgb(18, 111, 142)",fill:!1,pointStyle:"circle",pointRadius:0,pointHoverRadius:4,cubicInterpolationMode:"monotone",hidden:!1,borderWidth:2,data:void 0,yAxisID:"y",parsing:{xAxisKey:"timestamp",yAxisKey:"price"}}]}}},computed:{chartDataRead(){return Object.keys(this.chartDataObject.datasets[0].data).length>0},chartDataObject(){let o=[];const e=this.mqttStore.getEtPrices;if(e&&Object.keys(e).length>0){for(const[t,r]of Object.entries(e))o.push({timestamp:t*1e3,price:r*1e5});const s=o.slice(-1)[0];o.push({timestamp:s.timestamp+3599*1e3,price:s.price})}const l=this.chartDatasets;return l.datasets[0].data=o,l},priceAnnotations(){const o="rgba(73, 238, 73, 0.2)",e="rgba(255, 10, 13, 0.2)",l=this.chartDataObject.datasets[0].data;class s{type="box";drawTime="beforeDatasetsDraw";xMin=l[0].timestamp;xMax=l[0].timestamp;borderWidth=2;cornerRadius=0}let t=[];if(this.modelValue!==void 0){for(let r=0;r<l.length;r++)if(l[r].price<=this.modelValue){let _=new s;for(_.borderColor=o,_.backgroundColor=o,_.xMin=l[r].timestamp;r<l.length&&l[r].price<=this.modelValue;)r++;r==l.length&&r--,_.xMax=l[r].timestamp,t.push(_)}for(let r=0;r<l.length;r++)if(l[r].price>this.modelValue){let _=new s;for(_.borderColor=e,_.backgroundColor=e,_.xMin=l[r].timestamp;r<l.length&&l[r].price>this.modelValue;)r++;r==l.length&&r--,_.xMax=l[r].timestamp,t.push(_)}}return t},myChartOptions(){return{plugins:{title:{display:!1},legend:{display:!1},annotation:{annotations:this.priceAnnotations}},elements:{point:{radius:2}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",text:"Zeit",maxTicksLimit:24},display:!0,title:{display:!0,text:"Uhrzeit",color:"#ffffff"},ticks:{font:{size:12},color:"#ffffff",maxTicksLimit:0},grid:{}},y:{position:"left",type:"linear",display:"auto",title:{font:{size:12},display:!0,text:"Preis [ct/kWh]",color:"#ffffff"},grid:{color:"#ffffff20"},ticks:{font:{size:12},stepSize:.1,maxTicksLimit:11,color:"#ffffff"}}}}}},methods:{chartClick(o){const l=this.$refs.priceChart.chart.getElementsAtEventForMode(o,"index",{intersect:!1},!0);l.length>0&&this.$emit("update:modelValue",Math.ceil(this.chartDataObject.datasets[0].data[l[0].index].price*100)/100)}}},$e={class:"chartContainer"};function et(o,e,l,s,t,r){const _=d("ChartJsLine");return c(),S("div",$e,[r.chartDataRead?(c(),C(_,{key:0,ref:"priceChart",data:r.chartDataObject,options:r.myChartOptions,onClick:r.chartClick},null,8,["data","options","onClick"])):P("",!0)])}const tt=L(Ye,[["render",et],["__scopeId","data-v-d0516943"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ElectricityTariffChart.vue"]]);z.add(se,me,ue,Ce,Pe,fe,_e);const nt={name:"ChargePointsView",components:{ChargePointCard:We,SimpleChargePointCard:Oe,ExtendedNumberInput:te,ManualSocInput:He,ChargeModeModal:Me,VehicleSelectModal:Xe,FontAwesomeIcon:B,ElectricityTariffChart:tt},props:{changesLocked:{required:!1,type:Boolean,default:!1}},data(){return{mqttStore:x(),modalChargeModeSettingVisible:!1,modalVehicleSelectVisible:!1,modalChargePointSettingsVisible:!1,modalChargePointId:0,modalVehicleId:0,modalActiveTab:"tab-general",modalManualSocInputVisible:!1}},computed:{timeChargingEnabled(){return o=>this.mqttStore.getChargePointConnectedVehicleTimeChargingActive(o)===!0}},watch:{changesLocked(o,e){e!==!0&&o===!0&&(this.modalChargeModeSettingVisible=!1,this.modalVehicleSelectVisible=!1,this.modalChargePointSettingsVisible=!1,this.modalManualSocInputVisible=!1)}},methods:{toggleChargePointSettings(o){switch(this.mqttStore.getChargePointConnectedVehicleChargeMode(o).mode){case"pv_charging":this.modalActiveTab="tab-pv-charging";break;case"scheduled_charging":this.modalActiveTab="tab-scheduled-charging";break;case"eco_charging":this.modalActiveTab="tab-eco-charging";break;default:this.modalActiveTab="tab-instant-charging"}this.modalChargePointId=o,this.modalChargePointSettingsVisible=!0},handleChargeModeClick(o){this.changesLocked||(this.modalChargePointId=o,this.modalChargeModeSettingVisible=!0)},handleVehicleClick(o){this.changesLocked||(this.modalChargePointId=o,this.modalVehicleSelectVisible=!0)},handleSocClick(o){let e=this.mqttStore.getChargePointConnectedVehicleId(o);if(this.mqttStore.getVehicleSocIsManual(e)){this.modalVehicleId=e,this.modalManualSocInputVisible=!0;return}this.$root.sendTopicToBroker(`openWB/set/vehicle/${e}/get/force_soc_update`,1)},updateChargePointChargeTemplate(o,e,l=void 0){const s=this.mqttStore.updateState(`openWB/chargepoint/${o}/set/charge_template`,e,l);this.$root.sendTopicToBroker(`openWB/chargepoint/${o}/set/charge_template`,s)},setChargePointConnectedVehicleChargeMode(o,e){e.id!=this.mqttStore.getChargePointConnectedVehicleChargeMode(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.selected")},setChargePointConnectedVehiclePriority(o,e){e!=this.mqttStore.getChargePointConnectedVehiclePriority(o)&&this.updateChargePointChargeTemplate(o,e,"prio")},setChargePointConnectedVehicleTimeChargingActive(o,e){e!=this.mqttStore.getChargePointConnectedVehicleTimeChargingActive(o)&&this.updateChargePointChargeTemplate(o,e,"time_charging.active")},setChargePointConnectedVehicleInstantChargingCurrent(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.instant_charging.current")},setChargePointConnectedVehicleInstantChargingPhases(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.instant_charging.phases_to_use")},setChargePointConnectedVehicleInstantChargingLimit(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(o).selected&&this.updateChargePointChargeTemplate(o,e,"chargemode.instant_charging.limit.selected")},setChargePointConnectedVehicleInstantChargingLimitSoc(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(o).soc&&this.updateChargePointChargeTemplate(o,parseInt(e),"chargemode.instant_charging.limit.soc")},setChargePointConnectedVehicleInstantChargingLimitAmount(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(o).amount&&this.updateChargePointChargeTemplate(o,e,"chargemode.instant_charging.limit.amount")},setChargePointConnectedVehiclePvChargingFeedInLimit(o,e){e!=this.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.pv_charging.feed_in_limit")},setChargePointConnectedVehiclePvChargingMinCurrent(o,e){let l=this.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(o),s=parseInt(e);s!=l&&!isNaN(s)&&this.updateChargePointChargeTemplate(o,s,"chargemode.pv_charging.min_current")},setChargePointConnectedVehiclePvChargingPhases(o,e){e!==void 0&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingPhases(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.pv_charging.phases_to_use")},setChargePointConnectedVehiclePvChargingLimit(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(o).selected&&this.updateChargePointChargeTemplate(o,e,"chargemode.pv_charging.limit.selected")},setChargePointConnectedVehiclePvChargingLimitSoc(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(o).soc&&this.updateChargePointChargeTemplate(o,parseInt(e),"chargemode.pv_charging.limit.soc")},setChargePointConnectedVehiclePvChargingLimitAmount(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(o).amount&&this.updateChargePointChargeTemplate(o,e,"chargemode.pv_charging.limit.amount")},setChargePointConnectedVehiclePvChargingMinSoc(o,e){let l=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(o),s=parseInt(e);s!=l&&!isNaN(s)&&this.updateChargePointChargeTemplate(o,s,"chargemode.pv_charging.min_soc")},setChargePointConnectedVehiclePvChargingMinSocCurrent(o,e){let l=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(o),s=parseInt(e);s!=l&&!isNaN(s)&&this.updateChargePointChargeTemplate(o,s,"chargemode.pv_charging.min_soc_current")},setChargePointConnectedVehiclePvChargingMinSocPhases(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.pv_charging.phases_to_use_min_soc")},setChargePointConnectedVehicleEcoChargingCurrent(o,e){let l=this.mqttStore.getChargePointConnectedVehicleEcoChargingCurrent(o),s=parseInt(e);s!=l&&!isNaN(s)&&this.updateChargePointChargeTemplate(o,s,"chargemode.eco_charging.current")},setChargePointConnectedVehicleEcoChargingPhases(o,e){e!==void 0&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(o)&&this.updateChargePointChargeTemplate(o,e,"chargemode.eco_charging.phases_to_use")},setChargePointConnectedVehicleEcoChargingLimit(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(o).selected&&this.updateChargePointChargeTemplate(o,e,"chargemode.eco_charging.limit.selected")},setChargePointConnectedVehicleEcoChargingLimitSoc(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(o).soc&&this.updateChargePointChargeTemplate(o,parseInt(e),"chargemode.eco_charging.limit.soc")},setChargePointConnectedVehicleEcoChargingLimitAmount(o,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(o).amount&&this.updateChargePointChargeTemplate(o,e,"chargemode.eco_charging.limit.amount")},setChargePointConnectedVehicleEcoChargingMaxPrice(o,e){let l=this.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(o),s=parseFloat(e);s!=l&&!isNaN(s)&&this.updateChargePointChargeTemplate(o,parseFloat((s/1e5).toFixed(7)),"chargemode.eco_charging.max_price")},setChargePointConnectedVehicleScheduledChargingPlanActive(o,e,l){console.log(`setChargePointConnectedVehicleScheduledChargingPlanActive: ${o} ${e} - ${l}`);const s=`openWB/chargepoint/${o}/set/charge_template`,t=this.mqttStore.updateState(s,l,`chargemode.scheduled_charging.plans.${e}.active`);this.$root.sendTopicToBroker(s,t)},setChargePointConnectedVehicleTimeChargingPlanActive(o,e,l){console.log(`setChargePointConnectedVehicleTimeChargingPlanActive: ${o} ${e} - ${l}`);const s=`openWB/chargepoint/${o}/set/charge_template`,t=this.mqttStore.updateState(s,l,`time_charging.plans.${e}.active`);this.$root.sendTopicToBroker(s,t)}}},it={class:"charge-points-card-wrapper"},ot={class:"plan-name"},lt={class:"plan-details"},rt={key:0},at={key:1},gt={key:2},ct={key:3},dt={key:4},ht={key:5},st={key:1},mt={class:"plan-name"},ut={class:"plan-details"},Ct={key:0},Pt={key:1},ft={key:2},_t={key:3},Vt={key:4};function pt(o,e,l,s,t,r){const _=d("charge-mode-modal"),k=d("vehicle-select-modal"),I=d("i-tab-title"),h=d("i-form-label"),V=d("extended-number-input"),m=d("i-form-group"),u=d("i-button"),p=d("i-button-group"),y=d("i-form"),w=d("i-tab"),q=d("ElectricityTariffChart"),v=d("font-awesome-icon"),N=d("i-alert"),F=d("i-row"),W=d("i-container"),ne=d("i-tabs"),ie=d("i-modal"),oe=d("manual-soc-input");return c(),S(T,null,[M("div",it,[(c(!0),S(T,null,A(t.mqttStore.getChargePointIds,a=>(c(),C(xe(t.mqttStore.getSimpleChargePointView?"SimpleChargePointCard":"ChargePointCard"),{key:a,"charge-point-id":a,"changes-locked":l.changesLocked,onVehicleClick:r.handleVehicleClick,onSocClick:r.handleSocClick,onChargeModeClick:r.handleChargeModeClick,onToggleChargePointSettings:r.toggleChargePointSettings,onSetChargePointConnectedVehicleChargeMode:r.setChargePointConnectedVehicleChargeMode},null,40,["charge-point-id","changes-locked","onVehicleClick","onSocClick","onChargeModeClick","onToggleChargePointSettings","onSetChargePointConnectedVehicleChargeMode"]))),128))]),n(_,{modelValue:t.modalChargeModeSettingVisible,"onUpdate:modelValue":e[0]||(e[0]=a=>t.modalChargeModeSettingVisible=a),"charge-point-id":t.modalChargePointId},null,8,["modelValue","charge-point-id"]),n(k,{modelValue:t.modalVehicleSelectVisible,"onUpdate:modelValue":e[1]||(e[1]=a=>t.modalVehicleSelectVisible=a),"charge-point-id":t.modalChargePointId},null,8,["modelValue","charge-point-id"]),n(ie,{modelValue:t.modalChargePointSettingsVisible,"onUpdate:modelValue":e[39]||(e[39]=a=>t.modalChargePointSettingsVisible=a),size:"lg"},{header:i(()=>[g(' Einstellungen für Fahrzeug "'+f(t.mqttStore.getChargePointConnectedVehicleName(t.modalChargePointId))+'" ',1)]),default:i(()=>[n(ne,{modelValue:t.modalActiveTab,"onUpdate:modelValue":e[38]||(e[38]=a=>t.modalActiveTab=a),stretch:""},{header:i(()=>[n(I,{for:"tab-instant-charging"},{default:i(()=>[...e[41]||(e[41]=[g(" Sofort ",-1)])]),_:1}),n(I,{for:"tab-pv-charging"},{default:i(()=>[...e[42]||(e[42]=[g(" PV ",-1)])]),_:1}),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(I,{key:0,for:"tab-eco-charging"},{default:i(()=>[...e[43]||(e[43]=[g(" Eco ",-1)])]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(I,{key:1,for:"tab-scheduled-charging"},{default:i(()=>[...e[44]||(e[44]=[g(" Ziel ",-1)])]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(I,{key:2,for:"tab-time-charging"},{default:i(()=>[...e[45]||(e[45]=[g(" Zeit ",-1)])]),_:1}))]),default:i(()=>[n(w,{name:"tab-instant-charging"},{default:i(()=>[n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[46]||(e[46]=[g("Stromstärke",-1)])]),_:1}),n(V,{unit:"A",min:6,max:32,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(t.modalChargePointId),"onUpdate:modelValue":e[2]||(e[2]=a=>r.setChargePointConnectedVehicleInstantChargingCurrent(t.modalChargePointId,a))},null,8,["model-value"])]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[47]||(e[47]=[g("Anzahl Phasen bei Überschuss",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==1,onClick:e[3]||(e[3]=a=>r.setChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId,1))},{default:i(()=>[...e[48]||(e[48]=[g(" 1 ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==3,onClick:e[4]||(e[4]=a=>r.setChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId,3))},{default:i(()=>[...e[49]||(e[49]=[g(" Maximum ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[50]||(e[50]=[g("Begrenzung",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="none",onClick:e[5]||(e[5]=a=>r.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>[...e[51]||(e[51]=[g(" Aus ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[6]||(e[6]=a=>r.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>[...e[52]||(e[52]=[g(" EV-SoC ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[7]||(e[7]=a=>r.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>[...e[53]||(e[53]=[g(" Energie ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc"?(c(),C(m,{key:0},{default:i(()=>[n(h,null,{default:i(()=>[...e[54]||(e[54]=[g("Max. SoC",-1)])]),_:1}),n(V,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[8]||(e[8]=a=>r.setChargePointConnectedVehicleInstantChargingLimitSoc(t.modalChargePointId,a))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount"?(c(),C(m,{key:1},{default:i(()=>[n(h,null,{default:i(()=>[...e[55]||(e[55]=[g("Max. Energie",-1)])]),_:1}),n(V,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[9]||(e[9]=a=>r.setChargePointConnectedVehicleInstantChargingLimitAmount(t.modalChargePointId,a*1e3))},null,8,["model-value"])]),_:1})):P("",!0)]),_:1})]),_:1}),n(w,{name:"tab-pv-charging"},{default:i(()=>[n(y,null,{default:i(()=>[n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[56]||(e[56]=[g("Minimaler Dauerstrom",-1)])]),_:1}),n(V,{unit:"A",labels:[{label:"Aus",value:0},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16}],"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(t.modalChargePointId),"onUpdate:modelValue":e[10]||(e[10]=a=>r.setChargePointConnectedVehiclePvChargingMinCurrent(t.modalChargePointId,a))},null,8,["model-value"])]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[57]||(e[57]=[g("Anzahl Phasen",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==1,onClick:e[11]||(e[11]=a=>r.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,1))},{default:i(()=>[...e[58]||(e[58]=[g(" 1 ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==3,onClick:e[12]||(e[12]=a=>r.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,3))},{default:i(()=>[...e[59]||(e[59]=[g(" Maximum ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==0?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==0,onClick:e[13]||(e[13]=a=>r.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,0))},{default:i(()=>[...e[60]||(e[60]=[g(" Automatik ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[61]||(e[61]=[g("Begrenzung",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="none",onClick:e[14]||(e[14]=a=>r.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>[...e[62]||(e[62]=[g(" Aus ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[15]||(e[15]=a=>r.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>[...e[63]||(e[63]=[g(" EV-SoC ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[16]||(e[16]=a=>r.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>[...e[64]||(e[64]=[g(" Energie ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc"?(c(),C(m,{key:0},{default:i(()=>[n(h,null,{default:i(()=>[...e[65]||(e[65]=[g("SoC-Limit für das Fahrzeug",-1)])]),_:1}),n(V,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[17]||(e[17]=a=>r.setChargePointConnectedVehiclePvChargingLimitSoc(t.modalChargePointId,a))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount"?(c(),C(m,{key:1},{default:i(()=>[n(h,null,{default:i(()=>[...e[66]||(e[66]=[g("Energie-Limit",-1)])]),_:1}),n(V,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[18]||(e[18]=a=>r.setChargePointConnectedVehiclePvChargingLimitAmount(t.modalChargePointId,a*1e3))},null,8,["model-value"])]),_:1})):P("",!0),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[67]||(e[67]=[g("Mindest-SoC für das Fahrzeug",-1)])]),_:1}),n(V,{unit:"%",labels:[{label:"Aus",value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95}],"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(t.modalChargePointId),"onUpdate:modelValue":e[19]||(e[19]=a=>r.setChargePointConnectedVehiclePvChargingMinSoc(t.modalChargePointId,a))},null,8,["model-value"])]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[68]||(e[68]=[g("Mindest-SoC Strom",-1)])]),_:1}),n(V,{min:6,max:32,unit:"A","model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(t.modalChargePointId),"onUpdate:modelValue":e[20]||(e[20]=a=>r.setChargePointConnectedVehiclePvChargingMinSocCurrent(t.modalChargePointId,a))},null,8,["model-value"])]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[69]||(e[69]=[g("Anzahl Phasen Mindest-SoC",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==1,onClick:e[21]||(e[21]=a=>r.setChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId,1))},{default:i(()=>[...e[70]||(e[70]=[g(" 1 ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==3,onClick:e[22]||(e[22]=a=>r.setChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId,3))},{default:i(()=>[...e[71]||(e[71]=[g(" Maximum ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[72]||(e[72]=[g("Einspeisegrenze beachten",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId)!==!0?"danger":"",onClick:e[23]||(e[23]=a=>r.setChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId,!1))},{default:i(()=>[...e[73]||(e[73]=[g(" Nein ",-1)])]),_:1},8,["color"]),n(u,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId)===!0?"success":"",onClick:e[24]||(e[24]=a=>r.setChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId,!0))},{default:i(()=>[...e[74]||(e[74]=[g(" Ja ",-1)])]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(w,{key:0,name:"tab-eco-charging"},{default:i(()=>[n(y,null,{default:i(()=>[t.mqttStore.getEtConfigured?(c(),C(m,{key:0},{default:i(()=>[n(h,null,{default:i(()=>[...e[75]||(e[75]=[g("Minimaler Dauerstrom unter Preisgrenze",-1)])]),_:1}),n(V,{unit:"A",min:6,max:32,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingCurrent(t.modalChargePointId),"onUpdate:modelValue":e[25]||(e[25]=a=>r.setChargePointConnectedVehicleEcoChargingCurrent(t.modalChargePointId,a))},null,8,["model-value"])]),_:1})):P("",!0),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[76]||(e[76]=[g("Anzahl Phasen",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==1,onClick:e[26]||(e[26]=a=>r.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,1))},{default:i(()=>[...e[77]||(e[77]=[g(" 1 ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==3,onClick:e[27]||(e[27]=a=>r.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,3))},{default:i(()=>[...e[78]||(e[78]=[g(" Maximum ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==0?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==0,onClick:e[28]||(e[28]=a=>r.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,0))},{default:i(()=>[...e[79]||(e[79]=[g(" Automatik ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),n(m,null,{default:i(()=>[n(h,null,{default:i(()=>[...e[80]||(e[80]=[g("Begrenzung",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="none",onClick:e[29]||(e[29]=a=>r.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>[...e[81]||(e[81]=[g(" Aus ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[30]||(e[30]=a=>r.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>[...e[82]||(e[82]=[g(" EV-SoC ",-1)])]),_:1},8,["color","active"]),n(u,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[31]||(e[31]=a=>r.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>[...e[83]||(e[83]=[g(" Energie ",-1)])]),_:1},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc"?(c(),C(m,{key:1},{default:i(()=>[n(h,null,{default:i(()=>[...e[84]||(e[84]=[g("SoC-Limit für das Fahrzeug",-1)])]),_:1}),n(V,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[32]||(e[32]=a=>r.setChargePointConnectedVehicleEcoChargingLimitSoc(t.modalChargePointId,a))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount"?(c(),C(m,{key:2},{default:i(()=>[n(h,null,{default:i(()=>[...e[85]||(e[85]=[g("Energie-Limit",-1)])]),_:1}),n(V,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[33]||(e[33]=a=>r.setChargePointConnectedVehicleEcoChargingLimitAmount(t.modalChargePointId,a*1e3))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getEtConfigured?(c(),C(m,{key:3},{default:i(()=>[n(h,null,{default:i(()=>[...e[86]||(e[86]=[g("Preisgrenze für strompreisbasiertes Laden",-1)])]),_:1}),n(V,{unit:"ct/kWh",min:-80,max:80,step:.01,precision:2,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId),"onUpdate:modelValue":e[34]||(e[34]=a=>r.setChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId,a))},null,8,["model-value"]),n(q,{"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId),"onUpdate:modelValue":e[35]||(e[35]=a=>r.setChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId,a))},null,8,["model-value"])]),_:1})):P("",!0)]),_:1})]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(w,{key:1,name:"tab-scheduled-charging"},{default:i(()=>[!t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId)||t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId).length===0?(c(),C(N,{key:0,color:"warning"},{icon:i(()=>[n(v,{"fixed-width":"",icon:["fas","fa-info-circle"]})]),default:i(()=>[e[87]||(e[87]=g(" Es wurden noch keine Zeitpläne für das Zielladen eingerichtet. ",-1))]),_:1})):(c(),C(y,{key:1},{default:i(()=>[(c(!0),S(T,null,A(t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId),(a,E)=>(c(),C(m,{key:E},{default:i(()=>[n(W,null,{default:i(()=>[n(F,null,{default:i(()=>[n(u,{size:"lg",block:"",color:a.active?"success":"danger",onClick:le=>r.setChargePointConnectedVehicleScheduledChargingPlanActive(t.modalChargePointId,E,!a.active)},{default:i(()=>[M("div",ot,f(a.name),1),M("div",lt,[a.frequency.selected=="once"?(c(),S("div",rt,[n(v,{icon:["fas","calendar-day"]}),g(" "+f(t.mqttStore.formatDate(a.frequency.once)),1)])):P("",!0),a.frequency.selected=="daily"?(c(),S("div",at,[n(v,{icon:["fas","calendar-week"]}),e[88]||(e[88]=g(" täglich ",-1))])):P("",!0),a.frequency.selected=="weekly"?(c(),S("div",gt,[n(v,{icon:["fas","calendar-alt"]}),g(" "+f(t.mqttStore.formatWeeklyScheduleDays(a.frequency.weekly)),1)])):P("",!0),M("div",null,[n(v,{icon:["fas","clock"]}),g(" "+f(a.time),1)]),a.limit.selected=="soc"?(c(),S("div",ct,[n(v,{icon:["fas","car-battery"]}),g(" "+f(a.limit.soc_scheduled)+" % ",1),n(v,{icon:["fas",a.bidi_charging_enabled?"right-left":"right-long"]},null,8,["icon"]),g(" "+f(a.limit.soc_limit)+" % ",1)])):P("",!0),a.limit.selected=="amount"?(c(),S("div",dt,[n(v,{icon:["fas","bolt"]}),g(" "+f(a.limit.amount/1e3)+" kWh ",1)])):P("",!0),a.et_active?(c(),S("div",ht,[n(v,{icon:["fas","coins"]})])):P("",!0)])]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(c(),C(w,{key:2,name:"tab-time-charging"},{default:i(()=>[n(y,null,{default:i(()=>[n(m,{class:"_margin-bottom:2"},{default:i(()=>[n(h,null,{default:i(()=>[...e[89]||(e[89]=[g("Zeitladen aktivieren",-1)])]),_:1}),n(p,{block:""},{default:i(()=>[n(u,{color:r.timeChargingEnabled(t.modalChargePointId)?"":"danger",onClick:e[36]||(e[36]=a=>r.setChargePointConnectedVehicleTimeChargingActive(t.modalChargePointId,!1))},{default:i(()=>[...e[90]||(e[90]=[g(" Nein ",-1)])]),_:1},8,["color"]),n(u,{color:r.timeChargingEnabled(t.modalChargePointId)?"success":"",onClick:e[37]||(e[37]=a=>r.setChargePointConnectedVehicleTimeChargingActive(t.modalChargePointId,!0))},{default:i(()=>[...e[91]||(e[91]=[g(" Ja ",-1)])]),_:1},8,["color"])]),_:1})]),_:1}),!t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId)||t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId).length===0?(c(),C(N,{key:0,color:"warning"},{icon:i(()=>[n(v,{"fixed-width":"",icon:["fas","fa-circle-info"]})]),default:i(()=>[e[92]||(e[92]=g(" Es wurden noch keine Zeitpläne für das Zeitladen eingerichtet. ",-1))]),_:1})):(c(),S("div",st,[(c(!0),S(T,null,A(t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId),(a,E)=>(c(),C(m,{key:E},{default:i(()=>[n(W,null,{default:i(()=>[n(F,null,{default:i(()=>[n(u,{size:"lg",block:"",color:a.active?"success":"danger",onClick:le=>r.setChargePointConnectedVehicleTimeChargingPlanActive(t.modalChargePointId,E,!a.active)},{default:i(()=>[M("div",mt,f(a.name),1),M("div",ut,[a.frequency.selected=="once"?(c(),S("div",Ct,[n(v,{icon:["fas","calendar-day"]}),g(" "+f(t.mqttStore.formatDateRange(a.frequency.once)),1)])):P("",!0),a.frequency.selected=="daily"?(c(),S("div",Pt,[n(v,{icon:["fas","calendar-week"]}),e[93]||(e[93]=g(" täglich ",-1))])):P("",!0),a.frequency.selected=="weekly"?(c(),S("div",ft,[n(v,{icon:["fas","calendar-alt"]}),g(" "+f(t.mqttStore.formatWeeklyScheduleDays(a.frequency.weekly)),1)])):P("",!0),M("div",null,[n(v,{icon:["fas","clock"]}),g(" "+f(a.time.join("-")),1)]),a.limit.selected=="soc"?(c(),S("div",_t,[n(v,{icon:["fas","car-battery"]}),g(" "+f(a.limit.soc)+" % ",1)])):P("",!0),a.limit.selected=="amount"?(c(),S("div",Vt,[n(v,{icon:["fas","bolt"]}),g(" "+f(a.limit.amount/1e3)+" kWh ",1)])):P("",!0)])]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),n(oe,{modelValue:t.modalManualSocInputVisible,"onUpdate:modelValue":e[40]||(e[40]=a=>t.modalManualSocInputVisible=a),"vehicle-id":t.modalVehicleId},null,8,["modelValue","vehicle-id"])],64)}const wt=L(nt,[["render",pt],["__scopeId","data-v-dd5faf5e"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/views/ChargePointsView.vue"]]);export{wt as default};
