import{u as y}from"./index-ca68d5d8.js";import{D as B,S as I}from"./SparkLine-163dd578.js";import{l as F,h as M,i as T,j as z,k as N,f as U,a as D,m as W,e as j,n as A,o as E,p as R,q as O,r as G,s as H,F as X}from"./vendor-fortawesome-55766d27.js";import{l,o as f,e as V,j as J,F as q,A as K,i,s as o,p as a,n as C,k as h,x as m,z as _,G as Q}from"./vendor-ff8c19ec.js";import{_ as Y}from"./vendor-inkline-44401e4a.js";F.add(M,T,z,N,U,D,W,j,A,E,R,O,G,H);const Z={name:"ChargePointsView",data(){return{mqttStore:y(),modalChargePointSettingsVisible:!1}},props:{changesLocked:{required:!1,type:Boolean,default:!1}},components:{DashBoardCard:B,SparkLine:I,FontAwesomeIcon:X},computed:{vehicleList(){let n=this.mqttStore.getVehicleList;var s=[];return Object.keys(n).forEach(g=>{let P=parseInt(g.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""));s.push({id:P,label:n[g]})}),s}},methods:{toggleChargePointSettings(n){if(console.log(n),this.changesLocked){console.debug("toggleChargePointSettings: changes locked!");return}this.modalChargePointSettingsVisible=!0},toggleChargePointManualLock(n){if(this.changesLocked){console.debug("toggleChargePointManualLock: changes locked!");return}this.$root.sendTopicToBroker(`openWB/chargepoint/${n}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${n}/set/manual_lock`))},getChargePointConnectedVehicle(n){return{id:this.mqttStore.getChargePointConnectedVehicleId(n),label:this.mqttStore.getChargePointConnectedVehicleName(n)}},setChargePointConnectedVehicle(n,s){if(this.changesLocked){console.debug("setChargePointConnectedVehicle: changes locked!");return}s.id!=this.mqttStore.getChargePointConnectedVehicleId(n)&&console.debug("vehicle changed")}}},$={class:"charge-points-card-wrapper"};function ee(n,s,g,P,e,u){const c=l("font-awesome-icon"),p=l("i-badge"),k=l("i-button"),r=l("i-column"),d=l("i-row"),w=l("spark-line"),b=l("i-select"),v=l("i-container"),x=l("dash-board-card"),L=l("i-modal");return f(),V(q,null,[J("div",$,[(f(!0),V(q,null,K(e.mqttStore.getChargePointIds,t=>(f(),C(x,{key:t,color:"primary"},{headerLeft:a(()=>[h(m(e.mqttStore.getChargePointName(t)),1)]),headerRight:a(()=>[o(p,{size:"lg"},{default:a(()=>[o(c,{"fixed-width":"",icon:e.mqttStore.getChargePointPlugState(t)?e.mqttStore.getChargePointChargeState(t)?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"],class:_(e.mqttStore.getChargePointPlugState(t)?e.mqttStore.getChargePointChargeState(t)?["_color:success"]:"_color:warning":"_color:gray")},null,8,["icon","class"])]),_:2},1024)]),default:a(()=>[o(v,null,{default:a(()=>[o(d,null,{default:a(()=>[i(" charge point data on left side "),o(r,null,{default:a(()=>[o(d,null,{default:a(()=>[o(r,{class:"_padding-left:0 _padding-right:0"},{default:a(()=>[o(k,{size:"lg",disabled:g.changesLocked,outline:g.changesLocked},{default:a(()=>[o(c,{"fixed-width":"",icon:e.mqttStore.getChargePointManualLock(t)?["fas","fa-lock"]:["fas","fa-lock-open"],class:_(e.mqttStore.getChargePointManualLock(t)?["_color:danger"]:"_color:success"),onClick:S=>u.toggleChargePointManualLock(t)},null,8,["icon","class","onClick"])]),_:2},1032,["disabled","outline"])]),_:2},1024),o(r,{class:"_text-align:right _padding-left:0"},{default:a(()=>[h(m(e.mqttStore.getChargePointPower(t))+" "+m(e.mqttStore.getChargePointPhasesInUse(t))+" "+m(e.mqttStore.getChargePointSetCurrent(t)),1)]),_:2},1024)]),_:2},1024),o(d,null,{default:a(()=>[o(r,{class:"_padding-left:0"},{default:a(()=>[o(w,{color:"var(--color--primary)",data:e.mqttStore.getChargePointPowerChartData(t)},null,8,["data"])]),_:2},1024)]),_:2},1024)]),_:2},1024),i(" vehicle data on right side "),o(r,{md:"6"},{default:a(()=>[o(d,null,{default:a(()=>[i(" vehicle select and soc "),o(r,{class:"_padding-right:0 _padding-left:0"},{default:a(()=>[o(b,{size:"lg",disabled:g.changesLocked||!e.mqttStore.getChargePointVehicleChangePermitted(t),"model-value":u.getChargePointConnectedVehicle(t),options:u.vehicleList,placeholder:"Bitte auswÃ¤hlen..","onUpdate:modelValue":S=>u.setChargePointConnectedVehicle(t,S)},Q({prefix:a(()=>[o(c,{"fixed-width":"",icon:["fas","fa-car"]})]),_:2},[e.mqttStore.getVehicleSocConfigured(e.mqttStore.getChargePointConnectedVehicleId(t))?{name:"suffix",fn:a(()=>[o(c,{"fixed-width":"",icon:["fas","fa-car-battery"]}),h(" "+m(e.mqttStore.getChargePointConnectedVehicleSoc(t).soc)+"% ",1),e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))!=0?(f(),C(c,{key:0,"fixed-width":"",icon:e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:_(e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):i("v-if",!0)]),key:"0"}:void 0]),1032,["disabled","model-value","options","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),o(d,{class:"_padding-top:1 _display:flex"},{default:a(()=>[i(" charge mode info "),o(r,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:a(()=>[o(p,{size:"lg",class:"charge-mode",color:e.mqttStore.getChargePointConnectedVehicleChargeMode(t).class},{default:a(()=>[h(m(e.mqttStore.getChargePointConnectedVehicleChargeMode(t).name),1)]),_:2},1032,["color"])]),_:2},1024),o(r,{class:"_flex-grow:0 _padding-right:0"},{default:a(()=>[o(p,{size:"lg"},{default:a(()=>[o(c,{"fixed-width":"",icon:e.mqttStore.getChargePointConnectedVehiclePriority(t)?["fas","fa-star"]:["far","fa-star"],class:_(e.mqttStore.getChargePointConnectedVehiclePriority(t)?"_color:warning":"")},null,8,["icon","class"]),e.mqttStore.getChargePointConnectedVehicleTimeChargingActive(t)?(f(),C(c,{key:0,"fixed-width":"",icon:e.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(t)?["fas","fa-clock"]:["far","fa-clock"],class:_(e.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(t)?"_color:success":"")},null,8,["icon","class"])):i("v-if",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),g.changesLocked?i("v-if",!0):(f(),C(d,{key:0,class:"_padding-top:1"},{default:a(()=>[o(r,{class:"_padding-left:0 _padding-right:0"},{default:a(()=>[o(k,{block:"",onClick:S=>u.toggleChargePointSettings(t)},{default:a(()=>[o(c,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),i(" modals "),o(L,{modelValue:e.modalChargePointSettingsVisible,"onUpdate:modelValue":s[0]||(s[0]=t=>e.modalChargePointSettingsVisible=t)},{header:a(()=>[h(" Modal Header ")]),footer:a(()=>[h(" Modal Footer ")]),default:a(()=>[h(" This is the modal body. Useful information goes here. ")]),_:1},8,["modelValue"])],64)}const re=Y(Z,[["render",ee],["__scopeId","data-v-dd5faf5e"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/views/ChargePointsView.vue"]]);export{re as default};
