import{l,o as c,n as f,p as n,s as u,f as _,i as y,e as d,F as P,A as S,z as C,j as k,Q as $}from"./vendor-e07709f3.js";import{_ as g}from"./vendor-inkline-4a446dd5.js";import{u as B}from"./index-2bb46dc7.js";import{l as D,j as b,k as N,m as z,F as L}from"./vendor-fortawesome-cc5e1458.js";const M={name:"DashBoardCard",props:{color:String}};function I(t,e,s,r,h,o){const a=l("i-column"),i=l("i-row"),v=l("i-container"),x=l("i-card");return c(),f(x,{color:s.color},{header:n(()=>[u(v,null,{default:n(()=>[u(i,null,{default:n(()=>[u(a,null,{default:n(()=>[_(t.$slots,"headerLeft",{},void 0,!0)]),_:3}),t.$slots.headerRight?(c(),f(a,{key:0,class:"_flex-grow:0 _text-align:right _white-space:nowrap"},{default:n(()=>[_(t.$slots,"headerRight",{},void 0,!0)]),_:3})):y("v-if",!0)]),_:3})]),_:3})]),default:n(()=>[_(t.$slots,"default",{},void 0,!0)]),_:3},8,["color"])}const Y=g(M,[["render",I],["__scopeId","data-v-aa92abad"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/DashBoardCard.vue"]]);const m={props:{data:{required:!1,type:Array},socData:{required:!1,type:Array},width:{Number,default:250},height:{Number,default:70},gap:{Number,default:3},stroke:{Number,default:3},min:{Number,default:0},max:{Number,default:1},color:{String,default:"var(--color--primary)"},colorNegative:{String,default:void 0}},computed:{highestPoint(){return Math.max(1,this.max,...this.slicedData)},lowestPoint(){return Math.min(0,this.min,...this.slicedData)},maxPoints(){return Math.floor(this.width/(this.stroke+this.gap))},slicedData(){if(this.data)return this.data.slice(-this.maxPoints)},slicedSocData(){if(this.socData)return this.socData.slice(-this.maxPoints)},zeroHeight(){return this.height-(0-this.lowestPoint)/(this.highestPoint-this.lowestPoint)*this.height},coordinates(){if(this.data)return this.calculateCoordinates(this.slicedData,this.lowestPoint,this.highestPoint)},socCoordinates(){if(this.socData)return this.calculateCoordinates(this.slicedSocData,0,100)},bars(){if(this.coordinates){const t=[];return this.coordinates.forEach(e=>{const s=e.x,r=e.y,h=this.stroke,o=Math.min(r,this.zeroHeight),a=Math.abs(r-this.zeroHeight),i=r>this.zeroHeight;t.push({x:s,y:o,width:h,height:a,negative:i})}),t}},socPath(){if(this.socCoordinates&&this.socCoordinates.length>0){let e=this.socCoordinates.slice(0,1)[0],s=this.socCoordinates.slice(-1)[0];var t=`M 0,${this.height}`;return t+=` L 0,${e.y}`,this.socCoordinates.forEach(r=>{t+=` L ${r.x+this.stroke/2},${r.y}`}),t+=` L ${s.x+this.stroke},${s.y} L ${s.x+this.stroke},${this.height} Z`,t}}},methods:{calculateCoordinates(t,e,s){const r=[];return t.forEach((h,o)=>{const a=o*this.width/this.maxPoints+1,i=this.height-(h-e)/(s-e)*this.height;r.push({x:a,y:i})}),r}}},p=()=>{$(t=>({"fc7172b1-color":t.color,"fc7172b1-colorNegative":t.colorNegative}))},w=m.setup;m.setup=w?(t,e)=>(p(),w(t,e)):p;const q=["viewBox"],A=["d"],E=["x","y","width","height"],H=["y1","x2","y2"];function V(t,e,s,r,h,o){return c(),d("svg",{class:"spark-line",viewBox:`0 0 ${s.width} ${s.height}`,width:"100%",preserveAspectRatio:"xMinYMin"},[s.socData?(c(),d("path",{key:0,class:"soc-path",d:o.socPath},null,8,A)):y("v-if",!0),(c(!0),d(P,null,S(o.bars,a=>(c(),d("rect",{key:a.x,x:a.x,y:a.y,width:a.width,height:a.height,class:C(s.colorNegative&&a.negative?"negative":"")},null,10,E))),128)),k("line",{class:"zero-line",x1:0,y1:o.zeroHeight,x2:s.width,y2:o.zeroHeight},null,8,H)],8,q)}const Z=g(m,[["render",V],["__scopeId","data-v-fc7172b1"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/SparkLine.vue"]]);D.add(b,N,z);const F={name:"ChargePointStateBadge",props:{chargePointId:{required:!0,type:Array}},data(){return{mqttStore:B()}},components:{FontAwesomeIcon:L},computed:{plugState(){var t=!1;return this.chargePointId.forEach(e=>{t|=this.mqttStore.getChargePointPlugState(e)}),t},chargeState(){var t=!1;return this.chargePointId.forEach(e=>{t|=this.mqttStore.getChargePointChargeState(e)}),t},stateIcon(){return this.plugState?this.chargeState?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"]},stateClass(){return this.plugState?this.chargeState?"_color:success":"_color:warning":"_color:gray"}}};function j(t,e,s,r,h,o){const a=l("font-awesome-icon"),i=l("i-badge");return c(),f(i,{size:"lg"},{default:n(()=>[u(a,{"fixed-width":"",icon:o.stateIcon,class:C(o.stateClass)},null,8,["icon","class"])]),_:1})}const G=g(F,[["render",j],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/components/ChargePointPlugBadge.vue"]]);export{G as C,Y as D,Z as S};
