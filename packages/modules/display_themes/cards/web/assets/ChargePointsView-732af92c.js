import{u as y}from"./index-095a9512.js";import{D as B,S as I}from"./SparkLine-27d3ff61.js";import{l as F,h as M,i as z,j as N,k as T,f as U,a as D,m as W,e as j,n as E,o as A,p as O,F as G}from"./vendor-fortawesome-8b8a160d.js";import{l,o as f,e as k,j as H,F as V,A as R,i as c,s as a,p as o,n as _,k as h,x as m,z as p,G as X}from"./vendor-ff8c19ec.js";import{_ as J}from"./vendor-inkline-4ad9dc37.js";F.add(M,z,N,T,U,D,W,j,E,A,O);const K={name:"ChargePointsView",data(){return{mqttStore:y(),modalChargePointSettingsVisible:!1}},props:{changesLocked:{required:!1,type:Boolean,default:!1}},components:{DashBoardCard:B,SparkLine:I,FontAwesomeIcon:G},computed:{vehicleList(){let n=this.mqttStore.getVehicleList;var r=[];return Object.keys(n).forEach(s=>{let S=parseInt(s.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""));r.push({id:S,label:n[s]})}),r}},methods:{toggleChargePointSettings(n){if(console.log(n),this.changesLocked){console.debug("toggleChargePointSettings: changes locked!");return}this.modalChargePointSettingsVisible=!0},toggleChargePointManualLock(n){if(this.changesLocked){console.debug("toggleChargePointManualLock: changes locked!");return}this.$root.sendTopicToBroker(`openWB/chargepoint/${n}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${n}/set/manual_lock`))},getChargePointConnectedVehicle(n){return{id:this.mqttStore.getChargePointConnectedVehicleId(n),label:this.mqttStore.getChargePointConnectedVehicleName(n)}},setChargePointConnectedVehicle(n,r){if(console.log("set",n,r),this.changesLocked){console.debug("setChargePointConnectedVehicle: changes locked!");return}r.id!=this.mqttStore.getChargePointConnectedVehicleId(n)&&console.debug("vehicle changed")}}},Q={class:"charge-points-card-wrapper"};function Y(n,r,s,S,e,u){const g=l("font-awesome-icon"),q=l("i-badge"),P=l("i-button"),i=l("i-column"),d=l("i-row"),w=l("spark-line"),b=l("i-select"),L=l("i-container"),v=l("dash-board-card"),x=l("i-modal");return f(),k(V,null,[H("div",Q,[(f(!0),k(V,null,R(e.mqttStore.getChargePointIds,t=>(f(),_(v,{key:t,color:"primary"},{headerLeft:o(()=>[h(m(e.mqttStore.getChargePointName(t)),1)]),headerRight:o(()=>[a(q,{size:"lg"},{default:o(()=>[a(g,{"fixed-width":"",icon:e.mqttStore.getChargePointPlugState(t)?e.mqttStore.getChargePointChargeState(t)?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"],class:p(e.mqttStore.getChargePointPlugState(t)?e.mqttStore.getChargePointChargeState(t)?["_color:success"]:"_color:warning":"_color:gray")},null,8,["icon","class"])]),_:2},1024)]),default:o(()=>[a(L,null,{default:o(()=>[a(d,null,{default:o(()=>[c(" charge point data on left side "),a(i,null,{default:o(()=>[a(d,null,{default:o(()=>[a(i,{class:"_padding-left:0 _padding-right:0"},{default:o(()=>[a(P,{size:"lg",disabled:s.changesLocked,outline:s.changesLocked},{default:o(()=>[a(g,{"fixed-width":"",icon:e.mqttStore.getChargePointManualLock(t)?["fas","fa-lock"]:["fas","fa-lock-open"],class:p(e.mqttStore.getChargePointManualLock(t)?["_color:danger"]:"_color:success"),onClick:C=>u.toggleChargePointManualLock(t)},null,8,["icon","class","onClick"])]),_:2},1032,["disabled","outline"])]),_:2},1024),a(i,{class:"_text-align:right _padding-left:0"},{default:o(()=>[h(m(e.mqttStore.getChargePointPower(t))+" "+m(e.mqttStore.getChargePointPhasesInUse(t))+" "+m(e.mqttStore.getChargePointSetCurrent(t)),1)]),_:2},1024)]),_:2},1024),a(d,null,{default:o(()=>[a(i,{class:"_padding-left:0"},{default:o(()=>[a(w,{color:"var(--color--primary)",data:e.mqttStore.getChargePointPowerChartData(t)},null,8,["data"])]),_:2},1024)]),_:2},1024)]),_:2},1024),c(" vehicle data on right side "),a(i,{md:"6"},{default:o(()=>[a(d,null,{default:o(()=>[c(" vehicle select and soc "),a(i,{class:"_padding-right:0 _padding-left:0"},{default:o(()=>[a(b,{size:"lg",disabled:s.changesLocked,"model-value":u.getChargePointConnectedVehicle(t),options:u.vehicleList,placeholder:"Bitte auswÃ¤hlen..","onUpdate:modelValue":C=>u.setChargePointConnectedVehicle(t,C)},X({prefix:o(()=>[a(g,{"fixed-width":"",icon:["fas","fa-car"]})]),_:2},[e.mqttStore.getVehicleSocConfigured(e.mqttStore.getChargePointConnectedVehicleId(t))?{name:"suffix",fn:o(()=>[a(g,{"fixed-width":"",icon:["fas","fa-car-battery"]}),h(" "+m(e.mqttStore.getChargePointConnectedVehicleSoc(t).soc)+"% ",1),e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))!=0?(f(),_(g,{key:0,"fixed-width":"",icon:e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:p(e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>0?e.mqttStore.getVehicleFaultState(e.mqttStore.getChargePointConnectedVehicleId(t))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):c("v-if",!0)]),key:"0"}:void 0]),1032,["disabled","model-value","options","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(d,{class:"_padding-top:1"},{default:o(()=>[c(" charge mode info "),a(i,{class:"_padding-right:0 _padding-left:0"},{default:o(()=>[h(m(e.mqttStore.getChargePointConnectedVehicleChargeMode(t))+" ",1),e.mqttStore.getChargePointConnectedVehiclePriority(t)?(f(),_(g,{key:0,"fixed-width":"",icon:["fas","fa-star"]})):c("v-if",!0)]),_:2},1024)]),_:2},1024),s.changesLocked?c("v-if",!0):(f(),_(d,{key:0,class:"_padding-top:1"},{default:o(()=>[a(i,{class:"_padding-left:0 _padding-right:0"},{default:o(()=>[a(P,{size:"lg",onClick:C=>u.toggleChargePointSettings(t)},{default:o(()=>[a(g,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),c(" modals "),a(x,{modelValue:e.modalChargePointSettingsVisible,"onUpdate:modelValue":r[0]||(r[0]=t=>e.modalChargePointSettingsVisible=t)},{header:o(()=>[h(" Modal Header ")]),footer:o(()=>[h(" Modal Footer ")]),default:o(()=>[h(" This is the modal body. Useful information goes here. ")]),_:1},8,["modelValue"])],64)}const ae=J(K,[["render",Y],["__scopeId","data-v-dd5faf5e"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/views/ChargePointsView.vue"]]);export{ae as default};
