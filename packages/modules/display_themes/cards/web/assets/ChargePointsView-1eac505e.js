import{u as w}from"./index-5535de60.js";import{D as B,S as v}from"./SparkLine-c51a7e14.js";import{l as q,e as W,g as y,h as I,i as x,j as b,k as L,m as D,c as F,n as M,o as T,F as N}from"./vendor-fortawesome-dff72cf5.js";import{l as c,o as s,e as P,F as j,A,p as _,q as n,k as u,y as l,t as o,n as f,i as m}from"./vendor-a9456d51.js";import{_ as E}from"./vendor-inkline-e555ebca.js";q.add(W,y,I,x,b,L,D,F,M,T);const O={name:"ChargePointsView",data(){return{mqttStore:w()}},components:{DashBoardCard:B,SparkLine:v,FontAwesomeIcon:N},computed:{chargePointIds(){return this.mqttStore.getObjectIds("cp")},vehicleList(){let e=this.mqttStore.getWildcardTopics("openWB/vehicle/+/name");var h={};return Object.keys(e).forEach(d=>{let C=parseInt(d.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""));h[C]=e[d]}),h}},methods:{toggleChargePointSettings(e){console.log(e)},getChargePointName(e){return this.mqttStore.topics[`openWB/chargepoint/${e}/config`]!==void 0?this.mqttStore.topics[`openWB/chargepoint/${e}/config`].name.toString():"---"},getChargePointPower(e){return this.mqttStore.getValueString(`openWB/chargepoint/${e}/get/power`)},getChargePointPowerChartData(e){return this.mqttStore.chartData[`openWB/chargepoint/${e}/get/power`]},getVehicleSocChartData(e){return this.mqttStore.chartData[`openWB/vehicle/${e}/get/soc`]},getChargePointSetCurrent(e){return this.mqttStore.getValueString(`openWB/chargepoint/${e}/set/current`,"A")},getChargePointPhasesInUse(e){return["/","①","②","③"][this.mqttStore.topics[`openWB/chargepoint/${e}/get/phases_in_use`]]},getChargePointPlugState(e){return this.mqttStore.getValueBool(`openWB/chargepoint/${e}/get/plug_state`)},getChargePointChargeState(e){return this.mqttStore.getValueBool(`openWB/chargepoint/${e}/get/charge_state`)},getChargePointManualLock(e){return this.mqttStore.getValueBool(`openWB/chargepoint/${e}/set/manual_lock`)},toggleChargePointManualLock(e){this.$root.sendTopicToBroker(`openWB/chargepoint/${e}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${e}/set/manual_lock`))},getChargePointConnectedVehicleInfo(e){return this.mqttStore.topics[`openWB/chargepoint/${e}/get/connected_vehicle/info`]},getChargePointConnectedVehicleId(e){return this.mqttStore.topics[`openWB/chargepoint/${e}/get/connected_vehicle/info`].id},getChargePointConnectedVehicleSoc(e){return this.mqttStore.topics[`openWB/chargepoint/${e}/get/connected_vehicle/soc`]},getVehicleSocConfigured(e){return this.mqttStore.topics[`openWB/vehicle/${e}/soc_module/config`].type!=null},getVehicleFaultState(e){return this.mqttStore.topics[`openWB/vehicle/${e}/get/fault_state`]}}},z={class:"charge-points-card-wrapper"};function U(e,h,d,C,R,t){const i=c("font-awesome-icon"),S=c("i-badge"),r=c("i-column"),g=c("i-row"),p=c("spark-line"),k=c("i-container"),V=c("dash-board-card");return s(),P("div",z,[(s(!0),P(j,null,A(t.chargePointIds,a=>(s(),_(V,{key:a,color:"primary"},{headerLeft:n(()=>[u(l(t.getChargePointName(a)),1)]),headerRight:n(()=>[o(S,{size:"lg"},{default:n(()=>[o(i,{"fixed-width":"",icon:t.getChargePointPlugState(a)?t.getChargePointChargeState(a)?["fas","fa-plug-circle-bolt"]:["fas","fa-plug-circle-check"]:["fas","fa-plug-circle-xmark"],class:f(t.getChargePointPlugState(a)?t.getChargePointChargeState(a)?["_color:success"]:"_color:warning":"_color:gray")},null,8,["icon","class"])]),_:2},1024)]),default:n(()=>[o(k,null,{default:n(()=>[o(g,null,{default:n(()=>[o(r,null,{default:n(()=>[o(g,null,{default:n(()=>[o(r,null,{default:n(()=>[o(i,{"fixed-width":"",icon:t.getChargePointManualLock(a)?["fas","fa-lock"]:["fas","fa-lock-open"],class:f(t.getChargePointManualLock(a)?["_color:danger"]:"_color:success"),onClick:X=>t.toggleChargePointManualLock(a)},null,8,["icon","class","onClick"])]),_:2},1024),o(r,{class:"_text-align:right"},{default:n(()=>[u(l(t.getChargePointPower(a))+" "+l(t.getChargePointPhasesInUse(a))+" "+l(t.getChargePointSetCurrent(a)),1)]),_:2},1024)]),_:2},1024),o(g,null,{default:n(()=>[o(r,null,{default:n(()=>[o(p,{color:"var(--color--primary)",data:t.getChargePointPowerChartData(a)},null,8,["data"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(r,{md:"6"},{default:n(()=>[o(g,null,{default:n(()=>[o(r,null,{default:n(()=>[o(i,{"fixed-width":"",icon:["fas","fa-car"]}),u(" "+l(t.getChargePointConnectedVehicleInfo(a).name),1)]),_:2},1024),t.getVehicleSocConfigured(t.getChargePointConnectedVehicleId(a))?(s(),_(r,{key:0,class:"_text-align:right"},{default:n(()=>[o(i,{"fixed-width":"",icon:["fas","fa-car-battery"]}),u(" "+l(t.getChargePointConnectedVehicleSoc(a).soc)+"% ",1),t.getVehicleFaultState(t.getChargePointConnectedVehicleId(a))!=0?(s(),_(i,{key:0,"fixed-width":"",icon:t.getVehicleFaultState(t.getChargePointConnectedVehicleId(a))>0?t.getVehicleFaultState(t.getChargePointConnectedVehicleId(a))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:f(t.getVehicleFaultState(t.getChargePointConnectedVehicleId(a))>0?t.getVehicleFaultState(t.getChargePointConnectedVehicleId(a))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):m("v-if",!0)]),_:2},1024)):m("v-if",!0)]),_:2},1024),o(g,null,{default:n(()=>[o(r,null,{default:n(()=>[o(p,{color:"var(--color--primary)",socData:t.getVehicleSocChartData(t.getChargePointConnectedVehicleId(a))},null,8,["socData"])]),_:2},1024)]),_:2},1024),m(` <i-row>
              <i-column>
                <i-button
                  block
                  color="dark"
                  @click="toggleChargePointSettings(id)"
                >
                  <font-awesome-icon fixed-width :icon="['fas', 'fa-wrench']" />
                </i-button>
              </i-column>
            </i-row> `)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])}const Y=E(O,[["render",U],["__scopeId","data-v-dd5faf5e"],["__file","/var/www/html/openWB/packages/modules/display_themes/cards/source/src/views/ChargePointsView.vue"]]);export{Y as default};
