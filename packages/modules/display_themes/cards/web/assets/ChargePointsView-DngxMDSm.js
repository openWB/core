var re=Object.defineProperty;var ce=(n,e,o)=>e in n?re(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var w=(n,e,o)=>ce(n,typeof e!="symbol"?e+"":e,o);import{u as x,C as de,N as he}from"./index-DAUHX-z6.js";import{D}from"./DashboardCard-DS7AgUYm.js";import{C as W,S as ge}from"./ChargePointPlugBadge-CaZ8nk6N.js";import{F as B,l as F,b as se,c as me,j as Ce,k as R,m as O,e as j,n as Z,o as K,p as J,q as H,r as Q,s as X,t as Y,u as G,v as ue,w as Pe,x as pe,y as fe,z as _e}from"./vendor-fortawesome-CfiBAnfT.js";import{_ as M}from"./vendor-inkline-S9CBmrTS.js";import{l as u,q as i,p as h,o as d,s as a,z as b,e as I,F as E,k as c,f as P,x as p,A as z,I as Ve,P as Se,Q as Ie,S as ve,U as ke,V as be,W as qe,X as ye,Y as Le,Z as Me,_ as xe,i as T,n as we}from"./vendor-Bzn5cd2Y.js";import{C as Te}from"./ChargeModeModal-D1UJpAHo.js";F.add(se,me);const ee=M({name:"ChargePointLockButton",components:{FontAwesomeIcon:B},props:{chargePointId:{required:!0,type:Number},changesLocked:{required:!1,type:Boolean,default:!1}},data:()=>({mqttStore:x()}),computed:{locked(){return this.mqttStore.getChargePointManualLock(this.chargePointId)},stateIcon(){return this.locked?["fas","fa-lock"]:["fas","fa-lock-open"]},stateClass(){return this.locked?["_color:danger"]:"_color:success"}},methods:{toggleChargePointManualLock(){this.changesLocked||this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`,!this.mqttStore.getValueBool(`openWB/chargepoint/${this.chargePointId}/set/manual_lock`))}}},[["render",function(n,e,o,g,t,l){const f=h("font-awesome-icon"),k=h("i-button");return d(),u(k,{size:"lg",disabled:o.changesLocked,outline:o.changesLocked},{default:i(()=>[a(f,{"fixed-width":"",icon:l.stateIcon,class:b(l.stateClass),onClick:e[0]||(e[0]=v=>l.toggleChargePointManualLock())},null,8,["icon","class"])]),_:1},8,["disabled","outline"])}]]);F.add(Ce);const te=M({name:"ChargePointCodeButton",components:{FontAwesomeIcon:B,CodeInputModal:de},props:{chargePointId:{type:Number,required:!0}},data:()=>({mqttStore:x(),modalIdTagEntryVisible:!1,modalIdTagEntryColor:"warning",code:""}),computed:{tagState(){return this.mqttStore.getChargepointTagState(this.chargePointId)},tagButtonColor(){switch(this.tagState){case 2:return"success";case 1:return"warning";default:return""}},tagClass(){switch(this.tagState){case 2:return"_color:success-80";case 1:return"_color:warning-80";default:return""}}},methods:{toggleIdTagModal(){this.modalIdTagEntryVisible=!this.modalIdTagEntryVisible},sendIdTag(n){this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/get/rfid`,n),this.modalIdTagEntryVisible=!1}}},[["render",function(n,e,o,g,t,l){const f=h("FontAwesomeIcon"),k=h("i-button"),v=h("CodeInputModal");return d(),I(E,null,[a(k,{class:"_margin-right:1",size:"lg",color:l.tagButtonColor,disabled:l.tagState==2,onClick:e[0]||(e[0]=s=>l.toggleIdTagModal())},{default:i(()=>[a(f,{"fixed-width":"",icon:["fas","fa-calculator"],class:b(l.tagClass)},null,8,["class"])]),_:1},8,["color","disabled"]),a(v,{ref:"lockInput",modelValue:t.modalIdTagEntryVisible,"onUpdate:modelValue":e[1]||(e[1]=s=>t.modalIdTagEntryVisible=s),"min-length":4,"max-length":20,"onUpdate:inputValue":l.sendIdTag},{header:i(()=>e[2]||(e[2]=[c(" Bitte einen ID-Tag eingeben. ",-1)])),_:1},8,["modelValue","onUpdate:inputValue"])],64)}]]);F.add(R,O,j,Z,K,J,H,Q,X,Y,G);const Ee={name:"ChargePointCard",components:{DashboardCard:D,SparkLine:ge,ChargePointPlugBadge:W,ChargePointLockButton:ee,ChargePointCodeButton:te,FontAwesomeIcon:B},props:{chargePointId:{type:Number,required:!0},changesLocked:{type:Boolean,required:!0}},emits:["vehicle-click","soc-click","charge-mode-click","toggle-charge-point-settings"],data:()=>({mqttStore:x()}),methods:{handleVehicleClick(n){this.$emit("vehicle-click",n)},handleSocClick(n){this.$emit("soc-click",n)},handleChargeModeClick(n){this.$emit("charge-mode-click",n)},toggleChargePointSettings(n){this.$emit("toggle-charge-point-settings",n)}}},Ae={key:0},ze=M(Ee,[["render",function(n,e,o,g,t,l){const f=h("charge-point-plug-badge"),k=h("charge-point-code-button"),v=h("charge-point-lock-button"),s=h("i-column"),_=h("i-row"),m=h("spark-line"),C=h("font-awesome-icon"),V=h("i-badge"),y=h("i-button"),L=h("i-container"),q=h("dashboard-card");return d(),u(q,{color:"primary"},{headerLeft:i(()=>[c(p(t.mqttStore.getChargePointName(o.chargePointId)),1)]),headerRight:i(()=>[a(f,{"charge-point-id":[o.chargePointId]},null,8,["charge-point-id"])]),default:i(()=>[a(L,null,{default:i(()=>[a(_,null,{default:i(()=>[a(s,null,{default:i(()=>[a(_,null,{default:i(()=>[a(s,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[t.mqttStore.getRfidEnabled?(d(),u(k,{key:0,"charge-point-id":o.chargePointId},null,8,["charge-point-id"])):P("",!0),a(v,{"charge-point-id":o.chargePointId,"changes-locked":o.changesLocked},null,8,["charge-point-id","changes-locked"])]),_:1}),a(s,{class:"_text-align:right _padding-left:0"},{default:i(()=>[c(p(t.mqttStore.getChargePointPower(o.chargePointId))+" "+p(t.mqttStore.getChargePointPhasesInUse(o.chargePointId))+" "+p(t.mqttStore.getChargePointSetCurrent(o.chargePointId)),1)]),_:1})]),_:1}),a(_,{class:"_padding-top:1"},{default:i(()=>[a(s,{class:"_padding-left:0"},{default:i(()=>[a(m,{color:"var(--color--primary)",data:t.mqttStore.getChargePointPowerChartData(o.chargePointId)},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(s,{md:"6"},{default:i(()=>[a(_,{class:"_display:flex"},{default:i(()=>[a(s,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:i(()=>[a(V,{size:"lg",class:b(["_width:100%",o.changesLocked?"":"clickable"]),onClick:e[0]||(e[0]=S=>l.handleVehicleClick(o.chargePointId))},{default:i(()=>[a(C,{"fixed-width":"",icon:["fas","fa-car"]}),c(" "+p(t.mqttStore.getChargePointConnectedVehicleName(o.chargePointId)),1)]),_:1},8,["class"])]),_:1}),t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))||t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))!=0?(d(),u(s,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:i(()=>[a(y,{size:"sm",disabled:o.changesLocked,class:b(o.changesLocked?"":"clickable"),onClick:e[1]||(e[1]=S=>l.handleSocClick(o.chargePointId))},{default:i(()=>[t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))?(d(),I("span",Ae,[a(C,{"fixed-width":"",icon:t.mqttStore.getVehicleSocIsManual(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))?["fas","fa-edit"]:["fas","fa-car-battery"]},null,8,["icon"]),c(" "+p(t.mqttStore.getChargePointConnectedVehicleSoc(o.chargePointId).soc)+"% ",1)])):P("",!0),t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))!=0?(d(),u(C,{key:1,"fixed-width":"",icon:t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:b(t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):P("",!0)]),_:1},8,["disabled","class"])]),_:1})):P("",!0)]),_:1}),a(_,{class:"_padding-top:1 _display:flex"},{default:i(()=>[a(s,{class:"_padding-left:0 _padding-right:0 _flex-grow:1"},{default:i(()=>{var S;return[a(V,{size:"lg",class:b(["_width:100%",o.changesLocked?"":"clickable"]),color:(S=t.mqttStore.getChargePointConnectedVehicleChargeMode(o.chargePointId))==null?void 0:S.class,onClick:e[2]||(e[2]=A=>l.handleChargeModeClick(o.chargePointId))},{default:i(()=>{var A;return[c(p((A=t.mqttStore.getChargePointConnectedVehicleChargeMode(o.chargePointId))==null?void 0:A.label)+" ",1),a(C,{"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehiclePriority(o.chargePointId)?["fas","fa-star"]:["far","fa-star"],class:b(t.mqttStore.getChargePointConnectedVehiclePriority(o.chargePointId)?"_color:warning":"")},null,8,["icon","class"])]}),_:1},8,["class","color"])]}),_:1}),t.mqttStore.getChargePointConnectedVehicleTimeChargingActive(o.chargePointId)?(d(),u(s,{key:0,class:"_flex-grow:0 _padding-right:0 _padding-left:1"},{default:i(()=>[a(V,{size:"lg"},{default:i(()=>[t.mqttStore.getChargePointConnectedVehicleTimeChargingActive(o.chargePointId)?(d(),u(C,{key:0,"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(o.chargePointId)?["fas","fa-clock"]:["far","fa-clock"],class:b(t.mqttStore.getChargePointConnectedVehicleTimeChargingRunning(o.chargePointId)?"_color:success":"")},null,8,["icon","class"])):P("",!0)]),_:1})]),_:1})):P("",!0)]),_:1}),o.changesLocked?P("",!0):(d(),u(_,{key:0,class:"_padding-top:1"},{default:i(()=>[a(s,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[a(y,{block:"",onClick:e[3]||(e[3]=S=>l.toggleChargePointSettings(o.chargePointId))},{default:i(()=>[a(C,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-45dbe31a"]]);F.add(R,O,j,Z,K,J,H,Q,X,Y,G);const Be={name:"ChargePointCard",components:{DashboardCard:D,ChargePointPlugBadge:W,ChargePointLockButton:ee,ChargePointCodeButton:te,FontAwesomeIcon:B},props:{chargePointId:{type:Number,required:!0},changesLocked:{type:Boolean,required:!0}},emits:["vehicle-click","soc-click","charge-mode-click","toggle-charge-point-settings","set-charge-point-connected-vehicle-charge-mode"],data:()=>({mqttStore:x(),simpleChargeModes:["instant_charging","pv_charging","stop"]}),computed:{filteredChargeModes(){return this.mqttStore.getSimpleChargePointView?this.mqttStore.chargeModeList().filter(n=>this.simpleChargeModes.includes(n.id)):this.mqttStore.chargeModeList()}},methods:{handleVehicleClick(n){this.$emit("vehicle-click",n)},handleSocClick(n){this.$emit("soc-click",n)},handleChargeModeClick(n){this.$emit("charge-mode-click",n)},toggleChargePointSettings(n){this.$emit("toggle-charge-point-settings",n)},setChargePointConnectedVehicleChargeMode(n,e){this.$emit("set-charge-point-connected-vehicle-charge-mode",n,e)}}},Fe={key:0},Ne=M(Be,[["render",function(n,e,o,g,t,l){const f=h("charge-point-plug-badge"),k=h("charge-point-code-button"),v=h("charge-point-lock-button"),s=h("i-column"),_=h("i-row"),m=h("font-awesome-icon"),C=h("i-button"),V=h("i-button-group"),y=h("i-container"),L=h("dashboard-card");return d(),u(L,{color:"primary"},{headerLeft:i(()=>[c(p(t.mqttStore.getChargePointName(o.chargePointId)),1)]),headerRight:i(()=>[a(f,{"charge-point-id":[o.chargePointId]},null,8,["charge-point-id"])]),default:i(()=>[a(y,null,{default:i(()=>[a(_,null,{default:i(()=>[a(s,null,{default:i(()=>[a(_,null,{default:i(()=>[a(s,{class:"_padding-left:0 _padding-right:0"},{default:i(()=>[t.mqttStore.getRfidEnabled?(d(),u(k,{key:0,"charge-point-id":o.chargePointId},null,8,["charge-point-id"])):P("",!0),a(v,{"charge-point-id":o.chargePointId,"changes-locked":o.changesLocked},null,8,["charge-point-id","changes-locked"])]),_:1}),a(s,{class:"_text-align:right _padding-left:0"},{default:i(()=>[c(p(t.mqttStore.getChargePointPower(o.chargePointId))+" "+p(t.mqttStore.getChargePointPhasesInUse(o.chargePointId))+" "+p(t.mqttStore.getChargePointSetCurrent(o.chargePointId)),1)]),_:1})]),_:1}),a(_,{class:"_padding-top:1"},{default:i(()=>[a(s,{class:"_padding-left:0 button-group-wrapper"},{default:i(()=>[a(V,{class:"button-group main-button-group"},{default:i(()=>[a(C,{class:b(["large-button _flex-grow:1",o.changesLocked?"":"clickable"]),disabled:o.changesLocked,onClick:e[0]||(e[0]=q=>l.handleVehicleClick(o.chargePointId))},{default:i(()=>[a(m,{"fixed-width":"",icon:["fas","fa-car"]}),c(" "+p(t.mqttStore.getChargePointConnectedVehicleName(o.chargePointId))+" ",1),a(m,{class:b(["_padding-left:1",t.mqttStore.getChargePointConnectedVehiclePriority(o.chargePointId)?"_color:warning":""]),"fixed-width":"",icon:t.mqttStore.getChargePointConnectedVehiclePriority(o.chargePointId)?["fas","fa-star"]:["far","fa-star"]},null,8,["icon","class"])]),_:1},8,["class","disabled"]),t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))||t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))!=0?(d(),u(C,{key:0,class:b(["large-button _flex-grow:0",o.changesLocked?"":"clickable"]),disabled:o.changesLocked,onClick:e[1]||(e[1]=q=>l.handleSocClick(o.chargePointId))},{default:i(()=>[t.mqttStore.getVehicleSocConfigured(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))?(d(),I("span",Fe,[a(m,{"fixed-width":"",icon:t.mqttStore.getVehicleSocIsManual(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))?["fas","fa-edit"]:["fas","fa-car-battery"]},null,8,["icon"]),c(" "+p(t.mqttStore.getChargePointConnectedVehicleSoc(o.chargePointId).soc)+"% ",1)])):P("",!0),t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))!=0?(d(),u(m,{key:1,"fixed-width":"",icon:t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>1?["fas","times-circle"]:["fas","exclamation-triangle"]:[],class:b(t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>0?t.mqttStore.getVehicleFaultState(t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId))>1?"_color:danger":"_color:warning":"")},null,8,["icon","class"])):P("",!0)]),_:1},8,["disabled","class"])):P("",!0),a(C,{class:b(["large-button _flex-grow:0",o.changesLocked?"":"clickable"]),disabled:o.changesLocked,onClick:e[2]||(e[2]=q=>l.toggleChargePointSettings(o.chargePointId))},{default:i(()=>[a(m,{"fixed-width":"",icon:["fas","fa-wrench"]})]),_:1},8,["class","disabled"])]),_:1}),a(V,{class:"button-group _margin-top:1",disabled:o.changesLocked},{default:i(()=>[(d(!0),I(E,null,z(l.filteredChargeModes,q=>(d(),u(C,{key:q.id,outline:"",class:b(["large-button _flex-grow:1",o.changesLocked?"":"clickable"]),color:q.class!="dark"?q.class:"light",active:t.mqttStore.getChargePointConnectedVehicleChargeMode(o.chargePointId)!=null&&q.id==t.mqttStore.getChargePointConnectedVehicleChargeMode(o.chargePointId).mode,onClick:S=>l.setChargePointConnectedVehicleChargeMode(o.chargePointId,q.id)},{default:i(()=>[c(p(q.label),1)]),_:2},1032,["class","color","active","onClick"]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-cb556d40"]]),$e={name:"ExtendedNumberInput",inheritAttrs:!1,props:{modelValue:{type:Number,required:!0,default:NaN},unit:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},labels:{type:Array,default:void 0}},emits:["update:modelValue"],data(){return{minimum:this.labels?0:this.min,maximum:this.labels?this.labels.length-1:this.max,stepSize:this.labels?1:this.step}},computed:{label(){var n;return this.labels&&this.inputValue!=null?this.inputValue<this.labels.length&&(n=this.labels[this.inputValue].label):n=this.inputValue,typeof n=="number"&&(n=n.toLocaleString(void 0,{minimumFractionDigits:this.precision,maximumFractionDigits:this.precision})),n},precision(){if(!isFinite(this.stepSize))return 0;for(var n=1,e=0;Math.round(this.stepSize*n)/n!==this.stepSize;)n*=10,e++;return e},inputValue:{get(){if(this.labels){var n=void 0;for(let e=0;e<this.labels.length;e++)if(this.labels[e].value==this.modelValue){n=e;break}return n===void 0&&this.modelValue!==void 0?this.minimum:n}return this.modelValue},set(n){if(this.labels){var e=this.labels[n].value;this.$emit("update:modelValue",e)}else this.$emit("update:modelValue",n)}}},methods:{increment(){var n=Math.min(this.inputValue+this.stepSize,this.maximum);this.inputValue=Math.round(n*Math.pow(10,this.precision))/Math.pow(10,this.precision)},decrement(){var n=Math.max(this.inputValue-this.stepSize,this.minimum);this.inputValue=Math.round(n*Math.pow(10,this.precision))/Math.pow(10,this.precision)}}},ae=M($e,[["render",function(n,e,o,g,t,l){const f=h("i-button"),k=h("i-input");return d(),u(k,{modelValue:l.label,"onUpdate:modelValue":e[0]||(e[0]=v=>l.label=v),plaintext:"",class:"_text-align:right",size:"lg"},{prepend:i(()=>[a(f,{onClick:l.decrement},{default:i(()=>e[1]||(e[1]=[c(" - ",-1)])),_:1,__:[1]},8,["onClick"])]),suffix:i(()=>[c(p(o.unit),1)]),append:i(()=>[a(f,{onClick:l.increment},{default:i(()=>e[2]||(e[2]=[c(" + ",-1)])),_:1,__:[2]},8,["onClick"])]),_:1},8,["modelValue"])}]]),Ue=M({name:"ManualSocInput",components:{ExtendedNumberInput:ae,NumberPad:he},props:{modelValue:{required:!0,type:Boolean,default:!1},vehicleId:{required:!0,type:Number,default:0}},emits:["update:modelValue"],data:()=>({mqttStore:x(),newSoc:0}),methods:{enter(n){let e=10*this.newSoc+parseInt(n);e>=0&&e<=100&&(this.newSoc=e)},removeDigit(){this.newSoc=Math.trunc(this.newSoc/10)},clear(){this.newSoc=0},close(){this.$emit("update:modelValue",!1),this.newSoc=0},updateManualSoc(){this.$root.sendTopicToBroker(`openWB/vehicle/${this.vehicleId}/soc_module/calculated_soc_state/manual_soc`,this.newSoc),this.close()}}},[["render",function(n,e,o,g,t,l){const f=h("extended-number-input"),k=h("i-column"),v=h("i-row"),s=h("NumberPad"),_=h("i-container"),m=h("i-button"),C=h("i-modal");return d(),u(Ve,{to:"body"},[a(C,{"model-value":o.modelValue,size:"sm","onUpdate:modelValue":e[6]||(e[6]=V=>n.$emit("update:modelValue",V))},{header:i(()=>[c(' SoC für Fahrzeug "'+p(t.mqttStore.getVehicleName(o.vehicleId))+'" ',1)]),footer:i(()=>[a(_,null,{default:i(()=>[a(v,null,{default:i(()=>[a(k,null,{default:i(()=>[a(m,{color:"danger",onClick:e[4]||(e[4]=V=>l.close())},{default:i(()=>e[7]||(e[7]=[c(" Zurück ",-1)])),_:1,__:[7]})]),_:1}),a(k,{class:"_text-align:right"},{default:i(()=>[a(m,{color:"success",onClick:e[5]||(e[5]=V=>l.updateManualSoc())},{default:i(()=>e[8]||(e[8]=[c(" OK ",-1)])),_:1,__:[8]})]),_:1})]),_:1})]),_:1})]),default:i(()=>[a(_,null,{default:i(()=>[a(v,{center:"",class:"_padding-bottom:1"},{default:i(()=>[a(k,null,{default:i(()=>[a(f,{modelValue:t.newSoc,"onUpdate:modelValue":e[0]||(e[0]=V=>t.newSoc=V),unit:"%",min:0,max:100,step:1,size:"lg",class:"_text-align:center"},null,8,["modelValue"])]),_:1})]),_:1}),a(s,{"onKey:digit":e[1]||(e[1]=V=>l.enter(V)),"onKey:clear":e[2]||(e[2]=V=>l.clear()),"onKey:delete":e[3]||(e[3]=V=>l.removeDigit())})]),_:1})]),_:1},8,["model-value"])])}]]),De=M({name:"VehicleSelectModal",props:{modelValue:{required:!0,type:Boolean,default:!1},chargePointId:{type:Number,required:!0}},emits:["update:modelValue"],data:()=>({mqttStore:x()}),computed:{vehicleList(){let n=this.mqttStore.getVehicleList;var e=[];return Object.keys(n).forEach(o=>{let g=parseInt(o.match(/(?:\/)([0-9]+)(?=\/)*/g)[0].replace(/[^0-9]+/g,""));e.push({id:g,name:n[o]})}),e}},methods:{setChargePointConnectedVehicle(n){n.id!=this.mqttStore.getChargePointConnectedVehicleId(this.chargePointId)&&this.$root.sendTopicToBroker(`openWB/chargepoint/${this.chargePointId}/config/ev`,n.id)}}},[["render",function(n,e,o,g,t,l){const f=h("i-button"),k=h("i-button-group"),v=h("i-form-group"),s=h("i-form"),_=h("i-modal");return d(),u(_,{"model-value":o.modelValue,class:"modal-vehicle-select",size:"lg","onUpdate:modelValue":e[0]||(e[0]=m=>n.$emit("update:modelValue",m))},{header:i(()=>[c(' Fahrzeug an "'+p(t.mqttStore.getChargePointName(o.chargePointId))+'" auswählen ',1)]),default:i(()=>[a(s,null,{default:i(()=>[a(v,null,{default:i(()=>[a(k,{vertical:"",block:""},{default:i(()=>[(d(!0),I(E,null,z(l.vehicleList,m=>(d(),u(f,{key:m.id,size:"lg",class:"large-button",active:t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId)==m.id,color:t.mqttStore.getChargePointConnectedVehicleId(o.chargePointId)==m.id?"primary":"",onClick:C=>l.setChargePointConnectedVehicle(m)},{default:i(()=>[c(p(m.name),1)]),_:2},1032,["active","color","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}],["__scopeId","data-v-b89baba5"]]);Ie.register(ve,ke,be,qe,ye,Le,Me,xe);const We={class:"chartContainer"},Re=M({name:"ElectricityTariffChart",components:{ChartJsLine:Se},props:{modelValue:{type:Number,required:!1,default:void 0}},emits:["update:modelValue"],data:()=>({mqttStore:x(),chartDatasets:{datasets:[{label:"Stromtarif",unit:"ct/kWh",type:"line",stepped:!0,borderColor:"rgb(18, 111, 142)",backgroundColor:"rgb(18, 111, 142)",fill:!1,pointStyle:"circle",pointRadius:0,pointHoverRadius:4,cubicInterpolationMode:"monotone",hidden:!1,borderWidth:2,data:void 0,yAxisID:"y",parsing:{xAxisKey:"timestamp",yAxisKey:"price"}}]}}),computed:{chartDataRead(){return Object.keys(this.chartDataObject.datasets[0].data).length>0},chartDataObject(){let n=[];const e=this.mqttStore.getEtPrices;if(e&&Object.keys(e).length>0){for(const[t,l]of Object.entries(e))n.push({timestamp:1e3*t,price:1e5*l});const g=n.slice(-1)[0];n.push({timestamp:g.timestamp+3599e3,price:g.price})}const o=this.chartDatasets;return o.datasets[0].data=n,o},priceAnnotations(){const n="rgba(73, 238, 73, 0.2)",e="rgba(255, 10, 13, 0.2)",o=this.chartDataObject.datasets[0].data;class g{constructor(){w(this,"type","box");w(this,"drawTime","beforeDatasetsDraw");w(this,"xMin",o[0].timestamp);w(this,"xMax",o[0].timestamp);w(this,"borderWidth",2);w(this,"cornerRadius",0)}}let t=[];if(this.modelValue!==void 0){for(let l=0;l<o.length;l++)if(o[l].price<=this.modelValue){let f=new g;for(f.borderColor=n,f.backgroundColor=n,f.xMin=o[l].timestamp;l<o.length&&o[l].price<=this.modelValue;)l++;l==o.length&&l--,f.xMax=o[l].timestamp,t.push(f)}for(let l=0;l<o.length;l++)if(o[l].price>this.modelValue){let f=new g;for(f.borderColor=e,f.backgroundColor=e,f.xMin=o[l].timestamp;l<o.length&&o[l].price>this.modelValue;)l++;l==o.length&&l--,f.xMax=o[l].timestamp,t.push(f)}}return t},myChartOptions(){return{plugins:{title:{display:!1},legend:{display:!1},annotation:{annotations:this.priceAnnotations}},elements:{point:{radius:2}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"hour",text:"Zeit",maxTicksLimit:24},display:!0,title:{display:!0,text:"Uhrzeit",color:"#ffffff"},ticks:{font:{size:12},color:"#ffffff",maxTicksLimit:0},grid:{}},y:{position:"left",type:"linear",display:"auto",title:{font:{size:12},display:!0,text:"Preis [ct/kWh]",color:"#ffffff"},grid:{color:"#ffffff20"},ticks:{font:{size:12},stepSize:.1,maxTicksLimit:11,color:"#ffffff"}}}}}},methods:{chartClick(n){const e=this.$refs.priceChart.chart.getElementsAtEventForMode(n,"index",{intersect:!1},!0);e.length>0&&this.$emit("update:modelValue",Math.ceil(100*this.chartDataObject.datasets[0].data[e[0].index].price)/100)}}},[["render",function(n,e,o,g,t,l){const f=h("ChartJsLine");return d(),I("div",We,[l.chartDataRead?(d(),u(f,{key:0,ref:"priceChart",data:l.chartDataObject,options:l.myChartOptions,onClick:l.chartClick},null,8,["data","options","onClick"])):P("",!0)])}],["__scopeId","data-v-30ed2f35"]]);F.add(ue,Pe,pe,fe,_e);const Oe={name:"ChargePointsView",components:{ChargePointCard:ze,SimpleChargePointCard:Ne,ExtendedNumberInput:ae,ManualSocInput:Ue,ChargeModeModal:Te,VehicleSelectModal:De,FontAwesomeIcon:B,ElectricityTariffChart:Re},props:{changesLocked:{required:!1,type:Boolean,default:!1}},data:()=>({mqttStore:x(),modalChargeModeSettingVisible:!1,modalVehicleSelectVisible:!1,modalChargePointSettingsVisible:!1,modalChargePointId:0,modalVehicleId:0,modalActiveTab:"tab-general",modalManualSocInputVisible:!1}),computed:{timeChargingEnabled(){return n=>this.mqttStore.getChargePointConnectedVehicleTimeChargingActive(n)===!0}},watch:{changesLocked(n,e){e!==!0&&n===!0&&(this.modalChargeModeSettingVisible=!1,this.modalVehicleSelectVisible=!1,this.modalChargePointSettingsVisible=!1,this.modalManualSocInputVisible=!1)}},methods:{toggleChargePointSettings(n){switch(this.mqttStore.getChargePointConnectedVehicleChargeMode(n).mode){case"pv_charging":this.modalActiveTab="tab-pv-charging";break;case"scheduled_charging":this.modalActiveTab="tab-scheduled-charging";break;case"eco_charging":this.modalActiveTab="tab-eco-charging";break;default:this.modalActiveTab="tab-instant-charging"}this.modalChargePointId=n,this.modalChargePointSettingsVisible=!0},handleChargeModeClick(n){this.changesLocked||(this.modalChargePointId=n,this.modalChargeModeSettingVisible=!0)},handleVehicleClick(n){this.changesLocked||(this.modalChargePointId=n,this.modalVehicleSelectVisible=!0)},handleSocClick(n){let e=this.mqttStore.getChargePointConnectedVehicleId(n);if(this.mqttStore.getVehicleSocIsManual(e))return this.modalVehicleId=e,void(this.modalManualSocInputVisible=!0);this.$root.sendTopicToBroker(`openWB/set/vehicle/${e}/get/force_soc_update`,1)},updateChargePointChargeTemplate(n,e,o=void 0){const g=this.mqttStore.updateState(`openWB/chargepoint/${n}/set/charge_template`,e,o);this.$root.sendTopicToBroker(`openWB/chargepoint/${n}/set/charge_template`,g)},setChargePointConnectedVehicleChargeMode(n,e){e.id!=this.mqttStore.getChargePointConnectedVehicleChargeMode(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.selected")},setChargePointConnectedVehiclePriority(n,e){e!=this.mqttStore.getChargePointConnectedVehiclePriority(n)&&this.updateChargePointChargeTemplate(n,e,"prio")},setChargePointConnectedVehicleTimeChargingActive(n,e){e!=this.mqttStore.getChargePointConnectedVehicleTimeChargingActive(n)&&this.updateChargePointChargeTemplate(n,e,"time_charging.active")},setChargePointConnectedVehicleInstantChargingCurrent(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.instant_charging.current")},setChargePointConnectedVehicleInstantChargingPhases(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.instant_charging.phases_to_use")},setChargePointConnectedVehicleInstantChargingLimit(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(n).selected&&this.updateChargePointChargeTemplate(n,e,"chargemode.instant_charging.limit.selected")},setChargePointConnectedVehicleInstantChargingLimitSoc(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(n).soc&&this.updateChargePointChargeTemplate(n,parseInt(e),"chargemode.instant_charging.limit.soc")},setChargePointConnectedVehicleInstantChargingLimitAmount(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(n).amount&&this.updateChargePointChargeTemplate(n,e,"chargemode.instant_charging.limit.amount")},setChargePointConnectedVehiclePvChargingFeedInLimit(n,e){e!=this.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.pv_charging.feed_in_limit")},setChargePointConnectedVehiclePvChargingMinCurrent(n,e){let o=this.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(n),g=parseInt(e);g==o||isNaN(g)||this.updateChargePointChargeTemplate(n,g,"chargemode.pv_charging.min_current")},setChargePointConnectedVehiclePvChargingPhases(n,e){e!==void 0&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingPhases(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.pv_charging.phases_to_use")},setChargePointConnectedVehiclePvChargingLimit(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(n).selected&&this.updateChargePointChargeTemplate(n,e,"chargemode.pv_charging.limit.selected")},setChargePointConnectedVehiclePvChargingLimitSoc(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(n).soc&&this.updateChargePointChargeTemplate(n,parseInt(e),"chargemode.pv_charging.limit.soc")},setChargePointConnectedVehiclePvChargingLimitAmount(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingLimit(n).amount&&this.updateChargePointChargeTemplate(n,e,"chargemode.pv_charging.limit.amount")},setChargePointConnectedVehiclePvChargingMinSoc(n,e){let o=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(n),g=parseInt(e);g==o||isNaN(g)||this.updateChargePointChargeTemplate(n,g,"chargemode.pv_charging.min_soc")},setChargePointConnectedVehiclePvChargingMinSocCurrent(n,e){let o=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(n),g=parseInt(e);g==o||isNaN(g)||this.updateChargePointChargeTemplate(n,g,"chargemode.pv_charging.min_soc_current")},setChargePointConnectedVehiclePvChargingMinSocPhases(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.pv_charging.phases_to_use_min_soc")},setChargePointConnectedVehicleEcoChargingCurrent(n,e){let o=this.mqttStore.getChargePointConnectedVehicleEcoChargingCurrent(n),g=parseInt(e);g==o||isNaN(g)||this.updateChargePointChargeTemplate(n,g,"chargemode.eco_charging.current")},setChargePointConnectedVehicleEcoChargingPhases(n,e){e!==void 0&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(n)&&this.updateChargePointChargeTemplate(n,e,"chargemode.eco_charging.phases_to_use")},setChargePointConnectedVehicleEcoChargingLimit(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(n).selected&&this.updateChargePointChargeTemplate(n,e,"chargemode.eco_charging.limit.selected")},setChargePointConnectedVehicleEcoChargingLimitSoc(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(n).soc&&this.updateChargePointChargeTemplate(n,parseInt(e),"chargemode.eco_charging.limit.soc")},setChargePointConnectedVehicleEcoChargingLimitAmount(n,e){e&&e!=this.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(n).amount&&this.updateChargePointChargeTemplate(n,e,"chargemode.eco_charging.limit.amount")},setChargePointConnectedVehicleEcoChargingMaxPrice(n,e){let o=this.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(n),g=parseFloat(e);g==o||isNaN(g)||this.updateChargePointChargeTemplate(n,parseFloat((g/1e5).toFixed(7)),"chargemode.eco_charging.max_price")},setChargePointConnectedVehicleScheduledChargingPlanActive(n,e,o){const g=`openWB/chargepoint/${n}/set/charge_template`,t=this.mqttStore.updateState(g,o,`chargemode.scheduled_charging.plans.${e}.active`);this.$root.sendTopicToBroker(g,t)},setChargePointConnectedVehicleTimeChargingPlanActive(n,e,o){const g=`openWB/chargepoint/${n}/set/charge_template`,t=this.mqttStore.updateState(g,o,`time_charging.plans.${e}.active`);this.$root.sendTopicToBroker(g,t)}}},je={class:"charge-points-card-wrapper"},Ze={class:"plan-name"},Ke={class:"plan-details"},Je={key:0},He={key:1},Qe={key:2},Xe={key:3},Ye={key:4},Ge={key:5},et={key:1},tt={class:"plan-name"},at={class:"plan-details"},it={key:0},nt={key:1},ot={key:2},lt={key:3},rt={key:4},Pt=M(Oe,[["render",function(n,e,o,g,t,l){const f=h("charge-mode-modal"),k=h("vehicle-select-modal"),v=h("i-tab-title"),s=h("i-form-label"),_=h("extended-number-input"),m=h("i-form-group"),C=h("i-button"),V=h("i-button-group"),y=h("i-form"),L=h("i-tab"),q=h("ElectricityTariffChart"),S=h("font-awesome-icon"),A=h("i-alert"),$=h("i-row"),U=h("i-container"),ie=h("i-tabs"),ne=h("i-modal"),oe=h("manual-soc-input");return d(),I(E,null,[T("div",je,[(d(!0),I(E,null,z(t.mqttStore.getChargePointIds,r=>(d(),u(we(t.mqttStore.getSimpleChargePointView?"SimpleChargePointCard":"ChargePointCard"),{key:r,"charge-point-id":r,"changes-locked":o.changesLocked,onVehicleClick:l.handleVehicleClick,onSocClick:l.handleSocClick,onChargeModeClick:l.handleChargeModeClick,onToggleChargePointSettings:l.toggleChargePointSettings,onSetChargePointConnectedVehicleChargeMode:l.setChargePointConnectedVehicleChargeMode},null,40,["charge-point-id","changes-locked","onVehicleClick","onSocClick","onChargeModeClick","onToggleChargePointSettings","onSetChargePointConnectedVehicleChargeMode"]))),128))]),a(f,{modelValue:t.modalChargeModeSettingVisible,"onUpdate:modelValue":e[0]||(e[0]=r=>t.modalChargeModeSettingVisible=r),"charge-point-id":t.modalChargePointId},null,8,["modelValue","charge-point-id"]),a(k,{modelValue:t.modalVehicleSelectVisible,"onUpdate:modelValue":e[1]||(e[1]=r=>t.modalVehicleSelectVisible=r),"charge-point-id":t.modalChargePointId},null,8,["modelValue","charge-point-id"]),a(ne,{modelValue:t.modalChargePointSettingsVisible,"onUpdate:modelValue":e[39]||(e[39]=r=>t.modalChargePointSettingsVisible=r),size:"lg"},{header:i(()=>[c(' Einstellungen für Fahrzeug "'+p(t.mqttStore.getChargePointConnectedVehicleName(t.modalChargePointId))+'" ',1)]),default:i(()=>[a(ie,{modelValue:t.modalActiveTab,"onUpdate:modelValue":e[38]||(e[38]=r=>t.modalActiveTab=r),stretch:""},{header:i(()=>[a(v,{for:"tab-instant-charging"},{default:i(()=>e[41]||(e[41]=[c(" Sofort ",-1)])),_:1,__:[41]}),a(v,{for:"tab-pv-charging"},{default:i(()=>e[42]||(e[42]=[c(" PV ",-1)])),_:1,__:[42]}),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(v,{key:0,for:"tab-eco-charging"},{default:i(()=>e[43]||(e[43]=[c(" Eco ",-1)])),_:1,__:[43]})),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(v,{key:1,for:"tab-scheduled-charging"},{default:i(()=>e[44]||(e[44]=[c(" Ziel ",-1)])),_:1,__:[44]})),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(v,{key:2,for:"tab-time-charging"},{default:i(()=>e[45]||(e[45]=[c(" Zeit ",-1)])),_:1,__:[45]}))]),default:i(()=>[a(L,{name:"tab-instant-charging"},{default:i(()=>[a(y,null,{default:i(()=>[a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[46]||(e[46]=[c("Stromstärke",-1)])),_:1,__:[46]}),a(_,{unit:"A",min:6,max:32,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingCurrent(t.modalChargePointId),"onUpdate:modelValue":e[2]||(e[2]=r=>l.setChargePointConnectedVehicleInstantChargingCurrent(t.modalChargePointId,r))},null,8,["model-value"])]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[47]||(e[47]=[c("Anzahl Phasen",-1)])),_:1,__:[47]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==1,onClick:e[3]||(e[3]=r=>l.setChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId,1))},{default:i(()=>e[48]||(e[48]=[c(" 1 ",-1)])),_:1,__:[48]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId)==3,onClick:e[4]||(e[4]=r=>l.setChargePointConnectedVehicleInstantChargingPhases(t.modalChargePointId,3))},{default:i(()=>e[49]||(e[49]=[c(" Maximum ",-1)])),_:1,__:[49]},8,["color","active"])]),_:1})]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[50]||(e[50]=[c("Begrenzung",-1)])),_:1,__:[50]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="none",onClick:e[5]||(e[5]=r=>l.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>e[51]||(e[51]=[c(" Aus ",-1)])),_:1,__:[51]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[6]||(e[6]=r=>l.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>e[52]||(e[52]=[c(" EV-SoC ",-1)])),_:1,__:[52]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[7]||(e[7]=r=>l.setChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>e[53]||(e[53]=[c(" Energie ",-1)])),_:1,__:[53]},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="soc"?(d(),u(m,{key:0},{default:i(()=>[a(s,null,{default:i(()=>e[54]||(e[54]=[c("Max. SoC",-1)])),_:1,__:[54]}),a(_,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[8]||(e[8]=r=>l.setChargePointConnectedVehicleInstantChargingLimitSoc(t.modalChargePointId,r))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).selected=="amount"?(d(),u(m,{key:1},{default:i(()=>[a(s,null,{default:i(()=>e[55]||(e[55]=[c("Max. Energie",-1)])),_:1,__:[55]}),a(_,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehicleInstantChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[9]||(e[9]=r=>l.setChargePointConnectedVehicleInstantChargingLimitAmount(t.modalChargePointId,1e3*r))},null,8,["model-value"])]),_:1})):P("",!0)]),_:1})]),_:1}),a(L,{name:"tab-pv-charging"},{default:i(()=>[a(y,null,{default:i(()=>[a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[56]||(e[56]=[c("Minimaler Dauerstrom",-1)])),_:1,__:[56]}),a(_,{unit:"A",labels:[{label:"Aus",value:0},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9},{label:10,value:10},{label:11,value:11},{label:12,value:12},{label:13,value:13},{label:14,value:14},{label:15,value:15},{label:16,value:16}],"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinCurrent(t.modalChargePointId),"onUpdate:modelValue":e[10]||(e[10]=r=>l.setChargePointConnectedVehiclePvChargingMinCurrent(t.modalChargePointId,r))},null,8,["model-value"])]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[57]||(e[57]=[c("Anzahl Phasen",-1)])),_:1,__:[57]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==1,onClick:e[11]||(e[11]=r=>l.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,1))},{default:i(()=>e[58]||(e[58]=[c(" 1 ",-1)])),_:1,__:[58]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==3,onClick:e[12]||(e[12]=r=>l.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,3))},{default:i(()=>e[59]||(e[59]=[c(" Maximum ",-1)])),_:1,__:[59]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==0?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId)==0,onClick:e[13]||(e[13]=r=>l.setChargePointConnectedVehiclePvChargingPhases(t.modalChargePointId,0))},{default:i(()=>e[60]||(e[60]=[c(" Automatik ",-1)])),_:1,__:[60]},8,["color","active"])]),_:1})]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[61]||(e[61]=[c("Begrenzung",-1)])),_:1,__:[61]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="none",onClick:e[14]||(e[14]=r=>l.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>e[62]||(e[62]=[c(" Aus ",-1)])),_:1,__:[62]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[15]||(e[15]=r=>l.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>e[63]||(e[63]=[c(" EV-SoC ",-1)])),_:1,__:[63]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[16]||(e[16]=r=>l.setChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>e[64]||(e[64]=[c(" Energie ",-1)])),_:1,__:[64]},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="soc"?(d(),u(m,{key:0},{default:i(()=>[a(s,null,{default:i(()=>e[65]||(e[65]=[c("SoC-Limit für das Fahrzeug",-1)])),_:1,__:[65]}),a(_,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[17]||(e[17]=r=>l.setChargePointConnectedVehiclePvChargingLimitSoc(t.modalChargePointId,r))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).selected=="amount"?(d(),u(m,{key:1},{default:i(()=>[a(s,null,{default:i(()=>e[66]||(e[66]=[c("Energie-Limit",-1)])),_:1,__:[66]}),a(_,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[18]||(e[18]=r=>l.setChargePointConnectedVehiclePvChargingLimitAmount(t.modalChargePointId,1e3*r))},null,8,["model-value"])]),_:1})):P("",!0),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[67]||(e[67]=[c("Mindest-SoC für das Fahrzeug",-1)])),_:1,__:[67]}),a(_,{unit:"%",labels:[{label:"Aus",value:0},{label:5,value:5},{label:10,value:10},{label:15,value:15},{label:20,value:20},{label:25,value:25},{label:30,value:30},{label:35,value:35},{label:40,value:40},{label:45,value:45},{label:50,value:50},{label:55,value:55},{label:60,value:60},{label:65,value:65},{label:70,value:70},{label:75,value:75},{label:80,value:80},{label:85,value:85},{label:90,value:90},{label:95,value:95}],"model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinSoc(t.modalChargePointId),"onUpdate:modelValue":e[19]||(e[19]=r=>l.setChargePointConnectedVehiclePvChargingMinSoc(t.modalChargePointId,r))},null,8,["model-value"])]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[68]||(e[68]=[c("Mindest-SoC Strom",-1)])),_:1,__:[68]}),a(_,{min:6,max:32,unit:"A","model-value":t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocCurrent(t.modalChargePointId),"onUpdate:modelValue":e[20]||(e[20]=r=>l.setChargePointConnectedVehiclePvChargingMinSocCurrent(t.modalChargePointId,r))},null,8,["model-value"])]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[69]||(e[69]=[c("Anzahl Phasen Mindest-SoC",-1)])),_:1,__:[69]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==1,onClick:e[21]||(e[21]=r=>l.setChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId,1))},{default:i(()=>e[70]||(e[70]=[c(" 1 ",-1)])),_:1,__:[70]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId)==3,onClick:e[22]||(e[22]=r=>l.setChargePointConnectedVehiclePvChargingMinSocPhases(t.modalChargePointId,3))},{default:i(()=>e[71]||(e[71]=[c(" Maximum ",-1)])),_:1,__:[71]},8,["color","active"])]),_:1})]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[72]||(e[72]=[c("Einspeisegrenze beachten",-1)])),_:1,__:[72]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId)!==!0?"danger":"",onClick:e[23]||(e[23]=r=>l.setChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId,!1))},{default:i(()=>e[73]||(e[73]=[c(" Nein ",-1)])),_:1,__:[73]},8,["color"]),a(C,{color:t.mqttStore.getChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId)===!0?"success":"",onClick:e[24]||(e[24]=r=>l.setChargePointConnectedVehiclePvChargingFeedInLimit(t.modalChargePointId,!0))},{default:i(()=>e[74]||(e[74]=[c(" Ja ",-1)])),_:1,__:[74]},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(L,{key:0,name:"tab-eco-charging"},{default:i(()=>[a(y,null,{default:i(()=>[t.mqttStore.getEtConfigured?(d(),u(m,{key:0},{default:i(()=>[a(s,null,{default:i(()=>e[75]||(e[75]=[c("Minimaler Dauerstrom unter Preisgrenze",-1)])),_:1,__:[75]}),a(_,{unit:"A",min:6,max:32,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingCurrent(t.modalChargePointId),"onUpdate:modelValue":e[25]||(e[25]=r=>l.setChargePointConnectedVehicleEcoChargingCurrent(t.modalChargePointId,r))},null,8,["model-value"])]),_:1})):P("",!0),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[76]||(e[76]=[c("Anzahl Phasen",-1)])),_:1,__:[76]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==1?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==1,onClick:e[26]||(e[26]=r=>l.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,1))},{default:i(()=>e[77]||(e[77]=[c(" 1 ",-1)])),_:1,__:[77]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==3?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==3,onClick:e[27]||(e[27]=r=>l.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,3))},{default:i(()=>e[78]||(e[78]=[c(" Maximum ",-1)])),_:1,__:[78]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==0?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId)==0,onClick:e[28]||(e[28]=r=>l.setChargePointConnectedVehicleEcoChargingPhases(t.modalChargePointId,0))},{default:i(()=>e[79]||(e[79]=[c(" Automatik ",-1)])),_:1,__:[79]},8,["color","active"])]),_:1})]),_:1}),a(m,null,{default:i(()=>[a(s,null,{default:i(()=>e[80]||(e[80]=[c("Begrenzung",-1)])),_:1,__:[80]}),a(V,{block:""},{default:i(()=>[a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="none"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="none",onClick:e[29]||(e[29]=r=>l.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"none"))},{default:i(()=>e[81]||(e[81]=[c(" Aus ",-1)])),_:1,__:[81]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc",onClick:e[30]||(e[30]=r=>l.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"soc"))},{default:i(()=>e[82]||(e[82]=[c(" EV-SoC ",-1)])),_:1,__:[82]},8,["color","active"]),a(C,{color:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount"?"primary":"",active:t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount",onClick:e[31]||(e[31]=r=>l.setChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId,"amount"))},{default:i(()=>e[83]||(e[83]=[c(" Energie ",-1)])),_:1,__:[83]},8,["color","active"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="soc"?(d(),u(m,{key:1},{default:i(()=>[a(s,null,{default:i(()=>e[84]||(e[84]=[c("SoC-Limit für das Fahrzeug",-1)])),_:1,__:[84]}),a(_,{unit:"%",min:5,max:100,step:5,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).soc,"onUpdate:modelValue":e[32]||(e[32]=r=>l.setChargePointConnectedVehicleEcoChargingLimitSoc(t.modalChargePointId,r))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).selected=="amount"?(d(),u(m,{key:2},{default:i(()=>[a(s,null,{default:i(()=>e[85]||(e[85]=[c("Energie-Limit",-1)])),_:1,__:[85]}),a(_,{unit:"kWh",min:1,max:100,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingLimit(t.modalChargePointId).amount/1e3,"onUpdate:modelValue":e[33]||(e[33]=r=>l.setChargePointConnectedVehicleEcoChargingLimitAmount(t.modalChargePointId,1e3*r))},null,8,["model-value"])]),_:1})):P("",!0),t.mqttStore.getEtConfigured?(d(),u(m,{key:3},{default:i(()=>[a(s,null,{default:i(()=>e[86]||(e[86]=[c("Preisgrenze für strompreisbasiertes Laden",-1)])),_:1,__:[86]}),a(_,{unit:"ct/kWh",min:-80,max:80,step:.01,precision:2,"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId),"onUpdate:modelValue":e[34]||(e[34]=r=>l.setChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId,r))},null,8,["model-value"]),a(q,{"model-value":t.mqttStore.getChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId),"onUpdate:modelValue":e[35]||(e[35]=r=>l.setChargePointConnectedVehicleEcoChargingMaxPrice(t.modalChargePointId,r))},null,8,["model-value"])]),_:1})):P("",!0)]),_:1})]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(L,{key:1,name:"tab-scheduled-charging"},{default:i(()=>[t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId)&&t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId).length!==0?(d(),u(y,{key:1},{default:i(()=>[(d(!0),I(E,null,z(t.mqttStore.getChargePointConnectedVehicleScheduledChargingPlans(t.modalChargePointId),(r,N)=>(d(),u(m,{key:N},{default:i(()=>[a(U,null,{default:i(()=>[a($,null,{default:i(()=>[a(C,{size:"lg",block:"",color:r.active?"success":"danger",onClick:le=>l.setChargePointConnectedVehicleScheduledChargingPlanActive(t.modalChargePointId,r.id,!r.active)},{default:i(()=>[T("div",Ze,p(r.name),1),T("div",Ke,[r.frequency.selected=="once"?(d(),I("div",Je,[a(S,{icon:["fas","calendar-day"]}),c(" "+p(t.mqttStore.formatDate(r.frequency.once)),1)])):P("",!0),r.frequency.selected=="daily"?(d(),I("div",He,[a(S,{icon:["fas","calendar-week"]}),e[88]||(e[88]=c(" täglich ",-1))])):P("",!0),r.frequency.selected=="weekly"?(d(),I("div",Qe,[a(S,{icon:["fas","calendar-alt"]}),c(" "+p(t.mqttStore.formatWeeklyScheduleDays(r.frequency.weekly)),1)])):P("",!0),T("div",null,[a(S,{icon:["fas","clock"]}),c(" "+p(r.time),1)]),r.limit.selected=="soc"?(d(),I("div",Xe,[a(S,{icon:["fas","car-battery"]}),c(" "+p(r.limit.soc_scheduled)+" % ",1)])):P("",!0),r.limit.selected=="amount"?(d(),I("div",Ye,[a(S,{icon:["fas","bolt"]}),c(" "+p(r.limit.amount/1e3)+" kWh ",1)])):P("",!0),r.et_active?(d(),I("div",Ge,[a(S,{icon:["fas","coins"]})])):P("",!0)])]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),u(A,{key:0,color:"warning"},{icon:i(()=>[a(S,{"fixed-width":"",icon:["fas","fa-info-circle"]})]),default:i(()=>[e[87]||(e[87]=c(" Es wurden noch keine Zeitpläne für das Zielladen eingerichtet. ",-1))]),_:1,__:[87]}))]),_:1})),t.mqttStore.getSimpleChargePointView?P("",!0):(d(),u(L,{key:2,name:"tab-time-charging"},{default:i(()=>[a(y,null,{default:i(()=>[a(m,{class:"_margin-bottom:2"},{default:i(()=>[a(s,null,{default:i(()=>e[89]||(e[89]=[c("Zeitladen aktivieren",-1)])),_:1,__:[89]}),a(V,{block:""},{default:i(()=>[a(C,{color:l.timeChargingEnabled(t.modalChargePointId)?"":"danger",onClick:e[36]||(e[36]=r=>l.setChargePointConnectedVehicleTimeChargingActive(t.modalChargePointId,!1))},{default:i(()=>e[90]||(e[90]=[c(" Nein ",-1)])),_:1,__:[90]},8,["color"]),a(C,{color:l.timeChargingEnabled(t.modalChargePointId)?"success":"",onClick:e[37]||(e[37]=r=>l.setChargePointConnectedVehicleTimeChargingActive(t.modalChargePointId,!0))},{default:i(()=>e[91]||(e[91]=[c(" Ja ",-1)])),_:1,__:[91]},8,["color"])]),_:1})]),_:1}),t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId)&&t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId).length!==0?(d(),I("div",et,[(d(!0),I(E,null,z(t.mqttStore.getChargePointConnectedVehicleTimeChargingPlans(t.modalChargePointId),(r,N)=>(d(),u(m,{key:N},{default:i(()=>[a(U,null,{default:i(()=>[a($,null,{default:i(()=>[a(C,{size:"lg",block:"",color:r.active?"success":"danger",onClick:le=>l.setChargePointConnectedVehicleTimeChargingPlanActive(t.modalChargePointId,r.id,!r.active)},{default:i(()=>[T("div",tt,p(r.name),1),T("div",at,[r.frequency.selected=="once"?(d(),I("div",it,[a(S,{icon:["fas","calendar-day"]}),c(" "+p(t.mqttStore.formatDateRange(r.frequency.once)),1)])):P("",!0),r.frequency.selected=="daily"?(d(),I("div",nt,[a(S,{icon:["fas","calendar-week"]}),e[93]||(e[93]=c(" täglich ",-1))])):P("",!0),r.frequency.selected=="weekly"?(d(),I("div",ot,[a(S,{icon:["fas","calendar-alt"]}),c(" "+p(t.mqttStore.formatWeeklyScheduleDays(r.frequency.weekly)),1)])):P("",!0),T("div",null,[a(S,{icon:["fas","clock"]}),c(" "+p(r.time.join("-")),1)]),r.limit.selected=="soc"?(d(),I("div",lt,[a(S,{icon:["fas","car-battery"]}),c(" "+p(r.limit.soc)+" % ",1)])):P("",!0),r.limit.selected=="amount"?(d(),I("div",rt,[a(S,{icon:["fas","bolt"]}),c(" "+p(r.limit.amount/1e3)+" kWh ",1)])):P("",!0)])]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])):(d(),u(A,{key:0,color:"warning"},{icon:i(()=>[a(S,{"fixed-width":"",icon:["fas","fa-circle-info"]})]),default:i(()=>[e[92]||(e[92]=c(" Es wurden noch keine Zeitpläne für das Zeitladen eingerichtet. ",-1))]),_:1,__:[92]}))]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),a(oe,{modelValue:t.modalManualSocInputVisible,"onUpdate:modelValue":e[40]||(e[40]=r=>t.modalManualSocInputVisible=r),"vehicle-id":t.modalVehicleId},null,8,["modelValue","vehicle-id"])],64)}],["__scopeId","data-v-c9e26bc4"]]);export{Pt as default};
