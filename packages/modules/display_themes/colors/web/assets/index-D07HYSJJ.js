var ha=Object.defineProperty;var ga=(t,e,a)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var h=(t,e,a)=>ga(t,typeof e!="symbol"?e+"":e,a);import{m as pa,r as Y,a as se,M as dt,d as B,c as v,o as g,n as oe,b as k,e as o,f as re,g as ve,h as m,s as we,i as Qe,j as zt,k as y,w,l as E,p as I,u,t as P,q as jt,v as Nt,x as ma,F as ce,y as _e,z as We,A as _t,B as Te,C as Jt,D as ht,E as ot,G as Je,H as at,I as wt,J as fa,K as Ye,L as Ft,N as va,O as ya,P as Ke,Q as Fe,R as ba,S as _a,T as rt,U as Rt,V as pt,W as wa}from"./vendor-DTwSGpnw.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();function nt(t,e=1){let a;if(t>=1e3&&e<4){switch(e){case 0:a=Math.round(t/1e3);break;case 1:a=Math.round(t/100)/10;break;case 2:a=Math.round(t/10)/100;break;case 3:a=Math.round(t)/1e3;break;default:a=Math.round(t/100)/10;break}return(a==null?void 0:a.toLocaleString(void 0,{minimumFractionDigits:e}))+" kW"}else return Math.round(t).toLocaleString(void 0)+" W"}function xt(t,e=1,a=!1){let n;if(t>1e6&&(a=!0,t=t/1e3),t>=1e3&&e<4){switch(e){case 0:n=Math.round(t/1e3);break;case 1:n=(Math.round(t/100)/10).toFixed(1);break;case 2:n=(Math.round(t/10)/100).toFixed(2);break;case 3:n=(Math.round(t)/1e3).toFixed(3);break;default:n=Math.round(t/100)/10;break}return n.toLocaleString(void 0,{minimumFractionDigits:e})+(a?" MWh":" kWh")}else return Math.round(t).toLocaleString(void 0)+(a?" kWh":" Wh")}function ka(t){return t.toLocaleTimeString(["de-DE"],{hour:"numeric",minute:"2-digit"})}function xa(t,e){return["Jan","Feb","März","April","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"][t]+" "+e}const Sa=0,Ht={host:location.hostname,port:location.protocol=="https:"?443:80,endpoint:"/ws",protocol:location.protocol=="https:"?"wss":"ws",connectTimeout:4e3,reconnectPeriod:4e3,clean:!1,clientId:Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,6)},st={topic:"",qos:Sa};let ge;const{host:Ma,port:Pa,endpoint:$a,...Yt}=Ht,Ca=`${Yt.protocol}://${Ma}:${Pa}${$a}`;try{ge=pa.connect(Ca,Yt),ge.on("connect",()=>{console.info("MQTT connection successful.")}),ge.on("disconnect",()=>{console.info("MQTT disconnected")}),ge.on("error",t=>{console.error("MQTT connection failed: ",t)})}catch(t){console.error("MQTT connect error: ",t)}async function Ta(t){await qt(),ge?ge.on("message",t):console.error("MqttRegister: MQTT client not available")}async function Ee(t){st.topic=t;const{topic:e,qos:a}=st;await qt(),ge.subscribe(e,{qos:a},n=>{if(n){console.error("MQTT Subscription error: "+n);return}})}function Ue(t){st.topic=t;const{topic:e}=st;ge.unsubscribe(e,a=>{if(a){console.error("MQTT Unsubscribe from "+t+" failed: "+a);return}})}async function it(t,e){let n=ge.connected,s=0;for(;!n&&s<10;)console.warn("MQTT not connected. Waiting 0.1 seconds"),await Qt(100),n=ge.connected,s+=1;if(s<10)try{ge.publish(t,e,{qos:0},i=>{i&&console.warn("MQTT publish error: ",i),console.info("MQTT publish: Message sent: ["+t+"]("+e+")")})}catch(i){console.warn("MQTT publish: caught error: "+i)}else console.error("MQTT publish: Lost connection to MQTT server. Please reload the page")}function St(){return Ht.clientId}const It=20;async function qt(){let t=ge.connected,e=0;for(;!t&&e<It;)console.warn("MQTT not connected. Waiting 0.1 seconds"),await Qt(100),t=ge.connected,e+=1;return new Promise((a,n)=>{e<It?a(!0):n(!1)})}function Qt(t){return new Promise(e=>setTimeout(e,t))}let Ia=class{constructor(e){h(this,"id");h(this,"name","Ladepunkt");h(this,"icon","Ladepunkt");h(this,"type","");h(this,"ev",0);h(this,"template",0);h(this,"connectedPhases",0);h(this,"phase_1",0);h(this,"autoPhaseSwitchHw",!1);h(this,"controlPilotInterruptionHw",!1);h(this,"isEnabled",!0);h(this,"isPluggedIn",!1);h(this,"isCharging",!1);h(this,"_isLocked",!1);h(this,"_connectedVehicle",0);h(this,"chargeTemplate",null);h(this,"chargeTemplateId",0);h(this,"evTemplate",0);h(this,"currentPlan","");h(this,"averageConsumption",0);h(this,"vehicleName","");h(this,"rangeCharged",0);h(this,"rangeUnit","");h(this,"counter",0);h(this,"dailyYield",0);h(this,"energyPv",0);h(this,"energyBat",0);h(this,"pvPercentage",0);h(this,"faultState",0);h(this,"faultStr","");h(this,"phasesInUse",0);h(this,"power",0);h(this,"chargedSincePlugged",0);h(this,"stateStr","");h(this,"current",0);h(this,"currents",[0,0,0]);h(this,"phasesToUse",0);h(this,"isSocConfigured",!0);h(this,"isSocManual",!1);h(this,"waitingForSoc",!1);h(this,"color","white");this.id=e}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked=e,je("cpLock",e,this.id)}updateIsLocked(e){this._isLocked=e}get connectedVehicle(){return this._connectedVehicle}set connectedVehicle(e){this._connectedVehicle=e,je("cpVehicle",e,this.id)}updateConnectedVehicle(e){this._connectedVehicle=e}get soc(){return X[this.connectedVehicle]?X[this.connectedVehicle].soc:0}set soc(e){X[this.connectedVehicle]&&(X[this.connectedVehicle].soc=e)}get chargeMode(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.selected)??"stop"}set chargeMode(e){console.log("set mode"),this.chargeTemplate&&(console.log("active"),this.chargeTemplate.chargemode.selected=e,F(this.id))}get hasPriority(){var e;return((e=this.chargeTemplate)==null?void 0:e.prio)??!1}set hasPriority(e){this.chargeTemplate.prio=e,F(this.id)}get timedCharging(){return this.chargeTemplate?this.chargeTemplate.time_charging.active:!1}set timedCharging(e){this.chargeTemplate.time_charging.active=e,F(this.id)}get instantTargetCurrent(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.instant_charging.current)??0}set instantTargetCurrent(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.instant_charging.current=e,F(this.id))}get instantChargeLimitMode(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.instant_charging.limit.selected)??"none"}set instantChargeLimitMode(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.instant_charging.limit.selected=e,F(this.id))}get instantTargetSoc(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.instant_charging.limit.soc)??0}set instantTargetSoc(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.instant_charging.limit.soc=e,F(this.id))}get instantMaxEnergy(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.instant_charging.limit.amount)??0}set instantMaxEnergy(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.instant_charging.limit.amount=e,F(this.id))}get instantTargetPhases(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.instant_charging.phases_to_use)??0}set instantTargetPhases(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.instant_charging.phases_to_use=e,F(this.id))}get pvFeedInLimit(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.feed_in_limit)??!1}set pvFeedInLimit(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.feed_in_limit=e,F(this.id))}get pvMinCurrent(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.min_current)??0}set pvMinCurrent(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.min_current=e,F(this.id))}get pvMinSoc(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.min_soc)??0}set pvMinSoc(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.min_soc=e,F(this.id))}get pvMinSocCurrent(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.min_soc_current)??0}set pvMinSocCurrent(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.min_soc_current=e,F(this.id))}set pvMinSocPhases(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.phases_to_use_min_soc=e,F(this.id))}get pvMinSocPhases(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.phases_to_use_min_soc)??0}get pvChargeLimitMode(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.limit.selected)??"none"}set pvChargeLimitMode(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.limit.selected=e,F(this.id))}get pvTargetSoc(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.limit.soc)??0}set pvTargetSoc(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.limit.soc=e,F(this.id))}get pvMaxEnergy(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.limit.amount)??0}set pvMaxEnergy(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.limit.amount=e,F(this.id))}get pvTargetPhases(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.pv_charging.phases_to_use)??0}set pvTargetPhases(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.pv_charging.phases_to_use=e,F(this.id))}get ecoMinCurrent(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.current)??0}set ecoMinCurrent(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.current=e,F(this.id))}get ecoTargetPhases(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.phases_to_use)??0}set ecoTargetPhases(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.phases_to_use=e,F(this.id))}get ecoChargeLimitMode(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.limit.selected)??"none"}set ecoChargeLimitMode(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.limit.selected=e,F(this.id))}get ecoTargetSoc(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.limit.soc)??0}set ecoTargetSoc(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.limit.soc=e,F(this.id))}get ecoMaxEnergy(){var e;return((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.limit.amount)??0}set ecoMaxEnergy(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.limit.amount=e,F(this.id))}get etMaxPrice(){var e;return(((e=this.chargeTemplate)==null?void 0:e.chargemode.eco_charging.max_price)??0)*1e5}set etMaxPrice(e){this.chargeTemplate&&(this.chargeTemplate.chargemode.eco_charging.max_price=Math.ceil(e*1e3)/1e8,F(this.id))}get etActive(){return this.chargeTemplate&&this.chargeTemplate.chargemode.selected=="eco_charging"}get realCurrent(){switch(this.phasesInUse){case 0:return 0;case 1:return this.currents[0];case 2:return(this.currents[0]+this.currents[1])/2;case 3:return(this.currents[0]+this.currents[1]+this.currents[2])/3;default:return 0}}toPowerItem(){return{name:this.name,power:this.power,energy:this.dailyYield,energyPv:this.energyPv,energyBat:this.energyBat,pvPercentage:this.pvPercentage,color:this.color,icon:this.icon}}};class Ba{constructor(e){h(this,"id");h(this,"name","");h(this,"_chargeTemplateId",0);h(this,"_evTemplateId",0);h(this,"tags",[]);h(this,"config",{});h(this,"soc",0);h(this,"range",0);h(this,"_etActive",!1);h(this,"_etMaxPrice",20);this.id=e}get chargeTemplateId(){return this._chargeTemplateId}set chargeTemplateId(e){this._chargeTemplateId=e,je("vhChargeTemplateId",e,this.id)}updateChargeTemplateId(e){this._chargeTemplateId=e}get evTemplateId(){return this._evTemplateId}set evTemplateId(e){this._evTemplateId=e,je("vhEvTemplateId",e,this.id)}updateEvTemplateId(e){this._evTemplateId=e}get chargepoint(){for(const e of Object.values(S))if(e.connectedVehicle==this.id)return e}}var Ge=(t=>(t.instant_charging="instant_charging",t.pv_charging="pv_charging",t.scheduled_charging="scheduled_charging",t.eco_charging="eco_charging",t.stop="stop",t))(Ge||{});const S=Y({}),X=Y({}),Oa=Y({});Y({});Y({});const Va=Y({});function La(t){t in S||(S[t]=new Ia(t),S[t].color="var(--color-cp"+(Object.values(S).length-1)+")")}function Aa(){Object.keys(S).forEach(t=>{delete S[parseInt(t)]})}const Zt={cpLock:"openWB/set/chargepoint/%/set/manual_lock",chargeMode:"openWB/set/vehicle/template/charge_template/%/chargemode/selected",cpPriority:"openWB/set/vehicle/template/charge_template/%/prio",cpTimedCharging:"openWB/set/vehicle/template/charge_template/%/time_charging/active",cpTimedPlanActive:"openWB/set/vehicle/template/charge_template/%/time_charging/plans/@/active",cpScheduledPlanActive:"openWB/set/vehicle/template/charge_template/%/chargemode/scheduled_charging/plans/@/active",pvBatteryPriority:"openWB/set/general/chargemode_config/pv_charging/bat_mode",cpVehicle:"openWB/set/chargepoint/%/config/ev",cpInstantChargeLimitMode:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/selected",cpInstantTargetCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/current",cpInstantTargetSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/soc",cpInstantMaxEnergy:"openWB/set/vehicle/template/charge_template/%/chargemode/instant_charging/limit/amount",cpPvFeedInLimit:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/feed_in_limit",cpPvMinCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_current",cpPvMaxSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/max_soc",cpPvMinSoc:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_soc",cpPvMinSocCurrent:"openWB/set/vehicle/template/charge_template/%/chargemode/pv_charging/min_soc_current",cpEtMaxPrice:"openWB/set/vehicle/template/charge_template/%/et/max_price",vhChargeTemplateId:"openWB/set/vehicle/%/charge_template",vhEvTemplateId:"openWB/set/vehicle/%/ev_template",shSetManual:"openWB/set/LegacySmartHome/config/set/Devices/%/mode",shSwitchOn:"openWB/set/LegacySmartHome/config/set/Devices/%/device_manual_control",socUpdate:"openWB/set/vehicle/%/get/force_soc_update",setSoc:"openWB/set/vehicle/%/soc_module/calculated_soc_state/manual_soc",priceCharging:"openWB/set/vehicle/template/charge_template/%/et/active",chargeTemplate:"openWB/set/chargepoint/%/set/charge_template"};function je(t,e,a=0,n=void 0){if(isNaN(a)){console.warn("Invalid index");return}let s=Zt[t];if(!s){console.warn("No topic for update type "+t);return}switch(t){default:s=s.replace("%",String(a)),n!=null&&(s=s.replace("@",String(n)))}switch(typeof e){case"number":it(s,JSON.stringify(+e));break;default:it(s,JSON.stringify(e))}}function De(t,e={}){console.log("send command "+t+" "+JSON.stringify(e)),it(`openWB/set/command/${St()}/todo`,JSON.stringify({command:t,data:e}))}function F(t){it(Zt.chargeTemplate.replace("%",String(t)),JSON.stringify(S[t].chargeTemplate))}class Da{constructor(){h(this,"batterySoc",0);h(this,"isBatteryConfigured",!0);h(this,"chargeMode","0");h(this,"_pvBatteryPriority","ev_mode");h(this,"displayLiveGraph",!0);h(this,"isEtEnabled",!0);h(this,"etMaxPrice",0);h(this,"etCurrentPrice",0);h(this,"cpDailyExported",0);h(this,"evuId",0);h(this,"etProvider","");h(this,"ipAddress","");h(this,"systemTime",0);h(this,"version","");h(this,"versionDetails","");h(this,"devBranch","")}get pvBatteryPriority(){return this._pvBatteryPriority}set pvBatteryPriority(e){this._pvBatteryPriority=e,je("pvBatteryPriority",e)}updatePvBatteryPriority(e){this._pvBatteryPriority=e}}const Ea=[["EV","ev_mode"],["Speicher","bat_mode"],["MinSoc","min_soc_bat_mode"]],le=Y({evuIn:{name:"Netz",color:"var(--color-evu)",icon:""},pv:{name:"PV",color:"var(--color-pv",icon:""},batOut:{name:"Bat >",color:"var(--color-battery)",icon:""},evuOut:{name:"Export",color:"var(--color-export)",icon:""},charging:{name:"Laden",color:"var(--color-charging)",icon:""},devices:{name:"Geräte",color:"var(--color-devices)",icon:""},batIn:{name:"> Bat",color:"var(--color-battery)",icon:""},house:{name:"Haus",color:"var(--color-house)",icon:""},cp1:{name:"Ladepunkt",color:"var(--color-cp1)",icon:"Ladepunkt"},cp2:{name:"Ladepunkt",color:"var(--color-cp2)",icon:"Ladepunkt"},cp3:{name:"Ladepunkt",color:"var(--color-cp3)",icon:"Ladepunkt"},cp4:{name:"Ladepunkt",color:"var(--color-cp4)",icon:"Ladepunkt"},cp5:{name:"Ladepunkt",color:"var(--color-cp5)",icon:"Ladepunkt"},cp6:{name:"Ladepunkt",color:"var(--color-cp6)",icon:"Ladepunkt"},cp7:{name:"Ladepunkt",color:"var(--color-cp7)",icon:"Ladepunkt"},cp8:{name:"Ladepunkt",color:"var(--color-cp8)",icon:"Ladepunkt"},sh1:{name:"Gerät",color:"var(--color-sh1)",icon:"Gerät"},sh2:{name:"Gerät",color:"var(--color-sh2)",icon:"Gerät"},sh3:{name:"Gerät",color:"var(--color-sh3)",icon:"Gerät"},sh4:{name:"Gerät",color:"var(--color-sh4)",icon:"Gerät"},sh5:{name:"Gerät",color:"var(--color-sh5)",icon:"Gerät"},sh6:{name:"Gerät",color:"var(--color-sh6)",icon:"Gerät"},sh7:{name:"Gerät",color:"var(--color-sh7)",icon:"Gerät"},sh8:{name:"Gerät",color:"var(--color-sh8)",icon:"Gerät"},sh9:{name:"Gerät",color:"var(--color-sh9)",icon:"Gerät"}});class Xt{constructor(){h(this,"_items",{});this.addItem("evuIn"),this.addItem("pv"),this.addItem("batOut"),this.addItem("evuOut"),this.addItem("charging"),this.addItem("devices"),this.addItem("batIn"),this.addItem("house")}get items(){return this._items}keys(){return Object.keys(this._items)}values(){return Object.values(this._items)}addItem(e){this._items[e]=$e(e)}setEnergy(e,a){this.keys().includes(e)||this.addItem(e),this._items[e].energy=a}setEnergyPv(e,a){this.keys().includes(e)||this.addItem(e),this._items[e].energyPv=a}setEnergyBat(e,a){this.keys().includes(e)||this.addItem(e),this._items[e].energyBat=a}setPvPercentage(e,a){this.keys().includes(e)||this.addItem(e),this._items[e].pvPercentage=a}calculateHouseEnergy(){this._items.house.energy=this._items.evuIn.energy+this._items.pv.energy+this._items.batOut.energy-this._items.evuOut.energy-this._items.batIn.energy-this._items.charging.energy-this._items.devices.energy}}let M=new Xt;function Mt(){M=new Xt}const J=Y({evuIn:$e("evuIn"),pv:$e("pv"),batOut:$e("batOut")}),L=Y({evuOut:$e("evuOut"),charging:$e("charging"),devices:$e("devices"),batIn:$e("batIn"),house:$e("house")}),H=Y(new Da);se("");const lt=se(!1);function $e(t){return{name:le[t]?le[t].name:"item",power:0,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:le[t]?le[t].color:"var(--color-charging)",icon:le[t]?le[t].icon:""}}const ee=Y({active:!1,locked:!0,usePin:!1,code:"",timeout:60,localCpOnly:!1});function ze(){ee.usePin&&ee.locked?new dt("#numberpad").toggle():(ee.locked=!1,setTimeout(()=>{ee.locked=!0},ee.timeout*1e3))}function Wa(t){return t==ee.code}const Bt=se(new Date),Ga={class:"scaled"},Ua=B({__name:"DisplayButton",props:{icon:{},bgcolor:{},color:{}},emits:["click"],setup(t,{emit:e}){const a=t,n=e;function s(){n("click",!0)}return(i,r)=>(g(),v("div",{style:oe({"background-color":a.bgcolor?a.bgcolor:"var(--color-bg)",color:a.color?a.color:"var(--color-title)"}),class:"displaybutton rounded-pill",type:"button",onClick:s},[a.icon?(g(),v("span",{key:0,class:re(["fas me-2 scaled",a.icon])},null,2)):k("",!0),o("span",Ga,[ve(i.$slots,"default",{},void 0)])],4))}}),j=(t,e)=>{const a=t.__vccOpts||t;for(const[n,s]of e)a[n]=s;return a},be=j(Ua,[["__scopeId","data-v-0f8aebee"]]);class za{constructor(e){h(this,"id");h(this,"name","Gerät");h(this,"power",0);h(this,"status","off");h(this,"energy",0);h(this,"runningTime",0);h(this,"configured",!1);h(this,"_showInGraph",!0);h(this,"color","white");h(this,"canSwitch",!1);h(this,"countAsHouse",!1);h(this,"energyPv",0);h(this,"energyBat",0);h(this,"pvPercentage",0);h(this,"tempConfigured",0);h(this,"temp",[300,300,300]);h(this,"on",!1);h(this,"isAutomatic",!0);h(this,"icon","");this.id=e}get showInGraph(){return this._showInGraph}set showInGraph(e){this._showInGraph=e,Z()}setShowInGraph(e){this._showInGraph=e}}const ne=Y(new Map);function Kt(t){t in ne?console.info("Duplicate sh device message: "+t):(ne.set(t,new za(t)),ne.get(t).color="var(--color-sh"+ne.size+")")}class ja{constructor(){h(this,"graphToShow","powermeter");h(this,"cpToShow",0);h(this,"displayLocked",!0);h(this,"_showRelativeArcs",!1);h(this,"showTodayGraph",!0);h(this,"_graphPreference","live");h(this,"_usageStackOrder",0);h(this,"_displayMode","dark");h(this,"_showGrid",!1);h(this,"_smartHomeColors","normal");h(this,"_decimalPlaces",1);h(this,"_showQuickAccess",!0);h(this,"_simpleCpList",!1);h(this,"_shortCpList","no");h(this,"_showAnimations",!0);h(this,"_preferWideBoxes",!1);h(this,"_maxPower",4e3);h(this,"_fluidDisplay",!1);h(this,"_showClock","no");h(this,"_showButtonBar",!0);h(this,"_showCounters",!1);h(this,"_showVehicles",!1);h(this,"_showPrices",!1);h(this,"_debug",!1);h(this,"isEtEnabled",!1);h(this,"etPrice",20.5);h(this,"showRightButton",!0);h(this,"showLeftButton",!0);h(this,"animationDuration",300);h(this,"animationDelay",100);h(this,"zoomGraph",!1);h(this,"parentChargePoint1");h(this,"parentChargePoint2")}get showRelativeArcs(){return this._showRelativeArcs}set showRelativeArcs(e){this._showRelativeArcs=e,Z()}setShowRelativeArcs(e){this._showRelativeArcs=e}get graphPreference(){return this._graphPreference}set graphPreference(e){this._graphPreference=e,Z()}setGraphPreference(e){this._graphPreference=e}get usageStackOrder(){return this._usageStackOrder}set usageStackOrder(e){this._usageStackOrder=e,Z()}setUsageStackOrder(e){this._usageStackOrder=e}get displayMode(){return this._displayMode}set displayMode(e){this._displayMode=e,Ja(e)}setDisplayMode(e){this._displayMode=e}get showGrid(){return this._showGrid}set showGrid(e){this._showGrid=e,Z()}setShowGrid(e){this._showGrid=e}get decimalPlaces(){return this._decimalPlaces}set decimalPlaces(e){this._decimalPlaces=e,Z()}setDecimalPlaces(e){this._decimalPlaces=e}get smartHomeColors(){return this._smartHomeColors}set smartHomeColors(e){this._smartHomeColors=e,Vt(e),Z()}setSmartHomeColors(e){this._smartHomeColors=e,Vt(e)}get showQuickAccess(){return this._showQuickAccess}set showQuickAccess(e){this._showQuickAccess=e,Z()}setShowQuickAccess(e){this._showQuickAccess=e}get simpleCpList(){return this._simpleCpList}set simpleCpList(e){this._simpleCpList=e,Z()}setSimpleCpList(e){this._simpleCpList=e}get shortCpList(){return this._shortCpList}set shortCpList(e){this._shortCpList=e,Z()}setShortCpList(e){this._shortCpList=e}get showAnimations(){return this._showAnimations}set showAnimations(e){this._showAnimations=e,Z()}setShowAnimations(e){this._showAnimations=e}get preferWideBoxes(){return this._preferWideBoxes}set preferWideBoxes(e){this._preferWideBoxes=e,Z()}setPreferWideBoxes(e){this._preferWideBoxes=e}get maxPower(){return this._maxPower}set maxPower(e){this._maxPower=e,Z()}setMaxPower(e){this._maxPower=e}get fluidDisplay(){return this._fluidDisplay}set fluidDisplay(e){this._fluidDisplay=e,Z()}setFluidDisplay(e){this._fluidDisplay=e}get showClock(){return this._showClock}set showClock(e){this._showClock=e,Z()}setShowClock(e){this._showClock=e}get debug(){return this._debug}set debug(e){this._debug=e,Z()}setDebug(e){this._debug=e}get showButtonBar(){return this._showButtonBar}set showButtonBar(e){this._showButtonBar=e,Z()}setShowButtonBar(e){this._showButtonBar=e}get showCounters(){return this._showCounters}set showCounters(e){this._showCounters=e,Z()}setShowCounters(e){this._showCounters=e}get showVehicles(){return this._showVehicles}set showVehicles(e){this._showVehicles=e,Z()}setShowVehicles(e){this._showVehicles=e}get showPrices(){return this._showPrices}set showPrices(e){this._showPrices=e,Z()}setShowPrices(e){this._showPrices=e}}const _=Y(new ja),Be=Y({localIp:void 0,localBranch:void 0,localCommit:void 0,localVersion:void 0,parentChargePoint1:void 0,parentChargePoint2:void 0}),Na=992,kt=Y({x:document.documentElement.clientWidth,y:document.documentElement.clientHeight});function Ot(){kt.x=document.documentElement.clientWidth,kt.y=document.documentElement.clientHeight}m(()=>kt.x>=Na);const Ne={instant_charging:{mode:Ge.instant_charging,name:"Sofort",color:"var(--color-charging)",icon:"fa-bolt"},pv_charging:{mode:Ge.pv_charging,name:"PV",color:"var(--color-pv",icon:"fa-solar-panel"},scheduled_charging:{mode:Ge.scheduled_charging,name:"Zielladen",color:"var(--color-battery)",icon:"fa-bullseye"},eco_charging:{mode:Ge.eco_charging,name:"Eco",color:"var(--color-devices)",icon:"fa-coins"},stop:{mode:Ge.stop,name:"Stop",color:"var(--color-fg)",icon:"fa-power-off"}};function Z(){Fa()}function Ja(t){const e=we("html");e.classed("theme-dark",t=="dark"),e.classed("theme-light",t=="light"),e.classed("theme-blue",t=="blue"),Z()}function Vt(t){const e=we("html");e.classed("shcolors-normal",t=="normal"),e.classed("shcolors-standard",t=="standard"),e.classed("shcolors-advanced",t=="advanced")}function Fa(){const t={};t.hideSH=[...ne.values()].filter(e=>!e.showInGraph).map(e=>e.id),t.showLG=_.graphPreference=="live",t.displayM=_.displayMode,t.stackO=_.usageStackOrder,t.showGr=_.showGrid,t.decimalP=_.decimalPlaces,t.smartHomeC=_.smartHomeColors,t.relPM=_.showRelativeArcs,t.maxPow=_.maxPower,t.showQA=_.showQuickAccess,t.simpleCP=_.simpleCpList,t.shortCP=_.shortCpList,t.animation=_.showAnimations,t.wideB=_.preferWideBoxes,t.fluidD=_.fluidDisplay,t.clock=_.showClock,t.showButtonBar=_.showButtonBar,t.showCounters=_.showCounters,t.showVehicles=_.showVehicles,t.showPrices=_.showPrices,t.debug=_.debug,document.cookie="openWBColorTheme="+JSON.stringify(t)+";max-age=16000000;samesite=strict"}const Ra={class:"navigation"},Ha={class:"graphbuttons"},Ya={class:"cpbuttons"},qa={class:"timedisplay ms-4"},Qa=B({__name:"NavigationBar",setup(t){let e;function a(){let l=Object.values(S).length;_.cpToShow=(_.cpToShow+1)%l}function n(){let l=Object.values(S).length;_.cpToShow=((_.cpToShow-1)%l+l)%l}function s(){_.graphToShow="powermeter"}function i(){_.graphToShow="powergraph"}function r(){_.graphToShow="energymeter"}function c(){ee.locked?ze():new dt("#statuspage").toggle()}return Qe(()=>{e=setInterval(()=>{Bt.value=new Date},1e3)}),zt(()=>{clearInterval(e)}),(l,d)=>(g(),v("div",Ra,[o("span",Ha,[d[3]||(d[3]=o("span",{class:"brand me-4"},"openWB",-1)),y(be,{icon:"fa-chart-pie",onClick:s},{default:w(()=>d[0]||(d[0]=[E("Leistung")])),_:1}),y(be,{icon:"fa-chart-line",onClick:i},{default:w(()=>d[1]||(d[1]=[E("Verlauf")])),_:1}),y(be,{icon:"fa-chart-column",onClick:r},{default:w(()=>d[2]||(d[2]=[E("Energie")])),_:1})]),y(be,{icon:"fa-rectangle-list",onClick:c},{default:w(()=>d[4]||(d[4]=[E("Status")])),_:1}),o("span",Ya,[Object.values(u(S)).length>1?(g(),I(be,{key:0,color:"var(--color-cp0)",onClick:n},{default:w(()=>d[5]||(d[5]=[o("span",{class:"fas fa-arrow-left px-2"},null,-1),o("span",{class:"fas fa-charging-station pe-2"},null,-1)])),_:1})):k("",!0),y(be,{bgcolor:u(ee).locked?"var(--color-evu)":"var(--color-pv)",onClick:u(ze)},{default:w(()=>d[6]||(d[6]=[o("span",{class:"fas fa-lock px-4"},null,-1)])),_:1},8,["bgcolor","onClick"]),Object.values(u(S)).length>1?(g(),I(be,{key:1,color:"var(--color-cp0)",onClick:a},{default:w(()=>d[7]||(d[7]=[o("span",{class:"fas fa-charging-station px-2"},null,-1),o("span",{class:"fas fa-arrow-right pe-2"},null,-1)])),_:1})):k("",!0),o("span",qa,P(u(ka)(u(Bt))),1)])]))}}),Za=j(Qa,[["__scopeId","data-v-6d0b9541"]]),Xa=["origin"],Ka=B({__name:"PMSourceArc",props:{radius:{},cornerRadius:{},circleGapSize:{},emptyPower:{}},setup(t){const e=t,a=m(()=>{let n={name:"",power:e.emptyPower,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:"var(--color-bg)",icon:""},s=J;s["zz-empty"]=n;const i=Object.values(J).length-1,r=jt().value(d=>d.power).startAngle(-Math.PI/2+e.circleGapSize).endAngle(Math.PI/2-e.circleGapSize).sort(null),c=Nt().innerRadius(e.radius/6*5).outerRadius(e.radius).cornerRadius(e.cornerRadius).padAngle(0),l=we("g#pmSourceArc");return l.selectAll("*").remove(),l.selectAll("sources").data(r(Object.values(s))).enter().append("path").attr("d",c).attr("fill",d=>d.data.color).attr("stroke",(d,f)=>f==i?d.data.power>0?"var(--color-scale)":"null":d.data.color),"pmSourceArc.vue"});return ma(()=>{let n=J.pv.power+J.evuIn.power+J.batOut.power;n>_.maxPower&&(_.maxPower=n)}),(n,s)=>(g(),v("g",{id:"pmSourceArc",origin:a.value},null,8,Xa))}}),en=["origin"],tn=B({__name:"PMUsageArc",props:{radius:{},cornerRadius:{},circleGapSize:{},emptyPower:{}},setup(t){const e=t,a=m(()=>{let n={name:"",power:e.emptyPower,energy:0,energyPv:0,energyBat:0,pvPercentage:0,color:"var(--color-bg)",icon:""};const s=[L.evuOut,L.charging].concat([...ne.values()].filter(d=>d.configured&&!d.countAsHouse).sort((d,f)=>f.power-d.power)).concat([L.batIn,L.house]).concat(n),i=s.length-1,r=jt().value(d=>d.power).startAngle(Math.PI*1.5-e.circleGapSize).endAngle(Math.PI/2+e.circleGapSize).sort(null),c=Nt().innerRadius(e.radius/6*5).outerRadius(e.radius).cornerRadius(e.cornerRadius),l=we("g#pmUsageArc");return l.selectAll("*").remove(),l.selectAll("consumers").data(r(s)).enter().append("path").attr("d",c).attr("fill",d=>d.data.color).attr("stroke",(d,f)=>f==i?d.data.power>0?"var(--color-scale)":"null":d.data.color),"pmUsageArc.vue"});return(n,s)=>(g(),v("g",{id:"pmUsageArc",origin:a.value},null,8,en))}}),ea=B({__name:"FormatWatt",props:{watt:{}},setup(t){const e=t,a=m(()=>nt(e.watt,_.decimalPlaces));return(n,s)=>P(a.value)}}),an={key:0,id:"pmLabel"},nn=["x","y","fill","text-anchor"],on=22,ke=B({__name:"PMLabel",props:{x:{},y:{},data:{},props:{},anchor:{},labeltext:{},labelicon:{},labelcolor:{}},setup(t){const e=t,a=m(()=>e.labeltext?e.labeltext:e.props?e.props.icon+" ":e.labelicon?e.labelicon+" ":""),n=m(()=>e.labelcolor?e.labelcolor:e.props?e.props.color:""),s=m(()=>!e.data||e.data.power>0),i=m(()=>e.labeltext?"":"fas");return(r,c)=>s.value?(g(),v("g",an,[o("text",{x:r.x,y:r.y,fill:n.value,"text-anchor":r.anchor,"font-size":on,class:"pmLabel"},[o("tspan",{class:re(i.value)},P(a.value),3),o("tspan",null,[r.data!==void 0?(g(),I(ea,{key:0,watt:r.data.power},null,8,["watt"])):k("",!0)])],8,nn)])):k("",!0)}}),rn={},sn={class:"p-2 m-0 cont"},ln={class:"wb-widget m-0 pb-2 shadow"},cn={class:"header mt-4 mx-2"},un={class:"titles"},dn={class:"title"},hn={class:"subtitle"},gn={class:"buttons"},pn={class:"wb-subwidget mx-2"},mn={key:0},fn={class:"wb-subwidget mx-2"};function vn(t,e){return g(),v("div",sn,[o("div",ln,[o("div",cn,[o("div",un,[o("div",dn,[ve(t.$slots,"title",{},()=>[e[0]||(e[0]=o("div",{class:"p-0"},"(title goes here)",-1))])]),o("div",hn,[ve(t.$slots,"subtitle",{},void 0)])]),o("div",gn,[ve(t.$slots,"buttons",{},void 0)])]),o("div",pn,[ve(t.$slots,"default",{},void 0)]),t.$slots.footer!=null?(g(),v("div",mn,[e[1]||(e[1]=o("hr",{class:"grid-col-12"},null,-1)),o("div",fn,[ve(t.$slots,"footer",{},void 0)])])):k("",!0)])])}const gt=j(rn,[["render",vn],["__scopeId","data-v-e8292acd"]]);class yn{constructor(){h(this,"active",!1);h(this,"etPriceList",new Map);h(this,"etProvider","");h(this,"etMaxPrice",0)}get etCurrentPriceString(){const[e]=te.etPriceList.values();return(Math.round(e*10)/10).toFixed(1)+" ct"}}const te=Y(new yn),bn={class:"grid-col-12"},_n={id:"powermeter",class:"powermeter p-0 m-0 align-self-stretch"},wn=["viewBox"],kn=["transform"],xn={transform:"scale(0.9294,1)"},Sn=["x"],Se=500,Me=20,Lt=1,Mn=B({__name:"PowerMeter",setup(t){const e=Se,a=Math.PI/40,n=[[4],[4,6],[1,4,6],[0,2,4,6],[0,2,3,5,6]],s=[{x:-85,y:e/2*1/5},{x:0,y:e/2*1/5},{x:85,y:e/2*1/5},{x:-85,y:e/2*2/5},{x:0,y:e/2*2/5},{x:85,y:e/2*2/5},{x:0,y:e/2*3/5}],i=m(()=>Se/2-Me),r=m(()=>{let D="",G=Object.values(J).filter(Q=>Q.power>0);return G.length==1&&G[0].name=="PV"?D="Aktueller Verbrauch: ":D="Bezug/Verbrauch: ",D+nt(L.house.power+L.charging.power+L.devices.power+L.batIn.power,_.decimalPlaces)}),c=m(()=>{let D=J.pv.power+J.evuIn.power+J.batOut.power;return _.maxPower>D?nt(_.maxPower,_.decimalPlaces):nt(D,_.decimalPlaces)}),l=m(()=>Object.values(S)),d=m(()=>{let D=0;return _.showRelativeArcs&&(D=_.maxPower-(J.pv.power+J.evuIn.power+J.batOut.power)),D<0?0:D}),f=m(()=>[L.evuOut,L.charging,L.devices,L.batIn,L.house].filter(D=>D.power>0)),T=m(()=>n[f.value.length-1]);function b(D){return s[T.value[D]]}function C(D){return Math.round(l.value[D].soc)}function z(D){return D.length>12?D.slice(0,11)+".":D}const ie=m(()=>{const[D]=te.etPriceList.values();return Math.round(D*10)/10});return(D,G)=>(g(),I(gt,null,{title:w(()=>G[0]||(G[0]=[E(" Aktuelle Leistung ")])),default:w(()=>[o("div",bn,[o("figure",_n,[(g(),v("svg",{viewBox:"0 0 "+Se+" "+u(e)},[o("g",{transform:"translate("+Se/2+","+u(e)/2+")"},[o("g",xn,[y(Ka,{radius:i.value,"corner-radius":Lt,"circle-gap-size":a,"empty-power":d.value},null,8,["radius","empty-power"]),y(tn,{"sh-device":u(ne),radius:i.value,"corner-radius":Lt,"circle-gap-size":a,"empty-power":d.value},null,8,["sh-device","radius","empty-power"]),y(ke,{x:0,y:-u(e)/10*2,data:u(J).pv,props:u(le).pv,anchor:"middle",config:u(_)},null,8,["y","data","props","config"]),y(ke,{x:0,y:-u(e)/10*3,data:u(J).evuIn,props:u(le).evuIn,anchor:"middle",config:u(_)},null,8,["y","data","props","config"]),y(ke,{x:0,y:-u(e)/10,data:u(J).batOut,props:u(le).batOut,anchor:"middle",config:u(_)},null,8,["y","data","props","config"]),u(te).active?(g(),I(ke,{key:0,x:0,y:-u(e)/10,data:u(J).batOut,props:u(le).batOut,anchor:"middle",config:u(_)},null,8,["y","data","props","config"])):k("",!0),(g(!0),v(ce,null,_e(f.value,(Q,O)=>(g(),I(ke,{key:O,x:b(O).x,y:b(O).y,data:Q,labelicon:Q.icon,labelcolor:Q.color,anchor:"middle",config:u(_)},null,8,["x","y","data","labelicon","labelcolor","config"]))),128)),l.value.length>0&&u(X)[l.value[0].connectedVehicle]?(g(),I(ke,{key:1,x:-Se/2-Me/4+10,y:-u(e)/2+Me+5,labeltext:z(u(X)[l.value[0].connectedVehicle].name)+": "+C(0)+"%",labelcolor:l.value[0].color,anchor:"start",config:u(_)},null,8,["x","y","labeltext","labelcolor","config"])):k("",!0),l.value.length>1&&u(X)[l.value[1].connectedVehicle]?(g(),I(ke,{key:2,x:Se/2+Me/4-10,y:-u(e)/2+Me+5,labeltext:z(u(X)[l.value[1].connectedVehicle].name)+": "+C(1)+"%",labelcolor:l.value[1].color,anchor:"end",config:u(_)},null,8,["x","y","labeltext","labelcolor","config"])):k("",!0),u(H).batterySoc>0?(g(),I(ke,{key:3,x:-Se/2-Me/4+10,y:u(e)/2-Me+15,labeltext:"Speicher: "+u(H).batterySoc+"%",labelcolor:u(L).batIn.color,anchor:"start",config:u(_)},null,8,["x","y","labeltext","labelcolor","config"])):k("",!0),u(te).active?(g(),I(ke,{key:4,x:Se/2+Me/4-10,y:u(e)/2-Me+15,value:ie.value,labeltext:u(te).etCurrentPriceString,labelcolor:"var(--color-charging)",anchor:"end",config:u(_)},null,8,["x","y","value","labeltext","config"])):k("",!0),y(ke,{x:0,y:0,labeltext:r.value,labelcolor:"var(--color-fg)",anchor:"middle",config:u(_)},null,8,["labeltext","config"]),u(_).showRelativeArcs?(g(),v("text",{key:5,x:Se/2-44,y:"2","text-anchor":"middle",fill:"var(--color-axis)","font-size":"12"}," Peak: "+P(c.value),9,Sn)):k("",!0)])],8,kn)],8,wn))])])]),_:1}))}}),Pe=500,Ie=500,W={top:10,right:20,bottom:10,left:25},Pt=["charging","house","batIn","devices"];class Pn{constructor(){h(this,"data",[]);h(this,"_graphMode","")}get graphMode(){return this._graphMode}set graphMode(e){this._graphMode=e}}const p=Y(new Pn);let ct=!0,qe=!0;function At(){ct=!1}function Dt(){qe=!1}function $n(t){qe=t}function Ze(t){p.data=t}const K=Y({refreshTopicPrefix:"openWB/graph/alllivevaluesJson",updateTopic:"openWB/graph/lastlivevaluesJson",configTopic:"openWB/graph/config/#",initialized:!1,initCounter:0,graphRefreshCounter:0,rawDataPacks:[],duration:0,activate(){p.data=[],this.unsubscribeUpdates(),this.subscribeRefresh(),Ee(this.configTopic),this.initialized=!1,this.initCounter=0,this.graphRefreshCounter=0,this.rawDataPacks=[],On(),lt.value=!0},deactivate(){this.unsubscribeRefresh(),this.unsubscribeUpdates(),Ue(this.configTopic)},subscribeRefresh(){for(let t=1;t<17;t++)Ee(this.refreshTopicPrefix+t)},unsubscribeRefresh(){for(let t=1;t<17;t++)Ue(this.refreshTopicPrefix+t)},subscribeUpdates(){Ee(this.updateTopic)},unsubscribeUpdates(){Ue(this.updateTopic)}}),q=Y({topic:"openWB/log/daily/#",date:new Date,activate(){if(p.graphMode=="day"||p.graphMode=="today"){p.graphMode=="today"&&(this.date=new Date);const t=this.date.getFullYear().toString()+(this.date.getMonth()+1).toString().padStart(2,"0")+this.date.getDate().toString().padStart(2,"0");Ee(this.topic),De("getDailyLog",{day:t})}},deactivate(){Ue(this.topic)},back(){this.date=new Date(this.date.setTime(this.date.getTime()-864e5))},forward(){this.date=new Date(this.date.setTime(this.date.getTime()+864e5))},setDate(t){this.date=t},getDate(){return this.date}}),Ce=Y({topic:"openWB/log/monthly/#",month:new Date().getMonth()+1,year:new Date().getFullYear(),activate(){const t=this.year.toString()+this.month.toString().padStart(2,"0");p.data=[],Ee(this.topic),De("getMonthlyLog",{month:t})},deactivate(){Ue(this.topic)},back(){this.month-=1,this.month<1&&(this.month=12,this.year-=1),this.activate()},forward(){const t=new Date;t.getFullYear()==this.year?this.month-1<t.getMonth()&&(this.month=this.month+1):(this.month=this.month+1,this.month>12&&(this.month=1,this.year+=1)),this.activate()},getDate(){return new Date(this.year,this.month)}}),Oe=Y({topic:"openWB/log/yearly/#",month:new Date().getMonth()+1,year:new Date().getFullYear(),activate(){const t=this.year.toString();p.data=[],Ee(this.topic),De("getYearlyLog",{year:t})},deactivate(){Ue(this.topic)},back(){this.year-=1,this.activate()},forward(){this.year<new Date().getFullYear()&&(this.year=this.year+1,this.activate())},getDate(){return new Date(this.year,this.month)}});function ae(t=!1){switch(p.graphMode==""?Cn(_.graphPreference):p.graphMode=="live"?_.graphPreference="live":_.graphPreference="today",t||(ct=!0,qe=!0),p.graphMode){case"live":q.deactivate(),Ce.deactivate(),Oe.deactivate(),K.activate();break;case"today":K.deactivate(),Ce.deactivate(),Oe.deactivate(),q.activate();break;case"day":K.deactivate(),Ce.deactivate(),Oe.deactivate(),q.activate();break;case"month":K.deactivate(),q.deactivate(),Oe.deactivate(),Ce.activate();break;case"year":K.deactivate(),q.deactivate(),Ce.deactivate(),Oe.activate();break}}function Cn(t){p.graphMode=t}function Tn(t,e){e[t]>0&&(M.items[t].energyPv+=1e3/12*(e[t]*(e.pv-e.evuOut))/(e.pv-e.evuOut+e.evuIn+e.batOut),M.items[t].energyBat+=1e3/12*(e[t]*e.batOut)/(e.pv-e.evuOut+e.evuIn+e.batOut))}function In(t,e){e[t]>0&&(M.items[t].energyPv+=1e3*(e[t]*(e.pv-e.evuOut))/(e.pv-e.evuOut+e.evuIn+e.batOut),M.items[t].energyBat+=1e3*(e[t]*e.batOut)/(e.pv-e.evuOut+e.evuIn+e.batOut))}const Bn=["evuIn","pv","batIn","evuOut"],Re=se(!1);function $t(t,e){Object.entries(t).length>0?(Re.value=!1,Object.entries(t.counter).forEach(([a,n])=>{(e.length==0||e.includes(a))&&(M.items.evuIn.energy+=n.energy_imported,M.items.evuOut.energy+=n.energy_exported)}),M.items.pv.energy=t.pv.all.energy_exported,t.bat.all&&(M.items.batIn.energy=t.bat.all.energy_imported,M.items.batOut.energy=t.bat.all.energy_exported),Object.entries(t.cp).forEach(([a,n])=>{a=="all"?M.setEnergy("charging",n.energy_imported):M.setEnergy(a,n.energy_imported)}),M.setEnergy("devices",0),Object.entries(t.sh).forEach(([a,n])=>{M.setEnergy(a,n.energy_imported);const s=a.substring(2);ne.get(+s).countAsHouse||(M.items.devices.energy+=n.energy_imported)}),t.hc&&t.hc.all?M.setEnergy("house",t.hc.all.energy_imported):M.calculateHouseEnergy(),M.keys().map(a=>{Bn.includes(a)||(M.setPvPercentage(a,Math.round((M.items[a].energyPv+M.items[a].energyBat)/M.items[a].energy*100)),Pt.includes(a)&&(L[a].energy=M.items[a].energy,L[a].energyPv=M.items[a].energyPv,L[a].energyBat=M.items[a].energyBat,L[a].pvPercentage=M.items[a].pvPercentage))}),p.graphMode=="today"&&(Object.values(S).map(a=>{const n=M.items["cp"+a.id];n&&(a.energyPv=n.energyPv,a.energyBat=n.energyBat,a.pvPercentage=n.pvPercentage)}),ne.forEach(a=>{const n=M.items["sh"+a.id];n&&(a.energy=n.energy,a.energyPv=n.energyPv,a.energyBat=n.energyBat,a.pvPercentage=n.pvPercentage)}))):Re.value=!0,lt.value=!0}function On(){M.keys().map(t=>{Pt.includes(t)&&(L[t].energy=M.items[t].energy,L[t].energyPv=0,L[t].energyBat=0,L[t].pvPercentage=0)}),Object.values(S).map(t=>{t.energyPv=0,t.energyBat=0,t.pvPercentage=0}),ne.forEach(t=>{t.energyPv=0,t.energyBat=0,t.pvPercentage=0})}const xe=m(()=>{const t=We(p.data,e=>e.date);return t[1]?_t().domain(Array.from({length:t[1]},(e,a)=>a+1)).paddingInner(.4).range([0,Pe-W.left-2]):_t().range([0,0])});function Ct(){switch(p.graphMode){case"live":p.graphMode="today",_.showRightButton=!0,ae();break;case"today":p.graphMode="day",q.date=new Date,q.back(),ae();break;case"day":q.back(),ae();break;case"month":Ce.back();break;case"year":Oe.back();break}}function ta(){const t=new Date;switch(p.graphMode){case"live":break;case"today":p.graphMode="live",_.showRightButton=!1,ae();break;case"day":q.forward(),q.date.getDate()==t.getDate()&&q.date.getMonth()==t.getMonth()&&q.date.getFullYear()==t.getFullYear()&&(p.graphMode="today"),ae();break;case"month":Ce.forward();break;case"year":Oe.forward();break}}function aa(){switch(p.graphMode){case"live":Ct();break;case"day":case"today":p.graphMode="month",ae();break;case"month":p.graphMode="year",ae();break}}function na(){switch(p.graphMode){case"year":p.graphMode="month",ae();break;case"month":p.graphMode="today",ae();break;case"today":case"day":p.graphMode="live",ae();break}}function Vn(t){if(p.graphMode=="day"||p.graphMode=="today"){q.setDate(t);const e=new Date;q.date.getDate()==e.getDate()&&q.date.getMonth()==e.getMonth()&&q.date.getFullYear()==e.getFullYear()?p.graphMode="today":p.graphMode="day",ae()}}const Ln=["origin","transform"],An=B({__name:"PGSourceGraph",props:{width:{},height:{},margin:{}},setup(t){const e=t,a={house:"var(--color-house)",batIn:"var(--color-battery)",inverter:"var(--color-pv)",batOut:"var(--color-battery)",selfUsage:"var(--color-pv)",evuOut:"var(--color-export)",evuIn:"var(--color-evu)"};var n,s;const i=_.showAnimations?_.animationDuration:0,r=_.showAnimations?_.animationDelay:0,c=m(()=>{const x=we("g#pgSourceGraph");p.graphMode=="month"||p.graphMode=="year"?O(x):Q(x),x.selectAll(".axis").remove();const $=x.append("g").attr("class","axis");return $.call(ie.value),$.selectAll(".tick").attr("font-size",12),$.selectAll(".tick line").attr("stroke",G.value).attr("stroke-width",D.value),$.select(".domain").attr("stroke","var(--color-bg)"),"pgSourceGraph.vue"}),l=m(()=>p.graphMode=="month"||p.graphMode=="year"?["evuIn","batOut","selfUsage","evuOut"]:["selfUsage","evuOut","batOut","evuIn"]),d=m(()=>Te().domain([0,p.data.length-1]).range([0,e.width])),f=m(()=>Jt().keys(l.value)),T=m(()=>f.value(p.data)),b=m(()=>Te().range([e.height-10,0]).domain(p.graphMode=="year"?[0,Math.ceil(C.value[1]*10)/10]:[0,Math.ceil(C.value[1])])),C=m(()=>{let x=We(p.data,$=>Math.max($.pv+$.evuIn+$.batOut,$.selfUsage+$.evuOut));return x[0]!=null&&x[1]!=null?(p.graphMode=="year"&&(x[0]=x[0]/1e3,x[1]=x[1]/1e3),x):[0,0]}),z=m(()=>p.graphMode=="month"||p.graphMode=="year"?-e.width-e.margin.right-22:-e.width),ie=m(()=>ht(b.value).tickSizeInner(z.value).ticks(4).tickFormat(x=>(x==0?"":Math.round(x*10)/10).toLocaleString(void 0))),D=m(()=>_.showGrid?"0.5":"1"),G=m(()=>_.showGrid?"var(--color-grid)":"var(--color-bg)");function Q(x){const $=ot().x((A,ue)=>d.value(ue)).y(b.value(0)),U=ot().x((A,ue)=>d.value(ue)).y0(A=>b.value(p.graphMode=="year"?A[0]/1e3:A[0])).y1(A=>b.value(p.graphMode=="year"?A[1]/1e3:A[1]));ct?(x.selectAll("*").remove(),n=x.selectAll(".sourceareas").data(T.value).enter().append("path").attr("fill",(A,ue)=>a[l.value[ue]]).attr("d",A=>$(A)),n.transition().duration(i).delay(r).ease(Je).attr("d",A=>U(A)),At()):n.data(T.value).transition().duration(0).ease(Je).attr("d",A=>U(A))}function O(x){ct?(x.selectAll("*").remove(),s=x.selectAll(".sourcebar").data(T.value).enter().append("g").attr("fill",($,U)=>a[l.value[U]]).selectAll("rect").data($=>$).enter().append("rect").attr("x",($,U)=>xe.value(p.data[U].date)??0).attr("y",()=>b.value(0)).attr("height",0).attr("width",xe.value.bandwidth()),s.transition().duration(i).delay(r).ease(Je).attr("height",$=>p.graphMode=="year"?b.value($[0]/1e3)-b.value($[1]/1e3):b.value($[0])-b.value($[1])).attr("y",$=>p.graphMode=="year"?b.value($[1]/1e3):b.value($[1])),At()):(x.selectAll("*").remove(),s=x.selectAll(".sourcebar").data(T.value).enter().append("g").attr("fill",($,U)=>a[l.value[U]]).selectAll("rect").data($=>$).enter().append("rect").attr("x",($,U)=>xe.value(p.data[U].date)??0).attr("y",$=>p.graphMode=="year"?b.value($[1]/1e3):b.value($[1])).attr("width",xe.value.bandwidth()).attr("height",$=>p.graphMode=="year"?b.value($[0]/1e3)-b.value($[1]/1e3):b.value($[0])-b.value($[1])))}return(x,$)=>(g(),v("g",{id:"pgSourceGraph",origin:c.value,transform:"translate("+x.margin.left+","+x.margin.top+")"},null,8,Ln))}}),Dn=["origin","transform"],En=B({__name:"PGUsageGraph",props:{width:{},height:{},margin:{},stackOrder:{}},setup(t){const e=t,a=[["house","charging","devices","batIn"],["charging","devices","house","batIn"],["devices","charging","house","batIn"]],n={house:"var(--color-house)",charging:"var(--color-charging)",batIn:"var(--color-battery)",batOut:"var(--color-battery)",selfUsage:"var(--color-pv)",evuOut:"var(--color-export)",evuIn:"var(--color-evu)",cp0:"var(--color-cp0)",cp1:"var(--color-cp1)",cp2:"var(--color-cp2)",cp3:"var(--color-cp3)",sh1:"var(--color-sh1)",sh2:"var(--color-sh2)",sh3:"var(--color-sh3)",sh4:"var(--color-sh4)",devices:"var(--color-devices)"};var s,i;const r=_.showAnimations?_.animationDuration:0,c=_.showAnimations?_.animationDelay:0,l=m(()=>{const O=we("g#pgUsageGraph");p.graphMode=="month"||p.graphMode=="year"?Q(O):G(O),O.selectAll(".axis").remove();const x=O.append("g").attr("class","axis");return x.call(D.value),x.selectAll(".tick").attr("font-size",12).attr("color","var(--color-axis)"),_.showGrid?x.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):x.selectAll(".tick line").attr("stroke","var(--color-bg)"),x.select(".domain").attr("stroke","var(--color-bg)"),"pgUsageGraph.vue"}),d=m(()=>Jt().keys(C.value)),f=m(()=>d.value(p.data)),T=m(()=>Te().domain([0,p.data.length-1]).range([0,e.width])),b=m(()=>Te().range([e.height+10,2*e.height]).domain(p.graphMode=="year"?[0,Math.ceil(z.value[1]*10)/10]:[0,Math.ceil(z.value[1])])),C=m(()=>{if(p.graphMode!="today"&&p.graphMode!="day")return a[e.stackOrder];{const O=a[e.stackOrder].slice(),x=O.indexOf("charging");O.splice(x,1);const $=/cp\d+/;let U=[];return p.data.length>0&&(U=Object.keys(p.data[0]).reduce((A,ue)=>(ue.match($)&&A.push(ue),A),[])),U.map((A,ue)=>{O.splice(x+ue,0,A),n[A]="var(--color-cp"+ue+")"}),O}}),z=m(()=>{let O=We(p.data,x=>x.house+x.charging+x.batIn+x.devices);return O[0]!=null&&O[1]!=null?(p.graphMode=="year"&&(O[0]=O[0]/1e3,O[1]=O[1]/1e3),O):[0,0]}),ie=m(()=>p.graphMode=="month"||p.graphMode=="year"?-e.width-e.margin.right-22:-e.width),D=m(()=>ht(b.value).tickSizeInner(ie.value).ticks(4).tickFormat(O=>(O==0?"":Math.round(O*10)/10).toLocaleString(void 0)));function G(O){const x=ot().x((U,A)=>T.value(A)).y(b.value(0)),$=ot().x((U,A)=>T.value(A)).y0(U=>b.value(U[0])).y1(U=>b.value(U[1]));_.showAnimations?qe?(O.selectAll("*").remove(),s=O.selectAll(".usageareas").data(f.value).enter().append("path").attr("d",U=>x(U)).attr("fill",(U,A)=>n[C.value[A]]),s.transition().duration(300).delay(100).ease(Je).attr("d",U=>$(U)),Dt()):(O.selectAll("*").remove(),O.selectAll(".usageareas").data(f.value).enter().append("path").attr("d",U=>$(U)).attr("fill",(U,A)=>n[C.value[A]])):(O.selectAll("*").remove(),O.selectAll(".usageareas").data(f.value).enter().append("path").attr("d",U=>$(U)).attr("fill",(U,A)=>n[C.value[A]]))}function Q(O){qe?(O.selectAll("*").remove(),i=O.selectAll(".usagebar").data(f.value).enter().append("g").attr("fill",(x,$)=>n[a[e.stackOrder][$]]).selectAll("rect").data(x=>x).enter().append("rect").attr("x",(x,$)=>xe.value(p.data[$].date)??0).attr("y",()=>b.value(0)).attr("height",0).attr("width",xe.value.bandwidth()),i.transition().duration(r).delay(c).ease(Je).attr("y",x=>p.graphMode=="year"?b.value(x[0]/1e3):b.value(x[0])).attr("height",x=>p.graphMode=="year"?b.value(x[1]/1e3)-b.value(x[0]/1e3):b.value(x[1])-b.value(x[0])),Dt()):(O.selectAll("*").remove(),i=O.selectAll(".usagebar").data(f.value).enter().append("g").attr("fill",(x,$)=>n[a[e.stackOrder][$]]).selectAll("rect").data(x=>x).enter().append("rect").attr("x",(x,$)=>xe.value(p.data[$].date)??0).attr("y",x=>p.graphMode=="year"?b.value(x[0]/1e3):b.value(x[0])).attr("height",x=>p.graphMode=="year"?b.value(x[1]/1e3)-b.value(x[0]/1e3):b.value(x[1])-b.value(x[0])).attr("width",xe.value.bandwidth()))}return(O,x)=>(g(),v("g",{id:"pgUsageGraph",origin:l.value,transform:"translate("+O.margin.left+","+O.margin.top+")"},null,8,Dn))}}),Wn=["transform"],Gn=["origin","transform"],Un=["origin","transform"],zn={key:0},jn=["width","height"],Nn={key:1},Jn=["y","width","height"],mt=12,Fn=B({__name:"PGXAxis",props:{width:{},height:{},margin:{}},setup(t){const e=t,a=m(()=>at(c.value).ticks(4).tickSizeInner(r.value).tickFormat(wt("%H:%M"))),n=m(()=>fa(c.value).ticks(4).tickSizeInner(r.value+3).tickFormat(wt(""))),s=m(()=>at(xe.value).ticks(4).tickSizeInner(r.value).tickFormat(f=>f.toString())),i=m(()=>at(xe.value).ticks(4).tickSizeInner(r.value).tickFormat(()=>"")),r=m(()=>p.graphMode!=="month"&&p.graphMode!=="year"?_.showGrid?-(e.height/2-7):-10:0),c=m(()=>{let f=We(p.data,T=>T.date);return f[0]&&f[1]?Ye().domain(f).range([0,e.width]):Ye().range([0,0])}),l=m(()=>{let f=we("g#PGXAxis");return f.selectAll("*").remove(),p.graphMode=="month"||p.graphMode=="year"?f.call(s.value):f.call(a.value),f.selectAll(".tick > text").attr("fill",(T,b)=>b>0||p.graphMode=="month"||p.graphMode=="year"?"var(--color-axis)":"var(--color-bg)").attr("font-size",mt),_.showGrid?f.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):f.selectAll(".tick line").attr("stroke","var(--color-bg)"),f.select(".domain").attr("stroke","var(--color-bg)"),f.append("text").attr("x",-e.margin.left).attr("y",12).attr("fill","var(--color-axis)").attr("font-size",mt).text(p.graphMode=="year"?"MW":"kW").attr("text-anchor","start"),"PGXAxis.vue"}),d=m(()=>{let f=we("g#PGXAxis2");return f.selectAll("*").remove(),p.graphMode=="month"||p.graphMode=="year"?f.call(i.value):f.call(n.value),f.selectAll(".tick > text").attr("fill",(T,b)=>b>0||p.graphMode=="month"||p.graphMode=="year"?"var(--color-axis)":"var(--color-bg)").attr("font-size",mt),_.showGrid?(f.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"),f.select(".domain").attr("stroke","var(--color-bg)")):f.selectAll(".tick line").attr("stroke","var(--color-bg)"),f.select(".domain").attr("stroke","var(--color-bg)"),"PGXAxis2.vue"});return(f,T)=>(g(),v("g",{transform:"translate("+f.margin.left+","+f.margin.top+")"},[o("g",{id:"PGXAxis",class:"axis",origin:l.value,transform:"translate(0,"+(f.height/2-6)+")"},null,8,Gn),o("g",{id:"PGXAxis2",class:"axis",origin:d.value,transform:"translate(0,"+(f.height/2+10)+")"},null,8,Un),u(_).showGrid?(g(),v("g",zn,[o("rect",{x:"0",y:"0",width:f.width,height:f.height/2-10,fill:"none",stroke:"var(--color-grid)","stroke-width":"0.5"},null,8,jn)])):k("",!0),u(_).showGrid?(g(),v("g",Nn,[o("rect",{x:"0",y:f.height/2+10,width:f.width,height:f.height/2-10,fill:"none",stroke:"var(--color-grid)","stroke-width":"0.5"},null,8,Jn)])):k("",!0)],8,Wn))}}),Rn=["d"],Hn=["d","stroke"],Yn=["x","y","text-anchor"],ft=B({__name:"PgSoc",props:{width:{},height:{},margin:{},order:{}},setup(t){const e=t,a=m(()=>{let b=We(p.data,C=>C.date);return b[0]&&b[1]?Ye().domain(b).range([0,e.width]):Ye().range([0,0])}),n=m(()=>Te().range([e.height-10,0]).domain([0,100])),s=m(()=>Ft().x(z=>a.value(z.date)).y(z=>n.value(e.order==2?z.batSoc:z["soc"+d.value.connectedVehicle])??n.value(0))(p.data)??""),i=m(()=>e.order==2?"Speicher":d.value.connectedVehicle),r=m(()=>e.order==2?"Speicher":d.value.vehicleName),c=m(()=>{switch(e.order){case 0:return"var(--color-cp1)";case 1:return"var(--color-cp2)";case 2:return"var(--color-battery)";default:return"red"}}),l=m(()=>{switch(e.order){case 0:return e.width-3;case 1:return 3;case 2:return e.width/2;default:return 0}}),d=m(()=>{const b=e.order==2?0:e.order;return Object.values(S)[b]}),f=m(()=>{var b;if(p.data.length>0){let C;switch(e.order){case 0:return C=p.data.length-1,n.value(p.data[C]["soc"+i.value]+2);case 1:return C=0,n.value(p.data[C]["soc"+i.value]+2);case 2:return C=Math.round(p.data.length/2),n.value((((b=p.data[C])==null?void 0:b.batSoc)??0)+2);default:return 0}}else return 0}),T=m(()=>{switch(e.order){case 0:return"end";case 1:return"start";case 2:return"middle";default:return"middle"}});return(b,C)=>(g(),v(ce,null,[o("path",{class:"soc-baseline",d:s.value,stroke:"var(--color-bg)","stroke-width":"1",fill:"none"},null,8,Rn),o("path",{class:"soc-dashes",d:s.value,stroke:c.value,"stroke-width":"1",style:{strokeDasharray:"3,3"},fill:"none"},null,8,Hn),o("text",{class:"cpname",x:l.value,y:f.value,style:oe({fill:c.value,fontSize:10}),"text-anchor":T.value},P(r.value),13,Yn)],64))}}),qn=["transform"],Qn=B({__name:"PgSocAxis",props:{width:{},height:{},margin:{}},setup(t){const e=t,a=m(()=>Te().range([e.height-10,0]).domain([0,100])),n=m(()=>va(a.value).ticks(5).tickFormat(i=>i.toString()+"%"));function s(){let i=we("g#PGSocAxis");i.call(n.value),i.selectAll(".tick").attr("font-size",12),i.selectAll(".tick line").attr("stroke","var(--color-bg)"),i.select(".domain").attr("stroke","var(--color-bg)")}return Qe(()=>{s()}),(i,r)=>(g(),v("g",{id:"PGSocAxis",class:"axis",transform:"translate("+(i.width-20)+",0)"},null,8,qn))}}),Zn={class:"btn-group m-0",role:"group","aria-label":"radiobar"},Xn=["id","value"],Kn=B({__name:"RadioBarInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,s=m({get(){return a.modelValue},set(c){n("update:modelValue",c)}});function i(c){let l=a.options[c].color?a.options[c].color:"var(--color-fg)";return a.options[c].active?{color:"var(--color-bg)",background:l}:{color:l}}function r(c){let l=c.target;for(;l&&!l.value&&l.parentElement;)l=l.parentElement;l.value&&(s.value=l.value)}return(c,l)=>(g(),v("div",null,[o("div",Zn,[(g(!0),v(ce,null,_e(c.options,(d,f)=>(g(),v("button",{id:"radio-"+d.value,key:f,class:re(["btn btn-outline-secondary btn-sm radiobutton mx-0 mb-0 px-2",d.value==s.value?"active":""]),value:d.value,style:oe(i(f)),onClick:r},[o("span",{style:oe(i(f)),class:"scaled d-flex flex-column pt-2"},[d.icon?(g(),v("i",{key:0,class:re(["fa-solid",d.icon])},null,2)):k("",!0),E(" "+P(d.text),1)],4)],14,Xn))),128))])]))}}),oa=j(Kn,[["__scopeId","data-v-270067ed"]]),eo={key:0,class:"fa-solid fa-xl fa-chevron-circle-down p-1",style:{color:"var(--color-bg)"}},to=B({__name:"PgSelector",props:{widgetid:{},showLeftButton:{type:Boolean},showRightButton:{type:Boolean},ignoreLive:{type:Boolean}},emits:["shiftLeft","shiftRight","shiftUp","shiftDown"],setup(t){const e=t,a=se(0),n=m(()=>{switch(p.graphMode){case"live":return e.ignoreLive?"heute":`${K.duration} min`;case"today":return"heute";case"day":return q.date.getDate()+"."+(q.date.getMonth()+1)+".";case"month":return xa(Ce.month-1,Ce.year);case"year":return Oe.year.toString();default:return"???"}}),s=["live","today","day","month","year"],i=["Live","Heute","Tag","Monat","Jahr"],r=m({get(){return p.graphMode},set(D){switch(D){case"day":d();break;case"today":f();break;case"live":l();break;case"month":T();break;case"year":b()}}});function c(){a.value+=1,a.value>1&&(a.value=0)}function l(){p.graphMode!="live"&&(p.graphMode="live",ae())}function d(){p.graphMode!="day"&&p.graphMode!="today"&&(p.graphMode="day",ae())}function f(){p.graphMode!="today"&&(p.graphMode="today",Vn(new Date),ae())}function T(){p.graphMode!="month"&&(p.graphMode="month",ae())}function b(){p.graphMode!="year"&&(p.graphMode="year",ae())}const C=m(()=>a.value>0?{border:"1px solid var(--color-frame)"}:""),z=m(()=>a.value==1?"justify-content-between":"justify-content-end"),ie=m(()=>a.value==1?"justify-content-between":"justify-content-center");return(D,G)=>(g(),v("div",{class:"d-flex flex-column justify-content-center pgselector rounded",style:oe(C.value)},[a.value==2?(g(),I(oa,{key:0,id:"pgm2",modelValue:r.value,"onUpdate:modelValue":G[0]||(G[0]=Q=>r.value=Q),class:"m-2",options:s.map((Q,O)=>({text:i[O],value:Q,color:"var(--color-menu)",active:Q==u(p).graphMode}))},null,8,["modelValue","options"])):k("",!0),a.value==1?(g(),v("span",{key:1,type:"button",class:re(["arrowButton d-flex align-self-center mb-3 mt-3",{disabled:!e.showLeftButton}]),onClick:G[1]||(G[1]=Q=>D.$emit("shiftUp"))},G[6]||(G[6]=[o("i",{class:"fa-solid fa-xl fa-chevron-circle-up"},null,-1)]),2)):k("",!0),o("div",{class:re(["d-flex align-items-center",ie.value])},[a.value==1?(g(),v("span",{key:0,type:"button",class:re(["p-1",{disabled:!e.showLeftButton}]),onClick:G[2]||(G[2]=Q=>D.$emit("shiftLeft"))},G[7]||(G[7]=[o("span",{class:"fa-solid fa-xl fa-chevron-circle-left arrowButton"},null,-1)]),2)):k("",!0),a.value<2?(g(),v("span",{key:1,type:"button",class:"btn-outline-secondary p-2 px-3 badge rounded-pill datebadge",onClick:c},P(n.value),1)):k("",!0),a.value==1?(g(),v("span",{key:2,id:"graphRightButton",type:"button",class:re(["arrowButton fa-solid fa-xl fa-chevron-circle-right p-1",{disabled:!e.showRightButton}]),onClick:G[3]||(G[3]=Q=>D.$emit("shiftRight"))},null,2)):k("",!0)],2),o("div",{class:re(["d-flex align-items-center",z.value])},[a.value==1?(g(),v("span",eo)):k("",!0),a.value==1?(g(),v("span",{key:1,id:"graphLeftButton",type:"button",class:re(["arrowButton fa-solid fa-xl fa-chevron-circle-down p-1",{disabled:!e.showLeftButton}]),onClick:G[4]||(G[4]=Q=>D.$emit("shiftDown"))},null,2)):k("",!0),a.value>0?(g(),v("span",{key:2,type:"button",class:"p-1",onClick:G[5]||(G[5]=Q=>a.value=0)},G[8]||(G[8]=[o("span",{class:"fa-solid fa-xl fa-circle-check"},null,-1)]))):k("",!0)],2)],4))}}),ra=j(to,[["__scopeId","data-v-7fd067cd"]]),ao={class:"d-flex justify-content-end"},no={class:"grid-col-12"},oo=["viewBox"],ro=["transform"],so=2,io="Leistung / Ladestand ",lo=B({__name:"PowerGraph",setup(t){function e(){let a=_.usageStackOrder+1;a>so&&(a=0),_.usageStackOrder=a,$n(!0)}return(a,n)=>(g(),I(gt,null,{title:w(()=>[E(P(io))]),buttons:w(()=>[o("div",ao,[y(ra,{widgetid:"graphsettings","show-left-button":!0,"show-right-button":!0,"ignore-live":!1,onShiftLeft:u(Ct),onShiftRight:u(ta),onShiftUp:u(aa),onShiftDown:u(na)},null,8,["onShiftLeft","onShiftRight","onShiftUp","onShiftDown"])])]),default:w(()=>[o("div",no,[o("figure",{id:"powergraph",class:"p-0 m-0 align-self-stretch",onClick:e},[(g(),v("svg",{viewBox:"0 0 "+u(Pe)+" "+u(Ie)},[y(An,{width:u(Pe)-u(W).left-2*u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W)},null,8,["width","height","margin"]),y(En,{width:u(Pe)-u(W).left-2*u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W),"stack-order":u(_).usageStackOrder},null,8,["width","height","margin","stack-order"]),y(Fn,{width:u(Pe)-u(W).left-2*u(W).right,height:u(Ie)-u(W).top-u(W).bottom,margin:u(W),"graph-data":u(p)},null,8,["width","height","margin","graph-data"]),o("g",{transform:"translate("+u(W).left+","+u(W).top+")"},[(u(p).graphMode=="day"||u(p).graphMode=="today"||u(p).graphMode=="live")&&Object.values(u(S)).length>0?(g(),I(ft,{key:0,width:u(Pe)-u(W).left-2*u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W),order:0},null,8,["width","height","margin"])):k("",!0),(u(p).graphMode=="day"||u(p).graphMode=="today"||u(p).graphMode=="live")&&Object.values(u(S)).length>1?(g(),I(ft,{key:1,width:u(Pe)-u(W).left-2*u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W),order:1},null,8,["width","height","margin"])):k("",!0),["day","today","live"].includes(u(p).graphMode)&&u(H).isBatteryConfigured?(g(),I(ft,{key:2,width:u(Pe)-u(W).left-2*u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W),order:2},null,8,["width","height","margin"])):k("",!0),["day","today","live"].includes(u(p).graphMode)?(g(),I(Qn,{key:3,width:u(Pe)-u(W).left-u(W).right,height:(u(Ie)-u(W).top-u(W).bottom)/2,margin:u(W)},null,8,["width","height","margin"])):k("",!0)],8,ro)],8,oo))])])]),_:1}))}}),co=j(lo,[["__scopeId","data-v-ba892fa4"]]),uo=["id"],ho=["x","width","height","fill"],go=["x","width","height"],po=["x","y","width","height"],mo=B({__name:"EmBar",props:{item:{},xScale:{},yScale:{},margin:{},height:{},barcount:{},autarchy:{},autText:{}},setup(t){const e=t,a=m(()=>e.height-e.yScale(e.item.energy)-e.margin.top-e.margin.bottom),n=m(()=>e.item.energyPv>0?e.height-e.yScale(e.item.energyPv)-e.margin.top-e.margin.bottom:0),s=m(()=>e.item.energyPv>0?e.height-e.yScale(e.item.energyBat)-e.margin.top-e.margin.bottom:0);return(i,r)=>(g(),v("g",{id:"bar-"+e.item.name,transform:"scale(1,-1) translate (0,-445)"},[o("rect",{class:"bar",x:e.xScale(i.item.name),y:"0",width:e.xScale.bandwidth(),height:a.value,fill:i.item.color},null,8,ho),o("rect",{class:"bar",x:e.xScale(i.item.name)+e.xScale.bandwidth()/6,y:"0",width:e.xScale.bandwidth()*2/3,height:n.value,fill:"var(--color-pv)","fill-opacity":"66%"},null,8,go),o("rect",{class:"bar",x:e.xScale(i.item.name)+e.xScale.bandwidth()/6,y:n.value,width:e.xScale.bandwidth()*2/3,height:s.value,fill:"var(--color-battery)","fill-opacity":"66%"},null,8,po)],8,uo))}}),fo={id:"emBargraph"},vo=B({__name:"EMBarGraph",props:{plotdata:{},xScale:{},yScale:{},margin:{},height:{}},setup(t){const e=t;function a(s){if(s.name=="PV"){const i=p.graphMode=="live"||p.graphMode=="day"?J:M.items,c=(p.graphMode=="live"||p.graphMode=="day"?L:M.items).evuOut.energy,l=i.pv.energy;return Math.round((l-c)/l*100)}else if(s.name=="Netz"){const i=p.graphMode=="live"||p.graphMode=="day"?J:M.items,r=p.graphMode=="live"||p.graphMode=="day"?L:M.items,c=r.evuOut.energy,l=i.evuIn.energy,d=i.pv.energy,f=i.batOut.energy,T=r.batIn.energy;return Math.round((d+f-c-T)/(d+f+l-c-T)*100)}else return s.pvPercentage}function n(s){return s.name=="PV"?"Eigen":"Aut"}return(s,i)=>(g(),v("g",fo,[(g(!0),v(ce,null,_e(e.plotdata,(r,c)=>(g(),v("g",{key:c},[y(mo,{item:r,"x-scale":e.xScale,"y-scale":e.yScale,margin:e.margin,height:e.height,barcount:e.plotdata.length,"aut-text":n(r),autarchy:a(r)},null,8,["item","x-scale","y-scale","margin","height","barcount","aut-text","autarchy"])]))),128)),i[0]||(i[0]=o("animateTransform",{"attribute-name":"transform",type:"scale",from:"1 0",to:"1 1",begin:"0s",dur:"2s"},null,-1))]))}}),yo=["origin"],bo=B({__name:"EMYAxis",props:{yScale:{type:[Function,Object]},width:{},fontsize:{}},setup(t){const e=t,a=m(()=>ht(e.yScale).tickFormat(s=>s>0?(s/1e3).toString():"").ticks(6).tickSizeInner(-e.width)),n=m(()=>{const s=we("g#emYAxis");return s.attr("class","axis").call(a.value),s.append("text").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("energy"),s.selectAll(".tick").attr("font-size",e.fontsize),_.showGrid?s.selectAll(".tick line").attr("stroke","var(--color-grid)").attr("stroke-width","0.5"):s.selectAll(".tick line").attr("stroke","var(--color-bg)"),s.select(".domain").attr("stroke","var(--color-bg)"),"emYAxis.vue"});return(s,i)=>(g(),v("g",{id:"emYAxis",class:"axis",origin:n.value},null,8,yo))}}),_o=["id"],wo=["x","y","font-size"],ko=["x","y","font-size","fill"],xo=["x","y","font-size","fill"],So=B({__name:"EmLabel",props:{item:{},xScale:{},yScale:{},margin:{},height:{},barcount:{},autarchy:{},autText:{}},setup(t){const e=t,a=m(()=>e.autarchy?e.yScale(e.item.energy)-25:e.yScale(e.item.energy)-10),n=m(()=>{let l=16,d=e.barcount;return d<=5?l=16:d==6?l=14:d>6&&d<=8?l=13:d==9?l=11:d==10?l=10:l=9,l}),s=m(()=>{let l=12,d=e.barcount;return d<=5?l=12:d==6?l=11:d>6&&d<=8||d==9?l=8:d==10?l=7:l=6,l});function i(l,d){return d.length>s.value?d.substring(0,s.value)+".":d}function r(){return e.autarchy?e.autText+": "+e.autarchy.toLocaleString(void 0)+" %":""}function c(){return"var(--color-pv)"}return(l,d)=>(g(),v("g",{id:"barlabel-"+e.item.name},[o("text",{x:e.xScale(l.item.name)+e.xScale.bandwidth()/2,y:a.value,"font-size":n.value,"text-anchor":"middle",fill:"var(--color-menu)"},P(u(xt)(l.item.energy,u(_).decimalPlaces,!1)),9,wo),o("text",{x:e.xScale(l.item.name)+e.xScale.bandwidth()/2,y:e.yScale(l.item.energy)-10,"font-size":n.value-2,"text-anchor":"middle",fill:c()},P(r()),9,ko),o("text",{x:e.xScale(l.item.name)+e.xScale.bandwidth()/2,y:e.height-e.margin.bottom-5,"font-size":n.value,"text-anchor":"middle",fill:l.item.color,class:re(l.item.icon.length<=2?"fas":"")},P(i(l.item.name,l.item.icon)),11,xo)],8,_o))}}),Mo={id:"emBarLabels"},Po=B({__name:"EMLabels",props:{plotdata:{},xScale:{},yScale:{},height:{},margin:{}},setup(t){const e=t;function a(s){if(s.name=="PV"){const i=p.graphMode=="live"||p.graphMode=="day"?J:M.items,c=(p.graphMode=="live"||p.graphMode=="day"?L:M.items).evuOut.energy,l=i.pv.energy;return Math.round((l-c)/l*100)}else if(s.name=="Netz"){const i=p.graphMode=="live"||p.graphMode=="day"?J:M.items,r=p.graphMode=="live"||p.graphMode=="day"?L:M.items,c=r.evuOut.energy,l=i.evuIn.energy,d=i.pv.energy,f=i.batOut.energy,T=r.batIn.energy;return d+f-c-T>0?Math.round((d+f-c-T)/(d+f+l-c-T)*100):0}else return s.pvPercentage}function n(s){return s.name=="PV"?"Eigen":"Aut"}return(s,i)=>(g(),v("g",Mo,[(g(!0),v(ce,null,_e(e.plotdata,(r,c)=>(g(),v("g",{key:c},[y(So,{item:r,"x-scale":e.xScale,"y-scale":e.yScale,margin:e.margin,height:e.height,barcount:e.plotdata.length,"aut-text":n(r),autarchy:a(r)},null,8,["item","x-scale","y-scale","margin","height","barcount","aut-text","autarchy"])]))),128))]))}}),$o={class:"grid-col-12"},Co={id:"energymeter",class:"energymeter p-0 m-0 align-self-stretch"},To={viewBox:"0 0 500 500"},Io=["transform"],Bo=["x"],Oo={key:0},Et=500,vt=500,Wt=12,Vo="Energie",Lo=B({__name:"EnergyMeter",setup(t){const e={top:25,bottom:30,left:25,right:0},a=m(()=>{let r=Object.values(J),c=i.value,l=M.values(),d=[];switch(_.debug&&(console.debug("----------------------- source summary -----------------"),console.debug(J),console.debug("----------------------- usage details ------------------"),console.debug(i.value),console.debug("----------------------- historic summary ---------------"),console.debug(M),console.debug("--------------------------------------------------------")),lt.value==!0&&(lt.value=!1),p.graphMode){default:case"live":case"today":d=r.concat(c).filter(f=>f.energy>0);break;case"day":case"month":case"year":l.length==0?Re.value=!0:(Re.value=!1,d=l.filter(f=>f.energy>0))}return d}),n=m(()=>_t().range([0,Et-e.left-e.right]).domain(a.value.map(r=>r.name)).padding(.4)),s=m(()=>Te().range([vt-e.bottom-e.top,15]).domain([0,ya(a.value,r=>r.energy)])),i=m(()=>{const r=Object.values(S).length,c=[...ne.values()].filter(l=>l.configured).length;return[L.evuOut,L.devices,L.charging].concat(r>1?Object.values(S).map(l=>l.toPowerItem()):[]).concat(c>1?[...ne.values()].filter(l=>l.configured&&l.showInGraph):[]).concat([L.batIn,L.house])});return(r,c)=>(g(),I(gt,null,{title:w(()=>[E(P(Vo))]),buttons:w(()=>[y(ra,{widgetid:"graphsettings","show-left-button":!0,"show-right-button":!0,"ignore-live":!0,onShiftLeft:u(Ct),onShiftRight:u(ta),onShiftUp:u(aa),onShiftDown:u(na)},null,8,["onShiftLeft","onShiftRight","onShiftUp","onShiftDown"])]),default:w(()=>[o("div",$o,[o("figure",Co,[(g(),v("svg",To,[o("g",{transform:"translate("+e.left+","+e.top+")"},[y(vo,{plotdata:a.value,"x-scale":n.value,"y-scale":s.value,height:vt,margin:e},null,8,["plotdata","x-scale","y-scale"]),y(bo,{"y-scale":s.value,width:Et,fontsize:Wt,config:u(_)},null,8,["y-scale","config"]),o("text",{x:-e.left,y:"-15",fill:"var(--color-axis)","font-size":Wt},P(u(p).graphMode=="year"?"MWh":"kWh"),9,Bo),y(Po,{plotdata:a.value,"x-scale":n.value,"y-scale":s.value,height:vt,margin:e,config:u(_)},null,8,["plotdata","x-scale","y-scale","config"])],8,Io)]))])]),u(Re)?(g(),v("p",Oo,"No data")):k("",!0)]),_:1}))}}),Ao=j(Lo,[["__scopeId","data-v-35f92695"]]),Do=["id"],Eo={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Wo={class:"modal-content"},Go={class:"modal-header"},Uo={class:"modal-title scaled"},zo=["id"],jo=B({__name:"ModalComponent",props:{modalId:{}},setup(t){const e=t;return(a,n)=>(g(),v("div",{id:e.modalId,class:"modal fade"},[o("div",Eo,[o("div",Wo,[o("div",Go,[o("h3",Uo,[ve(a.$slots,"title",{},void 0)]),n[0]||(n[0]=o("button",{type:"button",class:"btn-close buttonTextSize d-flex justify-content-center pt-3 pb-0","data-bs-dismiss":"modal"},[o("i",{class:"fa-solid fa-lg fa-circle-check m-0 p-0"})],-1))]),o("div",{id:"modal-body-"+e.modalId,class:"modal-body"},[ve(a.$slots,"default",{},void 0)],8,zo),n[1]||(n[1]=o("div",{class:"modal-footer"},null,-1))])])],8,Do))}}),yt=j(jo,[["__scopeId","data-v-9e5993e8"]]),No={class:"digit scaled",type:"button"},Jo=B({__name:"PadButton",props:{modelValue:{},color:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=se(!1);function s(){n.value=!0,r("update:modelValue",a.modelValue),setTimeout(()=>{n.value=!1},300)}const i=m(()=>n.value?{"background-color":"white",color:"black"}:{"background-color":a.color??"var(--color-axis)"}),r=e;return(c,l)=>(g(),v("div",{class:"padbutton",style:oe(i.value),onClick:s},[o("span",No,[ve(c.$slots,"default",{},void 0)])],4))}}),et=j(Jo,[["__scopeId","data-v-cc256a6f"]]),Fo={class:"numberpad"},Ro={class:"codedisplay scaled"},Ho={class:"numberentry"},Yo=B({__name:"NumberPad",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=se(t.modelValue),s=e,i=m(()=>n.value.length==0?"Bitte geben Sie die PIN ein":"*".repeat(n.value.length));function r(c){c==-1?n.value=n.value.slice(0,-1):c==-2?(s("update:modelValue",n.value),n.value=""):n.value=n.value+c.toString()}return(c,l)=>(g(),v("div",Fo,[o("p",Ro,P(i.value),1),o("div",Ho,[(g(),v(ce,null,_e(9,d=>y(et,{key:d,"model-value":d,"onUpdate:modelValue":r},{default:w(()=>[E(P(d),1)]),_:2},1032,["model-value"])),64)),y(et,{"model-value":0,"onUpdate:modelValue":r},{default:w(()=>l[0]||(l[0]=[E("0")])),_:1}),y(et,{"model-value":-1,color:"var(--color-devices)","onUpdate:modelValue":r},{default:w(()=>l[1]||(l[1]=[o("span",{class:"fas fa-delete-left"},null,-1)])),_:1}),y(et,{"model-value":-2,color:"var(--color-devices)","data-bs-dismiss":"modal","onUpdate:modelValue":r},{default:w(()=>l[2]||(l[2]=[o("span",{class:"fas fa-circle-check"},null,-1)])),_:1})])]))}}),qo=j(Yo,[["__scopeId","data-v-63c8fa5c"]]),Qo={class:"statustable"},Zo={key:0,class:"controlbuttons d-flex justify-content-between p-5"},Xo={key:1,class:"confirmationBox rounded m-5 p-5 d-flex flex-column align-items-center"},Ko={class:"d-flex justify-content-between mt-3"},er={key:2,class:"confirmationBox rounded m-5 p-5 d-flex flex-column align-items-center"},tr={class:"d-flex justify-content-between mt-3"},ar={key:3,class:"confirmationBox rounded m-5 p-5 d-flex flex-column align-items-center"},nr={key:4,class:"confirmationBox rounded m-5 p-5 d-flex flex-column align-items-center"},or=B({__name:"StatusPage",setup(t){let e=se(0);function a(){e.value=4,Be.parentChargePoint1!==void 0?(console.log("Shutting down secondary charge point: ",Be.parentChargePoint1),De("chargepointShutdown",{chargePoint:Be.parentChargePoint1})):(console.log("Shutting down primary system"),De("systemShutdown"))}function n(){e.value=3,Be.parentChargePoint1!==void 0?(console.log("Rebooting secondary charge point:",Be.parentChargePoint1),De("chargepointReboot",{chargePoint:Be.parentChargePoint1})):(console.log("Rebooting primary system"),De("systemReboot"))}function s(){location.reload()}return(i,r)=>(g(),v(ce,null,[o("div",Qo,[r[7]||(r[7]=o("span",{class:"header"},"IP-Adresse:",-1)),o("span",null,P(u(H).ipAddress),1),r[8]||(r[8]=o("span",{class:"header"},"Systemzeit:",-1)),o("span",null,P(new Date(u(H).systemTime*1e3).toLocaleString(void 0)),1),r[9]||(r[9]=o("span",{class:"header"},"Version:",-1)),o("span",null,P(u(H).version),1),r[10]||(r[10]=o("span",{class:"header"},"Version (Details):",-1)),o("span",null,P(u(H).versionDetails),1),r[11]||(r[11]=o("span",{class:"header"},"Entwicklungszweig:",-1)),o("span",null,P(u(H).devBranch),1)]),u(e)==0?(g(),v("div",Zo,[o("button",{class:"btn controlbutton",style:{"background-color":"var(--color-battery)"},onClick:r[0]||(r[0]=c=>s())},r[12]||(r[12]=[o("i",{class:"fa-solid fa-rotate-left"},null,-1),E(" Display neu laden ")])),o("button",{class:"btn controlbutton",style:{"background-color":"var(--color-evu)"},onClick:r[1]||(r[1]=c=>Ke(e)?e.value=1:e=1)},r[13]||(r[13]=[o("i",{class:"fa-solid fa-power-off"},null,-1),E(" openWB neu starten ")])),o("button",{class:"btn controlbutton",style:{"background-color":"var(--color-evu)"},onClick:r[2]||(r[2]=c=>Ke(e)?e.value=2:e=2)},r[14]||(r[14]=[o("i",{class:"fa-solid fa-power-off"},null,-1),E(" openWB abschalten ")]))])):k("",!0),u(e)==1?(g(),v("div",Xo,[r[15]||(r[15]=o("span",{class:"confirmTitle"},"Neustart",-1)),r[16]||(r[16]=o("span",{class:"confirmQuestion"},"Die openWB jetzt neu starten?",-1)),o("div",Ko,[o("button",{class:"btn cancelButton mx-3 px-3",onClick:r[3]||(r[3]=c=>Ke(e)?e.value=0:e=0)}," Abbrechen "),o("button",{class:"btn confirmButton mx-3 px-3",onClick:r[4]||(r[4]=c=>n())}," Neustart ")])])):k("",!0),u(e)==2?(g(),v("div",er,[r[17]||(r[17]=o("span",{class:"confirmTitle"},"Abschalten",-1)),r[18]||(r[18]=o("span",{class:"confirmQuestion"},"Die openWB jetzt abschalten?",-1)),o("div",tr,[o("button",{class:"btn cancelButton mx-3 px-3",onClick:r[5]||(r[5]=c=>Ke(e)?e.value=0:e=0)}," Abbrechen "),o("button",{class:"btn confirmButton mx-3 px-3",onClick:r[6]||(r[6]=c=>a())}," Abschalten ")])])):k("",!0),u(e)==3?(g(),v("div",ar,r[19]||(r[19]=[o("span",{class:"confirmTitle"},"Die openWB startet jetzt neu. Bitte warten.",-1)]))):k("",!0),u(e)==4?(g(),v("div",nr,r[20]||(r[20]=[o("span",{class:"confirmTitle"},"Die openWB wird heruntergefahren. Zum Starten die Stromversorgung aus- und wieder einschalten.",-1)]))):k("",!0)],64))}}),rr=j(or,[["__scopeId","data-v-74ffcddc"]]),sr={class:"d-flex align-items-baseline m-0 p-0 scaled"},ir={class:"configwidget ms-1 mb-2 p-0 pt-2 d-flex justify-content-stretch align-items-center"},lr={class:"configslot justify-content-stretch d-flex"},cr=B({__name:"ConfigItem",props:{title:{},infotext:{},icon:{},iconcolor:{},fullwidth:{type:Boolean}},setup(t){const e=t;return(a,n)=>(g(),v(ce,null,[o("span",sr,[e.icon?(g(),v("i",{key:0,class:re(["fa-solid fa-sm m-0 p-0 me-2 item-icon",e.icon]),style:oe({color:e.iconcolor?e.iconcolor:"var(--color-charging)"})},null,6)):k("",!0),E(" "+P(a.title),1)]),o("div",ir,[o("span",lr,[ve(a.$slots,"default",{},void 0)])])],64))}}),R=j(cr,[["__scopeId","data-v-b438f667"]]),ur={class:"rangewidget d-flex flex-column"},dr={class:"rangeslider d-flex flex-fill justify-content-between align-items-center"},hr={class:"d-flex flex-fill flex-column justify-content-center m-0 p-0"},gr={key:0,id:"rangeIndicator",class:"rangeIndicator"},pr={viewBox:"0 0 100 2"},mr=["width"],fr=["x","width"],vr=["x","width"],yr=["id","min","max","step"],br={class:"d-flex justify-content-between align-items-center"},_r={class:"minlabel ps-4"},wr={class:"valuelabel"},kr={class:"maxlabel pe-4"},xr=B({__name:"RangeInput",props:{id:{},min:{},max:{},step:{},unit:{},decimals:{},showSubrange:{type:Boolean},subrangeMin:{},subrangeMax:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=a.decimals??0,s=e,i=m({get(){return Math.round(a.modelValue*Math.pow(10,n))/Math.pow(10,n)},set(b){s("update:modelValue",b)}});function r(){i.value>a.min&&(i.value=Math.round((i.value-a.step)*Math.pow(10,n))/Math.pow(10,n))}function c(){i.value<a.max&&(i.value=Math.round((i.value+a.step)*Math.pow(10,n))/Math.pow(10,n))}const l=m(()=>Te().domain([a.min,a.max]).range([0,100])),d=m(()=>l.value(a.subrangeMin?a.subrangeMin:0)),f=m(()=>a.subrangeMin&&a.subrangeMax?l.value(a.subrangeMax)-l.value(a.subrangeMin):0),T=m(()=>a.subrangeMax&&a.max?l.value(a.max)-l.value(a.subrangeMax):0);return(b,C)=>(g(),v("span",ur,[o("span",dr,[o("span",{type:"button",class:"minusButton",onClick:r},C[1]||(C[1]=[o("i",{class:"fa fa-xl fa-minus-square me-2"},null,-1)])),o("div",hr,[a.showSubrange?(g(),v("figure",gr,[(g(),v("svg",pr,[o("g",null,[o("rect",{class:"below",x:0,y:"0",width:d.value,height:"2",rx:"1",ry:"1",fill:"var(--color-evu)"},null,8,mr),o("rect",{class:"bar",x:d.value,y:"0",width:f.value,height:"2",rx:"1",ry:"1",fill:"var(--color-charging)"},null,8,fr),o("rect",{class:"above",x:d.value+f.value,y:"0",width:T.value,height:"2",rx:"1",ry:"1",fill:"var(--color-pv)"},null,8,vr)])]))])):k("",!0),Fe(o("input",{id:b.id,"onUpdate:modelValue":C[0]||(C[0]=z=>i.value=z),type:"range",class:"form-range flex-fill",min:b.min,max:b.max,step:b.step},null,8,yr),[[ba,i.value,void 0,{number:!0}]])]),o("span",{type:"button",class:"plusButton",onClick:c},C[2]||(C[2]=[o("i",{class:"fa fa-xl fa-plus-square ms-2"},null,-1)]))]),o("span",br,[o("span",_r,P(b.min),1),o("span",wr,P(i.value)+" "+P(b.unit),1),o("span",kr,P(b.max),1)])]))}}),he=j(xr,[["__scopeId","data-v-41dc3794"]]),Sr=["id","value"],Mr=B({__name:"RadioInput",props:{options:{},modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,s=m({get(){return a.modelValue},set(c){console.log(a.options),console.log("set value",c),n("update:modelValue",c)}});function i(c){return a.options[c][2]?{color:a.options[c][2]}:{color:"var(--color-fg)"}}function r(c){console.log(c);let l=c.target;for(;l&&!l.value&&l.parentElement;)l=l.parentElement;l.value&&(typeof a.options[0][1]=="number"?s.value=Number(l.value):s.value=l.value)}return(c,l)=>(g(),v("div",null,[(g(!0),v(ce,null,_e(c.options,(d,f)=>(g(),v("button",{id:"radio-"+d[1],key:f,class:re(["btn btn-outline-secondary radiobutton me-2 mb-0 px-2",d[1]==s.value?"active":""]),value:d[1],style:oe(i(f)),onClick:r},[o("span",{style:oe(i(f)),class:"scaled"},[d[3]?(g(),v("i",{key:0,class:re(["fa-solid",d[3]])},null,2)):k("",!0),E(" "+P(d[0]),1)],4)],14,Sr))),128))]))}}),Le=j(Mr,[["__scopeId","data-v-1e5bd3af"]]),Pr={class:"instantsettings"},$r={key:0,class:"fullwidth"},Cr=B({__name:"ConfigInstant",props:{chargepointId:{}},setup(t){const e=t,a=m(()=>S[e.chargepointId]),n=[{name:"keine",id:"none"},{name:"EV-SoC",id:"soc"},{name:"Energiemenge",id:"amount"}],s=m({get(){return a.value.instantMaxEnergy/1e3},set(i){a.value.instantMaxEnergy=i*1e3}});return(i,r)=>(g(),v("div",Pr,[y(R,{title:"Stromstärke",icon:"fa-bolt",fullwidth:!0},{default:w(()=>[y(he,{id:"targetCurrent",modelValue:a.value.instantTargetCurrent,"onUpdate:modelValue":r[0]||(r[0]=c=>a.value.instantTargetCurrent=c),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1}),y(R,{title:"Anzahl Phasen",icon:"fa-plug",fullwidth:!0},{default:w(()=>[y(Le,{id:"targetPhases",modelValue:a.value.instantTargetPhases,"onUpdate:modelValue":r[1]||(r[1]=c=>a.value.instantTargetPhases=c),options:[["Eine",1],["Max",3],["Auto",0]]},null,8,["modelValue"])]),_:1}),a.value.instantChargeLimitMode!="none"?(g(),v("hr",$r)):k("",!0),y(R,{title:"Begrenzung",icon:"fa-hand",fullwidth:!0},{default:w(()=>[y(Le,{modelValue:a.value.instantChargeLimitMode,"onUpdate:modelValue":r[2]||(r[2]=c=>a.value.instantChargeLimitMode=c),options:n.map(c=>[c.name,c.id])},null,8,["modelValue","options"])]),_:1}),a.value.instantChargeLimitMode=="soc"?(g(),I(R,{key:1,title:"Maximaler SoC",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxSoc",modelValue:a.value.instantTargetSoc,"onUpdate:modelValue":r[3]||(r[3]=c=>a.value.instantTargetSoc=c),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):k("",!0),a.value.instantChargeLimitMode=="amount"?(g(),I(R,{key:2,title:"Zu ladende Energie",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxEnergy",modelValue:s.value,"onUpdate:modelValue":r[4]||(r[4]=c=>s.value=c),min:0,max:100,step:1,unit:"kWh"},null,8,["modelValue"])]),_:1})):k("",!0)]))}}),Tr=j(Cr,[["__scopeId","data-v-49084b39"]]),Ir={class:"form-check form-switch d-flex align-items-center justify-content-center"},Br=B({__name:"SwitchInput",props:{modelValue:{type:Boolean},onColor:{},offColor:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,s=m({get(){return a.modelValue},set(i){n("update:modelValue",i)}});return(i,r)=>(g(),v("div",Ir,[Fe(o("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>s.value=c),class:"form-check-input",type:"checkbox",role:"switch"},null,512),[[_a,s.value]])]))}}),Ve=j(Br,[["__scopeId","data-v-547e6de4"]]),Or={class:"pvsettings pt-2"},Vr={key:3,class:"fullwidth"},Lr=B({__name:"ConfigPv",props:{chargepointId:{}},setup(t){const e=t,a=m(()=>S[e.chargepointId]),n=[{name:"keine",id:"none"},{name:"EV-SoC",id:"soc"},{name:"Energiemenge",id:"amount"}],s=m({get(){return a.value.pvMaxEnergy/1e3},set(c){a.value.pvMaxEnergy=c*1e3}}),i=m({get(){return a.value.pvMinCurrent>5},set(c){c?a.value.pvMinCurrent=6:a.value.pvMinCurrent=0}}),r=m({get(){return a.value.pvMinSoc>0},set(c){c?a.value.pvMinSoc=50:a.value.pvMinSoc=0}});return(c,l)=>(g(),v("div",Or,[y(R,{title:"Minimaler Ladestrom",icon:"fa-bolt",fullwidth:!0},{default:w(()=>[y(Ve,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=d=>i.value=d)},null,8,["modelValue"])]),_:1}),i.value?(g(),I(R,{key:0,title:"...bei Ladestrom (minimal)",fullwidth:!0},{default:w(()=>[y(he,{id:"minCurrent",modelValue:a.value.pvMinCurrent,"onUpdate:modelValue":l[1]||(l[1]=d=>a.value.pvMinCurrent=d),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1})):k("",!0),y(R,{title:"Anzahl Phasen",icon:"fa-plug",fullwidth:!0},{default:w(()=>[y(Le,{id:"targetPhases",modelValue:a.value.pvTargetPhases,"onUpdate:modelValue":l[2]||(l[2]=d=>a.value.pvTargetPhases=d),options:[["Eine",1],["Max",3],["Auto",0]]},null,8,["modelValue"])]),_:1}),y(R,{title:"Mindest-Ladestand",icon:"fa-battery-half",fullwidth:!0},{default:w(()=>[y(Ve,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=d=>r.value=d)},null,8,["modelValue"])]),_:1}),r.value?(g(),I(R,{key:1,title:"...bis SoC",fullwidth:!0},{default:w(()=>[y(he,{id:"minSoc",modelValue:a.value.pvMinSoc,"onUpdate:modelValue":l[4]||(l[4]=d=>a.value.pvMinSoc=d),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):k("",!0),r.value?(g(),I(R,{key:2,title:"...mit Ladestrom",fullwidth:!0},{default:w(()=>[y(he,{id:"minSocCurrent",modelValue:a.value.pvMinSocCurrent,"onUpdate:modelValue":l[5]||(l[5]=d=>a.value.pvMinSocCurrent=d),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1})):k("",!0),a.value.pvChargeLimitMode!="none"?(g(),v("hr",Vr)):k("",!0),y(R,{title:"Begrenzung",icon:"fa-hand",fullwidth:!0},{default:w(()=>[y(Le,{modelValue:a.value.pvChargeLimitMode,"onUpdate:modelValue":l[6]||(l[6]=d=>a.value.pvChargeLimitMode=d),options:n.map(d=>[d.name,d.id])},null,8,["modelValue","options"])]),_:1}),a.value.pvChargeLimitMode=="soc"?(g(),I(R,{key:4,title:"Maximaler SoC",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxSoc",modelValue:a.value.pvTargetSoc,"onUpdate:modelValue":l[7]||(l[7]=d=>a.value.pvTargetSoc=d),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):k("",!0),a.value.pvChargeLimitMode=="amount"?(g(),I(R,{key:5,title:"Zu ladende Energie",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxEnergy",modelValue:s.value,"onUpdate:modelValue":l[8]||(l[8]=d=>s.value=d),min:0,max:100,step:1,unit:"kWh"},null,8,["modelValue"])]),_:1})):k("",!0),y(R,{title:"Einspeisegrenze beachten",icon:"fa-hand",fullwidth:!0},{default:w(()=>[y(Ve,{modelValue:a.value.pvFeedInLimit,"onUpdate:modelValue":l[9]||(l[9]=d=>a.value.pvFeedInLimit=d)},null,8,["modelValue"])]),_:1})]))}}),Ar=j(Lr,[["__scopeId","data-v-54a8d955"]]),Dr={class:"d-flex flex-column p-3"},Er={key:0,class:"info p-5"},Wr={key:1,class:"table table-dark"},Gr=B({__name:"ConfigScheduled",props:{chargePoint:{}},setup(t){const e={daily:"Täglich",once:"Einmal",weekly:"Wöchentlich"},a=t,n=m(()=>{var c;return((c=a.chargePoint.chargeTemplate)==null?void 0:c.chargemode.scheduled_charging.plans)??[]});function s(c){return n.value[c].time}function i(c){return{"font-weight":n.value[c].active?"bold":"regular"}}function r(c){a.chargePoint.chargeTemplate.chargemode.scheduled_charging.plans[c].active=n.value[c].active,F(a.chargePoint.id)}return(c,l)=>(g(),v("div",Dr,[l[1]||(l[1]=o("div",{class:"subtitle mb-4"},"Pläne für Zielladen:",-1)),n.value.length==0?(g(),v("div",Er," Pläne für das Zielladen können in den Einstellungen des Ladeprofils angelegt werden. ")):(g(),v("table",Wr,[l[0]||(l[0]=o("thead",null,[o("tr",null,[o("th"),o("th",null,"Plan"),o("th",null,"Zielzeit"),o("th",null,"Ladeziel"),o("th",null,"Wiederholung")])],-1)),o("tbody",null,[(g(!0),v(ce,null,_e(n.value,(d,f)=>(g(),v("tr",{key:f,style:oe(i(f))},[o("td",null,[y(Ve,{modelValue:d.active,"onUpdate:modelValue":[T=>d.active=T,T=>r(f)]},null,8,["modelValue","onUpdate:modelValue"])]),o("td",null,P(d.name),1),o("td",null,P(s(f)),1),o("td",null,P(d.limit.selected=="soc"?d.limit.soc_scheduled+"%":u(xt)(d.limit.amount,0)),1),o("td",null,P(e[d.frequency.selected]),1)],4))),128))])]))]))}}),Ur=j(Gr,[["__scopeId","data-v-f5100bdc"]]),zr={class:"digit scaled",type:"button"},jr=B({__name:"PadButtonSmall",props:{modelValue:{},color:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=se(!1);function s(){n.value=!0,r("update:modelValue",a.modelValue),setTimeout(()=>{n.value=!1},300)}const i=m(()=>n.value?{"background-color":"white",color:"black"}:{"background-color":a.color??"var(--color-axis)"}),r=e;return(c,l)=>(g(),v("div",{class:"padbutton",style:oe(i.value),onClick:s},[o("span",zr,[ve(c.$slots,"default",{},void 0)])],4))}}),Ae=j(jr,[["__scopeId","data-v-c4e8b67a"]]),Nr={class:"numberpad"},Jr={class:"codedisplay scaled px-3 py-1 mb-4"},Fr={class:"numberentry"},Rr=B({__name:"PricePad",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=se(t.modelValue),s=e;function i(r){r==-1?n.value=n.value.slice(0,-1):r==-2?(s("update:modelValue",n.value),n.value=""):r==-3?n.value.indexOf(".")==-1&&(n.value=n.value+"."):n.value=n.value+r.toString()}return(r,c)=>(g(),v("div",Nr,[o("p",Jr,P(n.value)+" ct",1),o("div",Fr,[(g(),v(ce,null,_e(3,l=>y(Ae,{key:l,"model-value":l,"onUpdate:modelValue":i},{default:w(()=>[E(P(l),1)]),_:2},1032,["model-value"])),64)),y(Ae,{"model-value":-2,color:"var(--color-devices)","onUpdate:modelValue":i},{default:w(()=>c[0]||(c[0]=[o("span",{class:"fas fa-circle-check"},null,-1)])),_:1}),(g(),v(ce,null,_e([4,5,6],l=>y(Ae,{key:l,"model-value":l,"onUpdate:modelValue":i},{default:w(()=>[E(P(l),1)]),_:2},1032,["model-value"])),64)),y(Ae,{"model-value":-1,color:"var(--color-devices)","onUpdate:modelValue":i},{default:w(()=>c[1]||(c[1]=[o("span",{class:"fas fa-delete-left"},null,-1)])),_:1}),(g(),v(ce,null,_e([7,8,9],l=>y(Ae,{key:l,"model-value":l,"onUpdate:modelValue":i},{default:w(()=>[E(P(l),1)]),_:2},1032,["model-value"])),64)),c[4]||(c[4]=o("div",null,null,-1)),c[5]||(c[5]=o("div",null,null,-1)),y(Ae,{"model-value":0,"onUpdate:modelValue":i},{default:w(()=>c[2]||(c[2]=[E("0")])),_:1}),y(Ae,{"model-value":-3,"onUpdate:modelValue":i},{default:w(()=>c[3]||(c[3]=[E(",")])),_:1})])]))}}),Hr=j(Rr,[["__scopeId","data-v-2cdf4e9c"]]),Yr={class:"pricesettings"},qr={class:"grapharea rounded shadow p-2"},Qr={id:"pricechart"},Zr={viewBox:"0 0 400 270"},Xr=["id","origin","transform"],Kr={class:"controlarea rounded shadow p-2"},es={class:"pt-1 pb-2 d-flex justify-content-between"},ts={key:1,class:"sliderarea"},bt=400,Gt=250,Ut=12,as=B({__name:"PriceChart",props:{chargePointId:{},globalview:{type:Boolean}},setup(t){const e=t,a=m(()=>S[e.chargePointId]),n=se(!1),s=se(!1);let i=a.value?se(a.value.etMaxPrice):se(0);const r=m({get(){return i.value},set(V){i.value=V,n.value=!0}}),c=m({get(){return(Math.round(i.value*10)/10).toString()},set(V){r.value=parseFloat(V)??r.value,s.value=!1}});function l(){a.value&&(a.value.etMaxPrice=r.value),n.value=!1}const d=se(!1),f={top:0,bottom:15,left:20,right:15},T=m(()=>{let V=[];return te.etPriceList.size>0&&te.etPriceList.forEach((N,pe)=>{V.push([pe,N])}),V}),b=m(()=>T.value.length>1?(bt-f.left-f.right)/T.value.length-1:0),C=m(()=>n.value?{background:"var(--color-charging)",color:"var(--color-fg)"}:{background:"var(--color-menu)"});function z(){s.value=!s.value}const ie=m(()=>{let V=We(T.value,N=>N[0]);return V[1]&&(V[1]=new Date(V[1]),V[1].setTime(V[1].getTime()+36e5)),Ye().range([f.left,bt-f.right]).domain(V)}),D=m(()=>{let V=We(T.value,N=>N[1]);return V[0]=V[0]?Math.floor(V[0]-1):0,V[1]=V[1]?Math.floor(V[1]+1):0,V}),G=m(()=>Te().range([Gt-f.bottom,0]).domain(D.value)),Q=m(()=>{const V=Ft(),N=[[f.left,G.value(r.value)],[bt-f.right-1,G.value(r.value)]];return V(N)}),O=m(()=>at(ie.value).ticks(T.value.length).tickSize(5).tickSizeInner(-250).tickFormat(V=>V.getHours()%6==0?wt("%H:%M")(V):"")),x=m(()=>ht(G.value).ticks(6).tickSizeInner(-365).tickFormat(V=>V.toString())),$=m(()=>{d.value==!0;const V=we("g#"+U.value);V.selectAll("*").remove(),V.selectAll("bar").data(T.value).enter().append("g").append("rect").attr("class","bar").attr("x",ye=>ie.value(ye[0])).attr("y",ye=>G.value(ye[1])).attr("width",b.value).attr("height",ye=>G.value(D.value[0])-G.value(ye[1])).attr("fill",ye=>ye[1]<=r.value?"var(--color-charging)":"var(--color-axis)");const pe=V.append("g").attr("class","axis").call(O.value);pe.attr("transform","translate(0,"+(Gt-f.bottom)+")"),pe.selectAll(".tick").attr("font-size",Ut).attr("color","var(--color-bg)"),pe.selectAll(".tick line").attr("stroke","var(--color-bg)").attr("stroke-width",ye=>ye.getHours()%6==0?"2":"0.5"),pe.select(".domain").attr("stroke","var(--color-bg");const Xe=V.append("g").attr("class","axis").call(x.value);return Xe.attr("transform","translate("+f.left+",0)"),Xe.selectAll(".tick").attr("font-size",Ut).attr("color","var(--color-bg)"),Xe.selectAll(".tick line").attr("stroke","var(--color-bg)").attr("stroke-width",ye=>ye%5==0?"2":"0.5"),Xe.select(".domain").attr("stroke","var(--color-bg)"),V.append("path").attr("d",Q.value).attr("stroke","yellow"),"PriceChart.vue"}),U=m(()=>a.value?"priceChartCanvas"+a.value.id:"priceChartCanvasGlobal"),A=m(()=>{let V=[];return te.etPriceList.forEach(N=>{V.push(N)}),V.sort((N,pe)=>N-pe)});function ue(){let V=A.value[0];for(let N of A.value){if(N>=r.value)break;V=N}r.value=V}function da(){let V=A.value[0];for(let N of A.value)if(N>r.value){V=N;break}else V=N;r.value=V}return Qe(()=>{d.value=!d.value}),(V,N)=>(g(),v("div",Yr,[o("div",qr,[o("span",null,"Anbieter: "+P(u(te).etProvider),1),o("figure",Qr,[(g(),v("svg",Zr,[o("g",{id:U.value,origin:$.value,transform:"translate("+f.top+","+f.right+")"},null,8,Xr)]))])]),o("div",Kr,[o("span",es,[o("button",{type:"button",class:"btn btn-lg keypadbutton me-3",onClick:z},N[2]||(N[2]=[o("i",{class:"fa fa-xl fa-keyboard"},null,-1)])),s.value?k("",!0):(g(),v("button",{key:0,type:"button",class:"btn btn-lg confirmbutton",style:oe(C.value),"data-bs-dismiss":"modal",onClick:l}," Bestätigen ",4))]),s.value?(g(),I(Hr,{key:0,modelValue:c.value,"onUpdate:modelValue":N[0]||(N[0]=pe=>c.value=pe),decimals:1,class:"mb-3"},null,8,["modelValue"])):(g(),v("div",ts,[y(he,{id:"etmaxprice",modelValue:r.value,"onUpdate:modelValue":N[1]||(N[1]=pe=>r.value=pe),min:Math.floor(A.value[0]-1),max:Math.ceil(A.value[A.value.length-1]+1),step:.1,decimals:1,"show-subrange":!0,"subrange-min":A.value[0],"subrange-max":A.value[A.value.length-1],unit:"ct"},null,8,["modelValue","min","max","subrange-min","subrange-max"]),o("div",{class:"d-flex justify-content-between pb-2 pt-0 mt-0"},[o("button",{type:"button",class:"btn jumpbutton",onClick:ue},N[3]||(N[3]=[o("i",{class:"fa fa-xl fa-arrow-left"},null,-1)])),o("button",{type:"button",class:"btn jumpbutton",onClick:da},N[4]||(N[4]=[o("i",{class:"fa fa-xl fa-arrow-right"},null,-1)]))])]))])]))}}),ns=j(as,[["__scopeId","data-v-7e771d75"]]),os={class:"ecosettings"},rs={key:1,class:"fullwidth"},ss=B({__name:"ConfigEco",props:{chargepoint:{}},setup(t){const e=t,a=m(()=>S[e.chargepoint.id]),n=[{name:"keine",id:"none"},{name:"EV-SoC",id:"soc"},{name:"Energiemenge",id:"amount"}],s=m({get(){return a.value.ecoMaxEnergy/1e3},set(c){a.value.ecoMaxEnergy=c*1e3}});function i(){const c=document.getElementById("modal-body-settingspage");c?c.scrollTo({top:c.scrollHeight,behavior:"smooth"}):console.warn("modalbody not found")}function r(){const c=document.getElementById("modal-body-settingspage");window.scrollTo(0,0),c?c.scrollTo({top:0,behavior:"smooth"}):console.warn("modalbody not found")}return(c,l)=>(g(),v("div",os,[u(te).active&&u(te).etPriceList.size>0?(g(),I(ns,{key:0,"charge-point-id":e.chargepoint.id,class:"fullwidth"},null,8,["charge-point-id"])):k("",!0),o("span",{class:"fullwidth mb-4 mt-2"},[o("button",{type:"button",class:"btn btn-secondary",onClick:i},l[5]||(l[5]=[o("i",{class:"fa-solid fa-circle-down me-2"},null,-1),E(" Abwärts ")]))]),y(R,{title:"Minimaler Ladestrom unter der Preisgrenze",icon:"fa-bolt",fullwidth:!0},{default:w(()=>[y(he,{id:"minCurrent",modelValue:a.value.ecoMinCurrent,"onUpdate:modelValue":l[0]||(l[0]=d=>a.value.ecoMinCurrent=d),min:6,max:32,step:1,unit:"A"},null,8,["modelValue"])]),_:1}),y(R,{title:"Anzahl Phasen",icon:"fa-plug",fullwidth:!0},{default:w(()=>[y(Le,{id:"targetPhases",modelValue:a.value.ecoTargetPhases,"onUpdate:modelValue":l[1]||(l[1]=d=>a.value.ecoTargetPhases=d),options:[["Eine",1],["Max",3],["Auto",0]]},null,8,["modelValue"])]),_:1}),a.value.ecoChargeLimitMode!="none"?(g(),v("hr",rs)):k("",!0),y(R,{title:"Begrenzung",icon:"fa-hand",fullwidth:!0},{default:w(()=>[y(Le,{modelValue:a.value.ecoChargeLimitMode,"onUpdate:modelValue":l[2]||(l[2]=d=>a.value.ecoChargeLimitMode=d),options:n.map(d=>[d.name,d.id])},null,8,["modelValue","options"])]),_:1}),a.value.ecoChargeLimitMode=="soc"?(g(),I(R,{key:2,title:"Maximaler SoC",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxSoc",modelValue:a.value.ecoTargetSoc,"onUpdate:modelValue":l[3]||(l[3]=d=>a.value.ecoTargetSoc=d),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])]),_:1})):k("",!0),a.value.ecoChargeLimitMode=="amount"?(g(),I(R,{key:3,title:"Zu ladende Energie",icon:"fa-sliders",fullwidth:!0},{default:w(()=>[y(he,{id:"maxEnergy",modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=d=>s.value=d),min:0,max:100,step:1,unit:"kWh"},null,8,["modelValue"])]),_:1})):k("",!0),o("span",{class:"fullwidth"},[o("button",{type:"button",class:"btn btn-secondary",onClick:r},l[6]||(l[6]=[o("i",{class:"fa-solid fa-circle-up me-2"},null,-1),E(" Aufwärts ")]))])]))}}),is=j(ss,[["__scopeId","data-v-b46bd22a"]]),ls={class:"d-flex flex-column p-3"},cs={key:0,class:"warning p-5"},us={class:"table table-dark"},ds=B({__name:"ConfigTimed",props:{chargePoint:{}},setup(t){const e={daily:"Täglich",once:"Einmal",weekly:"Wöchentlich"},a=t,n=m(()=>{var r;return((r=a.chargePoint.chargeTemplate)==null?void 0:r.time_charging.plans)??[]});function s(r){a.chargePoint.chargeTemplate.chargemode.scheduled_charging.plans[r].active=n.value[r].active,F(a.chargePoint.id)}function i(r){return{"font-weight":n.value[r].active?"bold":"regular"}}return(r,c)=>(g(),v("div",ls,[c[1]||(c[1]=o("div",{class:"subtitle mb-4"},"Zeitpläne:",-1)),n.value.length==0?(g(),v("div",cs," Es sind noch keine Pläne definiert. Zeitpläne können in der Web-App festgelegt werden. ")):k("",!0),o("table",us,[c[0]||(c[0]=o("thead",null,[o("tr",null,[o("th"),o("th",null,"Von"),o("th",null,"Bis"),o("th",null,"Ladestrom"),o("th",null,"Wiederholung")])],-1)),o("tbody",null,[(g(!0),v(ce,null,_e(n.value,(l,d)=>(g(),v("tr",{key:d,style:oe(i(d))},[o("td",null,[y(Ve,{modelValue:l.active,"onUpdate:modelValue":[f=>l.active=f,f=>s(d)]},null,8,["modelValue","onUpdate:modelValue"])]),o("td",null,P(l.time[0]),1),o("td",null,P(l.time[1]),1),o("td",null,P(l.current)+"A",1),o("td",null,P(e[l.frequency.selected]),1)],4))),128))])])]))}}),hs=j(ds,[["__scopeId","data-v-7817e508"]]),gs={class:"chargesettings pt-2"},ps={key:1,class:"grid-col-2 my-2"},ms=B({__name:"ChargeConfig",props:{chargepointId:{}},setup(t){const e=t,a=m(()=>S[e.chargepointId]),n=m({get:()=>a.value.connectedVehicle,set:i=>{S[a.value.id].connectedVehicle=i}}),s=m({get:()=>a.value.timedCharging,set:i=>{S[a.value.id].timedCharging=i}});return(i,r)=>(g(),v("div",gs,[Object.keys(u(X)).length>1?(g(),I(R,{key:0,title:"Fahrzeug wechseln",icon:"fa-car",fullwidth:!0},{default:w(()=>[y(Le,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=c=>n.value=c),modelModifiers:{number:!0},options:Object.values(u(X)).map(c=>[c.name,c.id])},null,8,["modelValue","options"])]),_:1})):k("",!0),r[5]||(r[5]=o("hr",{class:"grid-col-2 my-2"},null,-1)),y(R,{title:"Priorität",icon:"fa-star",iconcolor:"var(--color-evu)",fullwidth:!0},{default:w(()=>[y(Ve,{modelValue:a.value.hasPriority,"onUpdate:modelValue":r[1]||(r[1]=c=>a.value.hasPriority=c)},null,8,["modelValue"])]),_:1}),y(R,{title:"Zeitplan aktivieren",icon:"fa-clock",iconcolor:"var(--color-battery)"},{default:w(()=>[y(Ve,{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=c=>s.value=c)},null,8,["modelValue"])]),_:1}),y(R,{title:"Sperren",icon:"fa-lock",iconcolor:"var(--color-evu)",fullwidth:!0},{default:w(()=>[y(Ve,{modelValue:a.value.isLocked,"onUpdate:modelValue":r[3]||(r[3]=c=>a.value.isLocked=c)},null,8,["modelValue"])]),_:1}),u(H).isBatteryConfigured?(g(),v("hr",ps)):k("",!0),u(H).isBatteryConfigured?(g(),I(R,{key:2,title:"PV-Priorität (global)",icon:"fa-car-battery",iconcolor:"var(--color-battery)",fullwidth:!0},{default:w(()=>[y(Le,{modelValue:u(H).pvBatteryPriority,"onUpdate:modelValue":r[4]||(r[4]=c=>u(H).pvBatteryPriority=c),options:u(Ea)},null,8,["modelValue","options"])]),_:1})):k("",!0)]))}}),fs=j(ms,[["__scopeId","data-v-276daf1f"]]),vs=["id"],ys={class:"nav nav-tabs nav-justified mx-1 mt-1",role:"tablist"},bs=["id","data-bs-target"],_s=["id","data-bs-target"],ws=["id","data-bs-target"],ks=["id","data-bs-target"],xs=["id","data-bs-target"],Ss=["id","data-bs-target"],Ms={id:"settingsPanes",class:"tab-content mt-2"},Ps=["id"],$s=["id"],Cs=["id"],Ts=["id"],Is=["id"],Bs=["id"],Os=B({__name:"SettingsPage",props:{chargepoint:{}},setup(t){const e=t,a=m(()=>e.chargepoint.chargeTemplate),n=m(()=>e.chargepoint.id);return(s,i)=>(g(),v("div",{id:`tabarea-${n.value}`,class:"m-0 mt-1 p-0 grid-col-12 tabarea"},[o("nav",ys,[o("a",{id:"chSettings"+n.value,class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#chargeSettings"+n.value},i[0]||(i[0]=[o("i",{class:"fa-solid fa-charging-station"},null,-1),E(" Allgemein ")]),8,bs),o("a",{id:"inSettings"+n.value,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#instantSettings"+n.value},i[1]||(i[1]=[o("i",{class:"fa-solid fa-lg fa-bolt"},null,-1),E(" Sofort ")]),8,_s),o("a",{id:"phvSettings"+n.value,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#pvSettings"+n.value},i[2]||(i[2]=[o("i",{class:"fa-solid fa-solar-panel me-1"},null,-1),E(" PV ")]),8,ws),o("a",{id:"scSettings"+n.value,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#scheduledSettings"+n.value},i[3]||(i[3]=[o("i",{class:"fa-solid fa-bullseye me-1"},null,-1),E(" Zielladen ")]),8,ks),o("a",{id:"ecSettings"+n.value,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#ecoSettings"+n.value},i[4]||(i[4]=[o("i",{class:"fa-solid fa-coins me-1"},null,-1),E(" Eco ")]),8,xs),o("a",{id:"tmSettings"+n.value,class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#timeSettings"+n.value},i[5]||(i[5]=[o("i",{class:"fa-solid fa-clock"},null,-1),E(" Zeitpläne ")]),8,Ss)]),o("div",Ms,[o("div",{id:"chargeSettings"+n.value,class:"tab-pane active",role:"tabpanel","aria-labelledby":"instant-tab"},[y(fs,{"chargepoint-id":n.value},null,8,["chargepoint-id"])],8,Ps),o("div",{id:"instantSettings"+n.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"instant-tab"},[y(Tr,{"chargepoint-id":n.value},null,8,["chargepoint-id"])],8,$s),o("div",{id:"pvSettings"+n.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"pv-tab"},[y(Ar,{"chargepoint-id":n.value},null,8,["chargepoint-id"])],8,Cs),o("div",{id:"scheduledSettings"+n.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"scheduled-tab"},[a.value!=null?(g(),I(Ur,{key:0,"charge-point":e.chargepoint},null,8,["charge-point"])):k("",!0)],8,Ts),o("div",{id:"ecoSettings"+n.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"eco-tab"},[a.value!=null?(g(),I(is,{key:0,chargepoint:e.chargepoint},null,8,["chargepoint"])):k("",!0)],8,Is),o("div",{id:"timeSettings"+n.value,class:"tab-pane",role:"tabpanel","aria-labelledby":"time-tab"},[a.value!=null?(g(),I(hs,{key:0,"charge-point":e.chargepoint},null,8,["charge-point"])):k("",!0)],8,Bs)])],8,vs))}}),Vs=j(Os,[["__scopeId","data-v-cbeeb183"]]);function Ls(t,e){t=="openWB/graph/boolDisplayLiveGraph"?H.displayLiveGraph=+e==1:t.match(/^openwb\/graph\/alllivevaluesJson[1-9][0-9]*$/i)?As(t,e):t=="openWB/graph/lastlivevaluesJson"?Ds(t,e):t=="openWB/graph/config/duration"&&(K.duration=JSON.parse(e))}function As(t,e){if(!K.initialized){let a=[];const n=e.toString().split(`
`);n.length>1?a=n.map(r=>JSON.parse(r)):a=[];const s=t.match(/(\d+)$/g),i=s?s[0]:"";i!=""&&typeof K.rawDataPacks[+i-1]>"u"&&(K.rawDataPacks[+i-1]=a,K.initCounter++)}if(K.initCounter==16){const a=[];K.unsubscribeRefresh(),K.initialized=!0,K.rawDataPacks.map(n=>{n.map(s=>{const i=sa(s);a.push(i)})}),Ze(a),K.subscribeUpdates()}}function Ds(t,e){const a=JSON.parse(e),n=sa(a);K.graphRefreshCounter++,Ze(p.data.concat(n)),K.graphRefreshCounter>60&&K.activate()}function sa(t){const e=Object.values(S).length>0?Object.values(S)[0].connectedVehicle:0,a=Object.values(S).length>1?Object.values(S)[1].connectedVehicle:1,n="ev"+e+"-soc",s="ev"+a+"-soc",i={};i.date=Es(t.time).valueOf(),+t.grid>0?(i.evuIn=+t.grid,i.evuOut=0):+t.grid<=0?(i.evuIn=0,i.evuOut=-t.grid):(i.evuIn=0,i.evuOut=0),+t["pv-all"]>=0?(i.pv=+t["pv-all"],i.inverter=0):(i.pv=0,i.inverter=-t["pv-all"]),i.house=+t["house-power"],+t["bat-all-power"]>0?(i.batOut=0,i.batIn=+t["bat-all-power"]):+t["bat-all-power"]<0?(i.batOut=-t["bat-all-power"],i.batIn=0):(i.batOut=0,i.batIn=0),t["bat-all-soc"]?i.batSoc=+t["bat-all-soc"]:i.batSoc=0,t[n]&&(i["soc"+e]=+t[n]),t[s]&&(i["soc"+a]=+t[s]),i.charging=+t["charging-all"];for(let r=0;r<10;r++){const c="cp"+r;i[c]=+(t[c+"-power"]??0)}return i.selfUsage=i.pv-i.evuOut,i.selfUsage<0&&(i.selfUsage=0),i.devices=0,i}function Es(t){const e=new Date(Date.now()),a=864e5;let n=new Date;const s=rt("%H:%M:%S")(t);return s&&(n=s,n.setDate(e.getDate()),n.setMonth(e.getMonth()),n.setFullYear(e.getFullYear()),n.getHours()>e.getHours()&&(n=new Date(n.getTime()-a))),n}const Ws=["evuIn","pv","batIn","evuOut"];let ut=[];function Gs(t,e){const a=JSON.parse(e).entries,n=JSON.parse(e).totals;Mt(),ut=[],Pt.map(i=>{M.setEnergyPv(i,0),M.setEnergyBat(i,0)});const s=Us(a);Ze(s),$t(n,ut),_.debug&&(console.debug("---------------------------------------- Graph Data ---------------------------"),console.debug("--- Incoming graph data:"),console.debug(a),console.debug("data to be displayed:"),console.debug(s),console.debug("-------------------------------------------------------------------------------")),p.graphMode=="today"&&setTimeout(()=>q.activate(),3e5)}function Us(t){const e=[];let a={};return t.map(n=>{a=zs(n);const s=a;e.push(s)}),e}function zs(t){const e={};if(p.graphMode=="day"||p.graphMode=="today")if(typeof t.date=="number")e.date=new Date(+t.date*1e3).getTime();else{const n=rt("%H:%M")(t.date);n&&(n.setMonth(q.date.getMonth()),n.setDate(q.date.getDate()),n.setFullYear(q.date.getFullYear()),e.date=n.getTime())}else if(typeof t.date=="string"){const n=rt("%Y%m%d")(t.date);n&&(e.date=n.getDate())}return e.evuOut=0,e.evuIn=0,Object.entries(t.counter).forEach(([n,s])=>{s.grid&&(e.evuOut+=s.power_exported,e.evuIn+=s.power_imported,ut.includes(n)||ut.push(n))}),e.evuOut==0&&e.evuIn==0&&Object.entries(t.counter).forEach(n=>{e.evuOut+=n[1].power_exported,e.evuIn+=n[1].power_imported}),e.pv=t.pv.all.power_exported,Object.entries(t.bat).length>0?(e.batIn=t.bat.all.power_imported,e.batOut=t.bat.all.power_exported,e.batSoc=t.bat.all.soc??0):(e.batIn=0,e.batOut=0,e.batSoc=0),Object.entries(t.cp).forEach(([n,s])=>{n!="all"?(e[n]=s.power_imported,M.keys().includes(n)||M.addItem(n)):e.charging=s.power_imported}),Object.entries(t.ev).forEach(([n,s])=>{n!="all"&&(e["soc"+n.substring(2)]=s.soc)}),e.devices=0,Object.entries(t.sh).forEach(([n,s])=>{n!="all"&&(e[n]=s.power_imported??0,e.devices+=s.power_imported??0,M.keys().includes(n)||M.addItem(n))}),e.selfUsage=e.pv-e.evuOut,t.hc&&t.hc.all?e.house=t.hc.all.power_imported:e.house=e.evuIn+e.batOut+e.pv-e.evuOut-e.charging-e.devices-e.batOut,e.evuIn+e.batOut+e.pv>0?M.keys().filter(n=>!Ws.includes(n)).map(n=>{Tn(n,e)}):Object.keys(e).map(n=>{e[n+"Pv"]=0,e[n+"Bat"]=0}),e}let tt={};const Tt=["charging","house","batIn","devices"],js=["evuIn","pv","batIn","evuOut"];let He=[];function Ns(t,e){const a=JSON.parse(e).entries,n=JSON.parse(e).totals;Mt(),He=[],Tt.map(s=>{M.items[s].energyPv=0,M.items[s].energyBat=0}),a.length>0&&Ze(ia(a)),$t(n,[])}function Js(t,e){const a=JSON.parse(e).entries,n=JSON.parse(e).totals;Mt(),He=[],Tt.forEach(s=>{M.items[s].energyPv=0,M.items[s].energyBat=0}),Ze(ia(a)),$t(n,[])}function ia(t){const e=[];let a={};return tt={},t.map(n=>{a=Fs(n),e.push(a),Object.keys(a).forEach(s=>{s!="date"&&(a[s]<0&&(console.warn(`Negative energy value for ${s} in row ${a.date}. Ignoring the value.`),a[s]=0),tt[s]?tt[s]+=a[s]:tt[s]=a[s])})}),e}function Fs(t){const e={},a=rt("%Y%m%d")(t.date);a&&(e.date=p.graphMode=="month"?a.getDate():a.getMonth()+1),e.evuOut=0,e.evuIn=0;let n=0,s=0;return Object.entries(t.counter).forEach(([r,c])=>{n+=c.energy_exported,s+=c.energy_imported,c.grid&&(e.evuOut+=c.energy_exported,e.evuIn+=c.energy_imported,He.includes(r)||He.push(r))}),He.length==0&&(e.evuOut=n,e.evuIn=s),e.pv=t.pv.all.energy_exported,Object.entries(t.bat).length>0?(t.bat.all.energy_imported>=0?e.batIn=t.bat.all.energy_imported:(console.warn("ignoring negative value for batIn on day "+e.date),e.batIn=0),t.bat.all.energy_exported>=0?e.batOut=t.bat.all.energy_exported:(console.warn("ignoring negative value for batOut on day "+e.date),e.batOut=0)):(e.batIn=0,e.batOut=0),Object.entries(t.cp).forEach(([r,c])=>{r!="all"?(M.keys().includes(r)||M.addItem(r),e[r]=c.energy_imported):e.charging=c.energy_imported}),Object.entries(t.ev).forEach(([r,c])=>{r!="all"&&(e["soc-"+r]=c.soc)}),e.devices=Object.entries(t.sh).reduce((r,c)=>(M.keys().includes(c[0])||M.addItem(c[0]),c[1].energy_imported>=0?r+=c[1].energy_imported:console.warn(`Negative energy value for device ${c[0]} in row ${e.date}. Ignoring this value`),r),0),e.house=e.pv+e.evuIn+e.batOut-e.evuOut-e.batIn-e.charging,e.selfUsage=e.pv-e.evuOut,e.evuIn+e.batOut+e.pv>0?M.keys().filter(r=>!js.includes(r)).map(r=>{In(r,e)}):Tt.map(r=>{e[r+"Pv"]=0,e[r+"Bat"]=0}),e}class Rs{constructor(e){h(this,"id");h(this,"dailyYieldExport",0);h(this,"dailyYieldImport",0);h(this,"exported",0);h(this,"faultState",0);h(this,"faultStr","");h(this,"imported",0);h(this,"power",0);h(this,"soc",0);this.id=e}}class Hs{constructor(){h(this,"dailyExport",0);h(this,"dailyImport",0);h(this,"exported",0);h(this,"imported",0);h(this,"power",0);h(this,"soc",0)}}const de=Y({});Y(new Hs);function Ys(t){t in de?console.info("Duplicate battery message: "+t):de[t]=new Rs(t)}function qs(){Object.keys(de).forEach(t=>{delete de[parseInt(t)]})}function Qs(t,e){const a=Zs(t);if(a&&!(a in de)){console.warn("Invalid battery index received: "+a);return}t=="openWB/bat/config/configured"?H.isBatteryConfigured=e=="true":t=="openWB/bat/get/power"?+e>0?(L.batIn.power=+e,J.batOut.power=0):(L.batIn.power=0,J.batOut.power=-e):t=="openWB/bat/get/soc"?H.batterySoc=+e:t=="openWB/bat/get/daily_exported"?J.batOut.energy=+e:t=="openWB/bat/get/daily_imported"?L.batIn.energy=+e:a&&(t.match(/^openwb\/bat\/[0-9]+\/get\/daily_yield_export$/i)?de[a].dailyYieldExport=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/daily_yield_import$/i)?de[a].dailyYieldImport=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/exported$/i)?de[a].exported=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/fault_state$/i)?de[a].faultState=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/fault_str$/i)?de[a].faultStr=e:t.match(/^openwb\/bat\/[0-9]+\/get\/imported$/i)?de[a].imported=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/power$/i)?de[a].power=+e:t.match(/^openwb\/bat\/[0-9]+\/get\/soc$/i)&&(de[a].soc=+e))}function Zs(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch(a){console.warn("Parser error in getIndex for topic "+t+" : "+a)}}function Xs(t,e){if(t=="openWB/optional/et/provider")JSON.parse(e).type==null?te.active=!1:(te.active=!0,te.etProvider=JSON.parse(e).name);else if(t=="openWB/optional/et/get/prices"){const a=JSON.parse(e);te.etPriceList=new Map,Object.keys(a).map(n=>{te.etPriceList.set(new Date(+n*1e3),a[n]*1e5)})}}function Ks(t,e){const a=la(t);if(a&&!(a in S)){console.warn("Invalid chargepoint id received: "+a);return}if(t=="openWB/chargepoint/get/power"?L.charging.power=+e:t=="openWB/chargepoint/get/daily_imported"&&(L.charging.energy=+e),t=="openWB/chargepoint/get/daily_exported")H.cpDailyExported=+e;else if(a)if(t.match(/^openwb\/chargepoint\/[0-9]+\/config$/i))if(S[a]){const n=JSON.parse(e);S[a].name=n.name,S[a].icon=n.name,le["cp"+a]?(le["cp"+a].name=n.name,le["cp"+a].icon=n.name):le["cp"+a]={name:n.name,icon:n.name,color:"var(--color-charging)"}}else console.warn("invalid chargepoint index: "+a);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/state_str$/i))S[a].stateStr=JSON.parse(e);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/fault_str$/i))S[a].faultStr=JSON.parse(e);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/fault_state$/i))S[a].faultState=+e;else if(t.match(/^openWB\/chargepoint\/[0-9]+\/get\/power$/i))S[a].power=+e;else if(t.match(/^openWB\/chargepoint\/[0-9]+\/get\/daily_imported$/i))S[a].dailyYield=+e;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/plug_state$/i))S[a].isPluggedIn=e=="true";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/charge_state$/i))S[a].isCharging=e=="true";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/manual_lock$/i))S[a].updateIsLocked(e=="true");else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/enabled$/i))S[a].isEnabled=e=="1";else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/phases_in_use/i))S[a].phasesInUse=+e;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/current/i))S[a].current=+e;else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/currents/i))S[a].currents=JSON.parse(e);else if(t.match(/^openwb\/chargepoint\/[0-9]+\/set\/log/i)){const n=JSON.parse(e);S[a].chargedSincePlugged=n.imported_since_plugged}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/soc$/i)){const n=JSON.parse(e);S[a].soc=n.soc,S[a].waitingForSoc=!1,S[a].rangeCharged=n.range_charged,S[a].rangeUnit=n.range_unit}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/info$/i)){const n=JSON.parse(e);S[a].vehicleName=String(n.name),S[a].updateConnectedVehicle(+n.id)}else if(t.match(/^openwb\/chargepoint\/[0-9]+\/get\/connected_vehicle\/config$/i)){const n=JSON.parse(e);S[a].averageConsumption=n.average_consumption,S[a].chargeTemplateId=n.charge_template}else t.match(/^openwb\/chargepoint\/[0-9]+\/set\/charge_template$/i)&&(S[a].chargeTemplate=JSON.parse(e))}function ei(t,e){const a=la(t);if(a!=null){if(!(a in X)){const n=new Ba(a);X[a]=n}if(t.match(/^openwb\/vehicle\/[0-9]+\/name$/i))Object.values(S).forEach(n=>{n.connectedVehicle==a&&(n.vehicleName=JSON.parse(e))}),X[a].name=JSON.parse(e);else if(t.match(/^openwb\/vehicle\/[0-9]+\/get\/soc$/i))X[a].soc=JSON.parse(e);else if(t.match(/^openwb\/vehicle\/[0-9]+\/get\/range$/i))isNaN(+e)?X[a].range=0:X[a].range=+e;else if(t.match(/^openwb\/vehicle\/[0-9]+\/charge_template$/i))X[a].updateChargeTemplateId(+e);else if(t.match(/^openwb\/vehicle\/[0-9]+\/ev_template$/i))X[a].updateEvTemplateId(+e);else if(t.match(/^openwb\/vehicle\/[0-9]+\/soc_module\/config$/i)){const n=JSON.parse(e);Object.values(S).forEach(s=>{s.connectedVehicle==a&&(s.isSocConfigured=n.type!==null,s.isSocManual=n.type=="manual")})}}}function ti(t,e){if(t.match(/^openwb\/vehicle\/template\/charge_template\/[0-9]+$/i)){const a=t.match(/[0-9]+$/i);if(a){const n=+a[0];Oa[n]=JSON.parse(e)}}else if(t.match(/^openwb\/vehicle\/template\/ev_template\/[0-9]+$/i)){const a=t.match(/[0-9]+$/i);if(a){const n=+a[0],s=JSON.parse(e);Va[n]=s}}}function la(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch(a){console.warn("Parser error in getIndex for topic "+t+" : "+a)}}function ai(t,e){t.match(/^openWB\/LegacySmarthome\/config\//i)?ni(t,e):t.match(/^openWB\/LegacySmarthome\/Devices\//i)&&oi(t,e)}function ni(t,e){const a=ca(t);if(a==null)return;ne.has(a)||Kt(a);const n=ne.get(a);t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_configured$/i)?n.configured=e!="0":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_name$/i)?(n.name=e.toString(),n.icon=e.toString(),le["sh"+a].name=e.toString(),le["sh"+a].icon=e.toString()):t.match(/^openWB\/LegacySmarthome\/config\/set\/Devices\/[0-9]+\/mode$/i)?n.isAutomatic=e=="0":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_canSwitch$/i)?n.canSwitch=e=="1":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_homeConsumtion$/i)?n.countAsHouse=e=="1":t.match(/^openWB\/LegacySmarthome\/config\/get\/Devices\/[0-9]+\/device_temperatur_configured$/i)&&(n.tempConfigured=+e)}function oi(t,e){const a=ca(t);if(a==null){console.warn("Smarthome: Missing index in "+t);return}ne.has(a)||Kt(a);const n=ne.get(a);if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/Watt$/i))n.power=+e,ri("power");else if(!t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/Wh$/i)){if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/RunningTimeToday$/i))n.runningTime=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor0$/i))n.temp[0]=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor1$/i))n.temp[1]=+e;else if(t.match(/^openWB\/LegacySmarthome\/Devices\/[0-9]+\/TemperatureSensor2$/i))n.temp[2]=+e;else if(t.match(/^openWB\/LegacySmartHome\/Devices\/[0-9]+\/Status$/i))switch(+e){case 10:n.status="off";break;case 11:n.status="on";break;case 20:n.status="detection";break;case 30:n.status="timeout";break;default:n.status="off"}}}function ri(t){switch(t){case"power":L.devices.power=[...ne.values()].filter(e=>e.configured&&!e.countAsHouse).reduce((e,a)=>e+a.power,0);break;case"energy":L.devices.energy=[...ne.values()].filter(e=>e.configured&&!e.countAsHouse).reduce((e,a)=>e+a.energy,0);break;default:console.error("Unknown category")}}function ca(t){let e=0;try{const a=t.match(/(?:\/)([0-9]+)(?=\/)/g);return a?(e=+a[0].replace(/[^0-9]+/g,""),e):void 0}catch(a){console.warn("Parser error in getIndex for topic "+t+" : "+a)}}class si{constructor(e){h(this,"id");h(this,"name","Zähler");h(this,"power",0);h(this,"energy_imported",0);h(this,"energy_exported",0);h(this,"grid",!1);h(this,"type","counter");h(this,"color","var(--color-evu)");h(this,"energyPv",0);h(this,"energyBat",0);h(this,"pvPercentage",0);h(this,"icon","");this.id=e}}const me=Y({});function ii(t,e){if(t in me)console.info("Duplicate counter message: "+t);else switch(me[t]=new si(t),me[t].type=e,e){case"counter":me[t].color="var(--color-evu)";break;case"inverter":me[t].color="var(--color-pv)";break;case"cp":me[t].color="var(--color-charging)";break;case"bat":me[t].color="var(--color-bat)";break}}const li=["openWB/counter/#","openWB/bat/#","openWB/pv/get/#","openWB/chargepoint/#","openWB/vehicle/#","openWB/general/chargemode_config/pv_charging/#","openWB/optional/et/#","openWB/system/#","openWB/LegacySmartHome/#","openWB/command/"+St()+"/#","openWB/optional/int_display/#"];function ci(){Ta(ui),li.forEach(t=>{Ee(t)}),ae()}function ui(t,e){const a=e.toString();t.match(/^openwb\/counter\/[0-9]+\//i)?di(t,a):t.match(/^openwb\/counter\//i)?hi(t,a):t.match(/^openwb\/bat\//i)?Qs(t,a):t.match(/^openwb\/pv\//i)?gi(t,a):t.match(/^openwb\/chargepoint\//i)?Ks(t,a):t.match(/^openwb\/vehicle\/template\//i)?ti(t,a):t.match(/^openwb\/vehicle\//i)?ei(t,a):t.match(/^openwb\/general\/chargemode_config\/pv_charging\//i)?pi(t,a):t.match(/^openwb\/graph\//i)?Ls(t,a):t.match(/^openwb\/log\/daily\//i)?Gs(t,a):t.match(/^openwb\/log\/monthly\//i)?Ns(t,a):t.match(/^openwb\/log\/yearly\//i)?Js(t,a):t.match(/^openwb\/optional\/et\//i)?Xs(t,a):t.match(/^openwb\/system\//i)?fi(t,a):t.match(/^openwb\/LegacySmartHome\//i)?ai(t,a):t.match(/^openwb\/command\//i)?vi(t,a):t.match(/^openwb\/optional\//i)&&yi(t,a)}function di(t,e){const a=t.split("/"),n=+a[2];if(n==H.evuId?mi(t,e):a[3]=="config",a[3]=="get"&&n in me)switch(a[4]){case"power":me[n].power=+e;break;case"config":break;case"fault_str":break;case"fault_state":break;case"power_factors":break;case"imported":break;case"exported":break;case"frequency":break;case"daily_imported":me[n].energy_imported=+e;break;case"daily_exported":me[n].energy_exported=+e;break}}function hi(t,e){if(t.match(/^openwb\/counter\/get\/hierarchy$/i)){const a=JSON.parse(e);if(a.length){Aa(),qs();for(const n of a)n.type=="counter"&&(H.evuId=n.id);ua(a[0])}}else t.match(/^openwb\/counter\/set\/home_consumption$/i)?L.house.power=+e:t.match(/^openwb\/counter\/set\/daily_yield_home_consumption$/i)&&(L.house.energy=+e)}function ua(t){switch(t.type){case"counter":ii(t.id,t.type);break;case"cp":La(t.id);break;case"bat":Ys(t.id);break}t.children.forEach(e=>ua(e))}function gi(t,e){switch(t){case"openWB/pv/get/power":J.pv.power=-e;break;case"openWB/pv/get/daily_exported":J.pv.energy=+e;break}}function pi(t,e){const a=t.split("/");if(a.length>0)switch(a[4]){case"bat_mode":H.updatePvBatteryPriority(JSON.parse(e));break}}function mi(t,e){switch(t.split("/")[4]){case"power":+e>0?(J.evuIn.power=+e,L.evuOut.power=0):(J.evuIn.power=0,L.evuOut.power=-e);break;case"daily_imported":J.evuIn.energy=+e;break;case"daily_exported":L.evuOut.energy=+e;break}}function fi(t,e){if(t.match(/^openWB\/system\/device\/[0-9]+\/component\/[0-9]+\/config$/i)){const a=JSON.parse(e);a.type=="counter"&&(me[a.id].name=a.name)}else t.match(/^openWB\/system\/ip_address$/i)?H.ipAddress=JSON.parse(e):t.match(/^openWB\/system\/time$/i)?H.systemTime=JSON.parse(e):t.match(/^openWB\/system\/version$/i)?H.version=JSON.parse(e):t.match(/^openWB\/system\/current_commit$/i)?H.versionDetails=JSON.parse(e):t.match(/^openWB\/system\/current_branch$/i)&&(H.devBranch=JSON.parse(e))}function vi(t,e){const a=t.split("/");if(t.match(/^openWB\/command\/[a-z]+\/error$/i)&&a[2]==St()){const n=JSON.parse(e);console.error(`Error message from openWB: 
Command: ${n.command}
Data: JSON.stringify(err.data)
Error:
 ${n.error}`)}}function yi(t,e){if(t.match(/^openwb\/optional\/int_display\/active$/i))ee.active=JSON.parse(e);else if(t.match(/^openwb\/optional\/int_display\/only_local_charge_points$/i))ee.localCpOnly=JSON.parse(e);else if(t.match(/^openwb\/optional\/int_display\/theme$/i)){const a=JSON.parse(e);ee.usePin=a.configuration.lock_changes,ee.code=a.configuration.lock_changes_code}}const bi={class:"d-flex flex-column align-items-center justify-content-start infoitem"},_i=B({__name:"InfoItem",props:{heading:{},small:{type:Boolean}},setup(t){const e=t,a=m(()=>e.small?{"font-size":"var(--font-small)"}:{"font-size":"var(--font-small)"}),n=m(()=>e.small?{"font-size":"var(--font-small)"}:{"font-size":"var(--font-normal)"}),s=m(()=>e.small?"mt-0":"mt-1");return(i,r)=>(g(),v("span",bi,[o("span",{class:re(["d-flex heading scaled",s.value]),style:oe(a.value)},P(e.heading),7),o("span",{class:"d-flex my-0 me-0 align-items-center content scaled",style:oe(n.value)},[ve(i.$slots,"default",{},void 0)],4)]))}}),fe=j(_i,[["__scopeId","data-v-9215fd9b"]]),wi=B({__name:"FormatWattH",props:{wattH:{}},setup(t){const e=t,a=m(()=>xt(e.wattH,_.decimalPlaces));return(n,s)=>(g(),v("span",null,P(a.value),1))}}),ki=B({__name:"BatterySymbol",props:{soc:{}},setup(t){const e=t,a=m(()=>e.soc<=12?"fa-battery-empty":e.soc<38?"fa-battery-quarter":e.soc<63?"fa-battery-half":e.soc<89?"fa-battery-three-quarters":"fa-battery-full");return(n,s)=>(g(),v("span",null,[o("i",{class:re(["fa batIcon",a.value])},null,2),E(" "+P(Math.round(n.soc)+"%"),1)]))}}),xi=j(ki,[["__scopeId","data-v-fc156cd3"]]),Si={class:"vehicleinfo justify-content-left"},Mi={class:"titleline mb-3"},Pi={class:"carname d-flex justify-content-left align-items-center px-2"},$i={key:0,class:"ms-2 me-0 fa-solid fa-xs fa-star ps-1"},Ci={key:1,class:"ms-2 me-0 fa-solid fa-xs fa-coins ps-0"},Ti={key:0,class:"socEditor rounded mt-2 d-flex flex-column align-items-center grid-col-12 grid-left"},Ii={class:"d-flex justify-content-stretch align-items-center"},Bi={class:"infoline"},Oi={key:0,class:"me-1 fa-solid fa-xs fa-clock ps-1"},Vi={class:"infoline"},Li={class:"maxprice"},Ai={key:1},Di=B({__name:"VehicleData",props:{chargepoint:{}},setup(t){const e=t,a=se(e.chargepoint),n=se(!1);function s(){je("setSoc",i.value,e.chargepoint.connectedVehicle),n.value=!1}const i=m({get(){return e.chargepoint.soc},set(b){S[e.chargepoint.id].soc=b}}),r=m(()=>e.chargepoint.soc),c=m({get(){return e.chargepoint.chargeMode},set(b){ee.locked?ze():S[e.chargepoint.id].chargeMode=b}}),l=m(()=>{const[b]=te.etPriceList.values();return(Math.round(b*10)/10).toFixed(1)});function d(b=""){if(ee.locked)ze();else{new dt("#settingspage").toggle();let ie=b;if(b=="")switch(e.chargepoint.chargeMode){case"instant_charging":ie="#inSettings";break;case"pv_charging":ie="#phvSettings";break;case"scheduled_charging":ie="#scSettings";break;default:ie="#chSettings"}const D=document.querySelector(ie+e.chargepoint.id);if(D){var C=new Rt(D);C.show()}else console.error("no element found")}}function f(){ee.locked?ze():n.value=!n.value}const T=m(()=>e.chargepoint.etMaxPrice>=+l.value?{color:"var(--color-charging)"}:{color:"var(--color-menu)"});return(b,C)=>(g(),v("div",Si,[o("div",Mi,[y(be,{onClick:C[0]||(C[0]=z=>d("#chSettings"))},{default:w(()=>[o("div",Pi,[C[4]||(C[4]=o("i",{class:"fa-solid fa-sm fa-car me-3"},null,-1)),E(" "+P(b.chargepoint.vehicleName)+" ",1),b.chargepoint.hasPriority?(g(),v("span",$i)):k("",!0),b.chargepoint.etActive?(g(),v("span",Ci)):k("",!0)])]),_:1})]),n.value?(g(),v("div",Ti,[C[5]||(C[5]=o("span",{class:"d-flex m-1 p-0 socEditTitle"},"Ladestand einstellen:",-1)),o("span",Ii,[o("span",null,[y(he,{id:"manualSoc",modelValue:i.value,"onUpdate:modelValue":C[1]||(C[1]=z=>i.value=z),min:0,max:100,step:1,unit:"%"},null,8,["modelValue"])])]),o("span",{type:"button",class:"fa-solid d-flex fa-lg m-3 me-1 mb-4 align-self-end fa-circle-check",onClick:s})])):k("",!0),o("div",Bi,[b.chargepoint.isSocConfigured?(g(),I(fe,{key:0,heading:"Ladestand:",class:"grid-col-4 grid-left"},{default:w(()=>[y(xi,{soc:r.value,class:"me-2"},null,8,["soc"]),b.chargepoint.isSocManual?(g(),I(be,{key:0,onClick:f},{default:w(()=>C[6]||(C[6]=[o("i",{class:"fa-solid fa-sm fas fa-edit py-0 px-3 mt-3",style:{color:"var(--color-fg)"}},null,-1)])),_:1})):k("",!0)]),_:1})):k("",!0),b.chargepoint.isSocConfigured?(g(),I(fe,{key:1,heading:"Reichweite:",class:"grid-col-4"},{default:w(()=>[E(P(u(X)[e.chargepoint.connectedVehicle]?Math.round(u(X)[e.chargepoint.connectedVehicle].range):0)+" km ",1)]),_:1})):k("",!0),y(fe,{heading:"Zeitplan:",class:"grid-col-4 grid-right"},{default:w(()=>[b.chargepoint.timedCharging?(g(),v("span",Oi)):k("",!0),E(" "+P(e.chargepoint.timedCharging?"Ja":"Nein"),1)]),_:1})]),o("div",Vi,[u(te).active?(g(),I(fe,{key:0,heading:"max. Preis:",class:"grid-col-4"},{default:w(()=>[a.value.etActive?(g(),I(be,{key:0,onClick:C[2]||(C[2]=z=>d("#prSettings"))},{default:w(()=>[o("span",Li,P(e.chargepoint.etActive?(Math.round(e.chargepoint.etMaxPrice*10)/10).toFixed(1)+" ct":"-"),1)]),_:1})):(g(),v("span",Ai,"-"))]),_:1})):k("",!0),u(te).active?(g(),I(fe,{key:1,heading:"akt. Preis:",class:"grid-col-4 grid-right"},{default:w(()=>[o("span",{style:oe(T.value)},P(l.value)+" ct ",5)]),_:1})):k("",!0)]),y(oa,{id:"chargemode-"+b.chargepoint.name,modelValue:c.value,"onUpdate:modelValue":C[3]||(C[3]=z=>c.value=z),class:"chargemodes mx-3 mt-4 mb-0",options:Object.keys(u(Ne)).map(z=>({text:u(Ne)[z].name,value:z,color:u(Ne)[z].color,icon:u(Ne)[z].icon,active:u(Ne)[z].mode==b.chargepoint.chargeMode}))},null,8,["id","modelValue","options"])]))}}),Ei=j(Di,[["__scopeId","data-v-ae1ba080"]]),Wi={class:"subgrid"},Gi={class:"targetCurrent"},Ui=B({__name:"ChargePoint",props:{chargepoint:{}},setup(t){const e=t,a=m(()=>(Math.round(e.chargepoint.current*10)/10).toLocaleString(void 0)+" A"),n=m(()=>(Math.round(e.chargepoint.realCurrent*10)/10).toLocaleString(void 0)+" A"),s=m(()=>{const f=e.chargepoint.rangeCharged,T=e.chargepoint.chargedSincePlugged,b=e.chargepoint.dailyYield;return T>0?Math.round(f/T*b).toString()+" "+e.chargepoint.rangeUnit:"0 km"}),i=m(()=>e.chargepoint.isLocked?"Gesperrt":e.chargepoint.isCharging?"Lädt":e.chargepoint.isPluggedIn?"Bereit":"Frei"),r=m(()=>e.chargepoint.isLocked?"var(--color-evu)":e.chargepoint.isCharging?"var(--color-charging)":e.chargepoint.isPluggedIn?"var(--color-battery)":"var(--color-axis)"),c=m(()=>{let f="";return e.chargepoint.isLocked?f="fa-lock":e.chargepoint.isCharging?f=" fa-bolt":e.chargepoint.isPluggedIn&&(f="fa-plug"),"fa "+f}),l=m(()=>({color:e.chargepoint.color}));function d(){if(ee.locked)ze();else{new dt("#settingspage").toggle();let b="";switch(e.chargepoint.chargeMode){case"instant_charging":b="#inSettings";break;case"pv_charging":b="#phvSettings";break;case"scheduled_charging":b="#scSettings";break;case"eco_charging":b="#ecSettings";break;default:b="#chSettings"}const C=document.querySelector(b+e.chargepoint.id);if(C){var f=new Rt(C);f.show()}else console.error("no element found")}}return(f,T)=>(g(),I(gt,null,{title:w(()=>[o("span",{style:oe(l.value)},[T[0]||(T[0]=o("span",{class:"fa-solid fa-charging-station"}," ",-1)),E(" "+P(e.chargepoint.name),1)],4)]),buttons:w(()=>[y(be,{color:"var(--color-cp0)",icon:"fa-edit",onClick:d},{default:w(()=>T[1]||(T[1]=[E(" Einstellungen")])),_:1})]),footer:w(()=>[y(Ei,{chargepoint:e.chargepoint},null,8,["chargepoint"])]),default:w(()=>[o("div",Wi,[y(fe,{heading:"Status:",class:"grid-col-4 grid-left"},{default:w(()=>[o("span",{style:oe({color:r.value})},[o("i",{class:re(c.value)},null,2),E(" "+P(i.value),1)],4)]),_:1}),y(fe,{heading:"Geladen:",class:"grid-col-4"},{default:w(()=>[y(wi,{"watt-h":f.chargepoint.dailyYield},null,8,["watt-h"])]),_:1}),y(fe,{heading:"gel. Reichw.:",class:"grid-col-4 grid-right"},{default:w(()=>[E(P(s.value),1)]),_:1}),e.chargepoint.power>0?(g(),I(fe,{key:0,heading:"Leistung:",class:"grid-col-3 grid-left"},{default:w(()=>[y(ea,{watt:e.chargepoint.power},null,8,["watt"])]),_:1})):k("",!0),e.chargepoint.power>0?(g(),I(fe,{key:1,heading:"Strom:",class:"grid-col-3"},{default:w(()=>[E(P(n.value),1)]),_:1})):k("",!0),e.chargepoint.power>0?(g(),I(fe,{key:2,heading:"Phasen:",class:"grid-col-3"},{default:w(()=>[E(P(e.chargepoint.phasesInUse),1)]),_:1})):k("",!0),e.chargepoint.power>0?(g(),I(fe,{key:3,heading:"Sollstrom:",class:"grid-col-3 grid-right"},{default:w(()=>[o("span",Gi,P(a.value),1)]),_:1})):k("",!0)])]),_:1}))}}),zi=j(Ui,[["__scopeId","data-v-d3d48871"]]),ji={class:"content"},Ni={class:"leftside"},Ji={class:"rightside"},Fi={class:"settingstitle"},Ri=B({__name:"DisplayTheme",setup(t){function e(n){Wa(n)&&(ee.locked=!1,setTimeout(()=>{ee.locked=!0},ee.timeout*1e3))}Qe(()=>{window.addEventListener("resize",Ot),window.addEventListener("focus",a),ci()}),zt(()=>{window.removeEventListener("focus",a),window.removeEventListener("resize",Ot)});function a(){document.hasFocus()&&ae()}return(n,s)=>(g(),v(ce,null,[o("div",ji,[o("div",Ni,[Fe(y(Mn,null,null,512),[[pt,u(_).graphToShow=="powermeter"]]),Fe(o("div",null,[y(co)],512),[[pt,u(_).graphToShow=="powergraph"]]),Fe(o("div",null,[y(Ao)],512),[[pt,u(_).graphToShow=="energymeter"]])]),o("div",Ji,[Object.values(u(S)).length>u(_).cpToShow?(g(),I(zi,{key:0,chargepoint:Object.values(u(S))[u(_).cpToShow]},null,8,["chargepoint"])):k("",!0)])]),y(yt,{"modal-id":"numberpad"},{title:w(()=>s[0]||(s[0]=[E("Code")])),default:w(()=>[y(qo,{"model-value":"","onUpdate:modelValue":e})]),_:1}),y(yt,{"modal-id":"statuspage"},{title:w(()=>s[1]||(s[1]=[o("span",{class:"statustitle"},"Systemstatus",-1)])),default:w(()=>[y(rr)]),_:1}),Object.values(u(S)).length>u(_).cpToShow?(g(),I(yt,{key:0,"modal-id":"settingspage"},{title:w(()=>[o("span",Fi,"Einstellungen für "+P(Object.values(u(S))[u(_).cpToShow].vehicleName)+" an Ladepunkt "+P(Object.values(u(S))[u(_).cpToShow].name),1)]),default:w(()=>[y(Vs,{chargepoint:Object.values(u(S))[u(_).cpToShow]},null,8,["chargepoint"])]),_:1})):k("",!0)],64))}}),Hi=j(Ri,[["__scopeId","data-v-0450eedc"]]),Yi={class:"fixeddisplay"},qi=B({__name:"App",setup(t){return Qe(()=>{let e=window.location.search;if(e!=""){console.debug("search",e);let a=new URLSearchParams(e);if(a.has("data")){let n=JSON.parse(a.get("data"));Object.entries(n).forEach(([s,i])=>{console.log("updateSetting",s,i),s.startsWith("parentChargePoint")?Be[s]=parseInt(i):Be[s]=i})}}}),(e,a)=>(g(),v("div",Yi,[y(Hi),y(Za)]))}}),Qi=j(qi,[["__scopeId","data-v-dbb96fda"]]),Zi=wa(Qi);Zi.mount("#app");
